function ProChart_InitAlert(w){var r,q,m,s;function v(a){r=h(a,"alert-pattern");q=h(a,"alert-group-pattern");h(a,"alert-news-article");h(a,"alert-candlesticks-patterns");h(a,"alert-dividends");m=h(a,"alert-economic");h(a,"lert-splitstock");s=!0}function t(){e.guuid=g.panels.gui.getAlertZone();if(null==e.guuid)return null;$.when(x()).done(function(){for(var a="",d=0;d<e.demodata.itemsinfo.length;d++)for(var c=e.demodata.itemsinfo[d],b=0,k=c.items.length,f="",h=0;h<c.items.length;h++){var n=c.items[h],
l={left:1<k?b:c.possition[0]+b,zindex:30,pointerevents:1<k?"none":"all"},b=b+5,p="";switch(n.type.toLowerCase()){case "e":p=m.replace(/%title%/g,"test test test").replace(/%text%/g,"heheheh").replace(/%link-title%/g,"http://www.prochartview.com");break;case "n":p=m.replace(/%title%/g,"test test test").replace(/%text%/g,"heheheh").replace(/%link-title%/g,"http://www.prochartview.com");break;case "d":p=m.replace(/%title%/g,"test test test").replace(/%text%/g,"heheheh").replace(/%link-title%/g,"http://www.prochartview.com");
break;default:p=""}f+=r.replace(/%style%/g,u(l,"px",1)).replace(/%type%/g,n.type.toLowerCase()).replace(/%group%/g,c.possition[0]).replace(/%title%/g,n.type.toUpperCase()).replace(/%point%/g,l.left).replace(/%alertdata%/g,p).replace(/%pointnode%/g,c.possition[0]).replace(/%grouptotal%/g,c.items.length).replace(/%showdata%/g,1<c.items.length?"0":"1").replace(/%id%/,g.commonutils.func.returnShortUniqID());1<k?h==k-1&&(n={left:parseInt(c.possition[0]),width:5*parseInt(k)+18,height:20,zindex:31,pointerevents:"all",
cursor:"pointer"},f=q.replace(/%style%/g,u(n,"px",1)).replace(/%html%/g,f).replace(/%pointnode%/g,c.possition[0]).replace(/%grouptotal%/g,k).replace(/%id%/g,"group-"+c.possition[0]),a+=f,f=""):(a+=f,f="")}$("#"+e.guuid).html(a);y()});return null}function y(){$(e.parent).find(".alert-container").off("click1").on("click1",function(a){l.debug("Groupid:",this.getAttribute("groupid"));a=this.getAttribute("groupid");var d=this.getAttribute("pointnode"),c=this.getAttribute("grouptotal"),b=0;if(!(2>parseInt(c))){c=
{left:parseInt(d)-20*parseInt(c)/2+(9+5*(parseInt(c)-1)),width:22*parseInt(c),height:20,zindex:31};c=q.replace(/%style%/g,u(c,"px",1)).replace(/%html%/g,"").replace(/%id%/g,"group-"+a);$("#"+e.guuid).prepend(c);var k=$("#"+e.guuid).find("#group-"+a),f=$(e.parent).find("[groupid='"+a+"']");f.each(function(){$(this).css("left",3+18*b+"px").attr("showdata","1");k.append($(this));b+=1});k.on("mouseleave",function(){b=0;f.each(function(){$(this).css("left",parseInt(d)+5*b+"px").attr("showdata","0");b+=
1;$("#"+e.guuid).append($(this));$(this).find("> div").css("display","none")});k.off("mouseleave");l.debug("mouseleave");k.remove()})}});$(e.parent).find(".alert-container").prochart_hoverIntent(function(){$(this).css("top","-5px");$(this).find("> div").css("display","block");$(this).find("> .aler-message").css("z-index","100");$(this).find("> .alert-container-clone").css("z-index","101");$(this).css("z-index","31");$("#"+e.guuid).css("z-index","120")},function(){$(this).css("top","0px");$(this).find("> div").css("display",
"none");$(this).css("z-index","30");$("#"+e.guuid).css("z-index","6")});$(e.parent).find(".alert-group").prochart_hoverIntent(function(){var a=parseInt(this.getAttribute("grouptotal")),d=parseInt(this.getAttribute("pointnode")),d=parseInt(d)-20*parseInt(a)/2+(9+5*(parseInt(a)-1)),a=20*parseInt(a)+6;$(this).css({width:a+"px",left:d+"px","z-index":32});var c=0;$(this).find(".alert-container").each(function(){$(this).css({left:3+20*c+"px","pointer-events":"all"});c+=1})},function(){var a=parseInt(this.getAttribute("grouptotal")),
d=parseInt(this.getAttribute("pointnode")),a=5*parseInt(a)+20,d=parseInt(d);$(this).css({width:a+"px",left:d+"px","z-index":6});var c=0;$(this).find(".alert-container").each(function(){$(this).css({left:5*c+"px","pointer-events":"none"});c+=1})})}function x(){var a=$.Deferred(),d=!1==g.guiinit.cache?"?"+(new Date).getTime():"",d=g.guiinit.rootpath+"/ChartUI/gui/alert/demo.json.js"+d;if(g.navigator.XMLHttpRequest()){var c=new XMLHttpRequest;c.open("get",d);c.onload=function(){var b=c.responseText;
eval(b);e.demodata=eval("ProChart_InitDemoAlert")(g);a.resolve(b)};c.send()}else $.ajax({url:d,type:"get",contentType:"application/javascript",dataType:"script",data:{},async:!0,error:function(a,c){l.error(c)}}).done(function(b){eval(b);e.demodata=eval("ProChart_InitDemoAlert")(g);a.resolve(b)});return a.promise()}function h(a,d){var c="",b=a.indexOf("<"+d+">"),e=("<"+d+">").length,f=a.indexOf("</"+d+">");-1!=b&&-1!=f&&f>b+e&&(c=a.substring(b+e,f));return c}function u(a,d,c){var b="";"undefined"!=
typeof a.left&&(b=b+"left :"+a.left+(isNaN(a.left)?"":d)+"; ");"undefined"!=typeof a.zindex&&(b=b+"z-index :"+a.zindex+"; ");"undefined"!=typeof a.pointerevents&&(b=b+"pointer-events :"+a.pointerevents+"; ");"undefined"!=typeof a.cursor&&(b=b+"cursor :"+a.cursor+"; ");"undefined"!=typeof a.right&&(b=b+"right :"+a.right+(isNaN(a.right)?"":d)+"; ");"undefined"!=typeof a.top&&(b=b+"top :"+a.top+(isNaN(a.top)?"":d)+"; ");"undefined"!=typeof a.bottom&&(b=b+"bottom :"+a.bottom+(isNaN(a.bottom)?"":d)+"; ");
"undefined"!=typeof a.width&&(b=b+"width :"+a.width+(isNaN(a.width)?"":d)+"; ");"undefined"!=typeof a.height&&(b=b+"height :"+a.height+(isNaN(a.height)?"":d)+"; ");"undefined"!=typeof a.view&&!0!=a.view&&(b+="display : none; ");return 0<b.length?("undefined"!=typeof c&&1==c&&(b+=" position:absolute;  "),'style="'+b+'"'):'style=" display:none; "'}var g=w,e={};g.alertobj=e;var l=g.api.debug.getLogger("prochart.gui.alert");e.gui={initPattern:function(){},viewAlert:function(a){e.parent=a;1==s&&t();a=
!1==g.guiinit.cache?"?"+g.version.gui.name+(new Date).getTime():"?"+g.version.gui.name;a=g.guiinit.rootpath+"/ChartUI/gui/alert/alert.patterns.htm"+a;var d=$.Deferred();if(g.navigator.XMLHttpRequest()){var c=new XMLHttpRequest;c.open("get",a);c.onload=function(){var a=c.responseText;v(a);t();d.resolve(a)};c.send()}else $.ajax({type:"GET",async:!0,dataType:"html",url:a}).done(function(a){v(a);l.debug("read alert Pattern");t();d.resolve(a)});return d.promise()}};e.demodata=null;m=q=r=e.guuid=null;s=
!1;return e};
