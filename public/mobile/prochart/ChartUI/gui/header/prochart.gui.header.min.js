function ProChart_InitHeader(ca){var F,G,H,I,J,K,L,M,y,N,O,P,Q,R;function S(a){F=t(a,"header-container");G=t(a,"header-searchbutton");H=t(a,"header-symboltitle");I=t(a,"header-symbolsearch");J=t(a,"template-search-output-list");K=t(a,"template-search-main-properties");L=t(a,"template-search-properties-tabs-label");M=t(a,"template-search-notfound");y=t(a,"template-search-properties-filter-values");N=t(a,"header-timeframe");O=t(a,"header-lastupdate");P=t(a,"header-communic");Q=t(a,"header-htmlcontainer");
R=t(a,"header-toolbar")}function da(){for(var a=e.currenlayout.headers,f=0;f<a.length;f++)for(var u=a[f],d=0;d<u.items.length;d++){var g=u.items[d];if("undefined"!=typeof g.relativeobject){var k=ea(g.relativeobject);null!=k&&(k=$("#"+k.guiid),k.attr("relobj",g.guiid),k.resize(function(a){var f={top:0,left:0,width:0,heigh:0},g={top:0,left:0};"Microsoft Internet Explorer"==navigator.appName&&"XMLHttpRequest"in window&&null!==window.XMLHttpRequest?(g=$(a.srcElement).position(),f.top=g.top,f.left=g.left,
f.width=$(a.srcElement).width(),f.height=$(a.srcElement).height()):(g=$(this).position(),f.top=g.top,f.left=g.left,f.width="undefined"!=typeof $(this).outerWidth()?$(this).outerWidth():$(this).width(),f.height="undefined"!=typeof $(this).outerHeight()?$(this).outerHeight():$(this).height());"Microsoft Internet Explorer"==navigator.appName&&"XMLHttpRequest"in window&&null!==window.XMLHttpRequest?T($(a.srcElement).attr("relobj"),f):T($(this).attr("relobj"),f)}))}}}function T(a,f){for(var u=e.currenlayout.headers,
d=0;d<u.length;d++)for(var g=u[d],k=0;k<g.items.length;k++){var c=g.items[k];if(c.guiid==a){var u=$(h.parent).find("#"+a),d=c,g=f,k={top:top,left:0,right:0,bottom:0},b=0,q=0;"undefined"!=typeof d.possition.left&&(k.left=v(d.possition.left,"px"),"undefined"!=typeof d.relativepossition&&"right"==d.relativepossition&&(b=g.width+g.left,k.left=v(d.possition.left,"px",b)));"undefined"!=typeof d.possition.right&&(k.right=v(d.possition.right,"px",b),"undefined"!=typeof d.relativepossition&&"left"==d.relativepossition&&
(b=g.left,k.right=v(d.possition.right,"px",b)));"undefined"!=typeof d.possition.top&&(k.top=v(d.possition.top,"px",q),"undefined"!=typeof d.relativepossition&&"bottom"==d.relativepossition&&(q=g.heigh+g.top,k.top=v(d.possition.top,"px",q)));"undefined"!=typeof d.possition.bottom&&(k.bottom=v(d.possition.bottom,"px",q),"undefined"!=typeof d.relativepossition&&"top"==d.relativepossition&&(q=g.bottom,k.bottom=v(d.possition.bottom,"px",q)));d=k;g=["top","right","bottom","left"];for(k=0;k<g.length;k++)"undefined"!=
typeof c.possition[g[k]]&&u.css(g[k],d[g[k]]);return}}}function ea(a){for(var f=e.currenlayout.headers,b=0;b<f.length;b++)for(var d=f[b],g=0;g<d.items.length;g++){var k=d.items[g];if(k.type==a||"undefined"!=typeof k.id&&k.id==a)return k}return null}function U(){if(null!=b.pfilter.markets&&"undefined"!=typeof e.init.markets){b.pfilter.markets.html("");var a=y.replace(/%id%/g,"").replace(/%name%/g,e.localizationobj.gui.returnLocalizationString("search.filter-markets-all","All")).replace(/%desc%/g,"All markets");
b.pfilter.markets.append(a);e.init.markets.forEach(function(a){a=y.replace(/%id%/g,a.id).replace(/%name%/g,a.name).replace(/%desc%/g,a.description);b.pfilter.markets.append(a)})}$(b.pfilterlabel.markets).off("click").on("click",function(a){a.stopPropagation();$(b.pfilter.markets).is(":visible")?z():(z(),$(b.pfilter.markets).css("display","block"),$(b.pfilter.markets).parent().children(".filter-up-range").css("display","block"),w("markets"))});$(b.pfilter.markets).find("li a").off("click").on("click",
function(a){p.market=$(this).attr("idx");a=$(this).html();$(b.pfilterlabel.markets).html(a);w("markets");C({guiparent:"header"},p.exchange,p.market,p.country,p.text,p.top,p.pageindex)})}function w(a){var f=$(b.pfilterlabel[a]).offset().left,e=$(b.pfilterlabel[a]).outerWidth(),d=$(b.pfilterlabel[a]).parent().offset().left;$(b.pfilter[a]).parent().children(".filter-up-range").css("left",parseInt(f-d)+"px");$(b.pfilter[a]).css("left",parseInt(f-d-30)+"px");$(b.pfilter[a]).parent().children(".filter-down-point").css("left",
parseInt(f-d+e+3)+"px")}function V(){if(null!=b.pfilter.exchanges&&"undefined"!=typeof e.init.exchanges){b.pfilter.exchanges.html("");var a=y.replace(/%id%/g,"").replace(/%name%/g,e.localizationobj.gui.returnLocalizationString("search.filter-exchanges-all","All")).replace(/%desc%/g,"All exchanges");b.pfilter.exchanges.append(a);e.init.exchanges.forEach(function(a){a=y.replace(/%id%/g,a.id).replace(/%name%/g,a.name).replace(/%desc%/g,a.description);b.pfilter.exchanges.append(a)})}$(b.pfilterlabel.exchanges).off("click").on("click",
function(a){a.stopPropagation();$(b.pfilter.exchanges).is(":visible")?z():(z(),$(b.pfilter.exchanges).css("display","block"),$(b.pfilter.exchanges).parent().children(".filter-up-range").css("display","block"),w("exchanges"))});$(b.pfilter.exchanges).find("li a").off("click").on("click",function(a){p.exchange=$(this).attr("idx");a=$(this).html();$(b.pfilterlabel.exchanges).html(a);w("exchanges");C({guiparent:"header"},p.exchange,p.market,p.country,p.text,p.top,p.pageindex)})}function W(){if(null!=
b.pfilter.countries&&"undefined"!=typeof e.init.countries){b.pfilter.countries.html("");var a=y.replace(/%id%/g,"").replace(/%name%/g,e.localizationobj.gui.returnLocalizationString("search.filter-countries-all","All")).replace(/%desc%/g,"All countries");b.pfilter.countries.append(a);e.init.countries.forEach(function(a){a=y.replace(/%id%/g,a.id).replace(/%name%/g,a.name).replace(/%desc%/g,a.description);b.pfilter.countries.append(a)})}$(b.pfilterlabel.countries).off("click").on("click",function(a){a.stopPropagation();
$(b.pfilter.countries).is(":visible")?z():(z(),$(b.pfilter.countries).css("display","block"),$(b.pfilter.countries).parent().children(".filter-up-range").css("display","block"),w("countries"))});$(b.pfilter.countries).find("li a").off("click").on("click",function(a){p.country=$(this).attr("idx");a=$(this).html();$(b.pfilterlabel.countries).html(a);w("countries");C({guiparent:"header"},p.exchange,p.market,p.country,p.text,p.top,p.pageindex)})}function D(){$(h.parent).find(".chart-header-search").css("display",
"none");$(h.parent).find(".chart-header-search-input-text").removeClass("search-open");$("body").off("click",D);$(h.parent).find(".chart-header-search-input-text").off("keyup");$(h.parent).find(".chart-header-search-output").css("display","none");z()}function z(a){null!=b.pfilter.markets&&($(b.pfilter.markets).css("display","none"),$(b.pfilter.markets).parent().children(".filter-up-range").css("display","none"));null!=b.pfilter.exchanges&&($(b.pfilter.exchanges).css("display","none"),$(b.pfilter.exchanges).parent().children(".filter-up-range").css("display",
"none"));null!=b.pfilter.countries&&($(b.pfilter.countries).css("display","none"),$(b.pfilter.countries).parent().children(".filter-up-range").css("display","none"))}function fa(a){$(h.parent).find(".chart-header-search").on("click",function(a){z();a.stopPropagation()})}function ga(){$(h.parent).find(".chart-header-search-input-text").on("keyup",function(a){if(27==a.which)D();else{var f=$(this).val();null!=E&&clearTimeout(E);E=setTimeout(function(){var a=f;5<=e.api.debug.level&&console.log("Run search");
"undefined"==typeof a&&(a="");null!=b.pmain&&b.pmain.html("");null!=b.ptab&&b.ptab.html("");$(h.parent).find(".chart-header-search-output").css("display","block");p.text=a;C({guiparent:"header"},p.exchange,p.market,p.country,p.text,p.top,p.pageindex);clearTimeout(E)},e.apiinit.searchDelay)}})}function ha(){$(h.parent).find(".symbol-title,.search-symbolics").bind("click",function(a){var f=$(h.parent).find(".chart-header-search");0<f.length&&("block"==f.css("display")?D():X(a))})}function X(a){$(h.parent).find(".symbol-title").html();
$(h.parent).find(".chart-header-search").css("display","block");$(h.parent).find(".chart-header-search-input-text").select().focus().addClass("search-open");"undefined"!=typeof a&&a.stopPropagation();fa();$("body").on("click",D);ga()}function C(a,f,b,d,g,k,c){if("undefined"!=typeof e.chart.symbols){if("undefined"!=typeof e.preloadobj){var l=$(h.parent).find(".chart-search-preload");e.preloadobj.startPreloadinobject(l,null,"small")}e.chart.symbols.FindSymbols(a,f,b,d,g,k,c)}}function ia(a){"undefined"!=
typeof e.preloadobj&&"undefined"!=typeof a.html()&&e.preloadobj.endPreloadinobject(a)}function Y(a){if("undefined"!=typeof B)for(var f=0;f<B.length;f++)if(B[f].id==a)return B[f];return null}function r(a,f){if("undefined"!=typeof e.localizationobj)return e.localizationobj.gui.returnLocalizationString(a,f)}function Z(a){switch(e.api.timeframes.getTimeframeView()){case "icon":var f=r("menu.timescale.1min","1 minute");switch(a){case "tick":case "Tick":case "TICK":case "1T":case "1t":f=r("menu.timescale.1T",
"tick");break;case "1M":case "1m":f=r("menu.timescale.1M","1 minute");break;case "5M":case "5m":f=r("menu.timescale.5M","5 minute");break;case "10M":case "10m":f=r("menu.timescale.10M","10 minutes");break;case "15M":case "15m":f=r("menu.timescale.15M","15 minutes");break;case "30M":case "30m":f=r("menu.timescale.30M","30 minutes");break;case "60M":case "60m":f=r("menu.timescale.60M","Hourly");break;case "2H":case "2h":f=r("menu.timescale.2H",'2 Hours"');break;case "4H":case "4h":f=r("menu.timescale.4H",
"4 Hours");break;case "6H":case "6h":f=r("menu.timescale.6H","6 Hours");break;case "8H":case "8h":f=r("menu.timescale.8H","8 Hours");break;case "10H":case "10h":f=r("menu.timescale.10H","10 Hours");break;case "12H":case "12h":f=r("menu.timescale.12H","12 Hours");break;case "14H":case "14h":f=r("menu.timescale.14H","14 Hours");break;case "1D":case "1d":f=r("menu.timescale.1D","Daily");break;case "1W":case "1w":f=r("menu.timescale.1W","Weekly");break;case "1MON":case "1mon":case "1N":case "1n":f=r("menu.timescale.1N",
"Monthly");break;case "1Q":case "1q":case "3N":case "3n":f=r("menu.timescale.3N","3 Months");break;case "6MON":case "6mon":case "6N":case "6n":f=r("menu.timescale.6N","6 Months");break;case "1Y":case "1y":f=r("menu.timescale.1Y","Year")}return f;case "text":return f=e.api.timeframes.getCaptionbyID(a),r("menu.timescale."+a,f)}return""}function aa(a){return"undefined"!=typeof a&&null!=a?"menu.timescale."+a.toUpperCase():"menu.timescale.5M"}function t(a,f){var b="",d=a.indexOf("<"+f+">"),g=("<"+f+">").length,
k=a.indexOf("</"+f+">");-1!=d&&-1!=k&&k>d+g&&(b=a.substring(d+g,k));return b}function A(a,f){var b="",b="undefined"==typeof a.position?b+"position :absolute;":b+"position :"+a.position+"; ",d="px";"undefined"!=typeof f&&null!=f&&(d=f);"undefined"!=typeof a.display&&(b=b+"display :"+a.display+";");"undefined"!=typeof a.left&&(b=b+"left :"+v(a.left,d)+"; ");"undefined"!=typeof a.right&&(b=b+"right :"+v(a.right,d)+"; ");"undefined"!=typeof a.top&&(b=b+"top :"+v(a.top,d)+"; ");"undefined"!=typeof a.bottom&&
(b=b+"bottom :"+v(a.bottom,d)+"; ");"undefined"!=typeof a.width&&(b=b+"width :"+v(a.width,d)+"; ");"undefined"!=typeof a.height&&(b=b+"height :"+v(a.height,d)+"; ");"undefined"!=typeof a.view&&!0!=a.view&&(b+="display : none; ");return 0<b.length?'style="'+b+'"':null}function v(a,b,e){return"auto"==a.toString().toLowerCase()||"inherit"==a.toString().toLowerCase()?a:"undefined"!=typeof e?a+e+b:a+b}function s(a){return"undefined"==typeof a||null==a}var e=ca,h={};e.header=h;var ba=0,B=[],x=/=""/g;Q=
P=O=N=y=M=L=K=J=I=H=G=F=null;R=void 0;var ja=e.api.debug.getLogger("prochart.gui.header"),E=null,b={pmain:null,ptab:null,p:null,parpreload:null,pfilter:[{markets:null},{exchanges:null},{countries:null}],pfilterlabel:[{markets:null},{exchanges:null},{countries:null}],templates:[]},p={text:"",market:"",exchange:"",country:"",pageindex:0,top:15};h.gui={initPattern:function(){var a=!1==e.guiinit.cache?"?"+e.version.gui.name+(new Date).getTime():"?"+e.version.gui.name,a=e.guiinit.rootpath+"/ChartUI/gui/header/header.patterns.htm"+
a,b=$.Deferred();if(e.navigator.XMLHttpRequest()){var h=new XMLHttpRequest;h.open("get",a);h.onload=function(){var a=h.responseText;S(a);b.resolve(a)};h.send()}else $.ajax({type:"GET",async:!0,dataType:"html",url:a}).done(function(a){S(a);ja.debug("readHeader Pattern");b.resolve(a)});return b.promise()},viewHeader:function(a){h.parent=a;for(var f=e.currenlayout.headers,u=0;u<f.length;u++){var d=f[u],g=e.commonutils.func.returnShortUniqID(),k="",c="";d.guiid=g;"undefined"!=typeof d.location&&(k=k+
" loc-"+d.location);c=g;"undefined"!=typeof d.id&&(c=d.id);g=F.replace(x,"").replace(/%css%/g,k).replace(/%tid%/g,c).replace(/%id%/g,g);c="";for(k=0;k<d.items.length;k++)switch(c=d.items[k],c.type){case "searchbutton":var l=e.commonutils.func.returnShortUniqID();c.guiid=l;var q=G.replace(x,"").replace(/%id%/g,l).replace(/%style%/g,A(c.possition));c.fns=[];c.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});c.possition.fns=[];for(var n="right left width height top bottom".split(" "),
m=0;m<n.length;m++)c.possition.fns.push({prop:n[m],actions:["$('#"+l+"').css('"+n[m]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});c={header:q};g=g.replace(/%html%/g,c.header+"%html%");break;case "symboltitle":l=e.commonutils.func.returnShortUniqID();c.guiid=l;q=H.replace(x,"").replace(/%id%/g,l).replace(/%style%/g,A(c.possition));c.fns=[];c.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});c.possition.fns=[];n="right left width height top bottom".split(" ");
for(m=0;m<n.length;m++)c.possition.fns.push({prop:n[m],actions:["$('#"+l+"').css('"+n[m]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});c={header:q};g=g.replace(/%html%/g,c.header+"%html%");break;case "searchsymbol":l=e.commonutils.func.returnShortUniqID();c.guiid=l;q=I.replace(x,"").replace(/%id%/g,l).replace(/%style%/g,A(c.possition));c.fns=[];c.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});c.possition.fns=[];n="right left width height top bottom".split(" ");
for(m=0;m<n.length;m++)c.possition.fns.push({prop:n[m],actions:["$('#"+l+"').css('"+n[m]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});c={header:q};g=g.replace(/%html%/g,c.header+"%html%");break;case "timeframe":l=e.commonutils.func.returnShortUniqID();c.guiid=l;q=N.replace(x,"").replace(/%id%/g,l).replace(/%style%/g,A(c.possition));c.fns=[];c.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});c.possition.fns=[];n="right left width height top bottom".split(" ");
for(m=0;m<n.length;m++)c.possition.fns.push({prop:n[m],actions:["$('#"+l+"').css('"+n[m]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});c={header:q};g=g.replace(/%html%/g,c.header+"%html%");break;case "communic":l=e.commonutils.func.returnShortUniqID();c.guiid=l;q=P.replace(x,"").replace(/%id%/g,l).replace(/%style%/g,A(c.possition));c.fns=[];c.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});c.possition.fns=[];n="right left width height top bottom".split(" ");
for(m=0;m<n.length;m++)c.possition.fns.push({prop:n[m],actions:["$('#"+l+"').css('"+n[m]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});c={header:q};g=g.replace(/%html%/g,c.header+"%html%");break;case "lastupdate":l=e.commonutils.func.returnShortUniqID();c.guiid=l;q=O.replace(x,"").replace(/%id%/g,l).replace(/%style%/g,A(c.possition));c.fns=[];c.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});c.possition.fns=[];n="right left width height top bottom".split(" ");
for(m=0;m<n.length;m++)c.possition.fns.push({prop:n[m],actions:["$('#"+l+"').css('"+n[m]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});c={header:q};g=g.replace(/%html%/g,c.header+"%html%");break;case "htmlcontainer":l=e.commonutils.func.returnShortUniqID();"undefined"!=typeof c.id&&""!=c.id&&(l=c.id);c.guiid=l;"undefined"==typeof c.content&&(c.content="");q="";"undefined"!=typeof c.css&&(q=c.css);q=Q.replace(x,"").replace(/%html%/g,c.content).replace(/%id%/g,l).replace(/%css%/g,q).replace(/%style%/g,
A(c.possition));c.fns=[];c.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});c.fns.push({prop:"content",actions:["$('#"+l+"').html('%value%')"]});c.possition.fns=[];n="right left width height top bottom".split(" ");for(m=0;m<n.length;m++)c.possition.fns.push({prop:n[m],actions:["$('#"+l+"').css('"+n[m]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});c={header:q};g=g.replace(/%html%/g,c.header+"%html%");break;case "toolbar":l=e.commonutils.func.returnShortUniqID();
c.guiid=l;q=R.replace(x,"").replace(/%id%/g,l).replace(/%style%/g,A(c.possition));c.fns=[];c.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});c.possition.fns=[];n="right left width height top bottom".split(" ");for(m=0;m<n.length;m++)c.possition.fns.push({prop:n[m],actions:["$('#"+l+"').css('"+n[m]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});c={header:q};g=g.replace(/%html%/g,c.header+"%html%")}g=g.replace(/%html%/g,"");$(h.parent).find("#"+d.parent).append(g);
for(g=0;g<d.items.length;g++)switch(k=d.items[g],k.type){case "toolbar":if("undefined"!=typeof e.currenlayout.toolbars&&null!=e.currenlayout.toolbars)for(c=0;c<e.currenlayout.toolbars.length;c++)if(l=e.currenlayout.toolbars[c],l.id==k.id){l.parent=k.guiid;break}}}f=Z(e.chart.TimeFrame);u=aa(e.chart.TimeFrame);d=e.chart.Symbol;"undefined"!=e.chart.SymbolName&&null!=e.chart.SymbolName&&(d=e.chart.SymbolName);$(h.parent).find(".symbol-title").html(d);$(h.parent).find(".header-timeframe").attr("data-localize",
u).html(f);"undefined"!=typeof e.localizationobj&&e.localizationobj.gui.updateFromDataLang(a);ha();b.pmain=$(h.parent).find(".search-main-properties-tabs");b.ptab=$(h.parent).find(".search-properties-tabs-labels");b.p=$(h.parent).find(".chart-header-search-output");b.parpreload=$(h.parent).find(".chart-search-preload");a=$(h.parent).find('.search-properties-filter[idx="markets"] ul');"undefined"!=0<a.length&&(b.pfilter.markets=a);a=$(h.parent).find('.search-properties-filter[idx="markets"] a.action-change-value');
0<a.length&&(b.pfilterlabel.markets=a);a=$(h.parent).find('.search-properties-filter[idx="exchanges"] ul');0<a.length&&(b.pfilter.exchanges=a);a=$(h.parent).find('.search-properties-filter[idx="exchanges"] a.action-change-value');0<a.length&&(b.pfilterlabel.exchanges=a);a=$(h.parent).find('.search-properties-filter[idx="countries"] ul');0<a.length&&(b.pfilter.countries=a);a=$(h.parent).find('.search-properties-filter[idx="countries"] a.action-change-value');0<a.length&&(b.pfilterlabel.countries=a);
a=$(h.parent).find("#template-search-output-list ");0<a.length?(b.templates.push(a.html()),a.remove()):b.templates.push(null);a=$(h.parent).find("#template-search-properties-tabs-label");0<a.length?(b.templates.push(a.html()),a.remove()):b.templates.push(null);a=$(h.parent).find("#template-search-main-properties");0<a.length?(b.templates.push(a.html()),a.remove()):b.templates.push(null);a=$(h.parent).find("#template-search-notfound");0<a.length?(b.templates.push(a.html()),a.remove()):b.templates.push(null);
a=$(h.parent).find("#template-search-properties-filter-values");0<a.length?(b.templates.push(a.html()),a.remove()):b.templates.push(null);U();V();W();da()},onChangeSymbol:function(a,b){"undefined"!=typeof b&&null!=b&&$(h.parent).find(".symbol-title").html(b.name)},onChangeTimeframe:function(a,b){if("undefined"!=typeof h.parent){var e=Z(b),d=aa(b);$(h.parent).find(".header-timeframe").attr("data-localize",d).html(e)}},onLastUpdateChange:function(a,b){$(h.parent).find(".header-lastupdate").html(b)},
onCommunication:function(a,b){switch(b){case !0:$(h.parent).find(".header-communic").addClass("ComOn").removeClass("ComOff");break;case !1:$(h.parent).find(".header-communic").addClass("ComOff").removeClass("ComOn")}},changeLocalization:function(){},findSymbols:C,callbackonFindSymbols:function(a,f,u){5<=e.api.debug.level&&console.log(u);null!=b.pmain&&b.pmain.html("");null!=b.ptab&&b.ptab.html("");w("markets");w("countries");w("exchanges");a=u.data;B=[];u.data.forEach(function(a){B=B.concat(a.symbols)});
var d=0;a.forEach(function(a){var f=a.categoryId,c=a.categoryLabel,l=a.categoryDescription,h=d==ba?"active":"";d+=1;c=L.replace(/%groupactive%/g,h).replace(/%groupid%/g,f).replace(/%groupname%/g,c).replace(/%groupnesc%/g,l);b.ptab.append(c);h=K.replace(/%groupid%/g,f).replace(/%groupactive%/g,h);b.pmain.append(h);f=$(b.pmain).find('[idx="'+f+'"] .search-output-list');0==a.symbols.length&&"undefined"!=typeof f.html()&&f.append(M);for(h=0;h<a.symbols.length;h++){var c=a.symbols[h],l=c.description,n=
c.name,l=J.replace(/%itemid%/g,c.id).replace(/%caption%/g,l).replace(/%name%/g,n);c="undefined"!=typeof e.init.majors&&null!=e.init.gui.majorsReturn(c.id)?!0:!1;l=c?l.replace(/%status-favorite%/g,"startenabled-icon"):l.replace(/%status-favorite%/g,"stardisabled-icon");"undefined"!=typeof f.html()&&f.append(l)}});$(b.ptab).find(".search-properties-tabs-label").off("click").on("click",function(a){a=$(this).parents(".chart-header-search-output");var b=$(a).find("a.search-properties-tabs-label").index(this);
ba=b;$(a).find(".search-main-properties").each(function(){$(this).removeClass("active")});$(a).find(".search-properties-tabs-label").each(function(){$(this).removeClass("active")});$(a).find(".search-main-properties").eq(b).addClass("active");$(this).addClass("active")});$(b.pmain).find("li > a").off("click").off("click").on("click",function(){var a=$(this).parent().attr("idx");"undefined"!=typeof e.chart.ChangeSymbol&&(D(),a=Y(a),5<=e.api.debug.level&&console.log(a),e.chart.ChangeSymbol(a))});$(b.pmain).find("li button.star-button").off("click").on("click",
function(a){a.stopPropagation();a=$(this).parent().attr("idx");$(this).hasClass("stardisabled-icon")?($(this).addClass("startenabled-icon").removeClass("stardisabled-icon"),a=Y(a),"undefined"!=typeof e.init.majors&&e.init.gui.majorsAddObj(a),"undefined"!=typeof e.menuobj&&e.menuobj.gui.updateMajorFavorites()):($(this).removeClass("startenabled-icon").addClass("stardisabled-icon"),"undefined"!=typeof e.init.majors&&(e.init.gui.majorsRemove(a),"undefined"!=typeof e.menuobj&&e.menuobj.gui.updateMajorFavorites()))});
$(b.pmain).find("li").off("click").on("click",function(){var a=$(this).attr("n");"undefined"!=typeof a&&$(h.parent).find(".chart-header-search-input-text").val(a)});ia(b.parpreload);return null},marketsUpdate:U,exchangesUpdate:V,countriesUpdate:W,openSearch:X};h.api={removeItem:function(a,b){a=s(a)?"header1":a;if("undefined"==typeof b)return!1;if("undefined"!=typeof e.currenlayout.headers)for(var h=e.currenlayout.headers,d=0;d<h.length;d++){var g=h[d];if(g.id==a)for(var k=0;k<g.items.length;k++)if(g.items[k].type==
b)return!0}return!1},addItem:function(a,b,h){a=s(a)?"header1":a;if("undefined"==typeof b.type)return!1;"undefined"!=typeof h&&(h=!1);if("undefined"!=typeof e.currenlayout.headers)for(var d=e.currenlayout.headers,g=0;g<d.length;g++){var k=d[g];if(k.id==a){for(a=0;a<k.items.length;a++)if(k.items[a].type==b.type){if(!1==h)return!1;k.items.slice(a,1);break}k.items.push(b);return!0}}return!1},updateItem:function(a,b){s(a);return!1},changeItemPossition:function(){},viewItem:function(){},addHtmlContainer:function(a,
b,h,d,g,k,c,l,q,n){a=s(a)?"header1":a;b=s(b)?e.commonutils.func.returnShortUniqID():b;h=s(h)?"":h;s(d);g=s(g)?"auto":g;k=s(k)?"auto":k;c=s(c)?"auto":c;l=s(l)?"auto":l;q=s(q)?"auto":q;n=s(n)?"auto":n;if("undefined"!=typeof e.currenlayout.headers){d=e.currenlayout.headers;for(var m=0;m<d.length;m++){var p=d[m];if(p.id==a){p.items.push({type:"htmlcontainer",id:b,view:!0,content:h,possition:{height:g,width:k,right:c,left:l,top:q,bottom:n}});break}}}},removeHtmlContainer:function(a,b){a=s(a)?"header1":
a;if(s(b))return!1;if("undefined"!=typeof e.currenlayout.headers)for(var h=e.currenlayout.headers,d=0;d<h.length;d++){var g=h[d];if(g.id==a)for(var k=0;k<g.items.length;k++)if(g.items[k].id==b)return g.items.splice(d,1),!0}return!1},updateHtmlContainer:function(a,b,h,d,g,k,c,l,q,n){a=s(a)?"header1":a;if(s(b))return!1;if("undefined"!=typeof e.currenlayout.headers)for(var m=e.currenlayout.headers,p=0;p<m.length;p++){var r=m[p];if(r.id==a)for(var t=0;t<r.items.length;t++)if(r.items[t].id==b)return a=
r.items[t],s(h)||(a.content=h),s(d)||(a.view=d),s(g)||(a.possition.height=g),s(k)||(a.possition.width=k),s(c)||(a.possition.right=c),s(l)||(a.possition.left=l),s(q)||(a.possition.top=q),s(n)||(a.possition.bottom=n),!0}return!1}};return h};
