function ProChart_InitTrade(n){function g(a){$("#chart-dialog #trade-inner").html(a);$("#order-type").html(b.strOrder.toUpperCase());$("#order-symbol").html(b.strSymbol);$("#order-status").html(b.strStatus);$("#order-id").html(b.strUID);switch(b.strOrder){case "buy":$("#order-type").addClass("orderbuy").removeClass("ordersell").attr("data-localize","dialogs.trade.trade-buy");break;case "sell":$("#order-type").addClass("ordersell").removeClass("orderbuy").attr("data-localize","dialogs.trade.trade-sell")}a=
$("#in-tradevalue");$(a).val(b.fValue);a=$("#in-stoploss");$(a).val(b.fStopLoss);a=$("#in-tekeprofit");$(a).val(b.fTakeProfit);a=$("#input-text");$(a).val(b.strDescription);""==b.strUID&&$("#btn-order-delete").css("display","none");p();$(".chart-ui-dialog .onlynumeric").prochart_numeric();$("#chart-dialog").dialog("open")}function q(a,d){function f(a){$(a).find(".ui-dialog-buttonset").prepend('<button class="chart-button adv-buttons eye-orange " type="button" title="" ></button>').on("click",function(){var a=
$(".chart-ui-dialog.trade-dialog").css("opacity"),a=1==a?.5:1,b=1==a?"":2;$(".chart-ui-dialog.trade-dialog").css("opacity",a);$(this).css("opacity",b)})}$('<div id="chart-dialog" title="'+d+'"><div id="trade-inner" class="dialog_level"></div></div>').insertAfter("body");var e="Apply Order",h="Cancel",m="Delete Order",g="";"undefined"!=typeof c.localizationobj&&(h=c.localizationobj.gui.returnLocalizationString("dialogs.common.button-cancel","Cancel"),e=c.localizationobj.gui.returnLocalizationString("dialogs.common.button-applyorder",
"Apply Order"),m=c.localizationobj.gui.returnLocalizationString("dialogs.common.button-deleteorder","Delete Order"));"undefined"!=typeof c.init.TemplateName&&(g=c.init.TemplateName);var k="";"rtl"==c.localizationobj.gui.returnCurrentLanguage().direction&&(k="dir-rtl");$("#chart-dialog").dialog({dialogClass:"chart-ui-dialog trade-dialog "+g+" "+k,draggable:!0,autoOpen:!1,resizable:!1,closeOnEscape:!0,width:"auto",modal:!0,open:function(a,b){f($(this).parent());"undefined"!=typeof c.localizationobj&&
c.localizationobj.gui.updateFromDataLang($(this).parent());$(".ui-widget-overlay").bind("click",function(){$("#chart-dialog").dialog("close")})},close:function(a,d){c.chart.TradeOrders.EndOrderEdit();""==b.strUID&&b.Cancel();l.TradeOrders.Refresh();$(".chart-ui-dialog.trade-dialog").off();$(".chart-ui-dialog.trade-dialog  adv-buttons.eye-orange").off().remove();$("#chart-dialog").remove()},buttons:[{id:"btn-order-apply",text:e,click:function(){b.fValue=parseFloat($("#in-tradevalue").val());b.fStopLoss=
parseFloat($("#in-stoploss").val());b.fTakeProfit=parseFloat($("#in-tekeprofit").val());b.strDescription=$("#input-text").val();l.TradeOrders.Confirm(b);$(this).dialog("close")}},{id:"btn-order-delete",text:m,click:function(){l.TradeOrders.Delete(b);$(this).dialog("close")}},{id:"btn-order-cancel",text:h,click:function(){$(this).dialog("close")}}]})}function p(){$(".properties-tabs").delegate("a","click",function(){var a=$(this).parents(".dialog_level"),b=$(a).find(".properties-tabs a").index(this);
$(a).find(".main-properties").each(function(){$(this).css("display","none")});$(a).find(".properties-tabs-label").each(function(){$(this).removeClass("active")});$(a).find(".main-properties").eq(b).css("display","block");$(this).addClass("active")})}var f={},c=n;c.api.debug.getLogger("prochart.gui.trade");var k="",b=null,l=null;c.tradeobj=f;f.gui={openTradeDialog:function(a,d,f){k="%ordertype% (%ordervalue% ; %stoploss% ; %takeprofit% ) %ordersymbol% ".replace("%ordertype%",d.strOrder.toUpperCase()).replace("%ordervalue%",
d.fValue).replace("%stoploss%",d.fStopLoss).replace("%ordersymbol%",d.strSymbol).replace("%takeprofit%",d.fTakeProfit);b=d;l=f;a=!1==c.guiinit.cache?"?"+c.version.gui.name+(new Date).getTime():"?"+c.version.gui.name;q("gannfan",k);a=c.guiinit.rootpath+"/ChartUI/gui/trade/trade.htm"+a;if(c.navigator.XMLHttpRequest()){var e=new XMLHttpRequest,h=$.Deferred();e.open("get",a);e.onload=function(){var a=e.responseText;g($(a).find("#dlg-trade"));h.resolve(a)};e.send();return h}return $.ajax({type:"GET",async:!0,
dataType:"html",url:a,success:function(a){g($(a).find("#dlg-trade"))}})}};return f};
