function ProChart_InitMenu(W){var D,E,F,w,x,y,G,z,A,B,H,I,J,v,K;function X(a,c){$(f.parent).find(".chart-menu").each(function(){"rtl"==c?$(this).hasClass("dir-rtl")||$(this).addClass("dir-rtl"):$(this).removeClass("dir-rtl")})}function N(a){D=q(a,"menu-container");E=q(a,"menu-item");F=q(a,"menu-item-group");w=q(a,"menu-timeframe");x=q(a,"menu-timeframe-text");y=q(a,"menu-majors");G=q(a,"menu-majors2");z=q(a,"menu-charttype");A=q(a,"menu-indicators");B=q(a,"menu-compares");H=q(a,"menu-more");I=q(a,
"menu-localizations");J=q(a,"menu-item-image");v=q(a,"menu-more-item");K=q(a,"menu-more-item-group")}function Y(){var a=c.currenlayout.menus;if("undefined"!=typeof a.click&&!0==a.click)$(f.parent).find(".action-open-group").on("click",function(){"block"==$(this).parent().find(".mn-item-group").css("display")?($(f.parent).find(".mn-item-group").css("display","none"),$(f.parent).find(".mn-item-sub-group").css("display","none"),$(f.parent).find(".action-open-group").removeClass("menu-selected")):($(f.parent).find(".action-open-group").removeClass("menu-selected"),
$(f.parent).find(".mn-item-group").css("display","none"),$(f.parent).find(".mn-item-sub-group").css("display","none"),$(this).parent().find(".mn-item-group").css("display","block"),$(this).addClass("menu-selected"),L($(this).parent()));"undefined"!=typeof c.toolbaradvobj&&c.toolbaradvobj.gui.hideopengroup()});if("undefined"!=typeof a.click&&!0==a.click)$(f.parent).find(".action-open-sub-group").on("click",function(){"block"==$(this).parent().find(".mn-item-sub-group").css("display")?$(f.parent).find(".mn-item-sub-group").css("display",
"none"):($(f.parent).find(".mn-item-sub-group").css("display","none"),$(this).parent().find(".mn-item-sub-group").css("display","block"),L($(this).parent(),!1));"undefined"!=typeof c.toolbaradvobj&&c.toolbaradvobj.gui.hideopengroup()});"undefined"!=typeof a.hover&&!0==a.hover&&$(f.parent).find(".action-open-group").parent().prochart_hoverIntent(function(){$(f.parent).find(".action-open-group").removeClass("menu-selected");$(this).find(".mn-item-group").stop(!0,!0).show()},function(){$(f.parent).find(".action-open-group").removeClass("menu-selected");
$(this).find(".mn-item-group").stop(!0,!0).hide();L($(this).parent())});$(f.parent).find(".action-open-item").off().on("click",function(g){if("undefined"!=typeof c.actions){var k=$(this).attr("tid");c.actions.action(k);g.stopPropagation();"undefined"!=typeof a.closebyclick&&!0==a.closebyclick&&($(f.parent).find(".action-open-group").removeClass("menu-selected"),$(this).parents().find(".mn-item-group").stop(!0,!0).hide(),$(this).parents().find(".mn-item-sub-group").stop(!0,!0).hide())}})}function L(a,
g){"undefined"==typeof g&&(g=!0);var k=g?a.find("> .mn-item-group"):a.find("> .mn-item-sub-group"),d=a.closest(".htmlchart"),f=k.find("> .mn-array"),h=g?a.find(".action-open-group").parent("li"):a.find(".action-open-sub-group").parent("li"),b={};b.possition=g?"bottom":"left";if(!g&&"undefined"!=typeof c.localizationobj)if("rtl"==c.localizationobj.gui.returnCurrentLanguage().direction)switch(b.possition){case "left":b.possition="right";k.removeClass("a-left").addClass("a-right");break;case "right":b.possition=
"left",k.removeClass("a-right").addClass("a-left")}else switch(b.possition){case "right":k.removeClass("a-left").addClass("a-right");break;case "left":k.removeClass("a-right").addClass("a-left")}var m=0,n=m=0,e=0,p=0,r="",q,e=h.outerWidth(!0),n=h.outerHeight(!0),r=h.offset().left-d.offset().left;q=d.outerWidth()-r-e;var h=h.offset().top-d.offset().top,d=d.outerHeight()-h-n,p=parseInt(f.css("border-top-width"),10),v=0,u=0;k.find("> ul > mm-item.mm-item-group").each(function(){$(this).css("width","");
u=$(this).outerWidth();$(this).outerWidth(!0);u>v&&(v=u)});var m=k.outerWidth(),s={};switch(b.possition){case "bottom":s.top=n+2+"px";s.bottom="auto";break;case "top":s.top="auto";s.bottom=n+2+"px";break;case "right":s.right="auto";s.left=e+2+"px";s.top="0px";s.bottom="auto";break;case "left":s.right=e+2+"px",s.left="auto",s.top="0px",s.bottom="auto"}k.css(s);"undefined"==typeof b.alignh&&(b.alignh="auto");"undefined"==typeof b.alignv&&(b.alignv="auto");var s={},t={};if("top"==b.possition||"bottom"==
b.possition)switch(r="auto"==b.alignh?r+e/2>m/2&&q+e/2>m/2?"center":r+e/2>m?"left":q+e/2>m?"right":"center":b.alignh,r){case "left":s.right="0px";s.left="auto";t.right="5px";t.left="auto";k.css(s);f.css(t);break;case "right":s.left="0px";s.right="auto";t.left="5px";t.right="auto";k.css(s);f.css(t);break;case "center":s.right=-(m/2-e/2)+"px",s.left="auto",t.left=m/2-p+"px",t.right="auto",k.css(s),f.css(t)}if("left"==b.possition||"right"==b.possition)switch(m=k.outerHeight(),r="auto"==b.alignv?h>m/
2&&d>m/2?"center":h>m?"bottom":"top":b.alignv,r){case "top":s.bottom="auto";s.top="0px";t.top="5px";t.bottom="auto";k.css(s);f.css(t);break;case "bottom":s.top="auto";s.bottom="0px";t.bottom="5px";t.top="auto";k.css(s);f.css(t);break;case "center":s.top=-(m/2-n/2)+"px",s.bottom="auto",t.top=m/2-p+"px",t.bottom="auto",k.css(s),f.css(t)}k.css("visibility","visible")}function O(a){var g="",k="",d=null;if("undefined"==typeof a.items)return"";for(var f=0,h=a.items.length;f<h;f++)switch(d=a.items[f],d.type){case "menu-item":var b=
d;b.cssaction="undefined"==typeof b.cssaction?" action-open-item":b.cssaction;d=E.replace(p,"").replace(/%id%/g,b.id).replace(/%localization%/g,"undefined"!=typeof b.localize?b.localize:"").replace(/%caption%/g,"undefined"!=typeof b.caption?b.caption:"").replace(/%cssaction%/g,b.cssaction).replace(/%css%/g,"undefined"!=typeof b.css?b.css:"");b=v.replace(p,"").replace(/%id%/g,b.id).replace(/%css%/g,"").replace(/%cssaction%/g,b.cssaction).replace(/%localization%/g,"undefined"!=typeof b.localize?b.localize:
"").replace(/%caption%/g,"undefined"!=typeof b.caption?b.caption:"");d={temp:d,tempmore:b};g+=d.temp;k+=d.tempmore;break;case "menu-item-group":b=null;b="a-top";switch(d.group.possition){case "top":b="a-top";break;case "bottom":b="a-bottom";break;case "left":b="a-left";break;case "right":b="a-right"}d.guiid=c.commonutils.func.returnShortUniqID();d.cssaction="undefined"==typeof d.cssaction?" action-open-group":d.cssaction+" action-open-group";var m=F.replace(p,"").replace(/%id%/g,d.id).replace(/%localization%/g,
"undefined"!=typeof d.localize?d.localize:"").replace(/%caption%/g,"undefined"!=typeof d.caption?d.caption:"").replace(/%cssaction%/g,"undefined"!=typeof d.cssaction?d.cssaction:"").replace(/%cssgroup%/g,"undefined"!=typeof d.group&&"undefined"!=typeof d.group.css?d.group.css+" "+b:b).replace(/%css%/g,"undefined"!=typeof d.css?d.css:""),n=K.replace(p,"").replace(/%id%/g,d.id).replace(/%localization%/g,"undefined"!=typeof d.localize?d.localize:"").replace(/%cssaction%/g,"action-open-sub-group").replace(/%caption%/g,
"undefined"!=typeof d.caption?d.caption:"").replace(/%cssgroup%/g,"undefined"!=typeof d.group&&"undefined"!=typeof d.group.css?d.group.css+" a-left":" a-left").replace(/%css%/g,"undefined"!=typeof d.css?d.css:""),b=O(d),m=m.replace(/%html%/g,b.temp),n=n.replace(/%html%/g,b.tempmore),d={temp:m,tempmore:n},g=g+d.temp,k=k+d.tempmore;break;case "menu-group-charttype":m=d;b=d="";z=z.replace(/%mm-item-icons%/g,!0==m.icons?"mm-item-icons":"").replace(/%mm-item-favorites%/g,!0==m.favorites?"mm-item-favorites":
"");m=c.init.charttype;for(n=0;n<m.length;n++)var e=m[n],q=z.replace(p,"").replace(/%id%/g,e.id).replace(/%localization%/g,"undefined"!=typeof e.localize?e.localize:"").replace(/%caption%/g,"undefined"!=typeof e.n?e.n:"").replace(/%star%/g,1==e.f?"startenabled-icon":"stardisabled-icon").replace(/%state%/g,1==e.f?"true":"false").replace(/%icon%/g,e.id).replace(/%css%/g,"undefined"!=typeof e.css?e.css:""),e=v.replace(p,"").replace(/%id%/g,e.id).replace(/%localization%/g,"undefined"!=typeof e.localize?
e.localize:"").replace(/%cssaction%/g,"a-change-charttype").replace(/%css%/g,"").replace(/%caption%/g,"undefined"!=typeof e.n?e.n:""),d=d+q,b=b+e;d={temp:d,tempmore:b};g+=d.temp;k+=d.tempmore;break;case "menu-group-timeframe":b="";m=c.init.timeframe;n="";w=w.replace(/%mm-item-icons%/g,!0==d.icons?"mm-item-icons":"").replace(/%mm-item-favorites%/g,!0==d.favorites?"mm-item-favorites":"");x=x.replace(/%mm-item-icons%/g,!0==d.icons?"mm-item-icons":"").replace(/%mm-item-favorites%/g,!0==d.favorites?"mm-item-favorites":
"");q=c.api.timeframes.getTimeframeView();for(e=0;e<m.length;e++){var r=m[e],u="";switch(q){case "icon":u=w.replace(p,"").replace(/%id%/g,r.id).replace(/%localization%/g,"undefined"!=typeof d.localize?r.localize:"").replace(/%caption%/g,"undefined"!=typeof r.n?r.n:"").replace(/%star%/g,1==r.f?"startenabled-icon":"stardisabled-icon").replace(/%state%/g,1==r.f?"true":"false").replace(/%icon%/g,P(r.id)).replace(/%css%/g,"undefined"!=typeof r.css?r.css:"");break;case "text":u=x.replace(p,"").replace(/%id%/g,
r.id).replace(/%caption%/g,"undefined"!=typeof r.n?r.n:"").replace(/%star%/g,1==r.f?"startenabled-icon":"stardisabled-icon").replace(/%state%/g,1==r.f?"true":"false").replace(/%title1%/g,r.t1).replace(/%title2%/g,r.t2).replace(/%css%/g,"undefined"!=typeof r.css?r.css:"")}r=v.replace(p,"").replace(/%id%/g,r.id).replace(/%localization%/g,"undefined"!=typeof d.localize?r.localize:"").replace(/%cssaction%/g,"a-change-timeframe").replace(/%css%/g,"").replace(/%caption%/g,"undefined"!=typeof r.n?r.n:"");
b+=u;n+=r}d={temp:b,tempmore:n};g+=d.temp;k+=d.tempmore;break;case "menu-group-majors":b=d="";m=c.init.majors;for(n=0;n<m.length;n++)e=m[n],q=y.replace(p,"").replace(/%id%/g,e.id).replace(/%localization%/g,"undefined"!=typeof e.localize?e.localize:"").replace(/%caption%/g,"undefined"!=typeof e.name?e.name:"").replace(/%css%/g,"undefined"!=typeof e.css?e.css:""),e=v.replace(p,"").replace(/%id%/g,e.id).replace(/%localization%/g,"undefined"!=typeof e.localize?e.localize:"").replace(/%cssaction%/g,"a-change-symbol").replace(/%css%/g,
" major-group-item-more").replace(/%caption%/g,"undefined"!=typeof e.name?e.name:""),d+=q,b+=e;d={temp:d,tempmore:b};g+=d.temp;k+=d.tempmore;break;case "menu-group-majors2":b=d="";m=c.init.majors2;for(n=0;n<m.length;n++)e=m[n],q=G.replace(p,"").replace(/%id%/g,e.id).replace(/%localization%/g,"undefined"!=typeof e.localize?e.localize:"").replace(/%caption%/g,"undefined"!=typeof e.name?e.name:"").replace(/%css%/g,"undefined"!=typeof e.css?e.css:""),e=v.replace(p,"").replace(/%id%/g,e.id).replace(/%localization%/g,
"undefined"!=typeof e.localize?e.localize:"").replace(/%cssaction%/g,"a-change-symbol").replace(/%css%/g," major-group-item-more").replace(/%caption%/g,"undefined"!=typeof e.name?e.name:""),d+=q,b+=e;d={temp:d,tempmore:b};g+=d.temp;k+=d.tempmore;break;case "menu-group-indicators":b=d="";m=c.init.indicators;for(n=0;n<m.length;n++)e=m[n],q=A.replace(p,"").replace(/%id%/g,e.id).replace(/%localization%/g,"undefined"!=typeof e.localize?e.localize:"").replace(/%custom%/g,"undefined"!=typeof e.custom?e.custom:
"false").replace(/%caption%/g,"undefined"!=typeof e.n?e.n:"").replace(/%css%/g,"undefined"!=typeof e.css?e.css:""),e=v.replace(p,"").replace(/%id%/g,e.id).replace(/%localization%/g,"undefined"!=typeof e.localize?e.localize:"").replace(/%cssaction%/g,"a-change-indicator").replace(/%css%/g," indicator-group-item-more").replace(/%caption%/g,"undefined"!=typeof e.n?e.n:""),d+=q,b+=e;d={temp:d,tempmore:b};g+=d.temp;k+=d.tempmore;break;case "menu-group-compares":b=d="";m=c.init.compares;for(n=0;n<m.length;n++)e=
m[n],q=B.replace(p,"").replace(/%id%/g,e.id).replace(/%localization%/g,"undefined"!=typeof e.localize?e.localize:"").replace(/%caption%/g,"undefined"!=typeof e.name?e.name:"").replace(/%css%/g,"undefined"!=typeof e.css?e.css:""),e=v.replace(p,"").replace(/%id%/g,e.id).replace(/%cssaction%/g,"a-change-compare").replace(/%localization%/g,"undefined"!=typeof e.localize?e.localize:"").replace(/%caption%/g,"undefined"!=typeof e.name?e.name:""),d+=q,b+=e;d={temp:d,tempmore:b};g+=d.temp;k+=d.tempmore;break;
case "menu-group-localizations":b=d="";m=c.init.localization;for(n=0;n<m.length;n++)e=m[n],q=I.replace(p,"").replace(/%id%/g,e.id).replace(/%localization%/g,"undefined"!=typeof e.localize?e.localize:"").replace(/%caption%/g,"undefined"!=typeof e.name?e.name:"").replace(/%css%/g,"undefined"!=typeof e.css?e.css:""),e=v.replace(p,"").replace(/%id%/g,e.id).replace(/%localization%/g,"undefined"!=typeof e.localize?e.localize:"").replace(/%cssaction%/g," a-change-localization").replace(/%css%/g,"").replace(/%caption%/g,
"undefined"!=typeof e.name?e.name:""),d+=q,b+=e;d={temp:d,tempmore:b};g+=d.temp;k+=d.tempmore;break;case "menu-item-image":b=d,d=J.replace(p,"").replace(/%id%/g,b.id).replace(/%caption%/g,"undefined"!=typeof b.caption?b.caption:"").replace(/%cssaction%/g,"undefined"!=typeof b.action?b.action:"").replace(/%image%/g,"undefined"!=typeof b.image?b.image:"").replace(/%css%/g,"undefined"!=typeof b.css?b.css:""),b=v.replace(p,"").replace(/%tid%/g,b.id).replace(/%cssaction%/g,"undefined"!=typeof b.action?
b.action:"").replace(/%caption%/g,"undefined"!=typeof b.caption?b.caption:"").replace(/%caption%/g,"undefined"!=typeof b.caption?b.caption:""),d={temp:d,tempmore:b},g+=d.temp,k+=d.tempmore}return{temp:g,tempmore:k}}function Q(){$(f.parent).find(".a-change-timeframe").off().on("click",function(){var a=$(this).attr("tid");"undefined"!=typeof c.toolbaradvobj.gui&&c.toolbaradvobj.gui.selectedTimeFrameButton(a);"undefined"!=typeof c.chart.ChangeTimeScale&&(c.chart.ChangeTimeScale(a),!0==c.bi.status&&c.bi.addt2BI("change timescale: "+
a));a=c.currenlayout.menus;"undefined"!=typeof a.closebyclick&&!0==a.closebyclick&&($(f.parent).find(".action-open-group").removeClass("menu-selected"),$(this).parents().find(".mn-item-group").stop(!0,!0).hide())});$(f.parent).find(".a-favorite-timeframe").off().on("click",function(){var a=$(this).attr("tid"),g=$(this).attr("state"),f="false"==g?!0:!1;switch(g){case "true":$(this).find("span").removeClass("startenabled-icon").addClass("stardisabled-icon");$(this).attr("state","false");"undefined"!=
typeof c.toolbaradvobj&&c.toolbaradvobj.gui.viewTimeFrameButton(a,0);break;case "false":$(this).find("span").removeClass("stardisabled-icon").addClass("startenabled-icon"),$(this).attr("state","true"),"undefined"!=typeof c.toolbaradvobj&&c.toolbaradvobj.gui.viewTimeFrameButton(a,1)}for(g=0;g<c.init.timeframe.length;g++)c.init.timeframe[g].id==a&&(c.init.timeframe[g].f=f?"1":"0");if(typeof c.events.onChangeTimeFrameFavorites==typeof Function)c.events.onChangeTimeFrameFavorites(a,f,c.init.timeframe);
try{"undefined"!=typeof c.api.localstorage&&c.api.localstorage.setTimeFrameFavorites(c.init.timeframe)}catch(d){}return!1})}function Z(){$(f.parent).find(".a-change-charttype").off().on("click",function(){var a=$(this).attr("tid");"undefined"!=typeof c.chart.ChangeSymbol&&("undefined"!=typeof c.toolbaradvobj.gui&&c.toolbaradvobj.gui.selectedChartTypeButton(a),"undefined"!=typeof c.chart.ChangePriceType&&(c.chart.ChangePriceType(a),!0==c.bi.status&&c.bi.addt2BI("change price type: "+a)));a=c.currenlayout.menus;
"undefined"!=typeof a.closebyclick&&!0==a.closebyclick&&($(f.parent).find(".action-open-group").removeClass("menu-selected"),$(this).parents().find(".mn-item-group").stop(!0,!0).hide())});$(f.parent).find(".a-favorite-charttype").off().on("click",function(){var a=$(this).attr("tid"),g=$(this).attr("state"),f="false"==g?!0:!1;switch(g){case "true":$(this).find("span").removeClass("startenabled-icon").addClass("stardisabled-icon");$(this).attr("state","false");"undefined"!=typeof c.toolbarobj&&c.toolbarobj.gui.viewTypeChartButton(a,
0);"undefined"!=typeof c.toolbaradvobj&&c.toolbaradvobj.gui.viewTypeChartButton(a,0);break;case "false":$(this).find("span").removeClass("stardisabled-icon").addClass("startenabled-icon"),$(this).attr("state","true"),"undefined"!=typeof c.toolbaradvobj&&c.toolbaradvobj.gui.viewTypeChartButton(a,1)}for(g=0;g<c.init.charttype.length;g++)c.init.charttype[g].id==a&&(c.init.charttype[g].f=f?"1":"0");if(typeof c.events.onChangePriceTypeFavorites==typeof Function)c.events.onChangePriceTypeFavorites(a,f,
c.init.charttype);try{"undefined"!=typeof c.api.localstorage&&c.api.localstorage.setPriceTypeFavorites(c.init.charttype)}catch(d){}return!1})}function R(){$(f.parent).find(".a-change-symbol").off().on("click",function(){var a=$(this).attr("tid");"undefined"!=typeof c.chart.ChangeSymbol&&(a=c.init.gui.majorsReturn(a),c.chart.ChangeSymbol(a),!0==c.bi.status&&c.bi.addt2BI("change symobol: "+a.name));a=c.currenlayout.menus;"undefined"!=typeof a.closebyclick&&!0==a.closebyclick&&($(f.parent).find(".action-open-group").removeClass("menu-selected"),
$(this).parents().find(".mn-item-group").stop(!0,!0).hide())})}function S(){$(f.parent).find(".a-change-indicator").off().on("click",function(){var a=$(this).attr("tid"),g=!1,g="undefined"!=$(this).attr("custom")?"true"==$(this).attr("custom")?!0:!1:!1;if("undefined"!=typeof c.chart.AddStudy)switch(g){case !0:typeof c.events.menu.onCustomIndicatorClick==typeof Function&&(c.events.menu.onCustomIndicatorClick(a),!0==c.bi.status&&c.bi.addt2BI("add custom study: "+a));break;case !1:c.chart.AddStudy(a),
!0==c.bi.status&&c.bi.addt2BI("add study: "+a)}a=c.currenlayout.menus;"undefined"!=typeof a.closebyclick&&!0==a.closebyclick&&($(f.parent).find(".action-open-group").removeClass("menu-selected"),$(this).parents().find(".mn-item-group").stop(!0,!0).hide())})}function T(){$(f.parent).find(".a-change-compare").off().on("click",function(){var a=$(this).attr("tid");"undefined"!=typeof c.chart.AddCompareSymbol&&(a=c.init.gui.comparesReturn(a),c.chart.AddCompareSymbol(a),!0==c.bi.status&&c.bi.addt2BI("add compare symbol: "+
a.name));a=c.currenlayout.menus;"undefined"!=typeof a.closebyclick&&!0==a.closebyclick&&($(f.parent).find(".action-open-group").removeClass("menu-selected"),$(this).parents().find(".mn-item-group").stop(!0,!0).hide())})}function aa(){$(f.parent).find(".a-change-localization").off().on("click",function(){var a=$(this).attr("tid");"undefined"!=typeof c.localizationobj&&(c.localizationobj.gui.changeLocalization(a),!0==c.bi.status&&c.bi.addt2BI("change localization: "+a));a=c.currenlayout.menus;"undefined"!=
typeof a.closebyclick&&!0==a.closebyclick&&($(f.parent).find(".action-open-group").removeClass("menu-selected"),$(this).parents().find(".mn-item-group").stop(!0,!0).hide())})}function ba(){var a=[],g=$(f.parent).find("#menu-favorite-indicators");a.push('<li class="menu-favorite-indicator"  idx="%indicatorid%">%indicatorname%</li>');a.push('<li onclick="openIndicators();">Indicators</li>');var k=/%indicatorid%/g,d=/%indicatorname%/g,l=c.commonutils.func.getKeybyPath(c.gui.guiblock,"menu.studies.visible");
null==l||0!=l&&!1!=l||$(f.parent).find("#studies").addClass("hideobj");$(g).find(".menu-favorite-indicator").each(function(){$(this).off().remove()});for(var l=c.init.indicators,h=0;h<l.length;h++){var b=a[0].replace(k,l[h].id).replace(d,l[h].n);$(g).append(b)}$(g).find(".menu-favorite-indicator").on("click",function(){var a=$(this).attr("idx");"undefined"!=typeof c.chart.AddStudy&&(c.chart.AddStudy(a),!0==c.bi.status&&c.bi.addt2BI("add study:"+a))});$(g).find(".menu-indicatorform").off().on("click",
function(){"undefined"!=typeof c.indicators&&(c.indicators.gui.viewIndicators(),!0==c.bi.status&&c.bi.addt2BI("menu view all indicators"))})}function U(){var a=[],g=$(f.parent).find("#menu-favorite-compares");a.push('<li class="menu-favorite-compare"  idx="%compareid%">%comparename%</li>');a.push('<li onclick="openCompares();">Compares</li>');var k=/%compareid%/g,d=/%comparename%/g,l=c.commonutils.func.getKeybyPath(c.gui.guiblock,"menu.compares.visible");null==l||0!=l&&!1!=l||$(f.parent).find("#compares").addClass("hideobj");
$(g).find(".menu-favorite-compare").each(function(){$(this).off().remove()});for(var l=c.init.compares,h=0;h<l.length;h++){var b=a[0].replace(k,l[h].id).replace(d,l[h].name);$(g).append(b)}$(g).find(".menu-favorite-compare").on("click",function(){var a=$(this).attr("idx");"undefined"!=typeof c.chart.AddCompareSymbol&&(a=c.init.gui.comparesReturn(a),c.chart.AddCompareSymbol(a))});$(g).find(".menu-compareform").off().on("click",function(){"undefined"!=typeof c.compares&&c.compares.gui.viewCompares()})}
function P(a){if("undefined"==typeof a||null==a)return"";for(var g=0;g<c.init.timeclassmirror.length;g++)if(c.init.timeclassmirror[g].time==a.toLowerCase()||c.init.timeclassmirror[g].time==a.toUpperCase())return c.init.timeclassmirror[g].css;return""}function M(){$(f.parent).find(".chart-menu > ul").each(function(){var a=$(this);a.attr("id");ca(a)})}function ca(a){var c=a.parent().width();a.parent().height();var f=0,d=0,l=0,h=a.find("> .mn-more");0<h.length&&(l=h.outerWidth(!0));a.find("> .mn-item ").each(function(){d+=
$(this).outerWidth(!0)});a.find("> .mn-item ").each(function(){f+=$(this).outerWidth(!0);if(f>c-l){$(this).addClass("hide-item");var b=$(this).find("> a").attr("tid");a.find(".mn-more-item > a[tid^='"+b+"']").parent().removeClass("hide-more-item")}else $(this).removeClass("hide-item"),b=$(this).find("> a").attr("tid"),a.find(".mn-more-item > a[tid^='"+b+"']").parent().addClass("hide-more-item")});f>c-l?a.find(".mn-more").css("display","block"):a.find(".mn-more").css("display","none")}function q(a,
c){var f="",d=a.indexOf("<"+c+">"),l=("<"+c+">").length,h=a.indexOf("</"+c+">");-1!=d&&-1!=h&&h>d+l&&(f=a.substring(d+l,h));return f}function u(a){try{return"undefined"!=typeof f.mycache[a]&&null!=f.mycache[a]?f.mycache[a]:null}catch(c){return null}}function C(a,c){try{f.mycache[a]=c}catch(k){}}var f={},c=W;c.menuobj=f;f.mycache={};var p=/=""/g,V=c.api.debug.getLogger("prochart.gui.menu");f.parent=null;x=K=v=H=J=B=G=y=I=A=z=w=F=E=D=f.parent=null;f.gui={initPattern:function(){var a=$.Deferred(),g=
!1==c.guiinit.cache?"?"+c.version.gui.name+(new Date).getTime():"?"+c.version.gui.name;$("<div>");g=c.guiinit.rootpath+"/ChartUI/gui/menu/menu.patterns.htm"+g;if(c.navigator.XMLHttpRequest()){var f=new XMLHttpRequest;f.open("get",g);f.onload=function(){var d=f.responseText;N(d);V.debug("readMenu Pattern");a.resolve(d)};f.send()}else $.ajax({type:"GET",async:!0,dataType:"html",url:g}).done(function(d){N(d);V.debug("readMenu Pattern");a.resolve(d)});return a.promise()},viewMenu:function(a){f.parent=
a;null==u("$parent")&&C("$parent",$(f.parent));a=u("$parent");for(var g=c.currenlayout.menus.items,k=0;k<g.length;k++){var d=g[k],l=null;d.guiid=c.commonutils.func.returnShortUniqID();var h=D.replace(/%css%/g,"undefined"!=typeof d.css?d.css:"").replace(/%id%/g,d.guiid),l=O(d),h=h.replace(/%html%/g,l.temp+"%html%"),b="a-bottom";"undefined"!=typeof d.more.possition&&(b="a-"+d.more.possition);l=H.replace(/%css%/g,"").replace(/%cssaction%/g," action-open-group").replace(/%cssgroup%/g,b).replace(/%html%/g,
l.tempmore);h=h.replace(/%html%/g,l);a.find("#"+d.parent).append(h)}Y();R();Z();Q();S();T();aa();M()},updateIndicatorFavorites:function(){ba();var a="",g="";$(f.parent).find(".indicator-group-item:not(:last)").remove();var k=$(f.parent).find(".indicator-group-item");$(f.parent).find(".indicator-group-item-more:not(:last)").remove();for(var d=$(f.parent).find(".indicator-group-item-more"),l=c.init.indicators,h=0;h<l.length;h++)var b=l[h],m=A.replace(p,"").replace(/%id%/g,b.id).replace(/%caption%/g,
"undefined"!=typeof b.n?b.n:"").replace(/%custom%/g,"undefined"!=typeof b.custom?b.custom:"false").replace(/%css%/g,"undefined"!=typeof b.css?b.css:""),b=v.replace(p,"").replace(/%id%/g,b.id).replace(/%localization%/g,"undefined"!=typeof b.localize?b.localize:"").replace(/%cssaction%/g,"a-change-indicator").replace(/%css%/g," indicator-group-item-more").replace(/%caption%/g,"undefined"!=typeof b.n?b.n:""),a=a+m,g=g+b;0==l.length&&(l=A.replace(p,"").replace(/%id%/g,"").replace(/%caption%/g,"").replace(/%css%/g,
" hide-item"),a+=l);k.replaceWith(a);d.replaceWith(g);S()},updateCompareFavorites:function(){U();var a="",g="";$(f.parent).find(".compare-group-item:not(:last)").remove();var k=$(f.parent).find(".compare-group-item");$(f.parent).find(".compare-group-item-more:not(:last)").remove();for(var d=$(f.parent).find(".compare-group-item-more"),l=c.init.compares,h=0;h<l.length;h++)var b=l[h],m=B.replace(p,"").replace(/%id%/g,b.id).replace(/%localization%/g,"undefined"!=typeof b.localize?b.localize:"").replace(/%caption%/g,
"undefined"!=typeof b.name?b.name:"").replace(/%css%/g,"undefined"!=typeof b.css?b.css:""),b=v.replace(p,"").replace(/%id%/g,b.id).replace(/%cssaction%/g,"a-change-compare").replace(/%localization%/g,"undefined"!=typeof b.localize?b.localize:"").replace(/%caption%/g,"undefined"!=typeof b.name?b.name:""),g=g+m,a=a+b;0==l.length&&(l=B.replace(p,"").replace(/%id%/g,"").replace(/%caption%/g,"").replace(/%css%/g," hide-item"),g+=l);k.replaceWith(g);d.replaceWith(a);T()},updateMajorFavorites:function(){U();
var a="",g="";$(f.parent).find(".major-group-item:not(:last)").remove();var k=$(f.parent).find(".major-group-item");$(f.parent).find(".major-group-item-more:not(:last)").remove();for(var d=$(f.parent).find(".major-group-item-more"),l=c.init.majors,h=0;h<l.length;h++)var b=l[h],m=y.replace(p,"").replace(/%id%/g,b.id).replace(/%caption%/g,"undefined"!=typeof b.name?b.name:"").replace(/%css%/g,"undefined"!=typeof b.css?b.css:""),b=v.replace(p,"").replace(/%id%/g,b.id).replace(/%localization%/g,"undefined"!=
typeof b.localize?b.localize:"").replace(/%cssaction%/g,"a-change-symbol").replace(/%css%/g," major-group-item-more").replace(/%caption%/g,"undefined"!=typeof b.name?b.name:""),a=a+m,g=g+b;0==l.length&&(l=y.replace(p,"").replace(/%id%/g,"").replace(/%caption%/g,"").replace(/%css%/g," hide-item"),a+=l);k.replaceWith(a);d.replaceWith(g);R()},updateMajors2:function(){},about:function(){"undefined"!=typeof c.chart.ShowAbout&&c.chart.ShowAbout()},changeLocalization:function(a,c){X(a,c);M()},updateTimesScale:function(){$(f.parent).find(".timeframe-group-item:not(:last)").remove();
for(var a=$(f.parent).find(".timeframe-group-item"),g="",k=c.init.timeframe,d=c.api.timeframes.getTimeframeView(),l=0;l<k.length;l++){var h=k[l],b="";switch(d){case "icon":b=w.replace(p,"").replace(/%id%/g,h.id).replace(/%caption%/g,"undefined"!=typeof h.n?h.n:"").replace(/%star%/g,1==h.f?"startenabled-icon":"stardisabled-icon").replace(/%state%/g,1==h.f?"true":"false").replace(/%icon%/g,P(h.id)).replace(/%css%/g,"undefined"!=typeof h.css?h.css:"");break;case "text":b=x.replace(p,"").replace(/%id%/g,
h.id).replace(/%caption%/g,"undefined"!=typeof h.n?h.n:"").replace(/%star%/g,1==h.f?"startenabled-icon":"stardisabled-icon").replace(/%state%/g,1==h.f?"true":"false").replace(/%title1%/g,h.t1).replace(/%title2%/g,h.t2).replace(/%css%/g,"undefined"!=typeof h.css?h.css:"")}g+=b}a.replaceWith(g);Q()},help:function(){"undefined"!=typeof c.gui.guiblock.menu.help.functionhelp&&"function"==typeof c.gui.guiblock.menu.help.functionhelp&&null!=c.gui.guiblock.menu.help.functionhelp&&(f.init.functionOpenHelp=
c.gui.guiblock.menu.help.functionhelp);"undefined"!=typeof f.init.functionOpenHelp&&"function"==typeof f.init.functionOpenHelp&&f.init.functionOpenHelp()},adjustSize:function(){M()},changeTypeChartFavoritesStar:function(a){if(0!=a.length)for(var c=0;c<a.length;c++){var k=a[c],d=$(f.parent).find(".a-favorite-charttype[tid^='"+k.id+"']"),l=$(d).find("span");if(0<d.length)switch(k.f){case 1:case "1":d.attr("state","true");l.removeClass("stardisabled-icon").addClass("startenabled-icon");break;case 0:case "0":d.attr("state",
"false"),l.addClass("stardisabled-icon").removeClass("startenabled-icon")}}},changeTimeFrameFavoritesStar:function(){},hidemenus:function(){null==u("$parent")&&C("$parent",$(f.parent));var a=u("$parent");null==u("$parent .action-open-group")&&C("$parent .action-open-group",a.find(".action-open-group"));u("$parent .action-open-group").removeClass("menu-selected");null==u("$parent .mn-item-group")&&C("$parent .mn-item-group",a.find(".mn-item-group"));u("$parent .mn-item-group").css("display","none");
null==u("$parent .mn-item-sub-group")&&C("$parent .mn-item-sub-group",a.find(".mn-item-sub-group"));u("$parent .mn-item-sub-group").css("display","none")}};f.init={functionOpenHelp:function(){window.open("http://www.tradeandchart.com/Help/Help.aspx?p=2.6","_blank","location=yes,height=570,width=520,scrollbars=yes,status=yes")}};f.favorites={removeFavorite:function(a){$(f.parent).find("#star-"+a).removeClass("startenabled-icon").addClass("stardisabled-icon")}};return f};
