function ProChart_InitLocalization(z,q){function r(a){for(var c=0;c<l.length;c++)s(a,l[c].source,l[c].key)}function s(a,c,b){var e=$.Deferred();c=f.guiinit.rootpath+c+"/localization";var k=!1==t?"?"+f.version.gui.name+(new Date).getTime():"?"+f.version.gui.name;a=c+"/prochart-"+a+".js"+k;if(f.navigator.XMLHttpRequest()){var h=new XMLHttpRequest;h.objectname=b;h.timeout=500;h.open("get",a);h.onload=function(){var a=$.parseJSON(h.responseText);d.dataLang[h.objectname]=a;e.resolve(a)};h.send()}else $.ajax({url:a,
timeout:500,contentType:"application/javascript",dataType:"json",objectname:b,async:!0}).done(function(a){d.dataLang[this.objectname]=a;e.resolve(a)}).fail(function(a,b){m.error(a,b)});return e.promise()}function n(){$("#layout"+f.init.uuid).find("[data-localize]").each(function(){var a,c,b;a=$(this);c=$(this).attr("data-localize");b=g(d.dataLang,c);null!=b&&(a.is("input")?u(a,c,b):a.is("img")?v(a,c,b):a.is("button")?w(a,c,b):a.is("optgroup")?a.attr("label",b):$.isPlainObject(b)||x(a,c,b))})}function w(a,
c,b){p(a.attr("title"))||a.attr("title",b);a.hasClass("ui-button")?a.find("span").html(b):0<a.has("span").length?(a.hasClass("icon-button")||a.hasClass("no-icon-button"))&&a.hasClass("caption-button")&&(c=a.find("span")[0].outerHTML+b,a.html(c)):0<a.has("b").length?a.hasClass("no-icon-button")&&(a.hasClass("onlycaption-timeframe")||a.hasClass("onlycaption-view"))&&(m.debug("Elem Button:",a.text()),c=a.find("b")[0].outerHTML+b,a.html(c)):p(a.html())||a.html(b)}function x(a,c,b){0<$(a).has("span").length?
(a.hasClass("icon-item")||a.hasClass("no-icon-item"))&&a.hasClass("caption-item")&&(c=a.find("span")[0].outerHTML+b,a.html(c),m.debug("Elem plain:",a[0].outerHTML)):p(a.html())||a.html(b)}function u(a,c,b){c=$.isPlainObject(b)?b.value:b;return a.is("[placeholder]")?a.attr("placeholder",c):a.val(c)}function v(a,c,b){y(a,"alt",b);return y(a,"src",b)}function y(a,c,b){b=g(c,b);if(null!=b)return a.attr(c,b)}function g(a,c){if(!a)return null;var b=c.split(".");return 1==b.length?a[b[0]]:"undefined"!=typeof a[b[0]]?
g(a[b[0]],b.slice(1).join(".")):null}function p(a){return!a||0===a.replace(/^\s+|\s+$/g,"").length}var f=z,t=f.guiinit.cache,m=f.api.debug.getLogger("prochart.gui.localization"),d={dataLang:null,lang:"",funcOnChangeLocalication:null};f.localizationobj=d;d.lang="undefined"!=typeof q?q:f.gui.init.localizationlang;var l=[];d.gui={changeLocalization:function(a){var c="ltr";"undefined"==typeof a?a=""!=d.lang?d.lang:"en":f.gui.init.localizationlang=a;for(var b=0;b<f.gui.init.localization.length;b++){var e=
f.gui.init.localization[b];if(e.id==a){"undefined"!=typeof e.dir&&(c=e.dir);break}}if(a!=d.lang||null==d.dataLang){var b=a,e=f.guiinit.rootpath+"/ChartUI/localization",k=$.Deferred(),h=!1==t?"?"+f.version.gui.name+(new Date).getTime():"?"+f.version.gui.name,b=e+"/prochart-"+b+".js"+h;if(f.navigator.XMLHttpRequest()){var g=new XMLHttpRequest;g.open("get",b);g.onload=function(){var b=$.parseJSON(g.responseText);d.dataLang=b;d.lang=a;r(a);n();"function"==typeof d.funcOnChangeLocalication&&d.funcOnChangeLocalication(a,
c);k.resolve(b)};g.send()}else $.ajax({url:b,contentType:"application/javascript",dataType:"json",timeout:500,async:!0}).done(function(b){d.dataLang=b;d.lang=a;r(a);n();k.resolve(b);"function"==typeof d.funcOnChangeLocalication&&d.funcOnChangeLocalication(a,c)}).fail(function(a,b){m.error(a,b)});return k.promise()}n();"function"==typeof d.funcOnChangeLocalication&&d.funcOnChangeLocalication(a,c)},returnLocalizationString:function(a,c){return null!=a&&null!=d.dataLang&&null!=g(d.dataLang,a)?g(d.dataLang,
a):c},updateFromDataLang:function(a){$(a).find("[data-localize]").each(function(){var a,b,e;a=$(this);b=a.data("localize");if(0<b.length){b||(b=a.attr("rel").match(/localize\[(.*?)\]/)[1]);e=g(d.dataLang,b);var f=!0;"undefined"==typeof e&&(f=!1);null==e&&(f=!1);!0==f&&(a.is("input")?u(a,b,e):a.is("img")?v(a,b,e):a.is("button")?w(a,b,e):a.is("optgroup")?a.attr("label",e):$.isPlainObject(e)||x(a,b,e))}})},addPluginSource:function(a,c){l.push({key:a,source:c});null!=d.dataLang&&"undefined"==typeof d.dataLang[a]&&
s(d.lang,c,a)},returnCurrentLanguage:function(){var a="en";""!=d.lang&&(a=d.lang);for(var c="ltr",b=0;b<f.gui.init.localization.length;b++){var e=f.gui.init.localization[b];if(e.id==a){"undefined"!=typeof e.dir&&(c=e.dir);break}}return{lang:a,direction:c}}};return d};
