function isLocalStorageAvailable(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}function MemoryStorage(){var e=new Map;console.warn("Browser localstorage is not available. Using in-memory storage"),this.setItem=function(t,n){e.set(t,n)},this.getItem=function(t){return e.get(t)},this.removeItem=function(t){e.delete(t)},this.clear=function(){e.clear()},this.key=function(t){return Array.from(e.values())[t]}}var app=angular.module("forex-mobile",["ionic","ngAnimate","app.controllers","app.services","dynform","appsflyer","ionic-toast","dynform","ngCookies","720kb.socialshare"]),controllers=angular.module("app.controllers",["ngMessages","ui.utils.masks","ngMask","angularMoment"]),models=angular.module("app.models",["angularMoment"]),collections=angular.module("app.collections",[]),services=angular.module("app.services",["app.models","app.collections","ionic","angular-md5"]);app.run(["$ionicPlatform","$ionicLoading","$injector","config","constants","Storage","appsflyer","$rootScope","$state","$q","$urlRouter","Utils",function(e,t,n,a,o,i,s,r,l,c,d,u){e.ready(function(){ionic.Platform.isFullScreen=!0,log("App run phase."),i.set("platform",ionic.Platform.platform()),t.show(),e.registerBackButtonAction(function(e){e.preventDefault()},500),n.get("Init").run().then(function(){t.hide(),p(),u.getURLParameterByName("action")===o.depositActionName?l.go("root.app.wallet"):l.go("root.app.assets")}).catch(function(e){if(log("Init run error: ",e),p(),t.hide(),!document.location.hash.match(/login/)&&!document.location.hash.match(/signup/))return l.go("welcome");d.sync()})}),r.$on("$stateChangeError",function(e,n,a,o,i,s){log("$stateChangeError: ",s,o,n),e.preventDefault(),t.hide(),l.go("welcome")});var p=r.$on("$stateChangeStart",function(e){e.preventDefault()});r.$on("$stateChangeStart",function(e,t,a,o,i){var s=n.get("constants");s.disabledStates&&s.disabledStates.indexOf(t.name)>-1&&(console.warn("State disabled: [",t.name,"]"),l.go("welcome"),e.preventDefault())})}]),app.config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","$socketProvider","configProvider","$animateProvider","$compileProvider","appsflyerProvider","$injector",function(e,t,n,a,o,i,s,r,l){function c(e,t,n,a){return n.show({noBackdrop:!0}),e.load("depositValue").then(n.hide).catch(function(a){e.set("depositValue",t.defaultDeposit),n.hide()})}function d(e,t,n,a,o){var i=e.get("demoDepositValues");return i&&i.length?a.resolve():(n.show({noBackdrop:!0}),e.load("demoDepositValues").then(n.hide).catch(function(t){e.set("demoDepositValues",[]),n.hide()}))}function u(e,t,n,a){return n.show({noBackdrop:!0}),e.load("paymentMethods").then(n.hide).catch(function(e){n.hide()})}function p(e){return function(t){return t.enter(e),!0}}e.state("root",{url:"",cache:!1,template:"<ion-nav-view/>",abstract:!0,controller:["$state","rootResolver","AccountService",function(e,t,n){console.log("Root state controller: ",t);var a=n.checkTradingAccounts();if(a)return e.go(a)}],resolve:{rootResolver:["$injector","$q",function(e,t){return e.get("Init").isInitialized?t.resolve():t.reject("not initialized!")}]}}).state("root.app",{url:"/app",cache:!1,abstract:!0,template:'<ion-tabs class="tabs-icon-top tabs-color-active-positive footer-menu"><ion-tab title="{{::translation.instruments}}" icon-off="icon-Instruments" icon-on="icon-Instruments" ui-sref="root.app.assets"><ion-nav-view name="tab-assets"></ion-nav-view></ion-tab><ion-tab title="{{::translation.openPositions}}" icon-off="icon-OpenTrades" icon-on="icon-OpenTrades" ui-sref="root.app.openTrades"><ion-nav-view name="tab-opentrades"></ion-nav-view></ion-tab><ion-tab title="{{::translation.pending}}" icon-off="icon-PendingTrades" icon-on="icon-PendingTrades" ui-sref="root.app.pendingTrades"><ion-nav-view name="tab-pending"></ion-nav-view></ion-tab><ion-tab title="{{::translation.deposit}}" icon-off="icon-Wallet" icon-on="icon-Wallet" ui-sref="root.app.wallet" hidden="{{authType===\'webtrader\'}}"><ion-nav-view name="tab-wallet"></ion-nav-view></ion-tab><ion-tab title="{{::translation.closedPositions}}" icon-off="icon-ClosedTrades" icon-on="icon-ClosedTrades" ui-sref="root.app.closedTrades"><ion-nav-view name="tab-closedtrades"></ion-nav-view></ion-tab><ion-tab title="{{::translation.menu}}" icon-off="icon-Menu" ng-class="verification" class="more-menu-item {{verificationRequered ? \'verificationRequered\' : \'\'}}" icon-on="icon-Menu" ui-sref="root.app.menu"><ion-nav-view name="tab-menu"></ion-nav-view></ion-tab></ion-tabs><modal data="modal" template="templates/directives/popup-message.html"></modal>',controller:"AppController",controllerAs:"app",data:{footer:!1}}).state("welcome",{url:"/welcome",cache:!1,template:'<div class="main-img"><div class="logo"><logo-title></logo-title></div><div class="content welcome-page-content height-100"><div class="row row-bottom navigation-content responsive-sm position-bottom"><div class="col"><div class="row" ng-if="!disableSignUp"><div class="col"><a href="#/signup" class="button main-button width-100 button-full" ng-if="!demoAccountCreateAfterSignup && !signUpURL">{{translation.get_started}}</a> <a href="{{signUpURL}}" target="_blank" class="button main-button width-100 button-full" ng-if="signUpURL">{{translation.get_started}}</a> <a href="#/signup?accountType=live" class="button main-button width-100 button-full" ng-if="demoAccountCreateAfterSignup && !signUpURL">{{translation.sign_up}}</a> <a href="#/signup?accountType=demo" class="button main-button width-100 button-transparent button-transparent-white" ng-if="demoAccountCreateAfterSignup && !signUpURL">{{translation.sign_up_demo}}</a></div></div><div class="row languageSelector" ng-style="{\'margin-top\': languageSelectorMarginTop || 0}"><div class="content white welcome-message width-80"><div ng-if="!disableSignUp" id="login-btn-container" on-tap="authType===\'webtrader\' ? navigate(\'login-webtrader\') : navigate(\'login\')" class="width-100"><span>{{translation.already_member}}</span> <span class="underline-none login">{{translation.log_in}}</span></div></div><div class="content" ng-if="languages.length > 1"><div class="localization-wrapper"><div class="localization-area"><language-select languages="languages" callback="updateLang(item)"></language-select></div></div></div></div><div class="row" ng-if="disableSignUp"><a href="#/login" ng-if="authType === \'newforex\'" class="button main-button width-100 button-full">{{translation.log_in}}</a> <a href="#/login-webtrader" ng-if="authType === \'webtrader\'" class="button main-button width-100 button-full">{{translation.log_in}}</a></div></div></div></div></div>',controller:"WelcomeController",data:{footer:!1}}).state("login",{url:"/login",cache:!1,template:'<ion-view class="login"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'welcome\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.sign_in}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row mt-08"><div class="col text-right"><a href="#/forgetpassword" class="underline-none">{{::translation.forgot_password}}</a></div></div><form class="list padding" name="form" ng-submit="login(form)" novalidate><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.email.$invalid && !form.email.$pristine) || (form.$submitted && form.email.$invalid) }"><input type="email" name="email" keyboard-watcher ng-model="loginForm.email" ng-minlength="4" ng-maxlength="80" ng-pattern="validator(\'email\')" class="has-context-menu" required> <span class="input-label">{{::translation.emailRegistration}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.email.$error" ng-if="form.email.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.password.$invalid && !form.password.$pristine) || (form.$submitted && form.password.$invalid) }"><input type="{{showPassword?\'text\':\'password\'}}" name="password" ng-model="loginForm.password" required keyboard-watcher ng-minlength="6" ng-maxlength="24" class="has-context-menu"> <span class="input-label">{{::translation.password}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.password.$error" ng-if="form.password.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.passwordRequired}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div><ion-checkbox class="mt-10 border-0 font-14 show-password" ng-model="showPassword">{{::translation.show_password}}</ion-checkbox><button class="button button-block main-button button-full" type="submit">{{::translation.sign_in}}</button><div class="content" ng-if="template === \'social\'"><div class="sub-details text-center padding add-line font-11" on-tap="navigate(\'welcome\')">{{::translation.signinWith}}</div><div class="social"><button class="button button-social font-14" on-tap="signinWithGoogle()" type="button" ng-if="socialAuthService.isProviderReady(\'google\')"><i class="button-google"></i> Google</button> <button class="button button-social font-14" on-tap="signinWithFacebook()" type="button" ng-if="socialAuthService.isProviderReady(\'facebook\')"><i class="button-facebook"></i> Facebook</button></div></div></form><div class="content" ng-if="!disableSignUp"><div class="sub-details text-center padding add-line font-11" on-tap="navigate(\'welcome\')">{{::translation.new_bdbfx}}</div><div class="padding"><button ng-if="!signUpURL" class="button button-block button-transparent" on-tap="navigate(\'signup\')">{{::translation.new_account}}</button> <a ng-if="signUpURL" href="{{signUpURL}}" target="_blank" class="button button-block button-transparent">{{translation.new_account}}</a></div><div class="sub-info text-center padding font-12">{{::translation.login_bottom_text}}</div></div><modal data="modal"></modal></ion-content></ion-view>',controller:"LoginController",data:{footer:!1}}).state("login-webtrader",{url:"/login-webtrader",cache:!1,template:'<ion-view class="login"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'welcome\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.sign_in}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form class="list padding" name="form" ng-submit="login(form)" novalidate><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.login.$invalid && !form.login.$pristine) || (form.$submitted && form.login.$invalid) }"><input type="number" name="login" keyboard-watcher ng-model="loginForm.login" ng-minlength="2" ng-maxlength="16" ng-pattern="validator(\'number\')" class="has-context-menu" required> <span class="input-label">{{::translation.login}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.login.$error" ng-if="form.login.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.password.$invalid && !form.password.$pristine) || (form.$submitted && form.password.$invalid) }"><input type="{{showPassword?\'text\':\'password\'}}" name="password" ng-model="loginForm.password" required keyboard-watcher ng-minlength="6" ng-maxlength="24" class="has-context-menu"> <span class="input-label">{{::translation.password}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.password.$error" ng-if="form.password.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.passwordRequired}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" ng-class="{ \'has-error\' : (form.source.$invalid && !form.source.$pristine) || (form.$submitted && form.source.$invalid) }"><ion-radio ng-value="source.demo" name="source" class="text-transform-capitalize" ng-model="loginForm.source" ng-required="true">{{::translation.demo}}</ion-radio><ion-radio ng-value="source.live" name="source" class="text-transform-capitalize" ng-model="loginForm.source" ng-required="true">{{::translation.live}}</ion-radio></div><div class="messages font-12" ng-messages="form.source.$error" ng-if="form.source.$dirty || form.$submitted"><div class="help-block mt-10" ng-message="required">Please select server</div></div><ion-checkbox class="mt-10 border-0 font-14 show-password" ng-model="showPassword">{{::translation.show_password}}</ion-checkbox><button class="button button-block main-button button-full" type="submit">{{::translation.sign_in}}</button></form><modal data="modal"></modal></ion-content></ion-view>',controller:"LoginWebtraderController",data:{footer:!1}}).state("login-otp",{url:"/otp",cache:!1,template:'<ion-view class="login"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'login\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.enterOTPCode}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row mt-08"><div class="col text-right"><a href="#/login" class="col underline-none button-link">{{::translation.backToLogin}}</a></div></div><form class="list" name="form" ng-submit="login(form)" novalidate><form name="loginOTP" novalidate><div class="padding"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.otpCode.$invalid && !form.otpCode.$pristine) || (form.$submitted && form.otpCode.$invalid) }"><input type="text" name="otpCode" ng-model="loginForm.otpCode" ng-pattern="validator.otpCode" ng-minlength="6" ng-maxlength="24" keyboard-watcher required> <span class="input-label">{{::translation.enterOTPCode}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.otpCode.$error" ng-if="form.otpCode.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div></div><div class="padding"><button class="button button-block main-button button-full" ng-disabled="otpCode.$invalid">{{::translation.login}}</button></div></form></form><modal data="modal"></modal></ion-content></ion-view>',controller:"LoginOTPController",params:{loginData:void 0},data:{footer:!1}}).state("signup",{url:"/signup",cache:!1,template:'<ion-view class="signup"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'welcome\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light">{{::translation.signup}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form class="padding" id="signup" name="form" novalidate ng-submit="doRegistration(form)"><signup-default ng-if="template === \'default\'"></signup-default><signup-long ng-if="template === \'long\'"></signup-long><signup-social ng-if="template === \'social\'"></signup-social><div class="row p-0"><button type="submit" class="button button-block text-transform-uppercase button-full">{{::translation.continue}}</button></div></form><div class="row text-center padding-bottom"><a href="#/login" class="col underline-none button-link">{{::translation.have_account}}</a></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content></ion-view>',controller:"SignupController",resolve:{disableSignUp:["$q","constants",function(e,t){return t.disableSignup?e.reject():e.resolve()}]},data:{footer:!1}}).state("signupPersonalProfile",{url:"/signup/personalProfile",cache:!1,template:'<ion-view class="registration-long" ng-class="{\'hidden-content\': autoUpdatePersonalDetails}"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.assets\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.account_registration}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="padding pb-0">{{::translation.completeRegistration}}</div><form class="padding" id="createAccount" name="form" novalidate><personal-details ng-if="pageState === 0"></personal-details><personal-details-regulated ng-if="pageState === 1"></personal-details-regulated><div class="pt-15"><button type="button" class="button button-block button-full text-transform-uppercase" on-tap="updatePersonalDetails(form)">{{::translation.next}}</button></div></form><div class="row text-center padding-bottom" ng-if="useDemoAccounts && !isRegulated"><a href="#" class="col underline-none" on-tap="switchDemoAccount()">{{::translation.continue_demo}}</a></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content></ion-view>',controller:"PersonalProfileController",resolve:{location:["LocationService",p("Signup Personal Profile - Webmobile")]},data:{footer:!1}}).state("signupQuestionnaire",{url:"/signup/questionnaire",cache:!1,template:'<ion-view class="assessment-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.signup}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="padding"><h4 class="pb-0 text-center">{{translation[currentQuestionGroup]}}</h4><div ng-repeat="question in currentQuestionnaireGroup" ng-if="isVisible(question)"><question question="question" control="control"></question></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal><modal-dialog data="modalDialogData" on-ok="modalDialogData.onOk()" on-cancel="modalDialogData.onCancel()"></modal-dialog></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><button class="button button-block button-full" on-tap="submit()">{{::translation.submit}}</button></div></div></ion-footer-bar></ion-view>',controller:"QuestionnaireController",resolve:{location:["LocationService",p("Signup Questionnaire - Webmobile")]},data:{footer:!1}}).state("forgetpassword",{url:"/forgetpassword",cache:!1,template:'<ion-view class="password-assistance"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'login\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.password_assistance}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="content padding font-15">{{::translation.password_assistance_text}}</div><form name="forgetPassword" novalidate><div class="list padding"><div class="form-group item-input item-stacked-label mb-10 mt-10 pl-0 bottom-border" ng-class="{ \'has-error\' : forgetPassword.email.$invalid && !forgetPassword.email.$pristine }"><input type="email" name="email" ng-model="assistance.email" ng-minlength="5" ng-maxlength="50" ng-pattern="validator.email" keyboard-watcher required> <span class="input-label">{{::translation.emailRegistration}}</span></div><div class="messages" ng-messages="forgetPassword.email.$error" ng-if="forgetPassword.email.$dirty"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div></div><div class="padding"><button class="button button-block main-button button-full" on-tap="restorePassword()" ng-disabled="forgetPassword.$invalid">{{::translation.continue}}</button></div></form><h5 class="title padding mg-0 font-22 roboto-bold">{{::translation.email_changed}}</h5><div class="content padding font-15">{{::translation.email_changed_text}}</div><modal data="modal" template="templates/directives/popup-message.html" close="10"></modal></ion-content></ion-view>',controller:"PasswordAssistanceController",resolve:{},data:{footer:!1}}).state("accountFrozen",{url:"/accountFrozen",cache:!1,template:'<ion-view id="accountFrozen"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.frozenAccount}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col"><div class="title roboto-bold font-16">{{::translation.frozenAccountTitle}}</div></div></div><div class="row"><div class="col"><div class="content font-14">{{::translation.frozenAccountText}}</div></div></div></ion-content><ion-footer-bar class="invest-buttons"><div class="row p-0"><div class="col"><button class="button button-block button-blue" on-tap="sendTicket()">{{::translation.logout}}</button></div></div></ion-footer-bar></ion-view>',controller:"AccountFrozenController",resolve:{},data:{footer:!1}}).state("createFirstAccount",{url:"/createFirstAccount",cache:!1,template:'<ion-view id="createFirstAccount"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.openTradingAccount}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col"><div class="title roboto font-24">{{::translation.openTradingAccountTitle}}</div></div></div><div class="row" ng-if="!constants.skipCreateFirstAccountPage"><div class="col"><div class="content roboto font-18">{{::translation.openTradingAccountText}}</div></div></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar class="invest-buttons" ng-if="!constants.skipCreateFirstAccountPage"><div class="row p-0"><div class="col"><button class="button button-block button-blue" on-tap="createAccount()">{{::translation.openTradingAccount}}</button></div></div></ion-footer-bar></ion-view>',controller:"CreateFirstAccountController",resolve:{},data:{footer:!1}}).state("root.app.updatepassword",{url:"/updatepassword",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.updatePassword}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form class="padding" name="form" id="form" novalidate ng-submit="changePassword(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 bottom-border" ng-class="{ \'has-error\' : (form.oldPassword.$invalid && !form.oldPassword.$pristine) || (form.$submitted && form.oldPassword.$invalid) }"><input type="password" name="oldPassword" ng-model="auth.oldPassword" ng-pattern="validator.password" ng-minlength="6" ng-maxlength="12" keyboard-watcher required> <span>{{::translation.enterCurrentPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.oldPassword.$error" ng-if="form.oldPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 bottom-border" ng-class="{ \'has-error\' : (form.newPassword.$invalid && !form.newPassword.$pristine) || (form.$submitted && form.newPassword.$invalid) }"><input type="password" name="newPassword" ng-model="auth.password" ng-minlength="6" ng-maxlength="12" ng-pattern="validator(\'password\')" keyboard-watcher required passwordmix> <span>{{::translation.enterNewPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.newPassword.$error" ng-if="form.newPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div><div class="form-group item-input item-stacked-label bottom-border mb-15 mt-10 pl-0" ng-class="{ \'has-error\' : (form.confirmPassword.$invalid && !form.confirmPassword.$pristine) || (form.$submitted && form.confirmPassword.$invalid) }"><input type="password" name="confirmPassword" ng-model="auth.confirmPassword" compare-to="auth.password" keyboard-watcher required> <span>{{::translation.reEnterPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.confirmPassword.$error" ng-if="form.confirmPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="compareTo">{{::translation.messages.password_not_matched}}</div></div></form><div class="content"><div class="row"><div class="col"><div class="roboto-bold font-20">{{::translation.securePassword}}</div></div></div><div class="row"><div class="col"><ul class="custom-list font-14 padding pt-0"><li>{{::translation.useCharacters}}</li><li>{{::translation.samePassword}}</li><li>{{::translation.usePersonalDetails}}</li></ul></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit" class="for"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"UpdatePasswordController"}},resolve:{location:["LocationService",p("Update Password - Webmobile")]},data:{footer:!1}}).state("root.app.2fa",{url:"/2fa",cache:!1,views:{"tab-menu":{
template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.manageSecurity}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="otp-content"><div class="step-wrapper layout-col padding"><div class="layout-row"><div class="enable2fa-wrapper"><label class="layout-row"><input type="checkbox" ng-model="otp.enabled" ng-change="OnOtpChange()"> <span>{{::translation.enable2FA}}</span></label></div></div></div><div class="step-wrapper layout-col padding"><div class="layout-row" ng-if="!user.otpEnabled && otp.enabled"><div class="layout-column"><div class="layout-row">{{::translation.yourGAC}}:</div><div class="layout-row just-center gac-wrapper"><input type="text" name="secret" readonly class="gac-pandats" value="{{otp.secret}}"><div class="copyToCB" ng-click="copyToClipBoard()"><i class="icon ion-ios-copy-outline"></i></div></div><div class="layout-row be-sure padding-bottom">{{::translation.backupGAC}}</div><div class="layout-row">{{::translation.scanQRCodeGoogleAuth}}</div><div class="layout-row qrcode-pandats just-center"><div class="qrcode-wrapper" ng-if="otp.qrcode"><img ng-src="{{otp.qrcode}}"></div></div></div></div><div class="layout-row" ng-if="!user.otpEnabled && !otp.enabled"><div class="layout-col" ng-bind-html="translation.otp_description"></div></div><div class="layout-row" ng-if="user.otpEnabled !== otp.enabled"><form class="layout-col" name="form" id="form" novalidate ng-submit="verifyOtp()"><input type="submit" id="submit" value="Submit" style="display:none"><div class="layout-row">{{::translation.enterYourOTP}}</div><div class="layout-row otp-wrapper"><div class="layout-column"><div class="form-group item-input item-stacked-label mb-15 pl-0 bottom-border" ng-class="{ \'has-error\' : (form.otpCode.$invalid && !form.otpCode.$pristine) || (form.$submitted && form.otpCode.$invalid) }"><input type="text" name="otpCode" ng-model="otp.code" ng-pattern="validator.otpCode" ng-minlength="6" ng-maxlength="24" keyboard-watcher required> <span>{{::translation.enterOTPCode}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.otpCode.$error" ng-if="form.otpCode.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div></div></div></form></div></div><modal data="modal"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0" ng-if="user.otpEnabled !== otp.enabled"><div class="col"><button class="button button-block button-full" on-tap="verifyOtp()"><span>{{::translation.verifyOTP}}</span></button></div></div></ion-footer-bar></ion-view>',controller:"OtpController"}},resolve:{twoFAEnabled:["$q","constants",function(e,t){return t.enable2FA?e.resolve():e.reject()}]},data:{footer:!1}}).state("root.app.uploadDocuments",{url:"/menu/uploadDocuments",cache:!1,views:{"tab-menu":{template:'<ion-view class="uploaddocument-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.accountVerification}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col helper-text"><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationAuthenticate}}</div><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationCamera}}</div></div></div><div class="documents-list"><ion-list><ion-item class="list card" ng-repeat="category in categories" on-tap="navigate(\'root.app.uploadDocumentsCategories\', {category: category})"><span class="item-content"><span class="title"><i class="icon" ng-class="\'icon-\' + category.name"></i> <span class="roboto">{{::translation[category.name]}}</span></span> <i class="icon ion-chevron-right float-right"></i></span></ion-item></ion-list></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col col-10 align-self"><i class="icon ion-locked font-24 helper-text"></i></div><div class="col helper-text font-14 roboto lh-reset">{{::translation.verificationProtected}}</div></div></ion-footer-bar></ion-view>',controller:"UploadDocumentsController"}},resolve:{depositValue:["$q","$ionicLoading","DocumentService",function(e,t,n){return t.show({noBackdrop:!0}),n.initDocuments()}],location:["LocationService",p("Upload Documents (Categories) - Webmobile")]},data:{footer:!1}}).state("root.app.viewQuestionnaire",{url:"/menu/viewQuestionnaire",cache:!1,views:{"tab-menu":{template:'<ion-view class="viewQuestionnaire-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.viewQuestionnaire}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="padding"><div class="group-pandats" ng-repeat="group in questionGroups"><div class="groupName-pandats">{{translation[group.group]}}</div><div ng-repeat="question in group.questions" class="question-item-pandats"><question question="question" control="control" view-only="true"></question></div></div></ion-content></ion-view>',controller:"ViewQuestionnaireController"}},resolve:{location:["LocationService",p("View Questionnaire - Webmobile")]},data:{footer:!1}}).state("root.app.verificationSumsub",{url:"/menu/verificationsumsub",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.uploadDocuments}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="otp-content"><div id="idensic" class="pandats-idensic"></div></ion-content></ion-view>',controller:"VerificationSumsubController"}},resolve:{location:["LocationService",p("Upload Documents - Webmobile")]},data:{footer:!1}}).state("root.app.verification-v2",{url:"/menu/verification-v2",cache:!1,views:{"tab-menu":{template:'<ion-view class="uploaddocument-page documents-v2"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.accountVerification}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="has-header"><div ng-if="!isApproved"><div class="row"><div class="col helper-text"><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationAuthenticate}}</div><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationCamera}}</div></div></div><div class="documents" ng-repeat="document in documents"><div class="list card v2"><div class="item roboto-medium item-divider"><div>{{::translation[document.type] || document.origType}}</div><div class="docStatus" ng-if="document.status.toLowerCase() === \'pending\'"><span>{{::translation[document.status.toLowerCase()]}}</span> <i class="icon icon-pending-doc"></i></div></div><div class="item pt-0 pb-0"><div class="form-group item-input p-0 mt-0 mb-15" id="subtype"><div class="input-label p-5 pl-15 pr-15 roboto-light disabled" ng-if="document.subType">{{translation[document.selectedSubType.id] || document.selectedSubType.title }}</div><div class="input-label p-5 pl-15 pr-15 roboto-light" ng-if="!document.subType" on-tap="showSubtype(document)"><div ng-if="document.selectedSubType">{{translation[document.selectedSubType.id] || document.selectedSubType.title }}</div><div class="placeholder" ng-if="!document.selectedSubType">{{ translation[document.type + "_text"] || translation.requirement_description }}</div></div><div class="icon ion-chevron-right" ng-if="!document.subType"></div></div><div class="row mb-15"><div class="col font-12 roboto-medium upload-button p-0" ng-repeat="side in document.images"><label ng-if="!document.uploaded[side]" class="row"><div><i class="icon icon-Touch_UP_Icon font-24"></i> <input type="file" file-id="{{document.id}}" file-side="{{side}}" onchange="angular.element(this).scope().uploadFile(event)"></div><div><span ng-if="side === 0">{{::translation.front_upload}}</span> <span ng-if="side === 1">{{::translation.back_upload}}</span></div></label> <label ng-if="document.uploaded[side]" class="row uploaded"><div class="title"><input type="file" file-id="{{document.id}}" file-side="{{side}}" onchange="angular.element(this).scope().uploadFile(event)"><div><span ng-if="side === 0">{{::translation.front_uploaded}}</span> <span ng-if="side === 1">{{::translation.back_uploaded}}</span></div></div><div class="replace"><i class="icon ion-refresh font-24"></i><div>{{::translation.replace_image}}</div></div></label></div></div><div class="row twoSideOption" ng-if="document.selectedSubType && document.selectedSubType.images === 0 && document.hasUploaded && !document.uploaded[1]"><div class="col"><ion-checkbox class="border-0 modern-checkbox font-12" name="twoSided" ng-click="toggleImage(document)">{{::translation.two_sided}}</ion-checkbox></div></div></div></div><hr></div><br></div><div class="approved-pandats vertical-align text-center" ng-if="isApproved"><div class="icon-documents no-actions-required-icon"></div><div class="layout-row approved-title-pandats font-36 text-center">{{translation.all_set}}</div><div class="layout-row approved-text-pandats muted"><div>{{translation.account_approved1}}</div></div></div><modal data="modal" template="templates/directives/popup-message.html" close="10"></modal></ion-content></ion-view>',controller:"VerificationV2Controller"}},resolve:{location:["LocationService",p("Upload Documents - Webmobile")]},data:{footer:!1}}).state("root.app.uploadDocumentsCategories",{url:"/menu/uploadDocuments/categories/:category",cache:!1,views:{"tab-menu":{template:'<ion-view class="uploaddocument-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.uploadDocuments\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.uploadDocuments}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row" ng-if="baseCategories.length <= 1"><div class="col helper-text"><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationAuthenticate}}</div><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationCamera}}</div></div></div><div class="row" ng-if="baseCategories.length > 1"><div class="col helper-text font-14 roboto lh-reset pl-10 pr-10">{{::translation.selectOne}}</div></div><div class="documents-list"><ion-list><ion-item class="list card" ng-repeat="category in baseCategories" ui-sref="root.app.uploadDocumentsFiles({baseCategory: category, categoryName: categoryName, categoryVideoLink: categoryVideoLink})"><span class="roboto">{{::translation[category]}}</span> <i class="icon ion-chevron-right float-right"></i></ion-item></ion-list></div><div class="layout-row play-video-area-pandats" ng-if="categoryVideoLink"><div class="layout-column full-width"><div class="layout-row just-center play-video-description" ng-bind-html="translation.need_doc_upload_help"></div><div class="layout-row just-center"><div class="layout-column"><a class="layout-row play-video-btn-pandats just-center" ng-href="{{categoryVideoLink}}" target="_blank"><span class="layout-column shrinkable just-center"><span class="layout-row just-end">{{::translation.play_video}}</span></span> <span class="layout-column just-center"><span class="play-icon"></span></span></a></div></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col col-10 align-self"><i class="icon ion-locked font-24 helper-text"></i></div><div class="col helper-text font-14 roboto lh-reset">{{::translation.verificationProtected}}</div></div></ion-footer-bar></ion-view>',controller:"UploadDocumentsCategoriesController"}},resolve:{location:["LocationService",p("Upload Documents - Webmobile")]},data:{footer:!1},params:{categoryName:null,categoryVideoLink:null}}).state("root.app.uploadDocumentsOther",{url:"/menu/uploadDocuments/other",cache:!1,views:{"tab-menu":{template:'<ion-view class="uploaddocument-page upload-other"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.uploadDocuments\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.uploadDocuments}}</span></ion-nav-title><div class="height-auto bar bar-subheader"><div class="row card"><div class="col"><div class="font-16 roboto file-title lh-reset">{{::translation.uploadDocuments}}</div></div><div class="col col-30 upload"><div ng-if="documentModel.isUploading">{{documentModel.uploadStatus}} %</div><div ng-if="documentModel.status ===\'new\'" ng-show="!documentModel.isUploading"><label><i class="icon icon-Upload font-24"></i> <input type="file" onchange="angular.element(this).scope().uploadFile(event)"></label></div></div></div></div></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><ion-list><ion-item class="card" ng-repeat="file in files"><div class="row"><div class="col col-70"><div class="font-16 roboto file-title lh-reset">{{file.originalFileName}}</div><div class="font-12 roboto lh-reset file-icons"><i class="icon ion-close" ng-if="file.status ===\'rejected\'"></i> <i class="icon ion-refresh" ng-if="file.status ===\'pending\'"></i> <i class="icon ion-checkmark" ng-if="file.status ===\'approved\'"></i> <span class="file-subtitle" ng-class="file.status ===\'approved\'?\'blue-text\':\'helper-text\'">{{translation[file.status]}}</span></div></div><div class="col col-30 remove"><div ng-if="file.status ===\'pending\'"><button on-tap="deleteDocument(file)" class="button icon ion-close"></button></div></div></div></ion-item></ion-list><modal data="modal" template="templates/directives/popup-message.html" close="10"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col col-10 align-self"><i class="icon ion-locked font-24 helper-text"></i></div><div class="col helper-text font-14 roboto lh-reset">{{::translation.verificationProtected}}</div></div></ion-footer-bar></ion-view>',controller:"UploadDocumentsOtherController"}},resolve:{location:["LocationService",p("Upload Other Documents - Webmobile")]},data:{footer:!1}}).state("root.app.uploadDocumentsFiles",{url:"/menu/uploadDocuments/files/:baseCategory",cache:!1,views:{"tab-menu":{template:'<ion-view class="uploaddocument-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.uploadDocumentsCategories\',{direction: \'right\', category: category})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.uploadDocuments}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col helper-text"><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.uploadInfoPicture}}</div></div></div><div class="documents-list"><ion-list><ion-item class="list card" ng-repeat="file in files"><div class="row"><div class="col"><div class="font-16 roboto file-title lh-reset">{{::translation[file.type]}}</div><div class="font-12 roboto lh-reset file-icons"><i class="icon ion-close" ng-if="file.status===\'rejected\'"></i> <i class="icon ion-refresh" ng-if="file.status===\'pending\'"></i> <i class="icon ion-checkmark" ng-if="file.status===\'approved\'"></i> <span class="file-subtitle" ng-class="file.status===\'approved\'?\'blue-text\':\'helper-text\'">{{translation[file.status]}}</span></div></div><div class="col col-30 upload"><div ng-if="file.isUploading">{{file.uploadStatus}} %</div><div ng-if="file.status===\'new\' || file.status===\'pending\'" ng-show="!file.isUploading"><label><i class="icon icon-Upload font-24"></i> <input type="file" file-id="{{file.type}}" onchange="angular.element(this).scope().uploadFile(event)"></label></div></div></div></ion-item></ion-list></div><modal data="modal" template="templates/directives/popup-message.html" close="10"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col col-10 align-self"><i class="icon ion-locked font-24 helper-text"></i></div><div class="col helper-text font-14 roboto lh-reset">{{::translation.verificationProtected}}</div></div></ion-footer-bar></ion-view>',controller:"UploadDocumentsFilesController"}},resolve:{location:["LocationService",p("Upload Documents - Webmobile")]},data:{footer:!1},params:{categoryName:null,categoryVideoLink:null}}).state("root.app.inviteFriends",{url:"/menu/inviteFriends",cache:!1,views:{"tab-menu":{template:'<ion-view class="invite-friends-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.invite_a_friend}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="padding"><div class="layout-row"><span ng-bind-html="translation.referral_program_content"></span></div><div class="layout-row sub-head-pandats font-18">{{::translation.share_your_invite_link}}</div><div class="layout-row horizontal-break-pandats"></div><div class="layout-row"><div class="layout-column full-width"><div class="layout-row link-input-wrapper"><div class="layout-column shrinkable"><input type="text" name="link" class="full-height link-input-pandats" ng-model="inputModel.link" readonly></div><div class="layout-column"><button class="button button-blue font-14" type="button" ng-click="copyLink()">{{::translation.copy_link}}</button></div></div><div class="layout-row just-center sns-area"><button socialshare socialshare-provider="facebook" socialshare-url="{{inputModel.link}}" class="layout-column sns-button-pandats just-center"><span class="layout-row just-center full-width"><span class="flag1-pandats flag-icon-pandats flag-icon-pandats-facebook-rounded"></span>&nbsp;Facebook</span></button><div socialshare socialshare-provider="twitter" socialshare-url="{{inputModel.link}}" class="layout-column sns-button-pandats just-center sns-twitter"><span class="layout-row just-center full-width"><span class="flag1-pandats flag-icon-pandats flag-icon-pandats-twitter-rounded"></span>&nbsp;Twitter</span></div></div><div class="child-pages-list"><ion-list><ion-item class="list card" ui-sref="root.app.referralActivity"><span class="title"><i class="icon" ng-class="\'icon-\'"></i> <span class="roboto">{{::translation.referral_activity_n_total_earnings}}</span></span> <i class="icon ion-chevron-right float-right"></i></ion-item></ion-list></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col col-10 align-self"><i class="icon ion-locked font-24 helper-text"></i></div><div class="col helper-text font-14 roboto lh-reset"></div></div></ion-footer-bar></ion-view>',controller:"InviteFriendsController"}},resolve:{inviteFriends:["$q","constants","Storage","API",function(e,t,n,a){return n.get("friendInviteActive")?a.getFriendInvites().then(function(e){n.set("inviteFriends",e.friendInvitesDetails)}):e.reject()}]},data:{footer:!1}}).state("root.app.referralActivity",{url:"/menu/referralActivity",cache:!1,views:{"tab-menu":{template:'<ion-view class="referral-activity-page"><ion-nav-bar class="bar-stable" align-title="center"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.inviteFriends\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title text-left text-align="left"><span class="nav-title roboto-light font-14">{{::translation.referral_activity_n_total_earnings}}</span></ion-nav-title></ion-nav-bar><ion-content class="page-content full-height has-footer" scroll="false"><div class="layout-column full-height"><div class="layout-row font-18 sub-head-pandats">{{::translation.your_referral_activity}}</div><div class="layout-row shrinkable tabs-wrapper"><div class="layout-column full-width"><div class="layout-row head-section"><div class="layout-column" ng-class="{\'active\': activeTab === \'signed_up\'}"><div on-tap="activeTab = \'signed_up\'">{{translation.signed_up}} ({{signedUpFriends.length}})</div></div><div class="layout-column" ng-class="{\'active\': activeTab === \'qualified\', \'readonly\': !qualifiedFriends.length}"><div on-tap="activeTab = \'qualified\'">{{translation.qualified}} ({{qualifiedFriends.length}})</div></div></div><div class="layout-row shrinkable"><div class="layout-column full-width signed-up-area" ng-if="activeTab === \'signed_up\'"><div class="layout-row full-height"><div class="layout-column full-width" ng-if="signedUpFriends.length"><div class="layout-row table-header-pandats"><div class="layout-column shrinkable">Full Name</div><div class="layout-column">Sign-up date</div></div><ion-content class="layout-row table-rows-pandats shrinkable" has-header="false" has-footer="false"><div class="layout-column rows-content full-width" scrollbar-y="true" overflow-scroll="true"><div class="layout-row" ng-repeat="signedUpFriend in signedUpFriends"><div class="layout-column shrinkable">{{signedUpFriend.firstName}}&nbsp;{{signedUpFriend.lastName}}</div><div class="layout-column">{{signedUpFriend.regDate*1000 | date: \'yyyy-MM-dd\': clientTimeZone}}</div></div></div></ion-content></div><div class="layout-column full-width blank-area just-center content-gap12" ng-if="!signedUpFriends.length"><div class="layout-row just-center"><div class="layout-column">There are no sign-ups yet<br>Invite your friends and get started</div></div><div class="layout-row just-center"><div class="layout-row double-users-img"></div></div></div></div></div><div class="layout-column full-width qualified-area" ng-if="activeTab === \'qualified\'"><div class="layout-row full-height"><div class="layout-column full-width"><div class="layout-row table-header-pandats"><div class="layout-column shrinkable">Full Name</div><div class="layout-column">Sign-up date</div></div><ion-content class="layout-row table-rows-pandats shrinkable" has-header="false" has-footer="false"><div class="layout-column rows-content full-width" scrollbar-y="true" overflow-scroll="true"><div class="layout-row" ng-repeat="qualifiedFriend in qualifiedFriends"><div class="layout-column shrinkable">{{qualifiedFriend.firstName}}&nbsp;{{qualifiedFriend.lastName}}</div><div class="layout-column">{{qualifiedFriend.regDate*1000 | date: \'yyyy-MM-dd\': clientTimeZone}}</div></div></div></ion-content></div></div></div></div></div></div><div class="layout-row"><div class="layout-column full-width earnings-area"><div class="layout-row font-18 sub-head-pandats">{{translation.total_earnings}}</div><div class="layout-row horizontal-break-pandats"></div><div class="layout-row shrinkable" ng-if="totalEarnings"><div class="layout-column full-width earnings-bar content-gap10"><div class="layout-row full-height"><div class="layout-column full-width just-center"><div class="layout-row just-center font-18">{{translation.your_earnings}}</div><div class="layout-row"><div class="layout-column"><div class="layout-row coins-stack-img"></div></div><div class="layout-column shrinkable just-center"><div class="layout-row just-center font-40 earnings-wrapper">$&nbsp;{{totalEarnings}}</div></div><div class="layout-column"><div class="layout-row coins-stack-img"></div></div></div><div class="layout-row just-center font-18">{{translation.keep_it_up}}</div></div></div></div></div><div class="layout-row shrinkable" ng-if="!totalEarnings"><div class="layout-column full-width blank-area just-center content-gap12"><div class="layout-row just-center" ng-bind-html="translation.once_you_make_deposit"></div><div class="layout-row just-center"><div class="layout-row coin-dollar-img"></div></div></div></div></div></div></div></ion-content></ion-view>',controller:"ReferralActivityController"}},resolve:{},data:{footer:!1}}).state("root.app.helpdesk",{url:"/helpdesk",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">Help Desk</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"></ion-content></ion-view>',controller:"HelpDeskController"}},resolve:{location:["LocationService",p("HeldDesk - Webmobile")]},data:{footer:!1}}).state("root.app.assets",{url:"/assets/:category",cache:!0,views:{"tab-assets":{template:'<ion-view enable-menu-with-back-views="false" hide-back-button="true" id="assets"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-buttons side="right"><div class="button-bar"><button class="display-flex pl-15 padding-right fake-button" on-tap="openSearchAssets()"><i class="icon ion-search align-self"></i></button> <button class="display-flex pl-15 padding-right fake-button" on-tap="openPopover($event)"><i class="icon ion-android-more-vertical align-self font-17"></i></button></div></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.instruments}}</span></ion-nav-title><div class="bar bar-subheader text-center subheader-color"><div class="item-input-assets-search" ng-if="showSearch"><i class="icon ion-search placeholder-icon"></i> <input type="text" ng-model="search.outputName" placeholder="{{::translation.search_placeholder}}"></div><ion-scroll class="menuWrap font-14" scrollbar-x="false" direction="x" has-bouncing="false" ng-if="!showSearch"><div class="titleHolder" on-tap="toggleCategory(\'FAVORITES\')"><span class="titleItem" ng-class="{ \'active-category\': selectedIndex == \'FAVORITES\' }">{{::translation.favorites}}</span></div><div class="titleHolder" on-tap="toggleCategory(\'QUICK ACCESS\')" ng-if="quickAccessExists"><span class="titleItem" ng-class="{ \'active-category\': selectedIndex == \'QUICK ACCESS\' }">{{::translation.quickaccess || \'QUICK ACCESS\'}}</span></div><div class="titleHolder" ng-repeat="category in categories" on-tap="toggleCategory(category.id)"><span class="titleItem" ng-class="{ \'active-category\': selectedIndex == category.id }">{{::translation[category.name] || category.name.toUpperCase()}}</span></div></ion-scroll></div><ion-content overflow-scroll="true" class="view-area has-subheader"><ion-list><ion-item collection-repeat="asset in assets | filter:customSearch | orderBy: \'displayOrder\' track by asset.id" class="quote-item pt-11" item-height="70px" item-width="100%"><asset-item></asset-item></ion-item></ion-list><div ng-if="selectedIndex == \'FAVORITES\' && assets.length == 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.no_favorites}}</div><div class="roboto font-18 text-center mt-08 muted">{{::translation.add_favorites}}</div></div></div></ion-content><sms-verification ng-if="user.loggedIn"></sms-verification></ion-view>',controller:"AssetsController"}},resolve:{location:["LocationService",p("Assets - Webmobile")]},data:{footer:!0}}).state("root.app.assetInfo",{url:"/assets/:assetId/info",cache:!0,views:{"tab-assets":{
template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false" class="modify-trade"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.chart\',{direction: \'right\', assetId: asset.id})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title"><span>{{::asset.outputName}}</span> <span>{{::translation.info}}</span></span></ion-nav-title><ion-content scrollbar-y="true" overflow-scroll="true" id="asset-info"><div class="asset-info"><ion-list><ion-item><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.underlying_asset_name}}</span></div><div class="col-50 info-value">{{::asset.displayName}}</div></div></ion-item><ion-item ng-if="asset.expiration"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.contract_expiration}}</span></div><div class="col-50 info-value">{{::asset.expiration | date:\'dd MMMM yyyy\'}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.spread}}</span></div><div class="col-50 info-value">{{ asset.spread > 0 ? asset.spreadCalc() : translation[\'floating\'] || \'Floating\'}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.digits}}</span></div><div class="col-50 info-value">{{::asset.digits}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.lot_value}}</span></div><div class="col-50 info-value"><span>{{::asset.contractSize}}</span> <span>{{::asset.unit}}</span></div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.min_max_volume}}</span></div><div class="col-50 info-value"><span>{{::asset.minLot}}</span> - <span>{{::asset.maxLot}}</span></div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.volume_step}}</span></div><div class="col-50 info-value">{{::asset.stepLot}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.leverage}}</span></div><div class="col-50 info-value">{{leverage}}</div></div></ion-item><ion-item><div class="row info no-border no-padding"><div class="col muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.requiredMargin}} (1 {{::translation.lot}})</span></div></div><div class="row info no-padding"><div class="col info-value"><div><span>{{::translation.long}}:</span> <span>{{margin.ask | cryptoCurrency :asset.currency :asset.digits}}</span> <span ng-if="user.activeTradingAccount.currency != asset.currency"><span>({{margin.askCurrency | cryptoCurrency : user.activeTradingAccount.currency : user.currencyDigits}})</span></span></div><div><span>{{::translation.short}}:</span> <span>{{margin.bid | cryptoCurrency :asset.currency :asset.digits}}</span> <span ng-if="user.activeTradingAccount.currency != asset.currency"><span>({{margin.bidCurrency | cryptoCurrency : user.activeTradingAccount.currency : user.currencyDigits}})</span></span></div></div></div></ion-item><ion-item ng-if="!constants[\'assetInfoSwapDisabled\']"><div class="row info no-border no-padding"><div class="col muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.swap}} (1 {{::translation.lot}})</span></div></div><div class="row info no-padding"><div class="col info-value"><div><span>{{::translation.long}}:</span> <span ng-if="asset.swapsCode === 0">{{swap.long}} {{::translation.points}}</span> <span ng-if="asset.swapsCode === 4">{{swap.long | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span> <span ng-if="asset.swapsCode === 5">{{swap.long | number:2}} %</span> <span ng-if="asset.swapsCode > 0 && asset.swapsCode < 4"><span>{{swap.long | cryptoCurrency :asset.swapsCurrency :asset.digits}}</span> <span ng-if="user.activeTradingAccount.currency != asset.swapsCurrency"><span>({{swap.longCurrency | cryptoCurrency:user.activeTradingAccount.currency:user.currencyDigits}})</span></span></span></div><div><span>{{::translation.short}}:</span> <span ng-if="asset.swapsCode === 0">{{swap.short}} {{::translation.points}}</span> <span ng-if="asset.swapsCode === 4">{{swap.short | cryptoCurrency : user.activeTradingAccount.currency : user.currencyDigits}}</span> <span ng-if="asset.swapsCode === 5">{{swap.short | number:2}} %</span> <span ng-if="asset.swapsCode > 0 && asset.swapsCode < 4"><span>{{swap.short | cryptoCurrency :asset.swapsCurrency :asset.digits}}</span> <span ng-if="user.activeTradingAccount.currency != asset.swapsCurrency"><span>({{swap.shortCurrency | cryptoCurrency : user.activeTradingAccount.currency : user.currencyDigits}})</span></span></span></div></div></div></ion-item><ion-item ng-if="!constants[\'assetInfoTradingHoursDisabled\']"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.trading_hours}}</span></div><div class="col-50 info-value"><div class="row time-range" ng-repeat="day in tradingTimes()"><div class="col-50 text-left"><span>{{::translation.daysOfWeek[day] ||constants.daysOfWeek[day]}}</span>:</div><div class="col-50"><div ng-repeat="range in tradingTimesFormat[day]"><span>{{range}}</span></div></div></div></div></div></ion-item><ion-item ng-if="description"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.description}}</span></div><div class="col-50 info-value"><div ng-bind-html="description" class="asset-description-list text-left"></div></div></div></ion-item></ion-list></div></ion-content></ion-view>',controller:"AssetInfoController"}},resolve:{location:["LocationService",p("Asset Info - Webmobile")]},data:{footer:!1}}).state("root.app.invest",{url:"/assets/:category/:assetId/:action",cache:!1,views:{"tab-assets":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false" class="invest-page"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.assets\',{category: category, direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation[action.replace(\'_limit\',\'\').replace(\'_stop\',\'\')]}} {{::asset.outputName }}</span></ion-nav-title><ion-content scrollbar-y="true" overflow-scroll="true"><div class="invest-top"><div><div class="row pt-0"><div class="col rate pt-0"><div ng-if="action === \'buy\' || action === \'buy_stop\' || action === \'buy_limit\'"><h1 class="mb-3 buy invest-value-color roboto-bold">{{ asset.markupAsk() | number:asset.digits}}</h1></div><div ng-if="action === \'sell\' || action === \'sell_stop\' || action === \'sell_limit\'"><h1 class="mb-3 sell invest-value-color roboto-bold">{{ asset.markupBid() | number:asset.digits}}</h1></div><div class="roboto-light font-14 pb-10">{{::translation.currentRate}}</div></div></div><div class="row invest-amount inc-dec pb-0" inc-dec><div class="col amount-area"><button ng-click="upDown({ model: investAmount, digits: 2, step: asset.stepLot * 100, direction: \'decrease\', min: asset.minLot, max: asset.maxLot })" on-touch="upDownRepeat({ model: investAmount, digits: 2, step: asset.stepLot * 100, direction: \'decrease\', min: asset.minLot, max: asset.maxLot })" on-release="upDownStop()" class="button button-down"><i class="ion-android-remove"></i></button><div class="wrapper-amount" on-tap="inputFocus(investAmount,\'investAmount.value\',asset.minLot,asset.maxLot,2,\'volume in lot\')"><span class="font-15 text-center" style="display: block;">{{::translation.volumeInLot}}</span><div type="text" ng-model="investAmount.value" class="divTxt amount" input-mask-min="{{asset.minLot}}" input-mask-max="{{asset.maxLot}}">{{investAmount.value}}</div></div><button ng-click="upDown({ model: investAmount, digits: 2, step: asset.stepLot * 100, direction: \'increase\', min: asset.minLot, max: asset.maxLot })" on-touch="upDownRepeat({ model: investAmount, digits: 2, step: asset.stepLot * 100, direction: \'increase\', min: asset.minLot, max: asset.maxLot })" on-release="upDownStop()" class="button button-up"><i class="ion-android-add"></i></button></div></div><div class="row p-0 pb-7 text-center"><div class="col p-0"><span class="pip-value roboto-light font-14">{{::translation.pipValue}} = <span>{{pipValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></span></div></div></div><div class="row pb-5 pt-0"><div class="col text-center pr-0" ng-class="{\'bordered\': !constants[\'hideRequiredMargin\']}"><div class="roboto-light margin-value pb-5 font-13">{{::translation.availableFunds}}</div><div class="font-13">{{pnlData.freeMargin | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div><div class="font-11 convertusd" ng-if="showConvertToUsd">({{availableFundsUsd() | cryptoCurrency:\'USD\':2}})</div></div><div class="col text-center pl-0" ng-if="!constants[\'hideRequiredMargin\']"><div class="roboto-light margin-value pb-5 font-13">{{::translation.requiredMargin}}</div><div class="font-13">{{requiredMargin() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div><div class="font-11 convertusd" ng-if="showConvertToUsd">({{requiredMarginUsd() | cryptoCurrency:\'USD\':2}})</div></div></div></div><div class="invest-profitloss"><div class="row pt-0" ng-if="!hideSlTp"><div class="row p-0 sltpWrap"><div class="col-40"><div class="row equal-height pl-0"><div class="col pl-1"><ion-checkbox class="checkbox-square checkbox-label transparent-checkbox" ng-class="{\'checked\': loss.checked}" ng-model="loss.checked" ng-disabled="sltpAutoSet"><div>{{::translation.stopLoss}}</div></ion-checkbox></div></div><div ng-if="loss.checked || profit.checked"><div class="row equal-height pl-0"><div class="col"><div type="{{loss.pips.keyboard}}" class="invest-input" ng-class="loss.pips.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'pips\'); inputFocus(loss.pips,\'loss.pips.value\',0,10000000,0,\'Loss Pips\')">{{loss.pips.value}}</div></div></div></div><div class="row equal-height pl-0"><div class="col"><div type="{{loss.rate.keyboard}}" class="invest-input" ng-class="loss.rate.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'rate\'); inputFocus(loss.rate,\'loss.rate.value\',0,100000000,asset.digits,\'Loss Price\')">{{loss.rate.value}}</div></div></div></div><div class="row equal-height pl-0"><div class="col"><div class="invest-money"><span ng-if="loss.checked">{{ calcLossValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div></div><div class="col-20 center-text padding-none"><div class="row equal-height"><div class="col"></div></div><div class="center-text padding-none" ng-if="loss.checked || profit.checked"><div class="row equal-height"><div class="col">{{::translation.pips}}</div></div><div class="row equal-height"><div class="col">{{::translation.price}}</div></div><div class="row equal-height"><div class="col center-transform">{{::translation.value}}</div></div></div></div><div class="col-40"><div class="row equal-height pr-0"><div class="col pl-1"><ion-checkbox class="checkbox-square checkbox-label transparent-checkbox" ng-class="{\'checked\': profit.checked}" ng-model="profit.checked" ng-disabled="sltpAutoSet"><div>{{::translation.takeProfit}}</div></ion-checkbox></div></div><div ng-if="loss.checked || profit.checked"><div class="row equal-height pr-0"><div class="col"><div type="{{profit.pips.keyboard}}" class="invest-input" ng-class="profit.pips.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'pips\'); inputFocus(profit.pips,\'profit.pips.value\',0,10000000, 0,\'Profit Pips\')">{{profit.pips.value}}</div></div></div></div><div class="row equal-height pr-0"><div class="col"><div type="{{profit.rate.keyboard}}" class="invest-input" ng-class="profit.rate.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'rate\'); inputFocus(profit.rate,\'profit.rate.value\',0,100000000, asset.digits,\'Profit Price\')">{{profit.rate.value}}</div></div></div></div><div class="row equal-height pr-0"><div class="col"><div class="invest-money"><span ng-if="profit.checked">{{ calcProfitValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div></div></div></div><div class="row reach"><div class="col p-0 reachWrap"><div class="row equal-height pl-1"><div class="col p-0"><ion-checkbox class="checkbox-square checkbox-label transparent-checkbox" ng-class="{\'checked\': reach.checked}" ng-model="reach.checked"><div>{{::translation.only}} <span>{{::translation[action.replace(\'_limit\',\'\').replace(\'_stop\',\'\')]}}</span> {{::translation.when_reach}}</div></ion-checkbox></div></div><div class="col-40"><div class="row equal-height pl-0" ng-if="reach.checked"><div class="col"><div type="text" class="invest-input" ng-class="reach.value" ng-model="reach.value" on-tap="inputFocus(reach,\'reach.value\',0,100000000,asset.digits,\'Reach\')">{{reach.value | number:asset.digits}}</div></div></div></div></div></div></div><modal data="modal" template="templates/directives/popup-order.html"></modal><div class="row"><div class="row" ng-if="isKeyboardShow"><div class="col"><keyboard data="keyboardModelName" on-load-callback="myCallback(arg1)"></keyboard></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons" ng-show="isFooter"><div class="row p-0"><div class="col"><button class="button invest-buy-button button-full" ng-class="action" on-tap="createTrade()" ng-disabled="!validate()">{{::translation[action]}}</button></div></div></ion-footer-bar></ion-view>',controller:"InvestController"}},resolve:{location:["LocationService",p("New Trade - Webmobile")]},data:{footer:!1}}).state("root.app.modifyTrade",{url:"/trades/modify/:orderId",cache:!1,views:{"tab-opentrades":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false" class="modify-trade"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.openTrades\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.modify}}</span></ion-nav-title><ion-content scrollbar-y="true" overflow-scroll="true"><div class="trade-info pb-5"><div class="row sub-title"><div class="col title align-self"><h3 class="roboto-light font-28 mb-0">{{trade.asset.outputName}}</h3></div><div class="col labels align-self" ng-class="trade.action === \'buy\' ? \'buy\' : \'short\'"><div class="label action roboto font-14 text-transform-capitalize">{{translation[trade.action]}}</div><div class="label lots roboto font-14"><span>{{trade.lots | number:2}}</span> <span>{{::translation.lots}}</span></div></div></div><div class="row price"><div class="col roboto-light border-right pt-0 pb-0"><div class="muted font-14">{{::translation.market_rate}}</div><div class="roboto"><span ng-class="trade.closePriceDirection === \'asset-up\' ? \'up\' : \'down\'"><i class="icon font-16" ng-class="trade.closePriceDirection === \'asset-up\' ? \'ion-android-arrow-up\' : \'ion-android-arrow-down\'"></i></span> <span ng-class="trade.closePriceDirection">{{trade.closePrice() | number:trade.asset.digits}}</span></div></div><div class="col roboto-light border-right text-center pt-0 pb-0"><div class="muted font-15">{{::translation.difference}}</div><div class="roboto">{{trade.pendingDistance() | number:2}}</div></div><div class="col roboto-light text-right pt-0 pb-0"><div class="muted font-15">{{::translation.open_rate}}</div><div class="roboto">{{trade.openPrice | number:trade.asset.digits}}</div></div></div><div class="row lh-2 font-14"><div class="col border-top muted">{{::translation.tradeno}}</div><div class="col border-top text-right">#<span>{{trade.orderId}}&zwj;</span></div></div><div class="row lh-2 font-14"><div class="col border-top muted">{{::translation.datetime}}</div><div class="col border-top text-right">{{trade.openTime | date:\'dd/MM/yyyy HH:mm:ss\':clientTimeZone}}</div></div><div class="row lh-2 font-14"><div class="col border-top muted">{{::translation.swap_commission}}</div><div class="col border-top text-right">{{trade.swap | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="row lh-2 font-14" ng-if="constants[\'showCommission\']"><div class="col border-top muted">{{::translation.commission}}</div><div class="col border-top text-right">{{trade.commission | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="row pb-0"><div class="col border-top text-right profit pt-0"><div class="help-wrapper"><span class="roboto font-14">{{::translation.profit}}</span> <span class="roboto font-14">{{ trade.profit() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div><div class="invest-profitloss p-0 col"><div class="row p-0 mb-10"><div class="col-40"><div class="row equal-height pl-0"><div class="col pl-5"><ion-checkbox class="checkbox-square checkbox-label modern-checkbox" ng-class="{\'checked\': loss.checked}" ng-model="loss.checked" ng-disabled="sltpAutoSet"><div>{{::translation.stopLoss}}</div></ion-checkbox></div></div><div class="row equal-height pl-0"><div class="col"><div type="{{loss.pips.keyboard}}" class="invest-input" ng-class="loss.pips.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'pips\'); inputFocus(loss.pips,\'loss.pips.value\',0,10000000,0,\'Loss Pips\')">{{loss.pips.value}}</div></div></div></div><div class="row equal-height pl-0"><div class="col"><div type="{{loss.rate.keyboard}}" class="invest-input" ng-class="loss.rate.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'rate\'); inputFocus(loss.rate,\'loss.rate.value\',0,100000000,trade.asset.digits,\'Loss Price\')">{{loss.rate.value | number: trade.asset.digits}}</div></div></div></div><div class="row equal-height pl-0"><div class="col"><div class="invest-money"><span ng-if="loss.checked">{{ calcLossValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div><div class="col-20 center-text"><div class="row equal-height"><div class="col"></div></div><div class="row equal-height"><div class="col">{{::translation.pips}}</div></div><div class="row equal-height"><div class="col">{{::translation.price}}</div></div><div class="row equal-height"><div class="col center-transform">{{::translation.value}}</div></div></div><div class="col-40"><div class="row equal-height pr-0"><div class="col pl-5"><ion-checkbox class="checkbox-square checkbox-label modern-checkbox" ng-class="{\'checked\': profit.checked}" ng-model="profit.checked" ng-disabled="sltpAutoSet"><div>{{::translation.takeProfit}}</div></ion-checkbox></div></div><div class="row equal-height pr-0"><div class="col"><div type="{{profit.pips.keyboard}}" class="invest-input" ng-class="profit.pips.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'pips\'); inputFocus(profit.pips,\'profit.pips.value\',0,10000000,0,\'Profit Pips\')">{{profit.pips.value}}</div></div></div></div><div class="row equal-height pr-0"><div class="col"><div type="{{profit.rate.keyboard}}" class="invest-input" ng-class="profit.rate.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'rate\'); inputFocus(profit.rate,\'profit.rate.value\',0,100000000,trade.asset.digits,\'Profit Price\')">{{profit.rate.value | number: trade.asset.digits}}</div></div></div></div><div class="row equal-height pr-0"><div class="col"><div class="invest-money"><span ng-if="profit.checked">{{ calcProfitValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div></div></div><modal data="modal" template="templates/directives/popup-order.html"></modal><div ng-if="isKeyboardShow"><keyboard data="keyboardModelName" on-load-callback="myCallback(arg1)"></keyboard></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons" ng-show="isFooter"><div class="row p-0 mt-0"><div class="col"><button class="button button-transparent button-full" on-tap="openPartialClose()">{{::translation.closeTrade}}</button></div><div class="col"><button class="button invest-buy-button button-full button-blue" on-tap="modifyTrade()" ng-disabled="!validate() || !isModified()">{{::translation.modifyTrade}}</button></div></div><div class="closeTradeOptions" ng-show="showPartialClose"><div class="closeTradeTitle row"><span>{{::translation.closeTrade}}</span></div><div class="row partialOption"><div class="row"><div class="col p-0"><div class="row invest-amount inc-dec p-0" inc-dec><div class="col amount-area"><button ng-click="upDown({ model: investAmount, digits: 2, step: trade.asset.stepLot * 100, direction: \'decrease\', min: trade.asset.minLot, max: trade.lots })" on-touch="upDownRepeat({ model: investAmount, digits: 2, step: trade.asset.stepLot * 100, direction: \'decrease\', min: trade.asset.minLot, max: trade.lots })" on-release="upDownStop()" class="button button-down"><i class="ion-android-remove"></i></button><div class="wrapper-amount" on-tap="inputFocus(investAmount, \'investAmount.value\', trade.asset.stepLot, trade.lots, 2, \'Volume\')"><div class="font-15 text-center amountTitle">{{::translation.volume}}</div><div type="text" ng-model="investAmount.value" class="divTxt amount" input-mask-min="{{trade.asset.minLot}}" input-mask-max="{{trade.lots}}">{{investAmount.value}}</div></div><button ng-click="upDown({ model: investAmount, digits: 2, step: trade.asset.stepLot * 100, direction: \'increase\', min: trade.asset.minLot, max: trade.lots })" on-touch="upDownRepeat({ model: investAmount, digits: 2, step: trade.asset.stepLot * 100, direction: \'increase\', min: trade.asset.minLot, max: trade.lots })" on-release="upDownStop()" class="button button-up"><i class="ion-android-add"></i></button></div></div></div></div></div><div class="row actions"><div class="col"><button class="button button-transparent button-full" on-tap="cencelPartialClose()">{{::translation.no}}</button></div><div class="col"><button class="button button-default button-full" on-tap="closeTrade()" ng-disabled="!closeTradeValidate()"><span ng-if="investAmount.value == trade.lots || investAmount.value == 0">{{::translation.yes}}</span> <span ng-if="investAmount.value != trade.lots && investAmount.value > 0">{{::translation.close}} {{investAmount.value}}</span></button></div></div></div></ion-footer-bar></ion-view>',controller:"ModifyTradeController"}},resolve:{location:["LocationService",p("Modify Trade - Webmobile")]},data:{footer:!1}}).state("root.app.chart",{url:"/assets/:category/:assetId/chart",cache:!1,views:{"tab-assets":{template:'<ion-view><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.assets\',{direction: \'right\', category: category})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"><button class="fake-button buttons-right" on-tap="app.navigate(\'root.app.assetInfo\',{direction:\'left\', assetId: asset.id})"><i class="icon ion-ios-information-outline align-self"></i></button></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::asset.outputName}}</span></ion-nav-title><ion-content scrollbar-y="true" overflow-scroll="true" class="chart-section"><div class="chart-graph-wrapper"><div class="chart-toolbar"><div class="dropdown range" on-tap="dropdown.chartRange = ! dropdown.chartRange"><div class="selectItem"><span>{{translation[chart.range.title] || chart.range.title}}</span> <i class="icon icon-expand_more"></i></div><ul class="wrapper-dropdown-list" ng-show="dropdown.chartRange"><li ng-repeat="chartRange in chartRangeParams" ng-class="chart.range.id == chartRange.id && \'selected\'"><span on-tap="changeTimeRange(chartRange)">{{translation[chartRange.title] || chartRange.title}}</span></li></ul></div><div class="dropdown type" on-tap="dropdown.chartType = ! dropdown.chartType"><span class="selectItem"><span><i ng-class="\'icon-\' + chart.type.type" class="icon icon-item"></i></span> <i class="icon icon-expand_more"></i></span><ul class="wrapper-dropdown-list" ng-show="dropdown.chartType"><li ng-repeat="chartType in chartTypes" ng-class="chart.type.type == chartType.type && \'selected\'"><span><i ng-class="\'icon-\' + chartType.type" on-tap="chart.type = chartType" class="icon icon-item"></i></span></li></ul></div></div><pro-chart asset="asset" chart="chart"></pro-chart></div></ion-content><ion-footer-bar class="chart-footer"><div class="row chart-buttons"><div class="col col-50 pr-7"><button class="button chart-sell-button width-100" on-tap="app.navigate(\'root.app.invest\', {assetId:asset.id, action:\'sell\', category: category})" ng-if="user.activeTradingAccount"><span class="chart-button-wrapper"><span class="name-button white roboto-light">{{::translation.sell}}</span> <i class="icon ion-android-arrow-down white"></i> <span class="value-button white">{{asset.markupBid() | number:asset.digits }}</span></span></button> <button class="button chart-sell-button width-100" on-tap="app.navigate(\'signupPersonalProfile\')" ng-if="!user.activeTradingAccount"><span class="chart-button-wrapper"><span class="name-button white roboto-light">{{::translation.sell}}</span> <i class="icon ion-android-arrow-down white"></i> <span class="value-button white">{{asset.markupBid() | number:asset.digits }}</span></span></button></div><div class="col col-50 pl-7"><button class="button chart-buy-button width-100" on-tap="app.navigate(\'root.app.invest\', {assetId:asset.id, action:\'buy\', category: category})" ng-if="user.activeTradingAccount"><span class="chart-button-wrapper"><span class="name-button white roboto-light">{{::translation.buy}}</span> <i class="icon ion-android-arrow-up white"></i> <span class="value-button white">{{asset.markupAsk() | number:asset.digits }}</span></span></button> <button class="button chart-buy-button width-100" on-tap="app.navigate(\'signupPersonalProfile\')" ng-if="!user.activeTradingAccount"><span class="chart-button-wrapper"><span class="name-button white roboto-light">{{::translation.buy}}</span> <i class="icon ion-android-arrow-up white"></i> <span class="value-button white">{{asset.markupAsk() | number:asset.digits }}</span></span></button></div></div></ion-footer-bar><modal data="modal"></modal></ion-view>',controller:"ChartController"}},resolve:{location:["LocationService",p("Chart - Webmobile")]},data:{footer:!1}}).state("root.app.favorites",{url:"/assets/favorites",cache:!1,views:{"tab-assets":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.assets\',{category: \'favorites\', direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.add_to_favorites}}</span></ion-nav-title><div class="bar bar-subheader text-center subheader-color"><ion-scroll class="menuWrap font-14" scrollbar-x="false" direction="x" has-bouncing="false"><div class="titleHolder" ng-repeat="category in categories" on-tap="toggleCategory(category.id)"><span class="titleItem" ng-class="{ \'active-category\': selectedIndex == category.id }">{{::translation[category.name] || category.id}}</span></div></ion-scroll></div><div class="item-input-favorites"><i class="icon ion-search placeholder-icon"></i> <input type="text" ng-model="search.outputName" placeholder="{{::translation.search_placeholder}}"></div></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="assets-search-offset view-area-favorites"><ion-list><ion-item collection-repeat="asset in assets | filter:search | orderBy: \'-isTradeable\' track by asset.id" class="quote-item favorites-item" item-height="60px"><div class="asset-item name-item align-self roboto width-100"><div class="row p-0"><div class="favorite-name col p-0 black font-18 roboto-light">{{asset.outputName}}</div><div class="icon-right-item" on-tap="toggle(asset.id)"><i ng-class="asset.isFavorite ? \'ion-checkmark-circled\' : \'ion-android-add\'"></i></div></div></div></ion-item></ion-list></ion-content></ion-view>',controller:"FavoritesController"}},resolve:{location:["LocationService",p("Favorites - Webmobile")]},data:{footer:!1}}).state("root.app.favorites-edit",{url:"/assets/favorites-edit",cache:!1,views:{"tab-assets":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.assets\',{category: \'favorites\',direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.edit_favorites}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><ion-list show-delete="true" show-reorder="true"><ion-item ng-repeat="asset in favorites" class="quote-item edit-favorites-item"><ion-reorder-button class="ion-navicon" on-reorder="moveItem(asset, $fromIndex, $toIndex)"></ion-reorder-button><div class="roboto-light font-18 title-favorites black">{{::asset.name}}</div><ion-delete-button class="ion-android-close" on-tap="removeItem(asset)"></ion-delete-button></ion-item></ion-list><div ng-if="favorites.length == 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.no_favorites}}</div></div></div></ion-content></ion-view>',controller:"FavoritesEditController"}},resolve:{location:["LocationService",p("Edit Favorites - Webmobile")]},data:{footer:!1}}).state("root.app.openTrades",{url:"/trades/open",cache:!1,views:{"tab-opentrades":{
template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.openPositions}}</span></ion-nav-title><div class="height-auto open-trades-subheader bar bar-subheader pt-0 pb-0"><div class="row pt-0"><div class="col" ng-if="!constants[\'marginUtilization\']"><div class="info-details white font-13"><span>{{::translation.marginLevel}}</span> <span>{{ calcMarginPercents() | number:2 }}%</span></div><div class="state"><div class="progress-line" ng-style="marginLevel()"></div><div class="progress-line-bg"></div></div></div><div class="col" ng-if="constants[\'marginUtilization\']"><div class="info-details white font-13"><span>{{::translation.marginUtilization}}</span> <span>{{ calcMarginUtilization() | number:2 }}%</span></div><div class="state"><div class="progress-line" ng-style="{\'width\': getMarginUtilizationBarWidth() }"></div><div class="progress-line-bg"></div></div></div></div><div class="row accountData"><div class="pl-7 font-13 text-transform-uppercase"><div class="color-title label text-transform-capitalize">{{::translation.freeMargin}}</div><div class="white val">{{ pnl.data.freeMargin | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div><div class="font-12 convertusd" ng-if="showConvertToUsd">({{freeMarginToUsd() | cryptoCurrency:\'USD\':2}})</div></div><div class="color-title font-13 text-transform-uppercase"><div class="color-title label">{{::translation.usedFunds}}</div><div class="white val"><span ng-if="user.activeTradingAccount">{{ user.activeTradingAccount.margin | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div><div class="font-12 convertusd" ng-if="showConvertToUsd">({{usedFundsToUsd() | cryptoCurrency:\'USD\':2}})</div></div><div class="color-title font-13 text-transform-uppercase"><div class="color-title label">{{::translation.accountValue}}</div><div class="white val">{{ pnl.data.equity | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div><div class="font-12 convertusd" ng-if="showConvertToUsd">({{equityToUsd() | cryptoCurrency:\'USD\':2}})</div></div></div></div><ion-content class="order-content order-content-subheader has-subfooter" ng-class="showConvertToUsd ? \'convertUsd\':\'\'"><ion-list><ion-item class="item trade-item order-items" height="95px" item-height="95" item-width="100%" collection-repeat="trade in trades | orderBy: \'openTime\':true" track by trade.orderId on-tap="app.navigate(\'root.app.modifyTrade\', {orderId: trade.orderId, direction:\'left\'})"><open-trade-item></open-trade-item></ion-item></ion-list><div ng-if="trades.length === 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.no_opentrades}}</div></div></div></ion-content><div class="bar bar-subfooter total-profit"><div class="row p-0 roboto"><div class="col-60 profit-title">{{::translation.totalPL}}:</div><div class="col-40 profit-value roboto-medium" ng-class="pnl.data.totalProfit >= 0 ? \'up\':\'down\'"><div>{{pnl.data.totalProfit | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div><div class="profit-value-usd font-13" ng-if="showConvertToUsd">({{totalProfitUsd() | cryptoCurrency:\'USD\':2}})</div></div></div></div></ion-view>',controller:"OpenTradeController"}},resolve:{location:["LocationService",p("Open Trades - Webmobile")]},data:{footer:!0}}).state("root.app.pendingTrades",{url:"/trades/pending",cache:!1,views:{"tab-pending":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.pendingOrders}}</span></ion-nav-title><ion-content overflow-scroll="true" class="pending-content"><ion-list ng-if="trades.length > 0"><ion-item class="item trade-item pending-items" height="95px" item-height="95" item-width="100%" collection-repeat="trade in trades | orderBy: \'openTime\':true" on-tap="app.navigate(\'root.app.modifyPendingTrade\', {orderId: trade.orderId, direction:\'left\'})"><pending-trade-item></pending-trade-item></ion-item></ion-list><div ng-if="trades.length == 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.no_pending}}</div></div></div></ion-content></ion-view>',controller:"OpenTradeController"}},resolve:{location:["LocationService",p("Pending Trades - Webmobile")]},data:{orderFilter:"pending",footer:!0}}).state("root.app.modifyPendingTrade",{url:"/trades/pending/modify/:orderId",cache:!1,views:{"tab-pending":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.pendingTrades\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation[trade.action.replace(\'_limit\',\'\').replace(\'_stop\',\'\')]}} {{::trade.asset.outputName }}</span></ion-nav-title><ion-content scrollbar-y="true" overflow-scroll="true"><div class="invest-top"><div><div class="row pt-0"><div class="col rate pt-0"><div ng-if="trade.action === \'buy\' || trade.action === \'buy_stop\' || trade.action === \'buy_limit\'"><h1 class="mb-3 invest-value-color roboto-bold">{{ trade.asset.markupAsk() | number:trade.asset.digits}}</h1></div><div ng-if="trade.action === \'sell\' || trade.action === \'sell_stop\' || trade.action === \'sell_limit\'"><h1 class="mb-3 invest-value-color roboto-bold">{{ trade.asset.markupBid() | number:trade.asset.digits}}</h1></div><div class="roboto-light font-14 pb-10">{{::translation.currentRate}}</div></div></div><div class="row invest-amount inc-dec pb-0" inc-dec><div class="col amount-area"><button ng-click="upDown({ model: reach, digits: trade.asset.digits, step: 1, direction: \'decrease\' })" on-touch="upDownRepeat({ model: reach, digits: trade.asset.digits, step: 1, direction: \'decrease\' })" on-release="upDownStop()" class="button button-down"><i class="ion-android-remove"></i></button><div class="wrapper-amount" on-tap="inputFocus(reach,\'reach.value\',0,100000000,trade.asset.digits,\'Rate\')"><span class="font-15 text-center" style="display: block;">{{::translation[trade.action.replace(\'_limit\',\'\').replace(\'_stop\',\'\')] + \' \' + translation.rateWhen }}</span><div type="text" ng-model="reach.value" class="divTxt amount">{{reach.value}}</div></div><button ng-click="upDown({ model: reach, digits: trade.asset.digits, step: 1, direction: \'increase\' })" on-touch="upDownRepeat({ model: reach, digits: trade.asset.digits, step: 1, direction: \'increase\' })" on-release="upDownStop()" class="button button-up"><i class="ion-android-add"></i></button></div></div><div class="row p-0 pb-7 text-center"><div class="col p-0"><span class="pip-value roboto-light font-14">{{::translation.distanceInPips}} = <span>{{ pendingDistance() | number:2}}</span></span></div></div></div><div class="row pb-5 pt-0"><div class="col text-center pr-0"><div class="roboto-light margin-value pb-5 font-13 border-right">{{::translation.availableFunds}}</div><div class="font-13 border-right">{{pnlData.freeMargin | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="col text-center pl-0"><div class="roboto-light margin-value pb-5 font-13 border-left">{{::translation.requiredMargin}}</div><div class="font-13 border-left">{{requiredMargin() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div></div></div><div class="invest-profitloss height-17-em"><div class="row pt-0"><div class="col-40"><div class="row equal-height"><div class="col pl-1"><ion-checkbox class="checkbox-square checkbox-label transparent-checkbox" ng-class="{\'checked\': loss.checked}" ng-model="loss.checked" ng-disabled="sltpAutoSet"><div>{{::translation.stopLoss}}</div></ion-checkbox></div></div><div class="row equal-height"><div class="col"><div type="{{loss.pips.keyboard}}" class="invest-input" ng-class="loss.pips.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'pips\'); inputFocus(loss.pips,\'loss.pips.value\',0,1000000,0,\'Loss Pips\')">{{loss.pips.value}}</div></div></div></div><div class="row equal-height"><div class="col"><div type="{{loss.rate.keyboard}}" class="invest-input" ng-class="loss.rate.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'rate\'); inputFocus(loss.rate,\'loss.rate.value\',0,100000000,trade.asset.digits,\'Loss Price\')">{{loss.rate.value | number: trade.asset.digits}}</div></div></div></div><div class="row equal-height"><div class="col"><div class="invest-money"><span ng-if="loss.checked">{{ calcLossValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div><div class="col-20 center-text"><div class="row equal-height"><div class="col"></div></div><div class="row equal-height"><div class="col">{{::translation.pips}}</div></div><div class="row equal-height"><div class="col">{{::translation.price}}</div></div><div class="row equal-height"><div class="col center-transform">{{::translation.value}}</div></div></div><div class="col-40"><div class="row equal-height"><div class="col pl-1"><ion-checkbox class="checkbox-square checkbox-label transparent-checkbox" ng-class="{\'checked\': profit.checked}" ng-model="profit.checked" ng-disabled="sltpAutoSet"><div>{{::translation.takeProfit}}</div></ion-checkbox></div></div><div class="row equal-height"><div class="col"><div type="{{profit.pips.keyboard}}" class="invest-input" ng-class="profit.pips.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'pips\'); inputFocus(profit.pips,\'profit.pips.value\',0,100000000,0,\'Profit Pips\')">{{profit.pips.value}}</div></div></div></div><div class="row equal-height"><div class="col"><div type="{{profit.rate.keyboard}}" class="invest-input" ng-class="profit.rate.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'rate\'); inputFocus(profit.rate,\'profit.rate.value\',0,100000000,trade.asset.digits,\'Profit Price\')">{{profit.rate.value | number: trade.asset.digits}}</div></div></div></div><div class="row equal-height"><div class="col"><div class="invest-money"><span ng-if="profit.checked">{{ calcProfitValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div></div></div><modal data="modal" template="templates/directives/popup-order.html"></modal><div class="row"><div class="row" ng-if="isKeyboardShow"><div class="col"><keyboard data="keyboardModelName" on-load-callback="myCallback(arg1)"></keyboard></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons" ng-show="isFooter"><div class="row p-0"><div class="col"><button class="button button-transparent button-full" on-tap="deleteTrade()">{{::translation.deleteOrder}}</button></div><div class="col"><button class="button invest-buy-button button-full button-blue" on-tap="modifyTrade()" ng-disabled="!validate() || !isModified()">{{ translation.modifyOrder }}</button></div></div></ion-footer-bar></ion-view>',controller:"ModifyPendingTradeController"}},resolve:{location:["LocationService",p("Modify Pending Trade - Webmobile")]},data:{footer:!1}}).state("root.app.closedTrades",{url:"/trades/closed",cache:!1,views:{"tab-closedtrades":{template:'<ion-view id="closedTrades" hide-back-button="true" enable-menu-with-back-views="false"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-buttons side="right"><div class="display-flex pt-10 padding-right" on-tap="showFilter()"><i class="icon ion-funnel font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.closedPositions}}</span></ion-nav-title></ion-nav-bar><div class="bar bar-subheader text-center subheader-color"><ion-scroll class="menuWrap font-14" scrollbar-x="false" direction="x" has-bouncing="false"><div class="titleHolder" on-tap="toggleCategory(key)" ng-repeat="(key,value) in constants.dateRange"><span class="titleItem" ng-if="key!==\'range\'" ng-class="{ \'active-category\': selectedRange == key }">{{ translation.dateRange[key] }}</span></div></ion-scroll></div><ion-content overflow-scroll="true" class="order-content has-subheader"><ion-list ng-if="trades.length > 0"><ion-item class="item trade-item order-items" height="135px" collection-repeat="trade in trades | orderBy: \'closeTime\':true"><closed-trade-item trade="trade"></closed-trade-item></ion-item></ion-list><div ng-if="trades.length == 0" class="vertical-align"><div class="vertical-align-item fullwidth"><div class="roboto-light font-36 text-center">{{::translation.no_closetrades}}</div></div></div></ion-content></ion-view>',controller:"ClosedTradeController"}},resolve:{location:["LocationService",p("Closed Trades - Webmobile")]},data:{footer:!0}}).state("root.app.menu",{url:"/menu",cache:!0,views:{"tab-menu":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false"><div class="more-menu-header bar bar-subheader pt-0 pb-15"><div class="row pt-0"><div class="col-25 account-logo"><div><i class="ion-person"></i></div></div><div class="col-75 account-details pl-10"><h1 class="roboto-light">{{ user.firstName }} {{ user.lastName }}</h1><div class="roboto-light white font-16"><span ng-if="!user.activeTradingAccount.live">{{::translation.demo_account}}:</span> <span ng-if="user.activeTradingAccount.live">{{::translation.live_account}}:</span> <span>{{ user.activeTradingAccount.login }}&zwj;</span></div></div></div></div><ion-content overflow-scroll="true" class="more-menu-content"><ion-list class="menu-list" ng-if="authType===\'newforex\'"><ion-item class="customLink" on-tap="openCustomLinkByLang(link)" ng-repeat="link in customLinks"><div class="item-content"><i class="icon-customLink"><img ng-src="{{link.icon}}"></i> <span class="font-16 roboto-light">{{ linkTitleByLang(link) }}</span></div></ion-item><ion-item ui-sref="root.app.manageAccounts"><i class="icon-ManageAccounts"></i> <span class="font-16 roboto-light">{{::translation.manage_accounts}}</span></ion-item><ion-item ui-sref="root.app.transactionHistory"><i class="icon-TransactionHistory"></i> <span class="font-16 roboto-light">{{::translation.transaction}}</span></ion-item><ion-item ui-sref="root.app.personalDetails"><i class="icon-AccountDetails"></i> <span class="font-16 roboto-light">{{::translation.personalDetails}}</span></ion-item><ion-item ui-sref="root.app.updatepassword"><i class="icon-ChangePassword"></i> <span class="font-16 roboto-light">{{::translation.updatePassword}}</span></ion-item><ion-item ui-sref="root.app.2fa" ng-if="constants.enable2FA"><i class="icon-ChangePassword"></i> <span class="font-16 roboto-light">{{::translation.manageSecurity}}</span></ion-item><ion-item ui-sref="root.app.wallet"><i class="icon-Wallet"></i> <span class="font-16 roboto-light">{{::translation.deposit}}</span></ion-item><ion-item ui-sref="root.app.withdraw"><i class="icon-withdraw"></i> <span class="font-16 roboto-light">{{::translation.withdraw}}</span></ion-item><ion-item ui-sref="root.app.uploadDocuments" ng-hide="constants[\'hideAccountVerification\']" ng-if="!constants[\'verificationProvider\'] || constants[\'verificationProvider\'] === \'internal\'"><i class="icon-AccountVerification"></i> <span class="font-16 roboto-light">{{::translation.accountVerification}}</span></ion-item><ion-item ui-sref="root.app.verification-v2" ng-hide="constants[\'hideAccountVerification\']" ng-if="constants[\'verificationProvider\'] === \'internal-v2\'"><i class="icon-AccountVerification"></i><div class="verification-v2"><div class="font-16 roboto-light v2-title">{{::translation.accountVerification}}</div><div ng-class="verificationRequered ? \'verificationRequered\' : \'\'"></div></div></ion-item><ion-item ui-sref="root.app.verificationSumsub" ng-hide="constants[\'hideAccountVerification\']" ng-if="constants[\'verificationProvider\'] === \'sumsub\'"><i class="icon-AccountVerification"></i> <span class="font-16 roboto-light">{{::translation.accountVerification}}</span></ion-item><ion-item ui-sref="root.app.inviteFriends" ng-hide="!friendInviteActive"><i class="icon-accounts"></i> <span class="font-16 roboto-light">{{::translation.invite_a_friend}}</span></ion-item><ion-item ui-sref="root.app.viewQuestionnaire" ng-show="constants[\'viewQuestionnaireEnable\']"><i class="icon-list2"></i> <span class="font-16 roboto-light">{{::translation.viewQuestionnaire}}</span></ion-item><ion-item on-tap="logout()" class="log-out-item"><i class="icon-Logout"></i> <span class="font-16 roboto-light">{{::translation.logout}}</span></ion-item></ion-list><ion-list class="menu-list" ng-if="authType===\'webtrader\'"><ion-item on-tap="logout()" class="log-out-item"><i class="icon-Logout"></i> <span class="font-16 roboto-light">{{::translation.logout}}</span></ion-item></ion-list><div class="row p-0 pt-15"><div class="col" ng-if="constants.externalLinks[\'contactUs\']"><button type="button" ng-click="openLink(\'contactUs\')" class="button button-stable button-full">{{::translation.contact_us}}</button></div><div class="col" ng-if="constants.externalLinks[\'legal\']"><button type="button" ng-click="openLink(\'legal\')" class="button button-stable button-full">{{::translation.legal}}</button></div></div></ion-content></ion-view>',controller:"MenuController"}},resolve:{location:["LocationService",p("Menu - Webmobile")]},data:{footer:!0}}).state("root.app.manageAccounts",{url:"/menu/manageaccounts",cache:!1,views:{"tab-menu":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="manage-accounts"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})" ng-if="user.activeTradingAccount"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"><div class="button-bar" ng-if="user.activeTradingAccount && !(constants.hideTransferBetweenAccounts && constants[\'hideAddAccount\'])"><button class="display-flex pl-15 padding-right fake-button" on-tap="openPopover($event)"><i class="icon ion-android-more-vertical align-self font-17"></i></button></div></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.manage_accounts}}</span> <i class="icon"></i></ion-nav-title><div class="height-auto active-account-subheader bar bar-subheader" ng-if="user.activeTradingAccount"><div class="card active"><div class="item item-text-wrap"><h3 class="name">{{user.firstName}} {{user.lastName}}</h3><div class="content"><span ng-if="constants[\'customerTypeForTA\']" class="font-bold">{{user.activeTradingAccount.customerType}}</span> <span ng-if="constants[\'platformSelect\']" class="font-bold">{{translation[user.activeTradingAccount.tradingPlatform] || user.activeTradingAccount.tradingPlatform}}</span> {{user.activeTradingAccount.login}}&zwj;</div><div class="info pb-7 pt-5"><div class="layout-row just-space"><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.balance}}</div><div class="layout-row infoValues pb-7">{{ user.activeTradingAccount.balance | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="layout-col width-100" ng-if="showCredit"><div class="layout-row infoTitle">{{::translation.credit}}</div><div class="layout-row infoValues pb-7">{{ user.activeTradingAccount.credit | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.equity}}</div><div class="layout-row infoValues pb-7">{{ pnl.equity() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.available}}</div><div class="layout-row infoValues pb-7">{{ pnl.data.freeMargin | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div></div></div><div class="accountType" ng-if="!user.activeTradingAccount.live"><span class="demo">{{::translation.demo}}</span></div><div class="accountType" ng-if="user.activeTradingAccount.live"><span class="live">{{::translation.live}}</span></div></div></div></div><div class="row accounts-title bar" ng-class="{hasActive: user.activeTradingAccount}"><div class="col">{{user.activeTradingAccount ? translation.switchAccount : translation.chooseAccount}}</div></div><ion-content overflow-scroll="true" class="view-area accounts-content" ng-class="{hasActive: user.activeTradingAccount}"><div class="realAccounts"><div class="card inactive" ng-repeat="account in realAccounts"><div class="item item-text-wrap" on-tap="switchAccount(account.login, account.live)"><h3 class="name">{{account.name}}</h3><div class="content"><span ng-if="constants[\'customerTypeForTA\']" class="font-bold">{{account.customerType}}</span> <span ng-if="constants[\'platformSelect\']" class="font-bold">{{translation[account.tradingPlatform] || account.tradingPlatform}}</span> {{account.login}}&zwj;</div><div class="info pb-7 pt-5"><div class="layout-row just-space"><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.balance}}</div><div class="layout-row infoValues">{{account.balance | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100" ng-if="showCredit"><div class="layout-row infoTitle">{{::translation.credit}}</div><div class="layout-row infoValues">{{account.credit | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.equity}}</div><div class="layout-row infoValues">{{account.equity | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.available}}</div><div class="layout-row infoValues">{{account.freeMargin | cryptoCurrency :account.currency :user.currencyDigits}}</div></div></div></div><div class="accountType"><span>Live</span></div></div></div></div><div class="demoAccounts"><div class="card inactive" ng-repeat="account in demoAccounts"><div class="item item-text-wrap" on-tap="switchAccount(account.login, account.live)"><h3 class="name">{{account.name}}</h3><div class="content"><span ng-if="constants[\'customerTypeForTA\']" class="font-bold">{{account.customerType}}</span> <span ng-if="constants[\'platformSelect\']" class="font-bold">{{translation[account.tradingPlatform] || account.tradingPlatform}}</span> {{account.login}}&zwj;</div><div class="info pb-7 pt-5"><div class="layout-row just-space"><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.balance}}</div><div class="layout-row infoValues">{{account.balance | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100" ng-if="showCredit"><div class="layout-row infoTitle">{{::translation.credit}}</div><div class="layout-row infoValues">{{account.credit | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.equity}}</div><div class="layout-row infoValues">{{account.equity | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.available}}</div><div class="layout-row infoValues">{{account.freeMargin | cryptoCurrency :account.currency :user.currencyDigits}}</div></div></div></div><div class="accountType"><span>{{::translation.demo}}</span></div></div></div></div><modal data="modal" template="templates/directives/popup.html"></modal></ion-content></ion-view>',controller:"ManageAccountsController"}},resolve:{location:["LocationService",p("Manage Accounts - Webmobile")]},data:{footer:!1}}).state("root.app.manageAccountsAdd",{url:"/menu/manageaccounts/add",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.manageAccounts\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.addNewAccount}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form name="addAccountForm" class="pt-20 pr-16 pl-16" novalidate ng-submit="sendAccount(addAccountForm)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="row p-0"><div class="col pl-0 pr-0">{{::translation.accountType}}</div></div><div class="row p-0"><div class="col pt-0 pr-2 pb-0 pl-0"><button type="button" ng-click="toggleAccount(true)" class="button text-transform-uppercase button-full" ng-class="{\'button-transparent\': !liveAccont}">{{::translation.live}}</button></div><div class="col pt-0 pr-0 pb-0 pl-2" ng-if="useDemoAccounts"><button type="button" ng-click="toggleAccount(false)" class="button text-transform-uppercase button-full" ng-class="{\'button-transparent\': liveAccont}">{{::translation.demo}}</button></div></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-if="constants[\'platformSelect\']" id="platform" ng-class="{ \'has-error\' : (addAccountForm.platform.$invalid && !addAccountForm.platform.$untouched) || (addAccountForm.platform.$invalid && addAccountForm.$submitted)}"><select name="platform" class="no-appearance" ng-model="addAccount.platform" ng-options="platform.label for platform in platforms" required></select><span>{{::translation.platform}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="addAccountForm.platform.$error" ng-if="addAccountForm.platform.$dirty || addAccountForm.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" id="currency" ng-class="{ \'has-error\' : (addAccountForm.addAccountCurrency.$invalid && !addAccountForm.addAccountCurrency.$pristine) || (addAccountForm.addAccountCurrency.$invalid && addAccountForm.$submitted) }"><select name="addAccountCurrency" class="no-appearance" ng-model="addAccount.currency" ng-options="item.currency for item in currencies" required></select><span>{{::translation.accountCurrency}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="addAccountForm.addAccountCurrency.$error" ng-if="addAccountForm.addAccountCurrency.$dirty || addAccountForm.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-if="showLeverage" id="leverage" ng-class="{ \'has-error\' : (addAccountForm.addAccountLeverage.$invalid && !addAccountForm.addAccountLeverage.$untouched) || (addAccountForm.addAccountLeverage.$invalid && addAccountForm.$submitted)}"><select name="addAccountLeverage" class="no-appearance" ng-model="addAccount.leverage" ng-options="leverage for leverage in leverages" required></select><span>{{::translation.leverage}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="addAccountForm.addAccountLeverage.$error" ng-if="addAccountForm.addAccountLeverage.$dirty || addAccountForm.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-if="constants[\'customerTypeForTA\']" id="customerType" ng-class="{ \'has-error\' : (addAccountForm.addAccountCustomerType.$invalid && !addAccountForm.addAccountCustomerType.$untouched) || (addAccountForm.addAccountCustomerType.$invalid && addAccountForm.$submitted)}"><select name="addAccountCustomerType" class="no-appearance" ng-model="addAccount.customerType" ng-options="customerType.name for customerType in customerTypes" required></select><span>{{::translation.customerType}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="addAccountForm.addAccountCustomerType.$error" ng-if="addAccountForm.addAccountCustomerType.$dirty || addAccountForm.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div><div ng-if="!liveAccont"><div class="form-group item-input input-currency-symbol item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="initialDeposit" ng-class="{ \'has-error\' : (addAccountForm.addAccountInitialDeposit.$invalid && !addAccountForm.addAccountInitialDeposit.$pristine ) || (addAccountForm.addAccountInitialDeposit.$invalid && addAccountForm.$submitted) }"><input type="number" name="addAccountInitialDeposit" ng-model="addAccountDefaults.value" ng-min="addAccountDefaults.min" ng-max="addAccountDefaults.max" keyboard-watcher required> <span>{{::translation.demoBalance}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="addAccountForm.addAccountInitialDeposit.$error" ng-if="addAccountForm.addAccountInitialDeposit.$dirty || addAccountForm.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="min">{{::translation.messages.initialDepositMin}}</div><div class="help-block" ng-message="max">{{::translation.messages.initialDepositMax}}</div></div></div></form><modal data="modal" template="templates/directives/popup.html"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full text-transform-uppercase">{{::translation.addTradingAccount}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"AddNewAccountController"}},resolve:{demoDepositValues:["Storage","constants","$ionicLoading","$q","rootResolver",d],location:["LocationService",p("New Trading Account - Webmobile")]},data:{footer:!1}}).state("root.app.manageAccountsTransfer",{url:"/menu/manageaccounts/transfer",cache:!1,views:{"tab-menu":{
template:'<ion-view class="account-transfer"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.manageAccounts\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.transferFunds}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="height-auto pt-0 pb-0"><div class="row padding pt-0"><div class="col"><div class="font-14">{{::translation.transferFrom}}:</div><account-select accounts="accountsFrom" current="transfer.accountFrom" user="user" config="accountFromConfig"></account-select></div></div><div class="row padding pt-0"><div class="col"><div class="font-14">{{::translation.transferTo}}:</div><account-select accounts="accountsTo" current="transfer.accountTo" user="user" config="accountToConfig"></account-select></div></div></div><div class="row incdec-amount inc-dec pb-0" inc-dec><div class="col amount-area"><button type="button" ng-click="upDown({ model: transfer, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: transfer.accountFrom.balance, speedStep: changeStep })" on-touch="upDownRepeat({ model: transfer, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: transfer.accountFrom.balance, speedStep: changeStep })" on-release="upDownStop()" class="button button-down width-100"><i class="ion-android-remove"></i></button><div class="wrapper-amount amount-input"><div class="font-36 amount-input-currency">{{constants.currencySymbols[transfer.accountFrom.currency]}}</div><input type="number" ng-model="transfer.value" keyboard-watcher name="amount" min="{{config.min}}" max="{{transfer.accountFrom.fundsToWithdraw}}" tabindex="1" required></div><button type="button" ng-click="upDown({ model: transfer, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: transfer.accountFrom.balance, speedStep: changeStep })" on-touch="upDownRepeat({ model: transfer, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: transfer.accountFrom.balance, speedStep: changeStep})" on-release="upDownStop()" class="button button-up width-100"><i class="ion-android-add"></i></button></div><div class="messages pb-55" ng-messages="form.amount.$error"><div ng-if="form.amount.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="min">Minimum amount is {{config.min}}</div><div class="help-block" ng-message="max">Maximum amount is {{transfer.accountFrom.fundsToWithdraw}}</div></div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button type="button" class="button button-block button-full text-transform-uppercase">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"AccountsTransferController",resolve:{transferEnabled:["$q","constants",function(e,t){return t.hideTransferBetweenAccounts?e.reject():e.resolve()}],location:["LocationService",p("Transfer Between Accounts - Webmobile")]}}},data:{footer:!1}}).state("root.app.mangeAccountsChangePassword",{url:"/menu/manageaccounts/changepassword",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.manageAccounts\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.updatePassword}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form class="padding" name="form" id="form" novalidate ng-submit="changeAccountPassword(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="col account-select-wrapper as-select"><div class="font-14"><b>{{::translation.account}}</b>:</div><select name="selectedTradingAccount" ng-model="auth.tradingAccount" ng-options="account.currency+\' - \'+account.login for account in tradingAccounts"></select></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 bottom-border" ng-class="{ \'has-error\' : (form.newPassword.$invalid && !form.newPassword.$pristine) || (form.$submitted && form.newPassword.$invalid) }"><input type="password" name="newPassword" ng-model="auth.password" ng-minlength="6" ng-maxlength="12" ng-pattern="validator(\'password\')" keyboard-watcher required passwordmix> <span>{{::translation.enterNewPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.newPassword.$error" ng-if="form.newPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div><div class="form-group item-input item-stacked-label bottom-border mb-15 mt-10 pl-0" ng-class="{ \'has-error\' : (form.confirmPassword.$invalid && !form.confirmPassword.$pristine) || (form.$submitted && form.confirmPassword.$invalid) }"><input type="password" name="confirmPassword" ng-model="auth.confirmPassword" compare-to="auth.password" keyboard-watcher required> <span>{{::translation.reEnterPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.confirmPassword.$error" ng-if="form.confirmPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="compareTo">{{::translation.messages.password_not_matched}}</div></div></form><div class="content"><div class="row"><div class="col"><div class="roboto-bold font-20">{{::translation.securePassword}}</div></div></div><div class="row"><div class="col"><ul class="custom-list font-14 padding pt-0"><li>{{::translation.useCharacters}}</li><li>{{::translation.samePassword}}</li><li>{{::translation.usePersonalDetails}}</li></ul></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button type="button" class="button button-block button-full text-transform-uppercase">{{::translation.updatePassword}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"AccountsChangePasswordController",resolve:{location:["LocationService",p("Accounts Change Password - Webmobile")]}}},data:{footer:!1}}).state("root.app.transactionHistory",{url:"/transactionhistory",cache:!1,views:{"tab-menu":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="transaction-history"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.menu\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"><div class="display-flex pt-10 padding-right" on-tap="showFilter()"><i class="icon ion-funnel font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title font-14 roboto-light">{{::translation.transaction}}</span></ion-nav-title></ion-nav-bar><ion-content overflow-scroll="true" has-bouncing="false"><div class="transactions-list"><ion-list><ion-item class="p-0 font-13 roboto" collection-repeat="transaction in transactions | orderBy: \'-requestDate\'"><div class="card"><div class="row p-0 top"><div><span>{{::translation.type}}</span> <span class="value" ng-class="transaction.type">{{translation[transaction.type]}}</span></div><div><span>{{::translation.date}}</span> <span class="value">{{transaction.requestDate | date:\'dd/MM/yyyy HH:mm\':clientTimeZone}}</span></div></div><div class="row p-0 bottom"><div><div>{{::translation.account}}</div><div class="value">#{{transaction.login}}</div></div><div><div>{{::translation.payment}}</div><div class="value" ng-if="transaction.method === \'creditCard\'">{{translation.ending_with}} *{{transaction.creditCardLast4Digits}}</div><div class="value" ng-if="transaction.method !== \'creditCard\'">{{transaction.bankAcccountNumberLast4Digits}}</div><div class="value" ng-if="transaction.method !== \'creditCard\' && !transaction.bankAcccountNumberLast4Digits">{{translation[transaction.method]|| transaction.method}}</div><div class="value" ng-if="transaction.method===\'transfer\' && transaction.type===\'deposit\'">{{translation.transfer_fr}} #{{transaction.fromTradingAccount}}</div><div class="value" ng-if="transaction.method===\'transfer\' && transaction.type===\'withdrawal\'">{{translation.transfer_t}} #{{transaction.toTradingAccount}}</div></div><div><div>{{::translation.amount}}</div><div class="value">{{transaction.amount | cryptoCurrency :transaction.currency :user.currencyDigits}}</div></div></div></div></ion-item></ion-list></div><div ng-if="transactions.length == 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.no_transactions}}</div><div class="roboto font-18 text-center mt-08 muted">{{::translation.check_filter}}</div></div></div></ion-content></ion-view>',controller:"TransactionHistoryController"}},resolve:{location:["LocationService",p("Transactions History - Webmobile")]},data:{footer:!1}}).state("root.app.wallet",{url:"/wallet",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="wallet"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-title class="wallet-title"><span class="nav-title white font-14 roboto-light">{{::translation.deposit}}</span></ion-nav-title><ion-nav-buttons side="right"></ion-nav-buttons><ion-content scroll="true" overflow-scroll="true" ng-show="paymentMethods.length > 1" style="overflow:auto;-webkit-overflow-scrolling:touch"><div class="wallet accounts-title">{{::translation.choosePaymentMethod}}</div><div class="wallet-list"><ion-list><ion-item class="item-complex" ng-repeat="method in paymentMethods" ng-click="openDepositPage(method)"><a class="item-content"><img ng-src="img/{{method.name}}.svg" class="payment-method"> <i class="icon ion-chevron-right font-14"></i></a></ion-item></ion-list></div><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-content></ion-view>',controller:"WalletController"}},resolve:{depositPaymentMethods:["Storage","constants","$ionicLoading","rootResolver",u],location:["LocationService",p("Wallet - Webmobile")]},data:{footer:!0}}).state("root.app.withdraw",{url:"/withdraw/account",cache:!1,views:{"tab-menu":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="withdraw-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"><div class="button-bar"><button class="display-flex pl-15 padding-right fake-button" on-tap="openPopover($event)"><i class="icon ion-android-more-vertical align-self font-17"></i></button></div></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="invest-top"><div class="row padding pt-0"><div class="col"><div><div class="white font-14">{{::translation.withdrawFrom}}:</div></div><account-select accounts="accounts" current="withdraw.account" user="user" config="accountConfig"></account-select><div class="white font-14">{{::translation.selectPaymentMethod}}</div><div class="col account-select-wrapper mt-10 mb-10"><div class="form-group as-select"><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="select-method" ng-model="selectedModel.selectedPaymentMethod" ng-options="item as item.label for item in paymentTypes track by item.id"></select></div></div></div></div></div><form name="form" novalidate ng-submit="submit(form)" class="padding"><input type="submit" id="submit" value="Submit" style="display:none"><div class="row incdec-amount inc-dec pb-0" inc-dec><div class="col amount-area"><button type="button" ng-click="upDown({ model: withdraw, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: withdraw.account.freeMargin, speedStep: changeStep })" on-touch="upDownRepeat({ model: withdraw, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: withdraw.account.freeMargin, speedStep: changeStep })" on-release="upDownStop()" class="button button-down width-100"><i class="ion-android-remove"></i></button><div class="wrapper-amount amount-input"><div class="font-36 amount-input-currency">{{constants.currencySymbols[withdraw.account.currency]}}</div><input type="number" ng-model="withdraw.value" name="amount" keyboard-watcher ng-min="config.min" ng-max="withdraw.account.fundsToWithdraw" tabindex="1" required></div><button type="button" ng-click="upDown({ model: withdraw, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: withdraw.account.freeMargin, speedStep: changeStep })" on-touch="upDownRepeat({ model: withdraw, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: withdraw.account.freeMargin, speedStep: changeStep})" on-release="upDownStop()" class="button button-up width-100"><i class="ion-android-add"></i></button></div><div class="messages" ng-messages="form.amount.$error"><div ng-if="form.amount.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="min">{{::translation.minimumAmount}} {{config.min}}</div><div class="help-block" ng-message="max">{{::translation.maximumAmount}} {{withdraw.account.fundsToWithdraw|currency:constants.currencySymbols[withdraw.account.currency]:user.currencyDigits}}</div></div></div></div></form><div ng-if="withdrawAditionalText" class="font-12 pr-16 pl-16"><span ng-bind-html="withdrawAditionalText"></span></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit" class="for"><button class="button button-block button-full" ng-disabled="!formValidator">{{::translation.next}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"WithdrawController"}},resolve:{location:["LocationService",p("Withdrawal - Webmobile")]},data:{footer:!1}}).state("root.app.withdrawCompliance",{url:"/withdraw/compliance",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdrawal-compliance"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdrawalCompliance}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div ng-if="formTemplate && formTemplate.length"><div class="padding">{{::translation.withdrawComplianceText}}</div><dynamic-form class="padding" name="assessment" template="formTemplate" ng-model="formData"></dynamic-form></div><modal data="modal" template="templates/directives/popup.html"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0" ng-if="formTemplate && formTemplate.length"><div class="col"><button class="button button-block button-full" ng-disabled="!validateForm()" on-tap="processForm()">{{::translation.submit}}</button></div></div></ion-footer-bar></ion-view>',controller:"WithdrawalComplianceController"}},resolve:{location:["LocationService",p("Withdrawal Compliance - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-cryptoWallet",{url:"/withdraw/cryptoWallet/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-cryptoWallet-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.accountDetails}}</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.account.$invalid && !form.account.$pristine) || (form.$submitted && form.account.$invalid) }"><input type="text" keyboard-watcher name="account" ng-model="walletAddressModel.walletAddress" ng-minlength="2" ng-maxlength="100" class="wallet-address has-context-menu" required> <span class="input-label">{{::translation.insertCryptoWalletID}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.account.$error" ng-if="form.account.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div><div class="row p-0" ng-if="walletTypes.length > 1"><div class="col p-0"><div class="white font-14">{{::translation.typeOfCryptoCurrency}}</div><div class="form-group as-select"><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="wallet-type" ng-model="selectedModel.selectedWalletType" ng-options="item as item.label for item in walletTypes track by item.id"></select></div></div></div></div></form><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"WithdrawCryptoWalletController"}},resolve:{location:["LocationService",p("Withdrawal via CryptoWallet - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-wireTransfer",{url:"/withdraw/wireTransfer/:login/:amount",cache:!1,views:{"tab-menu":{
template:'<ion-view class="withdraw-wiretransfer-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><div class="padding"><div class="row p-0"><div class="col pb-5 font-weight-bold">{{::translation.bankAccountInfo}}</div></div><div class="row p-0"><div class="col pt-2">{{::translation.bankAccountInfoText}}</div></div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="row p-0"><div class="col text-transform-uppercase bg-l-grey font-14 font-weight-bold center-text pt-15 pb-15">{{::translation.bankDetails}}</div></div><div class="padding"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankName" ng-class="{ \'has-error\' : (form.bankName.$invalid && !form.bankName.$pristine) || (form.$submitted && form.bankName.$invalid) }"><input type="text" name="bankName" ng-model="withdraw.bankName" ng-minlength="2" ng-maxlength="30" ng-pattern="validator(\'name\')" keyboard-watcher required> <span>{{::translation.bankName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankName.$error" ng-if="form.bankName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="accountHolder" ng-class="{ \'has-error\' : (form.accountHolder.$invalid && !form.accountHolder.$pristine) || (form.$submitted && form.accountHolder.$invalid) }"><input type="text" name="accountHolder" ng-model="withdraw.accountHolder" ng-minlength="1" ng-maxlength="30" ng-pattern="validator(\'name\')" keyboard-watcher required> <span>{{::translation.bankAccountHolder}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.accountHolder.$error" ng-if="form.accountHolder.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankNumber" ng-class="{ \'has-error\' : (form.bankNumber.$invalid && !form.bankNumber.$pristine) || (form.$submitted && form.bankNumber.$invalid) }"><input type="text" name="bankNumber" ng-model="withdraw.bankNumber" ng-minlength="3" ng-maxlength="30" ng-pattern="validator(\'freetext\')" keyboard-watcher required> <span>{{::translation.bankAccountNumber}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankNumber.$error" ng-if="form.bankNumber.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="code" ng-class="{ \'has-error\' : (form.code.$invalid && !form.code.$pristine) || (form.$submitted && form.code.$invalid) }"><input type="text" name="code" ng-model="withdraw.code" ng-minlength="3" ng-maxlength="30" ng-pattern="validator(\'freetext\')" keyboard-watcher required> <span>{{::translation.bankSwift}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.code.$error" ng-if="form.code.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="row p-0"><div class="col text-transform-uppercase bg-l-grey font-14 font-weight-bold center-text pt-15 pb-15">{{::translation.bankAddress}}</div></div><div class="padding"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankCountry" ng-class="{ \'has-error\' : form.bankCountry.$invalid && !form.bankCountry.$pristine }"><input type="text" class="custom-select custom-input" name="bankCountry" ng-model="countryName" ng-minlength="3" ng-maxlength="30" on-tap="countriesModal(\'country\', form)" readonly keyboard-watcher required> <span>{{::translation.bankCountry}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankCountry.$error" ng-if="form.bankCountry.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div ng-if="!constants[\'shortWireWithdrawalEnabled\']" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankCity" ng-class="{ \'has-error\' : (form.bankCity.$invalid && !form.bankCity.$pristine) || (form.$submitted && form.bankCity.$invalid) }"><input type="text" name="bankCity" ng-model="withdraw.bankCity" ng-minlength="3" ng-maxlength="30" keyboard-watcher required ng-pattern="validator(\'name\')"> <span>{{::translation.bankCity}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="!constants[\'shortWireWithdrawalEnabled\']" class="messages font-12" ng-messages="form.bankCity.$error"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div ng-if="!constants[\'shortWireWithdrawalEnabled\']" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankState" ng-class="{ \'has-error\' : (form.bankState.$invalid && !form.bankState.$pristine) || (form.$submitted && form.bankState.$invalid) }"><input type="text" name="bankState" ng-model="withdraw.bankState" ng-minlength="3" ng-maxlength="30" keyboard-watcher ng-required="!withdrawWireTransferBankStateNotRequired" ng-pattern="validator(\'name\')"> <span>{{::translation.bankState}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="!constants[\'shortWireWithdrawalEnabled\']" class="messages font-12" ng-messages="form.bankState.$error"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankStreet" ng-class="{ \'has-error\' : (form.bankStreet.$invalid && !form.bankStreet.$pristine) || (form.$submitted && form.bankStreet.$invalid) }"><input type="text" name="bankStreet" ng-model="withdraw.bankStreet" ng-minlength="3" ng-maxlength="30" required keyboard-watcher ng-pattern="validator(\'name\')"> <span>{{::translation.bankStreetAddress}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankStreet.$error" ng-if="form.bankStreet.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div class="row"><div class="col muted font-12 pb-0 withdraw-comment">{{::translation.withdrawCommentsText}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="comment" ng-class="{ \'has-error\' : (form.comment.$invalid && !form.comment.$pristine) || (form.$submitted && form.comment.$invalid) }"><input type="text" name="comment" ng-model="withdraw.comment" ng-minlength="3" ng-maxlength="150" keyboard-watcher ng-pattern="validator(\'name\')"> <span>{{::translation.withdrawComments}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawWireTransferController"}},resolve:{location:["LocationService",p("Withdrawal via WireTransfer - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-localWireTransfer",{url:"/withdraw/localWireTransfer/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-localwiretransfer-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.localWireTransfer}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><div class="padding"><div class="row p-0"><div class="col pb-5 font-weight-bold">{{::translation.bankAccountInfo}}</div></div><div class="row p-0"><div class="col pt-2">{{::translation.bankAccountInfoText}}</div></div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="row p-0"><div class="col text-transform-uppercase bg-l-grey font-14 font-weight-bold center-text pt-15 pb-15">{{::translation.bankDetails}}</div></div><div class="padding"><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.bankName.$invalid && !form.bankName.$pristine) || (form.$submitted && form.bankName.$invalid) }"><select name="bankName" class="no-appearance" ng-model="withdraw.bankName" ng-options="item as item.label for item in localBanks track by item.id" required><option ng-if="false"></option></select><span>{{::translation.bankName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="accountHolder" ng-class="{ \'has-error\' : (form.accountHolder.$invalid && !form.accountHolder.$pristine) || (form.$submitted && form.accountHolder.$invalid) }"><input type="text" name="accountHolder" ng-model="withdraw.accountHolder" ng-minlength="1" ng-maxlength="30" ng-pattern="validator(\'name\')" keyboard-watcher required> <span>{{::translation.bankAccountHolder}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.accountHolder.$error" ng-if="form.accountHolder.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankNumber" ng-class="{ \'has-error\' : (form.bankNumber.$invalid && !form.bankNumber.$pristine) || (form.$submitted && form.bankNumber.$invalid) }"><input type="text" name="bankNumber" ng-model="withdraw.bankNumber" ng-minlength="3" ng-maxlength="30" ng-pattern="validator(\'alphanum\')" keyboard-watcher required> <span>{{::translation.bankAccountNumber}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankNumber.$error" ng-if="form.bankNumber.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="row p-0"><div class="col text-transform-uppercase bg-l-grey font-14 font-weight-bold center-text pt-15 pb-15">{{::translation.bankAddress}}</div></div><div class="padding"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankCountry"><input type="text" name="bankCountry" ng-model="countryName" ng-readonly="true" keyboard-watcher required> <span>{{::translation.bankCountry}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankCity" ng-class="{ \'has-error\' : (form.bankCity.$invalid && !form.bankCity.$pristine) || (form.$submitted && form.bankCity.$invalid) }"><input type="text" name="bankCity" ng-model="withdraw.bankCity" ng-minlength="3" ng-maxlength="30" keyboard-watcher required ng-pattern="validator(\'name\')"> <span>{{::translation.bankCity}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankCity.$error" ng-if="form.bankCity.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankState" ng-class="{ \'has-error\' : (form.bankState.$invalid && !form.bankState.$pristine) || (form.$submitted && form.bankState.$invalid) }"><input type="text" name="bankState" ng-model="withdraw.bankState" ng-minlength="3" ng-maxlength="30" keyboard-watcher required ng-pattern="validator(\'name\')"> <span>{{::translation.bankState}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankState.$error" ng-if="form.bankState.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankStreet" ng-class="{ \'has-error\' : (form.bankStreet.$invalid && !form.bankStreet.$pristine) || (form.$submitted && form.bankStreet.$invalid) }"><input type="text" name="bankStreet" ng-model="withdraw.bankStreet" ng-minlength="3" ng-maxlength="30" required keyboard-watcher ng-pattern="validator(\'freetext\')"> <span>{{::translation.bankStreetAddress}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankStreet.$error" ng-if="form.bankStreet.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div class="row"><div class="col muted font-12 pb-0 withdraw-comment">{{::translation.withdrawCommentsText}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="comment" ng-class="{ \'has-error\' : (form.comment.$invalid && !form.comment.$pristine) || (form.$submitted && form.comment.$invalid) }"><input type="text" name="comment" ng-model="withdraw.comment" ng-minlength="3" ng-maxlength="150" keyboard-watcher ng-pattern="validator(\'name\')"> <span>{{::translation.withdrawComments}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawLocalWireTransferController"}},resolve:{location:["LocationService",p("Withdrawal via LocalWireTransfer - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-creditCard",{url:"/withdraw/creditCard/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-creditCard-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><div class="col center-text pb-5 font-weight-bold text-transform-uppercase">{{::translation.cardDetails}}</div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding pt-0"><div ng-if="!constants[\'shortCreditCardWithdrawalEnabled\']" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="number" ng-class="{ \'has-error\' : (form.number.$invalid && !form.number.$pristine) || (form.$submitted && form.number.$invalid) }"><input type="tel" name="number" ng-model="creditCard.number" minLength="4" maxLength="4" ng-minlength="4" ng-maxlength="4" required tabindex="2" keyboard-watcher ng-pattern="validator(\'number\')"> <span>{{::translation.card_last_digits}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="!constants[\'shortCreditCardWithdrawalEnabled\']" class="messages font-12" ng-messages="form.number.$error"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div><div ng-if="!constants[\'shortCreditCardWithdrawalEnabled\']" class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border cc-expire-data" id="date" ng-class="{ \'has-error\' : form.date.$invalid && !form.date.$pristine }"><input class="expiryDate" type="month" name="date" ng-model="creditCard.date" min="{{ minDate | date: \'yyyy-MM\'}}" tabindex="3" required> <span>{{::translation.expiry_date}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.date.$error" ng-if="form.date.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="holder" ng-class="{ \'has-error\' : (form.holder.$invalid && !form.holder.$pristine) || (form.$submitted && form.holder.$invalid) }"><input type="text" keyboard-watcher name="holder" ng-model="creditCard.holder" ng-minlength="1" ng-maxlength="100" required tabindex="5" ng-pattern="validator(\'name\')"> <span>Name on Card</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.holder.$error" ng-if="form.holder.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div class="col center-text pb-5 font-weight-bold text-transform-uppercase">{{::translation.withdrawReason}}</div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required tabindex="5"> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawCreditCardController"}},resolve:{location:["LocationService",p("Withdrawal via Credit Card - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-skrill",{url:"/withdraw/skrill/:login/:amount",cache:!1,views:{"tab-menu":{
template:'<ion-view class="withdraw-skrill-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="center-text font-16 muted pb-5">{{::translation.openSkrillAccount}} <a href="https://www.skrill.com" target="_blank">{{translation.skrill}}</a> {{translation.website}}</div><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">Account Details</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.email.$invalid && !form.email.$pristine) || (form.$submitted && form.email.$invalid) }"><input type="email" keyboard-watcher name="email" ng-model="accountEmail" ng-minlength="4" ng-maxlength="80" required ng-pattern="validator.email"> <span class="input-label">{{::translation.skrill_account_email}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.email.$error" ng-if="form.email.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div></div><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.withdrawReason}}</div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required tabindex="5"> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawSkrillController"}},resolve:{location:["LocationService",p("Withdrawal via Skrill - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-neteller",{url:"/withdraw/neteller/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-neteller-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="center-text font-16 muted pb-5">{{::translation.openNetellerAccount}} <a href="https://www.neteller.com" target="_blank">{{translation.neteller}}</a> {{translation.website}}</div><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">Account Details</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.account.$invalid && !form.account.$pristine) || (form.$submitted && form.account.$invalid) }"><input type="text" keyboard-watcher name="account" ng-model="accountModel.accountNumber" ng-minlength="2" ng-maxlength="12" required ng-pattern="validator(\'number\')"> <span class="input-label">{{::translation.neteller_account_number}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.account.$error" ng-if="form.account.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.withdrawReason}}</div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required tabindex="5"> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawNetellerController"}},resolve:{location:["LocationService",p("Withdrawal via Neteller - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-fasapay",{url:"/withdraw/fasapay/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-fasapay-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">Account Details</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.account.$invalid && !form.account.$pristine) || (form.$submitted && form.account.$invalid) }"><input type="text" keyboard-watcher name="account" ng-model="accountModel.accountName" ng-minlength="2" ng-maxlength="12" ng-pattern="validator(\'name\')" required> <span class="input-label">{{::translation.fasapay_account_name}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.account.$error" ng-if="form.account.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.account.$invalid && !form.account.$pristine) || (form.$submitted && form.account.$invalid) }"><input type="text" keyboard-watcher name="account" ng-model="accountModel.accountNumber" ng-minlength="2" ng-maxlength="12" required> <span class="input-label">{{::translation.fasapay_wallet_account_number}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.account.$error" ng-if="form.account.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div></div><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.withdrawReason}}</div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required tabindex="5"> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawFasapayController"}},resolve:{location:["LocationService",p("Withdrawal via FasaPay - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-unionpay",{url:"/withdraw/unionpay/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-unionpay-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="unionPay"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.unionpay}} - {{::translation.cardDetails}}</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.unionpayCardholderName.$invalid && !form.unionpayCardholderName.$pristine) || (form.$submitted && form.unionpayCardholderName.$invalid) }"><input type="text" keyboard-watcher name="unionpayCardholderName" ng-model="unionPayModel.unionpayCardholderName" ng-minlength="1" ng-maxlength="30" ng-pattern="validator(\'name\')" required> <span class="input-label">{{::translation.unionpay_cardholder_name}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.unionpayCardholderName.$error" ng-if="form.unionpayCardholderName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.unionpayBankCardNumber.$invalid && !form.unionpayBankCardNumber.$pristine) || (form.$submitted && form.unionpayBankCardNumber.$invalid) }"><input type="text" keyboard-watcher name="unionpayBankCardNumber" ng-model="unionPayModel.unionpayBankCardNumber" ng-minlength="4" ng-maxlength="30" ng-pattern="validator(\'number\')" required> <span class="input-label">{{::translation.unionpay_bank_card_number}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.unionpayBankCardNumber.$error" ng-if="form.unionpayBankCardNumber.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.unionpayNationalIdCard.$invalid && !form.unionpayNationalIdCard.$pristine) || (form.$submitted && form.unionpayNationalIdCard.$invalid) }"><input type="text" keyboard-watcher name="unionpayNationalIdCard" ng-model="unionPayModel.unionpayNationalIdCard" ng-minlength="4" ng-maxlength="30" ng-pattern="validator(\'number\')" required> <span class="input-label">{{::translation.unionpay_national_id_card}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.unionpayNationalIdCard.$error" ng-if="form.unionpayNationalIdCard.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.unionpay}} - {{::translation.bankDetails}}</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.bankName.$invalid && !form.bankName.$pristine) || (form.$submitted && form.bankName.$invalid) }"><input type="text" keyboard-watcher name="bankName" ng-model="unionPayModel.bankName" ng-minlength="2" ng-maxlength="30" ng-pattern="validator(\'name\')" required> <span class="input-label">{{::translation.bankName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankName.$error" ng-if="form.bankName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankCountry" ng-class="{ \'has-error\' : form.bankCountry.$invalid && !form.bankCountry.$pristine }"><input type="text" class="custom-select custom-input" name="bankCountry" ng-model="unionPayModel.bankCountryName" ng-minlength="2" ng-maxlength="30" on-tap="countriesModal(\'country\', form)" readonly keyboard-watcher required> <span>{{::translation.bankCountry}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankCountry.$error" ng-if="form.bankCountry.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.bankCity.$invalid && !form.bankCity.$pristine) || (form.$submitted && form.bankCity.$invalid) }"><input type="text" keyboard-watcher name="bankCity" ng-model="unionPayModel.bankCity" ng-minlength="2" ng-maxlength="30" ng-pattern="validator(\'name\')" required> <span class="input-label">{{::translation.bankCity}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankCity.$error" ng-if="form.bankCity.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.bankBranch.$invalid && !form.bankBranch.$pristine) || (form.$submitted && form.bankBranch.$invalid) }"><input type="text" keyboard-watcher name="bankBranch" ng-model="unionPayModel.bankBranch" ng-minlength="2" ng-maxlength="30" ng-pattern="validator(\'name\')" required> <span class="input-label">{{::translation.bank_branch}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankBranch.$error" ng-if="form.bankBranch.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawUnionpayController"}},resolve:{location:["LocationService",p("Withdrawal via UnionPay - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-other",{url:"/withdraw/other/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-other-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.paymentDetails}}</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.details.$invalid && !form.details.$pristine) || (form.$submitted && form.details.$invalid) }"><input type="text" keyboard-watcher name="details" ng-model="detailsModel.details" ng-minlength="10" ng-maxlength="250" required> <span class="input-label">{{::translation.withdraw_other_label}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.details.$error" ng-if="form.details.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawOtherController"}},resolve:{location:["LocationService",p("Withdrawal via other method - Webmobile")]},data:{footer:!1}}).state("root.app.withdrawHistory",{url:"/withdraw/history",cache:!1,views:{"tab-menu":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="transaction-history"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.withdraw\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"><div class="display-flex pt-10 padding-right" on-tap="showFilter()"><i class="icon ion-funnel font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title font-14 roboto-light">{{::translation.withdraw_history}}</span></ion-nav-title></ion-nav-bar><ion-content overflow-scroll="true" has-bouncing="false"><div class="transactions-list"><ion-list><ion-item class="p-0 font-13 roboto" item-height="transaction.status === \'pending\' ? 148 : 96" collection-repeat="transaction in transactions | orderBy: \'-requestDate\'"><div class="card"><div class="row p-0 top"><div><span>{{::translation.status}}</span> <span class="value">{{translation[transaction.status]}}</span></div><div><span>{{::translation.date}}</span> <span class="value">{{transaction.requestDate | date:\'dd/MM/yyyy HH:mm\':clientTimeZone}}</span></div></div><div class="row p-0" ng-class="transaction.status === \'pending\' ? \'top\' : \'bottom\'"><div><div>{{::translation.account}}</div><div class="value">#{{transaction.login}}</div></div><div><div>{{::translation.method_menu}}</div><div class="value">{{translation[transaction.method] || transaction.method}}</div></div><div><div>{{::translation.amount}}</div><div class="value">{{transaction.amount | cryptoCurrency :transaction.currency :user.currencyDigits}}</div></div></div><div ng-if="transaction.status === \'pending\'" class="row p-0 bottom"><button on-tap="cancelRequest(transaction)" class="button text-transform-uppercase button-blue white button-full button-shadow">{{::translation.cancel}}</button></div></div></ion-item></ion-list></div><div ng-if="transactions.length == 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.noHistory}}</div><div class="roboto font-18 text-center mt-08 muted">{{::translation.check_filter}}</div></div></div><modal data="modal"></modal></ion-content></ion-view>',controller:"WithdrawHistoryController"}},resolve:{location:["LocationService",p("Withdrawals History - Webmobile")]},data:{footer:!1}}).state("root.app.wiretransfer",{url:"/wallet/wiretransfer",cache:!1,views:{"tab-wallet":{template:'<ion-view class="bank-transfer"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.wireTransfer}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="bank-info"><div class="row info-description"><div class="col"><div class="info-title row"><span>{{::translation.bank_information}}</span></div><div class="info-value muted row">{{::translation.banktransfer_instructions}}</div></div></div><ion-list><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_name}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_name}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_address}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_address}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_bank}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_bank}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_account_number}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_account_number}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_iban}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_iban}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.swift}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.swift}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.comments}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.comments}}</div></div></ion-item></ion-list></div></ion-content></ion-view>',controller:"WireTransferController"}},resolve:{location:["LocationService",p("Deposit via Wire Transfer - Webmobile")]},data:{footer:!0}}).state("root.app.credit-card",{url:"/wallet/creditCard",cache:!1,views:{"tab-wallet":{
template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation["credit-card"]}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><form name="form" novalidate ng-submit="confirm(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="invest-top"><div class="row incdec-amount inc-dec pb-0" inc-dec><div class="col pt-35 amount-area"><button type="button" ng-click="upDown({ model: creditCard, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: config.max, speedStep: changeStep })" on-touch="upDownRepeat({ model: creditCard, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: config.max, speedStep: changeStep })" on-release="upDownStop()" class="button button-down"><i class="ion-android-remove"></i></button><div class="wrapper-amount amount-input"><div class="font-36 amount-input-currency">{{constants.currencySymbols[user.activeTradingAccount.currency]}}</div><input type="number" ng-model="creditCard.value" name="amount" min="{{config.min}}" max="{{config.max}}" tabindex="1" keyboard-watcher required></div><button type="button" ng-click="upDown({ model: creditCard, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: config.max, speedStep: changeStep })" on-touch="upDownRepeat({ model: creditCard, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: config.max, speedStep: changeStep})" on-release="upDownStop()" class="button button-up"><i class="ion-android-add"></i></button></div><div class="messages pb-55" ng-messages="form.amount.$error"><div ng-if="form.amount.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="min">Minimum amount is {{config.min}}</div><div class="help-block" ng-message="max">Maximum amount is {{config.max}}</div></div></div></div></div><div class="row p-0"><div class="radio-toolbar"><label ng-repeat="amount in listAmounts"><input type="radio" ng-model="creditCard.value" ng-value="amount"> <span class="font-18">{{amount}}</span></label></div></div><div class="padding pt-0"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="number" ng-class="{ \'has-error\' : (form.number.$invalid && !form.number.$pristine) || (form.$submitted && form.number.$invalid) }"><input type="tel" name="number" ng-model="creditCard.number" minLength="12" maxLength="19" ng-minlength="12" ng-maxlength="19" required tabindex="2" keyboard-watcher ng-pattern="validator(\'number\')"> <span>{{::translation.card_name}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.number.$error" ng-if="form.number.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div><div class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="date" ng-class="{ \'has-error\' : form.date.$invalid && !form.date.$pristine }"><input class="expiryDate" type="month" name="date" ng-model="creditCard.date" min="{{ minDate | date: \'yyyy-MM\'}}" tabindex="3" required> <span>{{::translation.expiry_date}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.date.$error" ng-if="form.date.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div class="col pr-0 pb-0 pt-0 pl-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="cvv" ng-class="{ \'has-error\' : (form.cvv.$invalid && !form.cvv.$pristine) || (form.$submitted && form.cvv.$invalid) }"><input type="tel" name="cvv" ng-model="creditCard.cvv" minLength="3" maxLength="4" ng-minlength="3" ng-maxlength="4" required input-mask tabindex="4" ng-pattern="validator(\'number\')" keyboard-watcher> <span>CVV</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.cvv.$error" ng-if="form.cvv.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="holder" ng-class="{ \'has-error\' : (form.holder.$invalid && !form.holder.$pristine) || (form.$submitted && form.holder.$invalid) }"><input type="text" keyboard-watcher name="holder" ng-model="creditCard.holder" ng-minlength="2" ng-maxlength="100" required tabindex="5" ng-pattern="validator(\'alpha\')"> <span>Name on Card</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.holder.$error" ng-if="form.holder.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"CreditCardController"}},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",p("Deposit via Credit Card - Webmobile")]},data:{footer:!1}}).state("root.app.credit-card-secured",{url:"/wallet/creditCardSecured",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation["credit-card-secured"]}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><form name="form" novalidate ng-submit="confirm(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="invest-top"><div class="row incdec-amount inc-dec pb-0" inc-dec><div class="col pt-35 amount-area"><button type="button" ng-click="upDown({ model: creditCard, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: config.max, speedStep: changeStep })" on-touch="upDownRepeat({ model: creditCard, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: config.max, speedStep: changeStep })" on-release="upDownStop()" class="button button-down"><i class="ion-android-remove"></i></button><div class="wrapper-amount amount-input"><div class="font-36 amount-input-currency">{{constants.currencySymbols[user.activeTradingAccount.currency]}}</div><input type="number" ng-model="creditCard.value" name="amount" min="{{config.min}}" max="{{config.max}}" tabindex="1" keyboard-watcher required></div><button type="button" ng-click="upDown({ model: creditCard, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: config.max, speedStep: changeStep })" on-touch="upDownRepeat({ model: creditCard, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: config.max, speedStep: changeStep})" on-release="upDownStop()" class="button button-up"><i class="ion-android-add"></i></button></div><div class="messages pb-55" ng-messages="form.amount.$error"><div ng-if="form.amount.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="min">Minimum amount is {{config.min}}</div><div class="help-block" ng-message="max">Maximum amount is {{config.max}}</div></div></div></div></div><div class="row p-0"><div class="radio-toolbar"><label ng-repeat="amount in listAmounts"><input type="radio" ng-model="creditCard.value" ng-value="amount"> <span class="font-18">{{amount}}</span></label></div></div><div class="padding pt-0"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="number" ng-class="{ \'has-error\' : (form.number.$invalid && !form.number.$pristine) || (form.$submitted && form.number.$invalid) }"><input type="tel" name="number" ng-model="creditCard.number" minLength="12" maxLength="19" ng-minlength="12" ng-maxlength="19" required tabindex="2" keyboard-watcher ng-pattern="validator(\'number\')"> <span>{{::translation.card_name}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.number.$error" ng-if="form.number.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div><div class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="date" ng-class="{ \'has-error\' : form.date.$invalid && !form.date.$pristine }"><input class="expiryDate" type="month" name="date" ng-model="creditCard.date" min="{{ minDate | date: \'yyyy-MM\'}}" tabindex="3" required> <span>{{::translation.expiry_date}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.date.$error" ng-if="form.date.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div class="col pr-0 pb-0 pt-0 pl-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="cvv" ng-class="{ \'has-error\' : (form.cvv.$invalid && !form.cvv.$pristine) || (form.$submitted && form.cvv.$invalid) }"><input type="tel" name="cvv" ng-model="creditCard.cvv" minLength="3" maxLength="4" ng-minlength="3" ng-maxlength="4" required input-mask tabindex="4" ng-pattern="validator(\'number\')" keyboard-watcher> <span>CVV</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.cvv.$error" ng-if="form.cvv.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="holder" ng-class="{ \'has-error\' : (form.holder.$invalid && !form.holder.$pristine) || (form.$submitted && form.holder.$invalid) }"><input type="text" keyboard-watcher name="holder" ng-model="creditCard.holder" ng-minlength="2" ng-maxlength="100" required tabindex="5" ng-pattern="validator(\'alpha\')"> <span>Name on Card</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.holder.$error" ng-if="form.holder.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"CreditCardSecuredController"}},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",p("Deposit via Credit Card Secured - Webmobile")]},data:{footer:!1}}).state("root.app.orangepay-btc",{url:"/wallet/orangepay-btc",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.orangePayBtc}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><iframe data-tap-disabled="true" ng-src="{{iframeUrl}}" style="height: 100%; width: 100%;" ng-if="urlReady" element-ready element-ready-success="iframeLoad()" element-ready-fail="iframeLoadFail()" ng-show="iframeReady"></iframe></ion-content><amount-select amount="amount" config="config" next="getUrl()"></amount-select><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"OrangepayBtcController"}},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",p("Deposit via OrangePay - Webmobile")]},data:{footer:!1}}).state("root.app.praxis",{url:"/wallet/praxis",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.praxis}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><iframe data-tap-disabled="true" ng-src="{{iframeUrl}}" style="height: 100%; width: 100%;" element-ready element-ready-success="iframeLoad()" element-ready-fail="iframeLoadFail()" ng-show="iframeReady"></iframe></ion-content><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"PraxisController"}},resolve:{location:["LocationService",p("Deposit via Praxis - Webmobile")]},data:{footer:!1}}).state("root.app.bitgo",{url:"/wallet/bitgo",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.bitgo}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" class="bitgo-content" style="overflow:auto;-webkit-overflow-scrolling:touch"><div class="layout-column"><div class="layout-row info"><div class="layout-col col-50 muted">{{user.currency}} {{::translation.accountNumber}}:</div><div class="layout-col col-50">{{user.activeTradingAccount.login}}</div></div><div class="layout-row info border-bottom"><div class="layout-col col-50 muted">{{::translation.accountBalance}}:</div><div class="layout-col col-50 info-value">{{user.activeTradingAccount.balance | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="layout-row body-pandats"><div class="layout-column"><div class="layout-row">{{displayCurrency}} {{::translation.depositAddress}}:</div><div class="layout-row just-center depAddr-wrapper"><input name="depositAddress" class="depositAddress" ng-value="cryptoWallet.address" readonly><div class="copyToCB" ng-click="copyToClipBoard()"><i class="icon ion-ios-copy-outline"></i></div></div><div class="layout-row">{{::translation.scanQRCode}}</div><div class="layout-row qrcode-pandats just-center"><div class="qrcode-wrapper" ng-if="cryptoWallet.qrCode"><img ng-src="{{cryptoWallet.qrCode}}"></div></div><div class="layout-row"><div class="layout-column"><div class="info-title">{{::translation.important}}</div><div class="info-value muted">{{::translation.sendOnly}} <span class="font-bold">{{displayCurrency}}</span> {{::translation.toThisDepositAddress}}.</div><div class="info-value muted" ng-if="translation.itIsRecommended">{{::translation.itIsRecommended}}</div></div></div></div></div></div></ion-content><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"BitgoController"}},resolve:{location:["LocationService",p("Deposit via BitGo - Webmobile")]},data:{footer:!1}}).state("root.app.qrcode",{url:"/wallet/qrcode",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.qrcode}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" class="qrcode-content" style="overflow:auto;-webkit-overflow-scrolling:touch"><div class="layout-column"><div class="layout-row info"><div class="layout-col col-50 muted">{{user.currency}} {{::translation.accountNumber}}:</div><div class="layout-col col-50">{{user.activeTradingAccount.login}}</div></div><div class="layout-row info border-bottom"><div class="layout-col col-50 muted">{{::translation.accountBalance}}:</div><div class="layout-col col-50 info-value">{{user.activeTradingAccount.balance | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="layout-row body-pandats"><div class="layout-column width-100"><div class="layout-row just-center"><img ng-src="img/flags/{{flagIcon}}.svg" class="currency-flag"> {{displayCurrency}} {{::translation.depositAddress}}:</div><div class="layout-row qrcode-pandats just-center"><div class="qrcode-wrapper" ng-if="cryptoWallet.qrCode"><img ng-src="{{cryptoWallet.qrCode}}"></div></div><div class="layout-row"><div class="layout-column width-100"><div class="layout-row justify-center width-100">{{::translation.scanQRCode}}</div></div></div><div class="layout-row"><div class="layout-column"><div class="info-description">{{::translation.qrcodeInfo}}</div></div></div></div></div></div></ion-content><amount-select amount="amount" config="config" next="getUrl()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"QrcodeController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",p("Deposit via QrCode - Webmobile")]},data:{footer:!1}}).state("root.app.pendingdeposit",{url:"/wallet/pendingdeposit",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.paymentDetails}}</span></ion-nav-title><amount-select amount="amount" config="config" next="onDeposit()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"PendingDepositController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",p("Pending Deposit Page - Webmobile")]},data:{footer:!1}}).state("root.app.peachpayments",{url:"/wallet/peachpayments",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">PeachPayments</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><iframe data-tap-disabled="true" ng-src="{{iframeUrl}}" style="height: 100%; width: 100%;" ng-if="urlReady" element-ready element-ready-success="iframeLoad()" element-ready-fail="iframeLoadFail()" ng-show="iframeReady"></iframe></ion-content><amount-select amount="amount" config="config" next="getUrl()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"PeachPaymentsController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",p("Deposit via PeachPayments - Webmobile")]},data:{footer:!1}}).state("root.app.external",{url:"/wallet/external",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{methodName}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><iframe data-tap-disabled="true" ng-src="{{iframeUrl}}" style="height: 100%; width: 100%;" element-ready element-ready-success="iframeLoad()" element-ready-fail="iframeLoadFail()" ng-show="iframeReady"></iframe></ion-content><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"ExternalController"}},resolve:{location:["LocationService",p("Deposit via external payment service - Webmobile")]},params:{method:null},data:{footer:!1}}).state("root.app.banktransfer",{url:"/wallet/banktransfer",cache:!1,views:{"tab-wallet":{template:'<ion-view class="bank-transfer"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.transfer}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="bank-info"><div class="row info-description"><div class="col"><div class="info-title row"><span>{{::translation.bank_information}}</span></div><div class="info-value muted row">{{::translation.banktransfer_instructions}}</div></div></div><ion-list ng-if="!customBankDetails"><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_name}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_name}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_address}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_address}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_bank}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_bank}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_account_number}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_account_number}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_iban}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_iban}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.swift}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.swift}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.comments}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.comments}}</div></div></ion-item></ion-list><ion-list ng-if="customBankDetails"><ion-item ng-repeat="item in customBankDetails"><div class="row info"><div class="col-50 muted"><span>{{item.title}}</span></div><div class="col-50 info-value">{{item.value}}</div></div></ion-item></ion-list></div></ion-content></ion-view>',controller:"BankTransferController"}},resolve:{location:["LocationService",p("Deposit via Bank Transfer - Webmobile")]},data:{footer:!1}}).state("root.app.hostedpage",{url:"/wallet/hostedpage",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation[methodName]}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><iframe data-tap-disabled="true" ng-src="{{iframeUrl}}" style="height: 100%; width: 100%;" ng-if="urlReady" element-ready element-ready-success="iframeLoad()" element-ready-fail="iframeLoadFail()" ng-show="iframeReady"></iframe></ion-content><amount-select amount="amount" config="config" next="getUrl()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"HostedPageController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",p("Deposit - Webmobile")]},data:{footer:!1}}).state("root.app.hostedpage-popup",{url:"/wallet/hostedpage-popup",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation[methodName]}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"></ion-content><amount-select amount="amount" config="config" next="getUrl()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"HostedPagePopupController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",p("Deposit - Webmobile")]},data:{footer:!1}}).state("root.app.hostedpage-window",{url:"/wallet/hostedpage-window",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation[methodName]}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"></ion-content><amount-select amount="amount" config="config" next="getUrl()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"HostedPageWindowController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",p("Deposit - Webmobile")]},data:{footer:!1}}).state("root.app.personalDetails",{url:"/menu/personalDetails",cache:!1,views:{"tab-menu":{
template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.personalDetails}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form class="padding" name="form" novalidate ng-submit="updatePersonalDetails(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div ng-if="!profileRulesHelper.isHidden(\'firstName\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="firstName" ng-class="{ \'has-error\' : (form.firstName.$invalid && !form.firstName.$pristine) || (form.$submitted && form.firstName.$invalid) }"><input type="text" name="firstName" ng-model="personalProfileForm.firstName" ng-minlength="1" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'name\')" ng-required="profileRulesHelper.isRequired(\'firstName\')" ng-readonly="profileRulesHelper.isReadonly(\'firstName\', user.firstName)"> <span>{{::translation.firstName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.firstName.$error" ng-if="form.firstName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Firtsname}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'lastName\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="lastName" ng-class="{ \'has-error\' : (form.lastName.$invalid && !form.lastName.$pristine) || (form.$submitted && form.lastName.$invalid) }"><input type="text" name="lastName" ng-model="personalProfileForm.lastName" ng-minlength="1" ng-maxlength="32" ng-pattern="validator(\'name\')" keyboard-watcher ng-required="profileRulesHelper.isRequired(\'lastName\')" ng-readonly="profileRulesHelper.isReadonly(\'lastName\', user.lastName)"> <span>{{::translation.lastName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.lastName.$error" ng-if="form.lastName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Lastname}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'birthday\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="birthday" ng-class="{ \'has-error\' : form.birthday.$invalid && !form.birthday.$pristine }"><input type="date" name="birthday" ng-model="personalProfileForm.birthday" max="{{ minBirth }}" ng-required="profileRulesHelper.isRequired(\'birthday\')" ng-disabled="profileRulesHelper.isReadonly(\'birthday\', user.birthday)"> <span>{{::translation.dateBirth}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.birthday.$error" ng-if="form.dateBirth.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.datepickerFormat}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'phone\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="phone" ng-class="{ \'has-error\' : (form.phone.$invalid && !form.phone.$pristine) || (form.$submitted && form.phone.$invalid) }"><input type="tel" name="phone" ng-model="personalProfileForm.phone" minLength="5" maxLength="17" ng-minlength="5" ng-maxlength="17" keyboard-watcher ng-pattern="validator(\'phone\')" ng-required="profileRulesHelper.isRequired(\'phone\')" ng-readonly="profileRulesHelper.isReadonly(\'phone\', user.phone)"> <span>{{::translation.phoneFull}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.phone.$error" ng-if="form.phone.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'country\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="country" ng-class="{ \'has-error\' : (form.country.$invalid && !form.country.$pristine) || (form.$submitted && form.country.$invalid) }"><input type="text" class="custom-select custom-input" name="country" ng-model="personalProfileForm.country.country" on-tap="!profileRulesHelper.isReadonly(\'country\', user.country) && openCountryModal()" readonly ng-required="profileRulesHelper.isRequired(\'country\')"> <span>{{::translation.country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="countryModal" items="countries" config="countryModalConfig" on-submit="setCountry(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.country.$error" ng-if="form.country.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-hide="personalProfileForm.country.states.length === 0"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="state" ng-class="{ \'has-error\' : (form.state.$invalid && !form.state.$pristine) || (form.$submitted && form.state.$invalid) }"><input type="text" class="custom-select custom-input" name="state" ng-model="personalProfileForm.state.stateName" on-tap="!profileRulesHelper.isReadonly(\'state\', user.state) && openCountryStateModal()" readonly> <span>{{::translation.state}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="countryStateModal" items="countryStates" config="countryStateModalConfig" on-submit="setCountryState(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.state.$error" ng-if="form.state.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'citizenship\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="citizenship" ng-class="{ \'has-error\' : (form.citizenship.$invalid && !form.citizenship.$pristine) || (form.$submitted && form.citizenship.$invalid) }"><input type="text" class="custom-select custom-input" name="citizenship" ng-model="personalProfileForm.citizenship.citizenship" on-tap="!profileRulesHelper.isReadonly(\'citizenship\', user.citizenship) && openCitizenshipModal()" readonly ng-required="profileRulesHelper.isRequired(\'citizenship\')"> <span>{{::translation.citizenship}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="citizenshipModal" items="citizenships" config="citizenshipModalConfig" on-submit="setCitizenship(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.citizenship.$error" ng-if="form.citizenship.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'address\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="address" ng-class="{ \'has-error\' : (form.address.$invalid && !form.address.$pristine) || (form.$submitted && form.address.$invalid) }"><input type="text" name="address" ng-model="personalProfileForm.address" ng-minlength="2" ng-maxlength="100" keyboard-watcher ng-pattern="validator(\'address\')" ng-required="profileRulesHelper.isRequired(\'address\')" ng-readonly="profileRulesHelper.isReadonly(\'address\', user.address)"> <span>{{::translation.address}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.address.$error" ng-if="form.address.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_address}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'city\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="city" ng-class="{ \'has-error\' : (form.city.$invalid && !form.city.$pristine) || (form.$submitted && form.city.$invalid) }"><input type="text" name="city" ng-model="personalProfileForm.city" ng-minlength="2" ng-maxlength="100" ng-required="profileRulesHelper.isRequired(\'city\')" ng-readonly="profileRulesHelper.isReadonly(\'city\', user.city)" keyboard-watcher ng-pattern="validator(\'name\')" style="user-select: text !important;"> <span>{{::translation.city}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.city.$error" ng-if="form.city.$dirty || from.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_city}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'postCode\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="postCode" ng-class="{ \'has-error\' : (form.postCode.$invalid && !form.postCode.$pristine) || (form.$submitted && form.postCode.$invalid) }"><input type="text" name="postCode" ng-model="personalProfileForm.postCode" ng-minlength="3" ng-maxlength="15" keyboard-watcher ng-pattern="validator(\'alphanum\')" ng-required="profileRulesHelper.isRequired(\'postCode\')" ng-readonly="profileRulesHelper.isReadonly(\'postCode\', user.postCode)"> <span>{{::translation.zipCode}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.postCode.$error" ng-if="form.postCode.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="row padding-bottom"><div class="col"></div></div></form><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons" ng-hide="constants[\'disableEditPersonalDetails\']"><div class="row p-0"><div class="col"><label for="submit"><button class="button text-transform-uppercase button-blue button-full button-shadow">{{::translation.update}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"PersonalDetailsController"}},resolve:{location:["LocationService",p("Personal Details - Webmobile")]},data:{footer:!1}}).state("kycCheck",{url:"/kycCheck",cache:!1,template:'<ion-view id="createFirstAccount"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light"></span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col"><div class="title roboto font-24"></div></div></div><div class="row"><div class="col"><div class="content roboto font-18">{{message}}</div></div></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar class="invest-buttons"><div class="row p-0"><div class="col"><button class="button button-block button-blue" on-tap="onCancel()">{{translation.back}}</button></div><div class="col"><button class="button button-block button-blue" on-tap="onNext()">{{translation.continue}}</button></div></div></ion-footer-bar></ion-view>',controller:"KycCheckController",resolve:{},data:{footer:!1}}).state("tnc",{url:"/tnc",cache:!1,template:'<ion-view id="createFirstAccount"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.terms}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col"><div class="title roboto font-24"></div></div></div><div class="row"><div class="col"><div class="content roboto font-18" ng-if="!translation.tncPoptpDisclamer">{{::translation.tnc1}} <a ng-href="{{constants.externalLinks.termsAndConditions + \'?lang=\' + lang}}" target="_blank">{{::translation.terms}}</a> {{::translation.tnc2}}</div><div class="content roboto font-16" ng-if="translation.tncPoptpDisclamer"><span ng-bind-html="translation.tncPoptpDisclamer"></span></div></div></div><div class="row"><div class="col"><form name="form" novalidate ng-submit="onNext(form)"><input type="submit" id="submit" value="Submit" style="display:none"><ion-checkbox class="mt-10 border-0 modern-checkbox" ng-class="{\'error-checkbox\': (form.tnc.$invalid && !form.tnc.$pristine) || (form.$submitted && form.tnc.$invalid) }" name="tnc" ng-model="tnc" ng-required="true">{{::translation.tncAccept}}</ion-checkbox></form></div></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-blue" type="submit">{{translation.continue}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"TncController",resolve:{},data:{footer:!1}}).state("questionnaireMessage",{url:"/questionnaireMessage",cache:!1,template:'<ion-view id="createFirstAccount"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-title></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col"><div class="title roboto font-24"></div></div></div><div class="row"><div class="col"><div class="content roboto font-22">{{::translation.questionnaireFill}}</div></div></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar class="invest-buttons"><div class="row p-0"><div class="col"><button class="button button-block button-cancel" type="button" on-tap="navigate(\'root.app.assets\',{direction: \'right\'})">{{translation.close}}</button></div><div class="col"><button class="button button-block button-blue" type="button" on-tap="navigate(\'signupQuestionnaire\',{})">{{translation.continue}}</button></div></div></ion-footer-bar></ion-view>',controller:"QuestionnaireMessageController",resolve:{},data:{footer:!1}}),n.views.maxCache(0),n.views.forwardCache(!1),n.views.transition("platform"),n.navBar.alignTitle("left"),n.backButton.text(""),n.spinner.icon("ios"),n.tabs.position("bottom"),r.devKey="",r.appId="",r.options={isDebug:!0,onInstallConversionDataListener:!0},s.debugInfoEnabled(!1)}]),services.service("BlueprintRegistration",function(){function e(e){return{firstName:e.firstName||"",middleName:e.middleName||"",surname:e.surname||"",nationalID:e.nationalId||"",gender:"male"===e.gender?0:1,dob:moment(e.dateBirth).format("DD.MM.YYYY")||"",phone:e.phone||"",isMobilePhone:e.isMobilePhone?1:0,country:e.country||"",nationality:e.nationality||"",birthCountry:e.birthCountry||"",address:e.street||"",city:e.city||"",postalCode:e.zipCode||"",isUSCitizen:e.isUSCitizen?1:0,usTaxID:e.usTaxId||""}}function t(e){return{tradingFrequency:e.freq,OTCDFrequency:e.deriv,ETDFrequency:e.exch,approveCFDTrading:e.permit?1:0,atv:e.total,investmentKnowledge:e.investm,employmentStatus:e.employ,annualIncome:e.finance,savingsInvestment:e.value}}function n(e){var t;try{t=JSON.parse(e)}catch(e){return""}var n=t.hasOwnProperty("data")&&t.data,a={c:n.campaign||"",pid:n.media_source||"",af_siteID:n.af_siteid||"",af_sub1:n.af_sub1||"",af_sub2:n.af_sub2||"",af_sub3:n.af_sub3||"",af_sub4:n.af_sub4||"",af_sub5:n.af_sub5||"",clickID:""};return Object.keys(a).reduce(function(e,t){return e.concat(t+"="+("null"===a[t]?"":a[t]))},[]).join("|")}return this.create=function(a){switch(a){case"long":return e;case"questions":return t;case"affiliate":return n}},this}),app.service("chartThemes",[function(){return{dark:{background:"#111216",label:"#EEEEEE",stroke:"#989898",trendline:"#AAAAAA",gridlines:"#555555",macdhist:"#AAAAAA",crosshair:"#f1f1f1",currentvalueindicator:"#FF0000",currentPriceLine:"#0090ff",currentPriceBackground:"#0090ff",overlays:["#CB2BC6","#5217DB","#18E197","#DED71F","#DE521F","#10F5B8","#A6ACE2","#DF9FB0"],bbands:["#aabbcc","#aabbcc","#aabbcc"],macd:["#0000FF","#FF0000","#aabbcc"],psar:"#CCFFFF",rcandle:"#e14928",gcandle:"#21ad38",lineplot:"#CCCCCC",idcss:'position:absolute; border: 2px solid #0066CC; background: #FFFFCC;font-size:10px;font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;text-align:center;width:80px;height:100px; padding:2px;',oloffset:0,font:"11px Helvetica Neue, Helvetica, Arial",extremeFont:"Bold 11px Helvetica Neue, Helvetica, Arial",extremeDash:[5],extremeRangeTransparency:.1,extremeRangeColor:"#fff",indicatorTitleColor:"#fff",maxYlines:10,maxIndicators:10},light:{background:"#FBFBFB",label:"#bababa",stroke:"#d3d3d3",gridlines:"#d3d3d3",crosshair:"#7777FF",trendline:"#0B0B0B",macdhist:"#0B0B0B",currentvalueindicator:"#FF0000",currentPriceLine:"#152d4f",currentPriceValue:"#ffffff",currentPriceBackground:"#152d4f",overlays:["#CB2BC6","#5217DB","#18E197","#DED71F","#DE521F","#10F5B8","#A6ACE2","#DF9FB0"],bbands:["#001122","#001122","#001122"],macd:["#000088","#880000","#aabbcc"],psar:"#000099",rcandle:"#fc5440",gcandle:"#21c8a3",lineplot:"#333333",idcss:'position:absolute; border: 2px solid #0066CC; background: #FFFFCC;font-size:10px;font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;text-align:center;width:80px;height:100px; padding:2px;',font:"11px Helvetica Neue, Helvetica, Arial",extremeFont:"Bold 11px Helvetica Neue, Helvetica, Arial",extremeDash:[5],extremeRangeTransparency:.1,extremeRangeColor:"#fff",indicatorTitleColor:"#fff",maxYlines:6,maxIndicators:10}}}]),app.service("config",["constants","$http",function(e,t){function n(){function e(e){var t=e.data;Object.keys(t).forEach(function(e){n.hasOwnProperty(e)&&"function"!=typeof n[e]&&(n[e]=t[e])}),log("config is loaded successfully")}console.log("loading config from remote ...");var n=this,o={method:"GET",url:a.configPath+"config.json?"+Date.now(),timeout:1e4};return t(o).then(e)}var a={load:n,socket:{serverAddress:"wss://mena-evest.pandats-client.io",path:"/socket.io",autoConnect:!1,connectTimeout:5e3,reconnection:!0,transports:["websocket"],reconnect:!0,reconnectionDelay:5e3,reconnectionLimit:5e3,maxReconnectionAttempts:1e3},traderName:"Evest",defaultCurrencySymbols:e.currencySymbols.USD,languages:[{id:"en",name:"English"},{id:"ar",name:"العربية"}],autoLogin:!1,defaultLanguage:"en",languagesPriority:["en"],languageChooseOption:!0,localizationPath:"locales/",localizationLoadTimeout:1e4,requestTimeout:25e3,currencyList:[],validations:{asset:{OutputName:{presence:{allowEmpty:!1}},IsTradeable:{presence:{allowEmpty:!1},numericality:{greaterThanOrEqualTo:0,lessThanOrEqualTo:2}},IsShow:{presence:{allowEmpty:!1}},Digits:{presence:{allowEmpty:!1},numericality:{greaterThanOrEqualTo:0,lessThanOrEqualTo:10}},Type:{presence:{allowEmpty:!1},numericality:!0},Description:{presence:{allowEmpty:!0}},ContractSize:{presence:{allowEmpty:!1},numericality:!0},ProfitMode:{presence:{allowEmpty:!1},numericality:!0},MarginMode:{presence:{allowEmpty:!1},numericality:!0},Spread:{presence:{allowEmpty:!1},numericality:!0},Category:{presence:{allowEmpty:!0}},Currency:{presence:{allowEmpty:!1}},Markup:{presence:{allowEmpty:!1},numericality:!0},Percentage:{presence:{allowEmpty:!1},numericality:!0},InitialMargin:{presence:{allowEmpty:!1},numericality:!0},TickSize:{presence:{allowEmpty:!1},numericality:!0},TickValue:{presence:{allowEmpty:!1},numericality:!0},MinLot:{presence:{allowEmpty:!1},numericality:!0},StepLot:{presence:{allowEmpty:!1},numericality:!0},MaxLot:{presence:{allowEmpty:!1},numericality:!0},IsCurrentSessionValid:{presence:{allowEmpty:!1},numericality:!0},Unit:{presence:!1},SwapsLong:{presence:{allowEmpty:!1},numericality:!0},SwapsShort:{presence:{allowEmpty:!1},numericality:!0},TradingTimes:{presence:!0,isTradingTimes:!0},id:{presence:{allowEmpty:!1},numericality:!0},Bid:{presence:{allowEmpty:!1},numericality:!0},Ask:{presence:{allowEmpty:!1},numericality:!0},High:{presence:{allowEmpty:!1},numericality:!0},Low:{presence:{allowEmpty:!1},numericality:!0},TickTime:{presence:{allowEmpty:!1},numericality:!0},LastPrice:{presence:{allowEmpty:!1},numericality:!0}},openTrade:{id:{presence:{allowEmpty:!1},numericality:!0},OrderID:{presence:{allowEmpty:!1},numericality:!0},Cmd:{presence:{allowEmpty:!1},numericality:!0},Comment:{presence:{allowEmpty:!0}},OpenTime:{presence:{allowEmpty:!1},numericality:!0},CloseTime:{presence:{allowEmpty:!1},numericality:!0},OpenPrice:{presence:{allowEmpty:!1},numericality:!0},ClosePrice:{presence:{allowEmpty:!1},numericality:!0},Digits:{presence:{allowEmpty:!1},numericality:{greaterThanOrEqualTo:0,lessThanOrEqualTo:10}},Profit:{presence:{allowEmpty:!1},numericality:!0},Commission:{presence:{allowEmpty:!1},numericality:!0},Expiration:{presence:{allowEmpty:!1},numericality:!0},sl:{presence:{allowEmpty:!1},numericality:!0},tp:{presence:{allowEmpty:!1},numericality:!0},Taxes:{presence:{allowEmpty:!1},numericality:!0},Storage:{presence:{allowEmpty:!1},numericality:!0},Volume:{presence:{allowEmpty:!1},numericality:!0},Login:{presence:{allowEmpty:!1},numericality:!0},OutputName:{presence:{allowEmpty:!1}},ContractSize:{presence:{allowEmpty:!1},numericality:!0}}},stepChange:{20:5,100:10},defaultLeverage:100,leverages:[100],chartUrl:"https://nfp.pandats.com/prochart",firebase:{},googleProviderId:"",facebookProviderId:""};return a}]),app.constant("constants",{lsTraderName:"__eves_",errorCodes:{invalidLogin:"-1"},currencySeparator:"",assetsTypes:[{id:"PORTFOLIO ASSETS",name:"portfolioassets",selected:!1},{id:"SHARES",name:"stocks",selected:!1},{id:"FOREX",name:"currencies",selected:!0},{id:"COMMODITIES",name:"commodities",selected:!1},{id:"SPOT",name:"spot",selected:!1},{id:"INDICES",name:"indices",selected:!1},{id:"CRYPTO",name:"crypto",selected:!1}],actions:{buy:0,sell:1,buy_limit:2,sell_limit:3,buy_stop:4,sell_stop:5,balance:6,credit:7,pamm:8,correction:9,charge:10,commission:11,commission_daily:12,commission_monthly:13,agent_daily:14,agent_monthly:15,interestrate:16,buy_canceled:17,sell_canceled:18,dividend:19,dividend_franked:20,tax:21,agent:22,so_compensation:23,bonus:24},actionsId:{0:"buy",1:"sell",2:"buy_limit",3:"sell_limit",4:"buy_stop",5:"sell_stop",6:"balance",7:"credit",8:"pamm",9:"correction",10:"charge",11:"commission",12:"commission_daily",13:"commission_monthly",14:"agent_daily",15:"agent_monthly",16:"interestrate",17:"buy_canceled",18:"sell_canceled",19:"dividend",20:"dividend_franked",21:"tax",22:"agent",23:"so_compensation",24:"bonus"},ls_state:{sell:{limit:"sell_limit",stop:"sell_stop"},buy:{limit:"buy_limit",stop:"buy_stop"}},dateRange:{day:0,threedays:1,week:2,month:3,threemonths:4,all:5,range:6},defaultInvestAmount:1,system:{loginSources:[{id:3,name:"Demo"},{id:4,name:"Live"}],defaultLoginSource:3},openPositionsPanel:{tabId:0,templates:{full:"openPositions",collapsed:"collapsedOpenPositions"}},ordersPanel:{tabId:1,templates:{full:"openPositions",collapsed:"collapsedOpenPositions"}},closedPositionsPanel:{tabId:2,templates:{full:"closePositions",collapsed:"collapsedClosePositions"}},tradingAlerts:{tabId:3,templates:{full:"tradingAlerts",collapsed:"tradingAlerts"}},economicCalendar:{tabId:4,templates:{full:"economicCalendar",collapsed:"economicCalendar"}},dailyMarketUpdate:{tabId:5,templates:{full:"dailyMarketUpdate",collapsed:"dailyMarketUpdate"}},chartRangeParams:[{title:"1min",id:1,timeFrame:1},{title:"5min",id:2,timeFrame:5},{title:"15min",id:3,timeFrame:15},{title:"30min",id:4,timeFrame:30},{title:"1hour",id:5,timeFrame:60},{title:"4hours",id:6,timeFrame:240},{title:"1day",id:7,timeFrame:1440},{title:"1week",id:8,timeFrame:10080},{title:"1month",id:9,timeFrame:43200}],chartTypes:[{type:"candlestick"},{type:"areaspline"},{type:"ohlc"}],notification:{error:0,success:1},validatorType:{notEmpty:0,regex:1,valueMatch:2},regex:{onlyLatinCharacters:"^[a-zA-Z]+$",onlyLatinCharactersAndWhitespaces:"^[a-zA-Z\\s]+$",latinCharactersDigitsWhitespace:"^[a-zA-Z\\s0-9]+$",email:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",onlyDigits:"^[0-9]+$"},classes:{inputErrorClass:"error"},inputTypes:{text:"text",password:"password"},timeout:{noResponse:1e4},defaultCurrency:"USD",currencySymbols:{USD:"$",EUR:"€",GBP:"£",AUD:"A$",CAD:"C$",NZD:"NZ$",SGD:"$",JPY:"¥",RUB:"₽",TRY:"₺",CNY:"¥",BRL:"R$",ZAR:"R",CHF:"CHF",KWD:"ك",SAR:"SR",BTC:"Ƀ",LTC:"Ł",XRP:"XRP",BCH:"BCH",ETH:"ETH",UST:"₮",CZK:"Kč",HUF:"Ft",TTR:"₮",SEK:"SEK"},investAmountRangeParams:[{value:1,name:"1"},{value:5,name:"5"},{value:10,name:"10"},{value:50,name:"50"},{value:100,name:"100"}],startOfDay:{hours:6,minutes:55,seconds:1},profitLossOptions:[{id:1,title:"Points"},{id:2,title:"Rate"}],defaultProfit:50,defaultLoss:50,error:{type:{VALIDATION:0,SYSTEM:1,NETWORK:2},typeById:{0:"validation",1:"system",2:"network"}},daysOfWeek:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},loginStatus:{noActiveAccount:0,failedActiveAccount:1,noTradingAccounts:2},userState:{initial:1,personal:2,questionnaire:3},depositMultipliers:[1,2.5,2,2,2.5,2],defaultDeposit:{minimum:100,maximum:5e3,visual:250},platforms:["Web","API","CRM","Mobile"],platformById:{web:"Web",mobile:"Mobile",webMobile:"Web Mobile"},initialDeposit:25e3,documentCategories:[{name:"proof_of_identity"},{name:"proof_of_residence"},{name:"document_other"}],documentBaseCategories:["photo_id","passport","driving_license","utility_bill","bank_statement","residence_certificate","credit_card_copy"],documentTypes:[{id:"photo_id_front",baseCategory:"photo_id",category:"proof_of_identity"},{id:"photo_id_back",baseCategory:"photo_id",category:"proof_of_identity"},{id:"passport",baseCategory:"passport",category:"proof_of_identity"},{id:"driving_license_front",baseCategory:"driving_license",category:"proof_of_identity"},{id:"driving_license_back",baseCategory:"driving_license",category:"proof_of_identity"},{id:"utility_bill",baseCategory:"utility_bill",category:"proof_of_residence"},{id:"bank_statement",baseCategory:"bank_statement",category:"proof_of_residence"},{id:"residence_certificate",baseCategory:"residence_certificate",category:"proof_of_residence"},{id:"credit_card_copy_front",baseCategory:"credit_card_copy",category:"proof_of_payment"},{id:"credit_card_copy_back",baseCategory:"credit_card_copy",category:"proof_of_payment"}],documentStatuses:{new:"New",pending:"Pending",approved:"Approved",rejected:"Rejected"},documentToStatuses:{Pending:"pending",Approved:"approved",Rejected:"rejected"},documentFromTypes:{photo_id_front:"Photo ID front",photo_id_back:"Photo ID back",passport:"Passport",driving_license_front:"Driving license front",driving_license_back:"Driver license back",utility_bill:"Utility bill",bank_statement:"Bank statement",residence_certificate:"Residence certificate",credit_card_copy_front:"Credit card copy front",credit_card_copy_back:"Credit card copy back",other:"Other"},documentToTypes:{"Photo ID front":"photo_id_front","Photo ID back":"photo_id_back",Passport:"passport","Driving license front":"driving_license_front","Driver license back":"driving_license_back","Utility bill":"utility_bill","Bank statement":"bank_statement","Residence certificate":"residence_certificate","Credit card copy front":"credit_card_copy_front","Credit card copy back":"credit_card_copy_back"},fileTypes:["image/png","image/gif","image/jpeg","image/bmp","image/TIFF","application/pdf"],maxFileSize:10485760,minFileSize:1e4,ticketStatuses:{open:"Open",inprogress:"In Progress",closed:"Closed",closedByClient:"Closed By Client",awaitingAgent:"Awaiting Agent",awaitingClient:"Awaiting Client"},ticketToStatuses:{Open:"open","In Progress":"inprogress",Closed:"closed","Closed By Client":"closedByClient","Awaiting Agent":"awaitingAgent","Awaiting Client":"awaitingClient"},ticketTypes:{generalQuestion:"General Question",loginProblem:"Login Problem",financeDepartment:"Finance Department",partnership:"Partnership",mobileClient:"Mobile Client",depositWithdrawal:"Deposit or Withdrawal"},ticketToTypes:{"General Question":"generalQuestion","Login Problem":"loginProblem","Finance Department":"financeDepartment",Partnership:"partnership","Mobile Client":"mobileClient","Deposit or Withdrawal":"depositWithdrawal"},paymentMethodsToTypes:{"Credit card":"creditCard","Wire transfer":"wireTransfer",Skrill:"skrill",Neteller:"neteller",CryptoWallet:"cryptoWallet",Other:"other"},withdrawalReasons:{withdrawingProfits:"Withdrawing profits",transferringFundsToAnotherBroker:"Transferring funds to another broker",unsatisfactoryService:"Unsatisfactory service",limitedFunds:"Limited funds",notEnoughTradingExperience:"Not enough trading experience",otherReason:"Other reason"},withdrawRequestStatusToType:{Pending:"pending",Approved:"approved",Rejected:"rejected","Cancelled by manager":"cancelledByManager","Cancelled by customer":"cancelledByCustomer"},showLeverageDropdown:!0,depositActionName:"forexDeposit",paymentMethodsBlueprint:{jeton:"Jeton",zotapay:"ZotapayHosted",bitcobrokers:"BitcoBrokers",solid:"SolidHosted",bestpaycard:"BestPayCard"},signupEnableCheckKYC:!1,externalLinks:{kycPolicy:"#"},hidePhoneNumber:!0,showCommission:!1,skipCreateFirstAccountPage:!0,autoUpdatePersonalDetails:!1,transactionTypes:["deposit","withdrawal","credit","all"],hideTransferBetweenAccounts:!1,enable2FA:!0,withdrawalComplianceRequired:!1,autoOpenLiveAccount:!0,
defaultCurrencyConvertCategory:"FOREX",cryptoBaseCurrencies:["BTG","DSH","ETC","ETH","LTC","XMR","XRP","BTC","BAB","BCH","UST","OMG","STR","ZEC","NXT","XEM","TRY","TTR"],questionnaireAnswersOverrides:{30:{"-1":"yes"}},profileFieldRules:{firstName:{required:!0,rawName:"firstName",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!0,readonlyIfNotEmpty:!0}}},lastName:{required:!0,rawName:"lastName",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!0,readonlyIfNotEmpty:!0}}},birthday:{required:!0,rawName:"birthday",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!0,readonlyIfNotEmpty:!0}}},country:{required:!0,rawName:"country",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!0,readonlyIfNotEmpty:!0}}},state:{required:!0,rawName:"state",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},city:{required:!0,rawName:"city",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},address:{required:!0,rawName:"address",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},currency:{required:!0,rawName:"currency",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},customerType:{required:!1,rawName:"customerType",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},citizenship:{required:!0,rawName:"citizenship",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!0,readonlyIfNotEmpty:!0}}},postCode:{required:!0,rawName:"postCode",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},phone:{required:!0,rawName:"phone",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!0},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isUSCitizen:{required:!0,rawName:"usCitizen",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},tin:{required:!1,rawName:"tin",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},taxCountry:{required:!1,rawName:"taxCountry",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},nationalId:{required:!1,rawName:"nationalId",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},companyName:{required:!1,rawName:"companyName",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isMarried:{required:!1,rawName:"married",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isSpouse:{required:!1,rawName:"spouseAware",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},birthPlace:{required:!1,rawName:"birthPlace",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},tradingExperience:{required:!1,rawName:"tradingExperience",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}}},questionGroups:["finance","knowledge"],viewQuestionnaireEnable:!0,showQuestionnaireInfo:!0,demoAccountCreateWithLive:!0,verificationProvider:"internal-v2",scoringRules:[{classification:"Negative",live:1,defaultLeverage:30,leverages:[30],showMessage:!0,acceptPopup:!0,buttonsView:"acceptCancel",messageTranslationKey:"negative_scoring"},{classification:"Retail",live:1,defaultLeverage:30,leverages:[30],showMessage:!1,messageTranslationKey:""},{classification:"Professional Eligible",live:1,defaultLeverage:30,leverages:[30],showMessage:!1,messageTranslationKey:""}],defaultRoute:"root.app.assets"}),app.constant("countries",{countryCode:[{country:"Afghanistan",nationality:"Afghan",code:"AF"},{country:"Åland Islands ",nationality:"of the Åland Islands",code:"AX"},{country:"Albania",nationality:"Albanian",code:"AL"},{country:"Algeria",nationality:"Algerian",code:"DZ"},{country:"American Samoa ",nationality:"American",code:"AS"},{country:"Andorra",nationality:"Andorran",code:"AD"},{country:"Angola",nationality:"Angolan",code:"AO"},{country:"Anguilla ",nationality:"Anguillan",code:"AI"},{country:"Antarctica",nationality:"Antarctic",code:"AQ"},{country:"Antigua and Barbuda",nationality:"of Antigua and Barbuda",code:"AG"},{country:"Argentina",nationality:"Argentine",code:"AR"},{country:"Armenia",nationality:"Armenian",code:"AM"},{country:"Aruba ",nationality:"Aruban",code:"AW"},{country:"Australia",nationality:"Australian",code:"AU"},{country:"Austria",nationality:"Austrian",code:"AT"},{country:"Azerbaijan",nationality:"Azerbaijani",code:"AZ"},{country:"Bahamas",nationality:"Bahamian",code:"BS"},{country:"Bahrain",nationality:"Bahraini",code:"BH"},{country:"Bangladesh",nationality:"Bangladeshi",code:"BD"},{country:"Barbados",nationality:"Barbadian",code:"BB"},{country:"Belarus",nationality:"Belarusian",code:"BY"},{country:"Belgium",nationality:"Belgian",code:"BE"},{country:"Belize",nationality:"Belizean",code:"BZ"},{country:"Benin",nationality:"Beninese",code:"BJ"},{country:"Bermuda ",nationality:"Bermudian",code:"BM"},{country:"Bhutan",nationality:"Bhutanese",code:"BT"},{country:"Bolivia",nationality:"Bolivian",code:"BO"},{country:"Bosnia and Herzegovina",nationality:"of Bosnia and Herzegovina",code:"BA"},{country:"Botswana",nationality:"Botswanan",code:"BW"},{country:"Bouvet Island ",nationality:"of Bouvet Island",code:"BV"},{country:"Brazil",nationality:"Brazilian",code:"BR"},{country:"Brunei",nationality:"Bruneian",code:"BN"},{country:"Bulgaria",nationality:"Bulgarian",code:"BG"},{country:"Burkina Faso",nationality:"Burkinabe",code:"BF"},{country:"Burundi",nationality:"Burundian",code:"BI"},{country:"Cambodia",nationality:"Cambodian",code:"KH"},{country:"Cameroon",nationality:"Cameroonian",code:"CM"},{country:"Canada",nationality:"Canadian",code:"CA"},{country:"Cape Verde",nationality:"Cape Verdean",code:"CV"},{country:"Cayman Islands ",nationality:"Caymanian",code:"KY"},{country:"Central African Republic",nationality:"Central African",code:"CF"},{country:"Chad",code:"CN",nationality:"Chadian"},{country:"Chile",nationality:"Chilean",code:"TD"},{country:"China",nationality:"Chinese",code:"CN"},{country:"Christmas Island ",nationality:"of Christmas Island",code:"CX"},{country:"Cocos ",nationality:"of the Cocos (Keeling) Islands",code:"CC"},{country:"Colombia",nationality:"Colombian",code:"CO"},{country:"Comoros",nationality:"Comorian",code:"KM"},{country:"Congo ",nationality:"Congolese",code:"CG"},{country:"Cook Islands ",nationality:"of the Cook Islands",code:"CK"},{country:"Costa Rica",nationality:"Costa Rican",code:"CR"},{country:"Côte d’Ivoire",nationality:"Ivorian",code:"CI"},{country:"Croatia",nationality:"Croatian",code:"HR"},{country:"Cuba",nationality:"Cuban",code:"CU"},{country:"Cyprus",nationality:"Cypriot",code:"CY"},{country:"Czech Republic",nationality:"Czech",code:"CZ"},{country:"Denmark",nationality:"Danish",code:"DK"},{country:"Djibouti",nationality:"of Djibouti",code:"DJ"},{country:"Dominica",nationality:"of Dominica",code:"DM"},{country:"Dominican Republic",nationality:"Dominican",code:"DO"},{country:"Ecuador",nationality:"Ecuadorian",code:"EC"},{country:"Egypt",nationality:"Egyptian",code:"EG"},{country:"El Salvador",nationality:"Salvadorian; Salvadoran",code:"SV"},{country:"Equatorial Guinea",nationality:"of Equatorial Guinea",code:"GQ"},{country:"Eritrea",nationality:"Eritrean",code:"ER"},{country:"Estonia",nationality:"Estonian",code:"EE"},{country:"Ethiopia",nationality:"Ethiopian",code:"ET"},{country:"Faeroe Islands ",nationality:"Faeroese",code:"FO"},{country:"Falkland Islands ",nationality:"of the Falkland Islands",code:"FK"},{country:"Fiji",nationality:"Fijian",code:"FJ"},{country:"Finland",nationality:"Finnish",code:"FI"},{country:"France",nationality:"French",code:"FR"},{country:"French Guiana ",nationality:"Guianese",code:"GF"},{country:"French Polynesia ",nationality:"Polynesian",code:"PF"},{country:"Gabon",nationality:"Gabonese",code:"GA"},{country:"Gambia, ",nationality:"Gambian",code:"GM"},{country:"Georgia",nationality:"Georgian",code:"GE"},{country:"Germany",nationality:"German",code:"DE"},{country:"Ghana",nationality:"Ghanaian",code:"GH"},{country:"Gibraltar ",nationality:"Gibraltarian",code:"GI"},{country:"Greece",nationality:"Greek",code:"GR"},{country:"Greenland ",nationality:"Greenlandic",code:"GL"},{country:"Grenada",nationality:"Grenadian",code:"GD"},{country:"Guadeloupe ",nationality:"Guadeloupean",code:"GP"},{country:"Guam ",nationality:"Guamanian",code:"GU"},{country:"Guatemala",nationality:"Guatemalan",code:"GT"},{country:"Guernsey ",nationality:"Guernsey",code:"GG"},{country:"Guinea",nationality:"Guinean",code:"GN"},{country:"Guinea-Bissau",nationality:"of Guinea-Bissau",code:"GW"},{country:"Guyana",nationality:"Guyanese",code:"GY"},{country:"Haiti",nationality:"Haitian",code:"HT"},{country:"Honduras",nationality:"Honduran",code:"HN"},{country:"Hong Kong ",nationality:"Hong Kong Chinese",code:"HK"},{country:"Hungary",nationality:"Hungarian",code:"HU"},{country:"Iceland",nationality:"Icelandic",code:"IS"},{country:"India",nationality:"Indian",code:"IN"},{country:"Indonesia",nationality:"Indonesian",code:"ID"},{country:"Iran",nationality:"Iranian",code:"IR"},{country:"Iraq",nationality:"Iraqi",code:"IQ"},{country:"Ireland",nationality:"Irish",code:"IE"},{country:"Isle of Man ",nationality:"Manx",code:"IM"},{country:"Israel",nationality:"Israeli",code:"IL"},{country:"Italy",nationality:"Italian",code:"IT"},{country:"Jamaica",nationality:"Jamaican",code:"JM"},{country:"Japan",nationality:"Japanese",code:"JP"},{country:"Jersey ",nationality:"Jersey",code:"JE"},{country:"Jordan",nationality:"Jordanian",code:"JO"},{country:"Kazakhstan",nationality:"Kazakh",code:"KZ"},{country:"Kenya",nationality:"Kenyan",code:"KE"},{country:"Kiribati",nationality:"Kiribatian",code:"KI"},{country:"Kuwait",nationality:"Kuwaiti",code:"KW"},{country:"Kyrgyzstan",nationality:"Kyrgyz",code:"KG"},{country:"Laos",nationality:"Lao; Laotian",code:"LA"},{country:"Latvia",nationality:"Latvian",code:"LV"},{country:"Lebanon",nationality:"Lebanese",code:"LB"},{country:"Lesotho",nationality:"of Lesotho",code:"LS"},{country:"Liberia",nationality:"Liberian",code:"LR"},{country:"Libya",nationality:"Libyan",code:"LY"},{country:"Liechtenstein",nationality:"of Liechtenstein",code:"LI"},{country:"Lithuania",nationality:"Lithuanian",code:"LT"},{country:"Luxembourg",nationality:"Luxembourgish",code:"LU"},{country:"Madagascar",nationality:"Malagasy",code:"MG"},{country:"Malawi",nationality:"Malawian",code:"MW"},{country:"Malaysia",nationality:"Malaysian",code:"MY"},{country:"Maldives",nationality:"Maldivian",code:"MV"},{country:"Mali",nationality:"Malian",code:"ML"},{country:"Malta",nationality:"Maltese",code:"MT"},{country:"Marshall Islands",nationality:"Marshallese",code:"MH"},{country:"Martinique ",nationality:"Martinican",code:"MQ"},{country:"Mauritania",nationality:"Mauritanian",code:"MR"},{country:"Mauritius",nationality:"Mauritian",code:"MU"},{country:"Mayotte ",nationality:"Mahoran",code:"YT"},{country:"Mexico",nationality:"Mexican",code:"MX"},{country:"Micronesia",nationality:"of Micronesia",code:"FM"},{country:"Moldova",nationality:"Moldovan",code:"MD"},{country:"Monaco",nationality:"Monegasque",code:"MC"},{country:"Mongolia",nationality:"Mongolian",code:"MN"},{country:"Montenegro",nationality:"Montenegrin",code:"ME"},{country:"Montserrat ",nationality:"Montserratian",code:"MS"},{country:"Morocco",nationality:"Moroccan",code:"MA"},{country:"Mozambique",nationality:"Mozambican",code:"MZ"},{country:"Namibia",nationality:"Namibian",code:"NA"},{country:"Nauru",nationality:"Nauruan",code:"NR"},{country:"Nepal",nationality:"Nepalese",code:"NP"},{country:"Netherlands ",nationality:"Dutch",code:"NL"},{country:"New Caledonia ",nationality:"New Caledonian",code:"NC"},{country:"New Zealand",nationality:"of New Zealand",code:"NZ"},{country:"Nicaragua",nationality:"Nicaraguan",code:"NI"},{country:"Niger",nationality:"Nigerien",code:"NE"},{country:"Nigeria",nationality:"Nigerian",code:"NG"},{country:"Niue ",nationality:"Niuean",code:"NU"},{country:"Norfolk Island ",nationality:"of Norfolk Island",code:"NF"},{country:"Norway",nationality:"Norwegian",code:"NO"},{country:"Oman",nationality:"Omani",code:"OM"},{country:"Pakistan",nationality:"Pakistani",code:"PK"},{country:"Palau",nationality:"Palauan",code:"PW"},{country:"Panama",nationality:"Panamanian",code:"PA"},{country:"Paraguay",nationality:"Paraguayan",code:"PY"},{country:"Peru",nationality:"Peruvian",code:"PE"},{country:"Philippines",nationality:"Philippine",code:"PH"},{country:"Pitcairn Islands ",nationality:"Pitcairner",code:"PN"},{country:"Poland",nationality:"Polish",code:"PL"},{country:"Portugal",nationality:"Portuguese",code:"PT"},{country:"Puerto Rico ",nationality:"Puerto Rican",code:"PR"},{country:"Qatar",nationality:"Qatari",code:"QA"},{country:"Réunion ",nationality:"Reunionese",code:"RE"},{country:"Romania",nationality:"Romanian",code:"RO"},{country:"Russia",nationality:"Russian",code:"RU"},{country:"Rwanda",nationality:"Rwandan; Rwandese",code:"RW"},{country:"Saint Barthélemy ",nationality:"of Saint Barthélemy",code:"BL"},{country:"Saint Lucia",nationality:"Saint Lucian",code:"LC"},{country:"Saint Martin ",nationality:"of Saint Martin",code:"MF"},{country:"Samoa",nationality:"Samoan",code:"WS"},{country:"San Marino",nationality:"of San Marino",code:"SM"},{country:"Saudi Arabia",nationality:"Saudi Arabian",code:"SA"},{country:"Senegal",nationality:"Senegalese",code:"SN"},{country:"Serbia",nationality:"Serbian",code:"RS"},{country:"Seychelles",nationality:"of Seychelles",code:"SC"},{country:"Sierra Leone",nationality:"Sierra Leonean",code:"SL"},{country:"Singapore",nationality:"Singaporean",code:"SG"},{country:"Slovakia",nationality:"Slovak; Slovakian",code:"SK"},{country:"Slovenia",nationality:"Slovenian",code:"SL"},{country:"Solomon Islands",nationality:"of the Solomon Islands",code:"SB"},{country:"Somalia",nationality:"Somali; Somalian",code:"SO"},{country:"South Africa",nationality:"South African",code:"ZA"},{country:"South Korea",nationality:"South Korean",code:"SK"},{country:"South Sudan",nationality:"South Sudanese",code:"SS"},{country:"Spain",nationality:"Spanish",code:"ES"},{country:"Sri Lanka",nationality:"Sri Lankan",code:"LK"},{country:"Sudan",nationality:"Sudanese",code:"SD"},{country:"Suriname",nationality:"Surinamese",code:"SR"},{country:"Swaziland",nationality:"Swazi",code:"CH"},{country:"Sweden",nationality:"Swedish",code:"SE"},{country:"Switzerland",nationality:"Swiss",code:"CH"},{country:"Syria",nationality:"Syrian",code:"SY"},{country:"Taiwan",nationality:"Taiwanese",code:"TW"},{country:"Tajikistan",nationality:"Tajik",code:"TJ"},{country:"Tanzania",nationality:"Tanzanian",code:"TZ"},{country:"Thailand",nationality:"Thai",code:"BI"},{country:"Timor-Leste",nationality:"East Timorese",code:"TL"},{country:"Togo",nationality:"Togolese",code:"TG"},{country:"Tokelau ",nationality:"Tokelauan",code:"TK"},{country:"Tonga",nationality:"Tongan",code:"TO"},{country:"Trinidad and Tobago",nationality:"of Trinidad and Tobago",code:"TT"},{country:"Tunisia",nationality:"Tunisian",code:"TN"},{country:"Turkey",nationality:"Turkish",code:"TR"},{country:"Turkmenistan",nationality:"Turkmen",code:"TM"},{country:"Tuvalu",nationality:"Tuvaluan",code:"TV"},{country:"Uganda",nationality:"Ugandan",code:"UG"},{country:"Ukraine",nationality:"Ukrainian",code:"UA"},{country:"United Arab Emirates",nationality:"Emirian",code:"AE"},{country:"United Kingdom",nationality:"British",code:"GB"},{country:"United States",nationality:"American",code:"US"},{country:"Uruguay",nationality:"Uruguayan",code:"UY"},{country:"Uzbekistan",nationality:"Uzbek",code:"UZ"},{country:"Vanuatu",nationality:"Vanuatuan",code:"VU"},{country:"Venezuela",nationality:"Venezuelan",code:"VE"},{country:"Vietnam",nationality:"Vietnamese",code:"VN"},{country:"Western Sahara ",nationality:"Sahrawi",code:"EH"},{country:"Yemen",nationality:"Yemeni",code:"YE"},{country:"Zambia",nationality:"Zambian",code:"ZM"},{country:"Zimbabwe",nationality:"Zimbabwean",code:"ZW"}]}),app.constant("messages",{_fallback:!0,login:"Login",logout:"Logout",password:"Password",loginPasswordEmpty:"Login and password fields can't be empty",selectServer:"Please select server",deposit:"Deposit",withdrawal:"Withdraw",creditin:"Credit In",creditout:"Credit Out",moneyTransfer:"Money transfer",cashback:"Loyalty cashback",demoBalance:"Initial Deposit",rememberme:"Remember me",userid:"User ID",server:"Server",close:"Close",closeTrade:"Close Trade",deleteTradeBtn:"Delete",deleteOrder:"Delete Order",orderDeleted:"Order is deleted",forgotPassword:"Forgot password",normal:"Normal",wide:"Wide",mrms:"",dateRange:{day:"Today",threedays:"Last 3 days",week:"Last Week",month:"Last Month",threemonths:"Last 3 months",all:"All"},today:"Today",last3days:"Last 3 days",lastweek:"Last Week",lastmonth:"Last month",last3months:"Last 3 months",all:"All",daterange:"Date range",day:"Day",month:"Month",year:"Year",print:"Print",openPositions:"Open Trades",orders:"Orders",openPosition:"Open position",openPending:"Open Pending order",updatePosition:"Update position",closedPositions:"Closed Trades",historyFor:"Trade History For",closePosition:"Close position",successupdated:"Successfully updated",notTradeble:"Asset in not tradable",execute:"Execute",trade:"Trade",volumeInLot:"Volume in lot",volume:"Volume",lots:"Lots",amount:"Amount",sell:"Sell",limit:"Limit",sell_limit:"Sell Limit",sell_stop:"Sell Stop",buy:"Buy",stop:"Stop",buy_limit:"Buy Limit",buy_stop:"Buy Stop",pamm:"Pamm",correction:"Correction",charge:"Charge",commission:"Commission",commission_daily:"Commission Daily",commission_monthly:"Commission Monthly",agent_daily:"Agent Daily",agent_monthly:"Agent Monthly",interestrate:"Interestrate",buy_canceled:"Buy Canceled",sell_canceled:"Sell Canceled",dividend:"Dividend",dividend_franked:"Dividend Franked",tax:"Tax",agent:"Agent",so_compensation:"SO Compensation",bonus:"Bonus",btnSell:"Sell",btnBuy:"Buy",closeSelected:"Close selected",credit:"Credit",balance:"Balance",netPL:"Net P/L",equity:"Equity",margin:"Margin",usedMargin:"Used margin",freeMargin:"Free margin",marginLevel:"Margin level",availableFunds:"Available funds",usedFunds:"Used Funds",accountValue:"Account Value",todayFixedPL:"Today's fixed P/L",orderID:"Trade Number",asset:"Symbol",openTime:"Opening time",predictionJP:"Prediction",prediction:"Prediction",openRate:"Open rate",closedRate:"Closed rate",currentRate:"Current rate",closedTime:"Closed time",profit:"Profit",takeProfit:"Take Profit",stopLoss:"Stop loss",loss:"Loss",rate:"Rate",action:"Type",type:"Type",openPrice:"Open Price",closePrice:"Close Price",stopLossTakeProfit:"Stop Loss / Take Profit",distance:"Distance",swap:"Swap",chart:"Chart",noChartData:"No chart data",profitLoss:"Profit/Loss",step1:"STEP 1 - Profit loss entry",step2:"STEP 2 - Select up down prediction",step3:"STEP 3 - Trade amount confirmation",reset:"Reset",selectall:"Select all",bytick:"By Tick","1min":"1 min","5min":"5 min","15min":"15 min","30min":"30 min","1hour":"1 hour","4hours":"4 hours","1day":"1 day","1week":"1 week","1month":"1 month",save:"Save",sounds:"Sounds",positionTable:"Position table",step1ToolTip:"step1ToolTip",soundSettings:"View conditions of sound",newOrderOpened:"New order opened",closedManualy:"Position closed manually",closedbyServer:"Position closed by T/P or S/L",defaultValueSetting:"Default value setting for Target profit entry",totalPL:"Total P/L",totalDepostit:"Total depostit",totalWithdrawal:"Total withdrawal",noHistory:"No history for selected conditions",pleaseLogin:"Please log in to show the record",notLoggedIn:"Please log in to start trading",connecting:"Connecting...",connectionLost:"Server connection lost",correctDateSelection:"Start date can't be greater than end date. <br/>Please specify correct date range.",closedAt:" Closed at ",at:" at ",amountIn:"Amount in",deleted:"deleted",maxAmountLimit:"Invest amount is greater then limit amount",resetZoom:"Reset zoom",accountNumber:"Account number",account:"Account",fullname:"Full name",startDate:"Start date",endDate:"End date",period:"Period",price:"Price",done:"Done",openOrderComplete:"",closeOrderComplete:"",assetName:"asset name",bid:"Bid",ask:"Ask",change:"Change",highLow:"High/Low",setYour:"set your",submit:"submit",closePositionNowFor:"close the position now for.",currentValue:"current value",requiredMargin:"Required Margin",pipValue:"Pips value",pointValue:"Point value",pipPopup:"the affect of one pip change of your profit",pointPopup:"the affect of one point change of your profit",yes:"yes",no:"no",cancelOrder:"cancel order",areYouSureCancelOrder:"are you sure you want to cancel this order?",ok:"ok",successful:"successful",closeLoss:" Close at loss",closeProfit:" Close at profit",rateReach:" Open trade when rate reach",rateWhen:"when rate",allassets:"All assets",forex:"Forex",commodities:"Commodities",stocks:"Stocks",shares:"Stocks",indices:"Indices",crypto:"Crypto",invalidAmount:"Invalid volume",enterAmount:"Please enter a valid volume",filter:"Filter",tradingAlerts:"trading alerts",economicCalendar:"economic calendar",dailyMarketUpdate:"daily market update",marginCall:"Margin Call",marginCallText:"Attention! some text goes here",candlestick:"Candlestick",areaspline:"Line",ohlc:"Ohlc",correctAmount:"Enter correct amount",payment:"Payment",ending_with:"Ending with",transfer_fr:"transfer from",transfer_t:"transfer to",availableTransfer:"Available to transfer",actions:{0:"Buy",1:"Sell",6:"Balance",7:"Credit"},actionsExt:{0:"Buy",1:"Sell",6:"Balance",7:"Credit"},serverDateFormat:"DD/MM/YYYY  HH:mm:ss",openDateFormat:"HH:mm:ss",closeDateFormat:"DD/MM/YYYY HH:mm:ss",chartToolTipFormat:"%b %e, %H:%M:%S",datepickerFormat:"DD-MM-YYYY",continueTrading:"Continue trading",tryAgain:"Try Again",addFunds:"Add funds",messages:{authFailed:"Invalid login or password",datepickerFormat:"DD/MM/YYYY",tokenFailed:"Invalid token",cancelRequest:"Request canceled",characters:"Only characters",mixWordsNumbers:"characters or numbers",authTimeout:"Authentication timeout",orderProcessing:"Order is Processing",orderSuccess:"Order Successfull",dontSpace:"Don't use space",wrongPassword:"The password does not match",orderFailed:"Order execution failed",loginRequired:"You login is required",passwordRequired:"Enter a password",registrationFailed:"Registration failed",registrationSuccess:"Registration successful",mt4AuthFailed:"Failed to login into trading account",inappFailed:"Failed to open wallet",depositFailed:"Deposit failed",depositFailedText:"We could not process your deposit request. please try again",depositSuccess:"Deposit success",deleteOrderFailed:"Failed to delete order",required:"Required",too_short:"Too Short",too_long:"Too Long",invalid_email:"Invalid email address",invalid_Firtsname:"First name is invalid",invalid_Lastname:"Last Name is invalid",invalid_address:"Address is invalid",invalid_city:"City is invalid",password_not_matched:"Passwords are not matched",alphanumeric:"Please use only alphanumeric characters",numbers:"Please use only digits",accountNotExists:"Account with this email does not exist",password_changed:"Password changed successfully",email_sent:"Email sent succesfully",err_password_changed:"Error change password",general_error:"Problem in operation",general_error_text:"We are sorry, but but your request can not be processed at this time. Please try again or contact our support team",noAccounts:"No trading accounts",contactSupport:"Please contact support for more information",modifyTrade:"Trade was updated",numbers_chars:"Numbers and characters only",updateCustomerFailed:"Failed to update personal profile",updateCustomerSuccess:"Personal profile successfully updated",createAccountSuccess:"Account has been created successfully",createAccountFailed:"Failed to create trading account",initialDepositMin:"Initial deposit is too small",initialDepositMax:"Initial deposit is too large",transferFailed:"Failed to transfer funds between accounts",transferSuccess:"Transfer funds successfully",smsPhoneFailed:"Failed to send phone number",smsVerificationFailed:"Invalid verification code",withdrawSuccess:"Withdrawal request successful",withdrawalFailed:"Failed to request withdrawal",Err600:"Problem in operation",Err601:"Problem in operation",Err602:"Problem in operation",Err603:"Problem in operation",Err606:"Problem in operation",Err666:"You are not logged in","Err0:":"Wrong username or password",Err1:"Failed to open position, try again or contact our support",Err2:"Username is mandatory",Err3:"Username and Password fields are mandatory",Err4:"We cannot process your request, try later or contact support",Err5:"An option having related trades cannot be deleted",Err6:"An option having related trades cannot be deleted",Err7:"Not enough funds in your balance to process withdrawal request",Err8:"An error prevent completing your transaction, try later or contact support",Err9:"Please enter a valid deposit amount",Err10:"Deposit amount is invalid",Err11:"Deposit amount must be a positive value",Err12:"Your transaction has been declined. Try later or contact support",Err13:"Not enough funds in your account to process your withdraw request",Err14:"Your deposit request means of payment is invalid",Err15:"Please enter a valid withdrawal amount",Err16:"Please enter a valid withdrawal amount",Err17:"Please enter a valid withdrawal amount",Err18:"Your withdraw request was declined.  Try later or contact support",Err19:"The system is busy, please try again later",Err20:"We cannot process your request, try later or contact support",Err21:"The required email already exists.",Err22:"We cannot process your request, try later or contact support",Err23:"Not enough funds",Err24:"Cannot open trade when the market is closed",Err25:"We cannot process your request, try later or contact support",Err26:"Your account is prohibited to perform this action. Contact support",Err29:"The invest amount is too high. Please lower your investment amount",Err30:"We cannot process your request, try later or contact support",Err32:"Reset password failed",Err33:"General Exception",Err34:"User not  exist",Err35:"Trade disable due forex event",Err36:"Trade disable due no quotes",Err37:"Invalid deposit parameters",Err49:"Only for active accounts. Would you like to deposit and start trading?",Err50:"leaderID follow followerID Exists",Err51:"leaderID or followerID not correct",Err54:"Due to regulatory reasons, we cannot register customers from your region",Err55:"Price is invalid, Would you like to reinvest on the current price?",Err56:"You have tried registering with an invalid email",Err57:"Payment operation was terminated, try later or contact support",Err59:"Due to regulatory reasons, we cannot register customers from your region",Err60:"You can't login at this time",0:"",1:"No change defined",2:"General Error",3:"Invalid Parameters",4:"Technical Problem",5:"",6:"No Connection",7:"Not Enough Rights",8:"Too Many Requests",9:"Malfunction Occured",10:"",111:"Wrong Security Session",64:"Account Disabled",65:"Wrong Login/password",66:"",128:"Trade transaction timeout expired",129:"Order has wrong prices",130:"Wrong stops level",131:"Wrong lot size",132:"Market closed",133:"Trade disabled",134:"There is not sufficient funds in your account for order execution. Please lower the amount or add additional funds",135:"Price changed",136:"No quotes",137:"Broker is busy",138:"Requote",139:"Order is proceed by dealer and cannot be",140:"Allowed only BUY orders",141:"Too many requests from one client",142:"Trade request accepted by server and placed in request queue",143:"Trade request accepted by dealerd",144:"Trade request canceled by client",145:"Trade modification denied",146:"Trade context is busy (used in client terminal)",147:"Using expiration date denied",148:"Too many orders",149:"Hedge is prohibited",150:"Prohibited by fifo rule",1000:"",1001:"No change defined",1002:"General Error",1003:"Invalid Parameters",1004:"Technical Problem",1005:"",1006:"No Connection",1007:"Not Enough Rights",1008:"Too Many Requests",1009:"Malfunction Occured",1010:"",1111:"Wrong Security Session",1064:"Account Disabled",1065:"Wrong Login/password",1066:"",1128:"Trade transaction timeout expired",1129:"Order has wrong prices",1130:"Wrong stops level",1131:"Wrong lot size",1132:"Market closed",1133:"Trade disabled",1134:"There is not sufficient funds in your account for order execution. Please lower the amount or add additional funds",1135:"Price changed",1136:"No quotes",1137:"Broker is busy",1138:"Requote",1139:"Order is proceed by dealer and cannot be",1140:"Allowed only BUY orders",1141:"Too many requests from one client",1142:"Trade request accepted by server and placed in request queue",1143:"Trade request accepted by dealerd",1144:"Trade request canceled by client",1145:"Trade modification denied",1146:"Trade context is busy (used in client terminal)",1147:"Using expiration date denied",1148:"Too many orders",1149:"Hedge is prohibited",1150:"Prohibited by fifo rule",2000:"Document already approved",2001:"Ticket is not assigned to customer",2002:"Email already exists",3006:"Invalid login or password",3008:"Transaction failed",3009:"Transaction failed",3016:"Customer doesn't exist",3021:"Customer doesn't exist",3024:"Invalid amount",3025:"Send SMS Failed",3026:"Incorrect validation code",3027:"Invalid promocode value",3028:"Invalid phone number",3031:"Please note you already have a pending withdrawal request.",2007:"User already exists",4000:"Please try again",4001:"Operation failed, please try again",4002:"Login failed. Try again",4003:"Response timeout",4004:"You must login first",4005:"Fail to login account, try again in a few minutes",4006:"Account not found, contact support",4007:"Operation failed, please try again",4008:"Operation failed, please try again",4009:"General error",4010:"Upload failed, please try again"},current_rate:"Current Rate",welcome:"Welcome",get_started:"Get started",already_member:"Already a member?",log_in:"Log in",forgot_password:"Forgot Password ?",show_password:"Show password",new_bdbfx:"New to ${brandName}?",new_account:"Create a New Account",login_bottom_text:"Trading FX & CFD involves substantial risk and may lead to loss of all invested capital",acceptPromotions:"Accept Promotions",try_again:"Try again",instruments:"Instruments",favorites:"Favorites",add_to_favorites:"Add to favorites",edit_favorites:"Edit favorites",traders_trend:"Traders Trend",manage_accounts:"Manage Accounts",transactions:"Transactions",notifications:"Notifications",updatePassword:"Change Password",enterCurrentPassword:"Enter current password",enterNewPassword:"Enter new password",reEnterPassword:"Re-enter new password",price_alerts:"Price Alerts",chat_withus:"Chat with Us",help:"Help",settings:"Settings",search_placeholder:"Search...",open_price:"Open",market_price:"Market",total_profit:"Total Profit",available:"Available",pending:"Pending",current:"Current",target:"Target",pendingOrders:"Pending Orders",modifyTrade:"Modify Trade",modify:"Modify",modifyOrder:"Modify Order",difference:"Difference",tradeno:"Trade No.",datetime:"Date Time",
swap_commission:"Swap Commission",market_rate:"Market Rate",open_rate:"Open Rate",cancel:"Cancel",info:"Info",underlying_asset_name:"Underlying asset name",contract_expiration:"Contract_expiration",spread:"Spread",digits:"Digits",lot_value:"Lot value",min_max_volume:"Min-Max volume",volume_step:"Volume step",leverage:"Leverage",long:"Long",short:"Short",trading_hours:"Trading Hours",lot:"lot",create_new_account:"Create a New Account",account_registration:"Account Registration",continue:"Continue",have_account:"Already have an account?",password_assistance:"Password Assistance",password_assistance_text:"Enter the email address associated with your ${brandName} account",email:"Your Email",email_changed:"Has your email changed?",email_changed_text:"If you have no longer use the e-mail address associated with your ${brandName} account, you may contact Customer Service for help restoring access to your account",password_changed_text:"Please check your email",password_err_changed_text:"Your new password is not correct",logging_in:"Logging in...",logging_out:"Logging out...",starting:"Starting services...",connection:"Connection problem. Attempting to reconnect. Please wait...",usCitizen_text:"Are you a citizen of the United States or a resident of the U.S. Gibraltar, Guernsey, Isle of Man Jersey for tax purposes",updateCustomer:"Updating customer information",assesment:"Financial Suitability Questionnaire",assesment_text_top:"To satisfy existing legal and regulatory requirements, we need to know a little about your relevant experience and your knowledge of investment products.",trading_expirience:"Trading Experience",trading_freq:"How frequently do you trade?",transaction:"Transaction History",date_menu:"Date",action_menu:"Action",method_menu:"Method",withdraw:"Withdraw",transfer:"Bank Transfer",bank_information:"Bank Information",banktransfer_instructions:"Please see below detailed wiring instructions.For you convenience, you can print these out and present to your bank, in order for them to initiate the transfer",beneficiary_name:"Beneficiary Name",beneficiary_address:"Beneficiary Address",beneficiary_bank:"Beneficiary Bank",bank_address:"Bank Address",beneficiary_account_number:"Beneficiary Account Number",beneficiary_iban:"Beneficiary Iban",swift:"BIC / SWIFT",comments:"Reference / Comments",demo:"Demo",live:"Live",demo_account:"Demo account",live_account:"Live account",test:"Test",click_me:"click me",test_page:"Test page",points:"Points",pips:"Pips",value:"Value",amount_lots:"Amount of Lots",only:"Only",when_reach:"when rate reach",sign_in:"Sign In",emailRegistration:"Email",confirmPassword:"Confirm Password",firstName:"First Name",middleName:"Middle Name",surname:"Surname",lastName:"Last Name",nationalId:"National ID",dateBirth:"Date of Birth",iAtLeastYearsOld:"I am at least 18 years of age",phone:"Phone (Without country code)",phoneFull:"Phone",isMobilePhone:"This is a mobile phone number",country:"Country",nationality:"Nationality",isBirthCountry:"Place of birth is same as my nationality",address:"Street Address",city:"City",zipCode:"Zip/Postal code",usTaxId:"U.S. Tax Identification number",next:"Next",sharesBondsComm:"Shares, Bonds, Commodities",frequently:"Frequently",sometimes:"Sometimes",rarely:"Rarely",never:"Never",have_prior_education:"Do you have prior education/experience?",OTCDerivateives:"OTC Derivateives",CFDForexSpreadBetting:"(CFD's, Forex, Spread Betting)",exchangeTradedDerivatives:"Exchange Traded Derivatives",warrantsFuturesOptions:"(Warrants, Futures Options, ETF's)",iUnderstandPart1:"I understand that I will be trading only",iUnderstandPart2:"CFD products with ${brandName}",totalVolume:"Please indicate the total volume of deals in the above products previously undertaken per month (on averge):",investKnowledge:"Investment Knowledge",professionalExperience:"Do you have the experience or qualifications that assist your in understanding the risk of CFD?",annualIncome:"Annual Income",employmentStatus:"Employment Status",employerRefrences:"We shall not contact your employer for refrences",yourEmploymentStatus:"What is your employment status?",atv:"What is the monthly average trade volume you intend to reach?",employed:"Employed",selfEmployed:"Self Employed",retired:"Retired",unemployedOfStudent:"Unemployed of Student",financialDetails:"Financial Details",anualIncome:"Anual Income",valueOfSavingInvestments:"Value of Saving and Investments",us_citizen:"Are you a US reportable Citizen?",saveChanges:"Save Changes",securePassword:"Secure password tips:",useCharacters:"Use at least 6 characters, a combination of numbers and letters is best",samePassword:"Do not use the same password you have used with us previously",usePersonalDetails:"Do not use dictionary words, your name, e-mail address, mobile phone number or other personal information that can be easily obtained",loading_deposit:"Loading wallet...",wallet:"Wallet",menu:"Menu",back:"Back",loading_closed_trades:"Loading closed trades...",loading_transactions:"Loading transactions...",select_country:"Select country",select_nationality:"Select nationality",select_citizenship:"Select citizenship",select_language:"Select language",no_favorites:"You don't have any favorites yet",add_favorites:"Add favorites from the menu in the top bar",no_pending:"You don't have any pending trades",no_opentrades:"You don't have any open trades",no_closetrades:"You don't have any closed trades",signup:"Sign Up",promo:"Promo Code",continue_demo:"Continue with demo account","credit-card":"Credit Card",wiretransfer:"WireTransfer",card_name:"Card Number",card_last_digits:"Credit Card last 4 digits",expiry_date:"Expiry date",date:"Date",transactionId:"Transaction ID",depositMethod:"Deposit Method",startTrading:"Start trading",choosePaymentMethod:"Choose your Payment Method",addTradingAccount:"Create account",accountCurrency:"Currency",personalDetails:"Personal Details",uploadDocuments:"Upload documents",helpdesk:"Help Desk",transferFrom:"Transfer From",transferTo:"Transfer To",transferFunds:"Transfer Funds",smsVerification:"SMS Verification",smsCode:"Enter Code",smsResend:"Resend Code",withdrawFrom:"Withdraw From",fundsWithdraw:"Funds to withdraw",minimumAmount:"Minimum amount is",maximumAmount:"Maximum amount is",bankAccountInfo:"Bank Account Information",bankAccountInfoText:"Please provide the bank information below",bankDetails:"Bank Details",bankName:"Bank Name",bankAccountHolder:"Name of Account Holder",bankAccountNumber:"Bank Account Number",bankSwift:"ABA or SWIFT Code",bankAddress:"Bank Address",bankCountry:"Bank Country",bankCity:"Bank City",bankState:"Bank State",bankStreetAddress:"Bank Street Address",withdrawComments:"Enter your comments here",withdrawCommentsText:"Comments (if your bank provides intermediary bank details or requires Branch Name and Branch Number for internationaly fund transfers, please provide these details below).",verificationAuthenticate:"Authenticate your account by verifying your identity, payment method and address",verificationCamera:"To proceed, simply upload or use your phone camera to take photos of the required documents",verificationProtected:"Your details are protected and secured with us. They are kept private for the sole purpose to confirm your identity",selectOne:"Select ONE of the following documents to upload",photo_id:"Photo ID",proof_of_identity:"Proof of Identity",proof_of_residence:"Proof of Residence",proof_of_payment:"Proof of Payment",photo_id_front:"Photo ID Front",photo_id_back:"Photo ID Back",passport:"Passport",driving_license:"Driving License",driving_license_front:"Driving License Front",driving_license_back:"Driving License Back",utility_bill:"Utility Bill",choose_document:"Choose a document type and upload accordingly",bank_statement:"Bank Statement",residence_certificate:"Residence Certificate",credit_card_copy_front:"Credit Card Copy Front",credit_card_copy_back:"Credit Card Copy Back",credit_card_copy:"Credit Card",rejected:"Rejected",approved:"Approved",new:"Take a photo or upload",accountVerification:"Account Verification",uploadInfoPicture:"Upload information and picture page",file_is_big_or_small:"File is too big or too small. Please select file less than 10Mb and greater than 10Kb",file_incorrect_type:"Incorrect file type. Please select one of: JPG, JPEG, PNG, Gif, PDF",frozenAccount:"Frozen Account",frozenAccountTitle:"Dear account holder",frozenAccountText:"Your account has been frozen due to recent activity that triggered some security alert. Your account Manager will contact you shortly to reactivate your account. We apologize for the inconvenience",openTradingAccount:"Open Trading Account",openTradingAccountTitle:"You are one step away from start trading",openTradingAccountText:"Just click below to open your first trading account",all_types:"All Types",all_accounts:"All Accounts",filterBy:"Filter transactions by",no_transactions:"You don't have any transactions",check_filter:"Check transactions filter from the menu in the top bar",accountType:"Account Type",addNewAccount:"Add New Account",switchAccount:"Switch account to:",chooseAccount:"Choose the account you wish to trade",distanceInPips:"Distance in pips",selectAmount:"Select amount",orangePayBtc:"OrangePay BTC",praxis:"Deposit Funds",zotapay:"Zotapay",bestpaycard:"Best Pay Card",solidpay:"Solid Payments",completeRegistration:"Please complete the registration before you continue",loading_chart:"Loading chart...",smsVerificationText:"For short verification process, please enter your phone number (including country code) below to receive a sms message with PIN code",jeton:"Jeton",depositDemoTitle:"You are currently trading on a Demo account.",depositDemoContent:"In order to make a Deposit please switch to a Live account.",switchAccountButton:"Switch account",creditCard:"Credit Card",wireTransfer:"Wire Transfer",skrill:"Skrill",neteller:"NETeller",other:"Other",cardDetails:"Card Details",website:"Website",skrill_account_email:"Skrill account E-mail address",neteller_account_number:"NETeller Account Number",openNetellerAccount:"To open a NETeller account visit",openSkrillAccount:"To open a Skrill account visit",withdraw_other_label:"Please enter a payment method and details.",paymentDetails:"Payment details",selectPaymentMethod:"Please select your preferred payment method",withdrawReason:"Withdrawal reason",withdraw_reason_select:"Please select your withdrawal reason",withdraw_reason_enter:"Please enter your reason",withdraw_reason_300_chars:"300 characters or less",withdrawalReason:{withdrawingProfits:"Withdrawing profits",transferringFundsToAnotherBroker:"Transferring funds to another broker",unsatisfactoryService:"Unsatisfactory service",limitedFunds:"Limited funds",notEnoughTradingExperience:"Not enough trading experience",otherReason:"Other reason"},withdraw_history:"Withdraw History",cancelledByManager:"Canceled by manager.",cancelledByCustomer:"Canceled by customer",status:"Status",withdrawCancelSuccess:"Operation success. Request is canceled.",withdrawCancelFailed:"Failed to cancel the request.",withdrawRequest:"Withdraw Request",cancelWithdrawal:"Are you sure you want to cancel your withdrawal request?",document_other:"Other",document_remove:"Remove document",document_confirm_remove:"Are you sure you want to remove this document?",select_account_type:"Please select one of the account types",readAndAgree:"I have read and agree to",kyc:"Know Your Customer Policy",select:"Select",state:"State",citizenship:"Citizenship",selectPspCurrency:"Please select deposit currency.",depositUnavailableTitle:"Deposit is currently unavailable",depositUnavailableContent:"Your account manager will contact you shortly",front_upload:"Front Upload",front_uploaded:"Front Uploaded",back_upload:"Back Upload",back_uploaded:"Back Uploaded",side_uploaded:"Side Uploaded",doc_uploaded:"Uploaded",replace_image:"Replace image",proof_of_identity_text:"Select Document Type",proof_of_residence_text:"Select Document Type",proof_of_payment_text:"Select Document Type",verification_text:"To comply with trading regulatory requirements and to protect you and us from acts of fraud, we need to verify your identity with relevant documents. <br><br> Once uploaded, the docs are in pending status and reviewed by one of our representatives. We make every effort to verify your account as quickly as possible.",all_set:"No action is required at this point",account_approved1:"We will let you know if we'll need any additional documents",account_approved2:"No further action is required",requirement_description:"Please select one of the topics below and upload accordingly",pending_text:"Thanks for uploading the doc. Our team will review it soon",two_sided:"Is the document two-sided?",birthPlace:"Place of birth",birthPlace_required:"Place of birth is required",companyName_required:"Company name is required",nationalId_required:"National ID is required",trading_experience:"Do you have experience with investments?",trades:"Trades",filterClosedTrades:"Filter trades history by",allTypes:"All",fasapay:"FasaPay",fasapay_account_name:"FasaPay Account Name",fasapay_wallet_account_number:"FasaPay Wallet Account Number"}),app.constant("$ionicLoadingConfig",{template:"<ion-spinner></ion-spinner>"}),collections.service("AssetCollection",[function(){function e(e){var t=e||[],n={},a={},o={},i=!1;this.add=function(e){t.push(e)},this.get=function(e){if(e&&e.hasOwnProperty("id")&&o.hasOwnProperty(e.id))return o[e.id];var s=JSON.stringify(e);if(e&&e.hasOwnProperty("s")&&o.hasOwnProperty(s))return o[s];if(e&&e.hasOwnProperty("id")&&n.hasOwnProperty(e.id))return n[e.id];if(e&&e.hasOwnProperty("s")&&a.hasOwnProperty(s))return a[s];var r=_.find(t,e);if(r&&!i)return e.hasOwnProperty("id")&&(n[e.id]=r),e.hasOwnProperty("s")&&(a[s]=r),r;e.hasOwnProperty("id")&&(o[e.id]=null),e.hasOwnProperty("s")&&(o[s]=null)},this.find=function(e){return _.filter(t,e)},this.findBy=function(e,n,a){var o=_.chain(t).filter(e).filter(n);return(a?o.orderBy(a.field,a.dir):o).value()},this.sort=function(e){return _.orderBy(t,e)},this.remove=function(e){return _.remove(t,e)},this.getAll=function(){return t},this.length=function(){return t.length},this.fill=function(e){t=e},this.clear=function(){i=!0,t.forEach(function(e){"function"===e.clear()&&e.clear()}),t=[],n={},a={},o={}}}return e}]),collections.service("BaseCollection",[function(){function e(e){var t=e||[];this.add=function(e){t.push(e)},this.get=function(e){return _.find(t,e)},this.find=function(e){return _.filter(t,e)},this.findBy=function(e,n,a){const o=_.chain(t).filter(e).filter(n);return(a?o.orderBy(a.field,a.dir):o).value()},this.sort=function(e){return _.orderBy(t,e)},this.remove=function(e){return _.remove(t,e)},this.getAll=function(){return t},this.length=function(){return t.length},this.fill=function(e){t=e},this.clear=function(){t=[]}}return e}]),collections.service("ClosedTradeCollection",[function(){function e(e){var t=e||[];this.add=function(e){t.push(e)},this.get=function(e){return _.find(t,e)},this.find=function(e){return _.filter(t,e)},this.sort=function(e){return _.orderBy(t,e)},this.remove=function(e){return _.remove(t,e)},this.getAllTrades=function(){return _(t).value()},this.getAll=function(){return t},this.length=function(){return t.length},this.clear=function(){t.forEach(function(e){"function"===e.clear()&&e.clear()}),t=[]}}return e}]),collections.service("OpenTradeCollection",[function(){function e(e){var t=e||[];this.add=function(e){t.push(e)},this.get=function(e){return _.find(t,e)},this.find=function(e){return _.filter(t,e)},this.getTrades=function(){return _.filter(t,function(e){return"buy"===e.action||"sell"===e.action})},this.getPendingTrades=function(){return _.filter(t,function(e){return e.actionCode>1&&e.actionCode<6})},this.sort=function(e){return _.orderBy(t,e)},this.remove=function(e){return _.remove(t,e)},this.getAll=function(){return t},this.length=function(){return t.length},this.clear=function(){t.forEach(function(e){"function"===e.clear()&&e.clear()}),t=[]}}return e}]),collections.service("TransactionHistoryCollection",[function(){function e(e){var t=e||[];this.add=function(e){t.push(e)},this.get=function(e){return _.find(t,e)},this.find=function(e){return _.filter(t,e)},this.sort=function(e){return _.orderBy(t,e)},this.remove=function(e){return _.remove(t,e)},this.getAll=function(){return t},this.length=function(){return t.length},this.clear=function(){t.forEach(function(e){"function"===e.clear()&&e.clear()}),t=[]}}return e}]),models.service("AssetModel",["Utils",function(e){function t(t,n,a){function o(){}var i=this;i.id=t.id,i.outputName=t.OutputName,i.contractSize=t.ContractSize,i.category=t.Category,i.currency=t.Currency,i.description=t.Description,i.digits=t.Digits,i.isShow=e.toBoolean(t.IsShow),i.isTradeable=t.IsTradeable,i.isClean=1===t.IsClean,i.marginMode=t.MarginMode,i.markup=t.Markup,i.profitMode=t.ProfitMode,i.percentage=t.Percentage,i.initialMargin=t.InitialMargin,i.tickSize=t.TickSize,i.tickPrice=t.TickValue,i.openPrice=0,i.closePrice=0,i.isActive=n,i.s=t.s,i.isEsma=t.isEsma,i.bid=t.Bid,i.ask=t.Ask,i.high=t.High,i.low=t.Low,i.lastPrice=t.LastPrice,i.lastUpdateTime=t.TickTime,i.action=null,i.bidDirection="",i.askDirection="",i.isClient=t.isClient,i.isFavorite=a||!1,i.prevAsk=t.Ask,i.prevBid=t.Bid,i.displayName=function(e,t){return"FOREX"==t?e.slice(0,3)+"/"+e.slice(3):e}(t.OutputName,t.Category),i.tradingTimes=t.TradingTimes?function(e){function t(e){return 1===e.toString().length?"0"+e:e}function n(e){return[t(e.OpenHour)+":"+t(e.OpenMinute),t(e.CloseHour)+":"+t(e.CloseMinute)]}function a(e){var t=[];return e.forEach(function(e){t.push(n(e))}),t}function o(t){i[t]=a(e[t])}var i={};return Object.keys(e).map(o),i}(t.TradingTimes):"",i.spread=t.Spread,i.swapsLong=t.SwapsLong,i.swapsShort=t.SwapsShort,i.swapsCode=null!==t.SwapsCode&&t.SwapsCode>=0?t.SwapsCode:3,i.maxLot=t.MaxLot,i.minLot=t.MinLot,i.stepLot=t.StepLot,i.unit=t.Unit,i.expiration=1e3*t.Expiration,i.isSessionValid=t.IsCurrentSessionValid,i.stopLevels=t.StopLevels,i.baseCurrency=0===i.profitMode?i.s.substr(0,6).slice(-3):i.currency,i.ending=0===i.profitMode?i.s.substr(6):"",i.swapsCurrency=2===i.swapsCode?i.baseCurrency:i.currency,i.convAssets=[],i.convAssetsMargin=[],i.displayOrder=t.DisplayOrder||0,i.quickAccess=e.toBoolean(t.QuickAccess)||!1,this.dailyChange=function(){var e=0!==i.lastPrice?(i.bid-i.lastPrice)/i.lastPrice*100:0;return 0===parseFloat(e.toFixed(2))?Math.abs(e).toFixed(2):e.toFixed(2)},this.dailyChangeRender=function(){return i.dailyChange()>0?"up":"down"},this.markupBid=function(){return i.markup>0?i.bid-Math.floor(i.markup/2)*(1/Math.pow(10,i.digits)):i.markup<0?i.bid-(i.markup-Math.floor(i.markup/2))*(1/Math.pow(10,i.digits)):i.bid},this.markupAsk=function(){return i.markup>0?i.ask+(i.markup-Math.floor(i.markup/2))*(1/Math.pow(10,i.digits)):i.markup<0?i.ask+Math.floor(i.markup/2)*(1/Math.pow(10,i.digits)):i.ask},this.spreadCalc=function(){return i.spread>0?i.spread+i.markup:0},this.update=function(e){var t=parseFloat(e[1]),n=parseFloat(e[2]);i.bidDirection=i.prevBid<i.bid?"asset-up":"asset-down",i.askDirection=i.prevAsk<i.ask?"asset-up":"asset-down",i.prevAsk=i.ask,i.prevBid=i.bid,i.high=e[3],i.low=e[4],i.lastUpdateTime=e[5],i.lastPrice=e[6],i.bid=t,i.ask=n},this.clear=function(){i.dailyChange=o,i.markupBid=o,i.markupAsk=o,i.update=o,i.spreadCalc=o},this.setConvAssets=function(e){i.convAssets=e},this.setConvAssetsMargin=function(e){i.convAssetsMargin=e}}return t}]),models.service("ClosedTradeModel",["$filter","constants","AssetService","InvestCalcService","CurrencyConvertService","UserService",function(e,t,n,a,o,i){function s(e){var a,s=this;s.user=i.get(),s.orderId=e.OrderID,s.openPrice=e.OpenPrice,s.openTime=parseInt(e.OpenTime+"000",10),s.closePrice=e.ClosePrice,s.closeTime=parseInt(e.CloseTime+"000",10),s.contractSize=e.ContractSize,s.action=t.actionsId[e.Cmd],s.actionCode=e.Cmd,s.symbolId=e.id,s.outputName=e.OutputName,s.digits=e.Digits,s.lots=e.Volume,s.amount=s.contractSize*s.lots,s.stopLoss=e.sl,s.takeProfit=e.tp,s.commission=e.Commission,s.taxes=e.Taxes,s.swap=e.Storage,s.profit=e.Profit,s.comment=e.Comment,s.tradeAction=function(e){return e<6?"trades":6===e?"balance":7===e?"credit":"other"}(e.Cmd),a=n.collection.get({id:e.id}),s.convAssets=o.find(n,s.user.currency,"USD","",1),a&&(s.symbolCurrency=a.currency),this.profitToUsd=function(){return o.doConvert(s.convAssets,s.profit,"buy",1)},this.clear=function(){a=null}}return s}]),models.service("DocumentModel",["$q","API","ErrorService","Utils","constants",function(e,t,n,a,o){function i(a){function i(e){if(1!==e.status)throw new n({source:"DocumentModel",type:o.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}var s=this;s.id=a.id,s.type=a.type,s.status=a.status,s.url=a.url,s.category=a.category,s.baseCategory=a.baseCategory,s.uploadStatus=0,s.isUploading=!1,this.startUpload=function(n){s.isUploading=!0;var a={name:n.name,size:n.size,type:o.documentFromTypes[s.type]};return t.document(a).then(i).then(function(e){return e.fileMD5}).catch(function(t){return s.isUploading=!1,e.reject(t)})},this.loadChunk=function(t,n,a){var o=new FileReader;return o.readAsBinaryString(a),e(function(e){o.onload=function(n){o=null,e({fileMD5:t,data:n.target.result})}})},this.sendChunk=function(e){return t.documentUpload(e).then(i).then(function(e){s.uploadStatus=e.percent})},this.uploadFile=function(t,n){for(var a=51206,o=Math.ceil(t.size/a),i=[],r=0;r<=o-1;r++)i.push(function(e){return function(){return s.loadChunk(n,e,t.slice(e,e+a)).then(s.sendChunk)}}(r*a));return i.reduce(function(e,t){return e.then(t)},e.resolve()).then(function(){s.isUploading=!1}).catch(function(t){return s.isUploading=!1,e.reject(t)})}}return i}]),models.service("DocumentV2Model",["$q","API","ErrorService","Utils","constants",function(e,t,n,a,o){function i(i){function s(e){if(1!==e.status)throw new n({source:"DocumentV2Model",type:o.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}var r=this;r.id=i.id,r.type=a.toSnakeCase(i.type),r.origType=i.type,r.status=i.status,r.images=[],r.twoSidedToggled=!1,r.subTypes=i.subtypes.map(function(e){return{id:a.toSnakeCase(e.title),title:e.title,origTitle:e.title,images:e.images}}),r.subType=_.find(r.subTypes,{origTitle:i.subtype}),r.uploaded=i.uploaded,r.uploadStatus=0,r.isUploading=!1,r.selectedSubType=null,r.hasUploaded=r.uploaded.filter(function(e){return e}).length>0,this.updateImages=function(){2===r.uploaded.filter(function(e){return e}).length?r.images=[0,1]:r.images=0===r.selectedSubType.images?[0]:Array(r.selectedSubType.images).fill(null).map(function(e,t){return t})},r.subType&&(r.selectedSubType=r.subType,this.updateImages()),this.addImage=function(){r.images.push(r.images.length)},this.toggleImage=function(){1===r.images.length?r.images.push(r.images.length):r.images=r.images.slice(0,1)},this.startUpload=function(n,a){r.isUploading=!0;const o={name:n.name,size:n.size,type:r.origType,subType:r.selectedSubType.origTitle,image:a,id:r.id};return t.documentSet(o).then(function(e){return s(e)}).then(function(e){return e.fileMD5}).catch(function(t){return r.isUploading=!1,e.reject(t)})},this.loadChunk=function(t,n,a){var o=new FileReader;return o.readAsBinaryString(a),e(function(e){o.onload=function(n){o=null,e({fileMD5:t,data:n.target.result})}})},this.sendChunk=function(e){return t.documentUpload(e).then(s).then(function(e){r.uploadStatus=e.percent})},this.uploadFile=function(t,n){for(var a=51206,o=Math.ceil(t.size/a),i=[],s=0;s<=o-1;s++)i.push(function(e){return function(){return r.loadChunk(n,e,t.slice(e,e+a)).then(r.sendChunk)}}(s*a));return i.reduce(function(e,t){return e.then(t)},e.resolve()).then(function(){r.isUploading=!1}).catch(function(t){return r.isUploading=!1,e.reject(t)})},this.updateStatus=function(){r.subType=r.selectedSubType}}return i}]),models.service("OpenTradeModel",["$filter","$rootScope","Utils","constants","AssetService","InvestCalcService","CurrencyConvertService","UserService",function(e,t,n,a,o,i,s,r){function l(e,t){function l(){}var c=this;c.orderId=e.OrderID,c.asset=t,c.outputName=e.OutputName,c.action=a.actionsId[e.Cmd],c.actionCode=e.Cmd,c.openPrice=e.OpenPrice,c.openTime=parseInt(e.OpenTime+"000",10),c.closeTime=parseInt(e.CloseTime+"000",10),c.digits=e.Digits,c.lots=e.Volume,c.contractSize=e.ContractSize,c.amount=c.contractSize*c.lots,c.stopLoss=e.sl,c.takeProfit=e.tp,c.commission=e.Commission,c.taxes=e.Taxes,c.swap=e.Storage,c.symbolCurrency=c.asset.currency,c.comment=e.Comment,c.closePriceDirection=null,c.profitDirection=null,c.user=r.get(),c.showConvertToUsd=a.showConvertToUsd||!1,c.convUSDAssets=s.find(o,c.user.currency,"USD","",1),this.closePrice=function(){return c.action.match(/^sell/)?(c.closePriceDirection=c.asset.askDirection,c.asset.markupAsk()):c.action.match(/^buy/)?(c.closePriceDirection=c.asset.bidDirection,c.asset.markupBid()):void 0},this.pendingCurrentPrice=function(){return c.action.match(/^sell/)?(c.closePriceDirection=c.asset.bidDirection,c.asset.markupBid()):c.action.match(/^buy/)?(c.closePriceDirection=c.asset.askDirection,c.asset.markupAsk()):void 0},this.profit=function(){var e=0;if(("buy"===c.action||"sell"===c.action)&&c.closePrice()>0){var t=(c.asset.currency,i.getPairVal(c.action,c.openPrice,c.closePrice(),c.digits));0===c.asset.profitMode&&c.asset.outputName.slice(-3),e=c.asset.profitMode<2?t*c.amount:t*(c.asset.tickPrice/c.asset.tickSize)*c.lots,e=s.doConvert(c.asset.convAssets,e,c.action,c.asset.profitMode)}return c.profitDirection=parseFloat(e)>0?"up":"down",parseFloat(e)},this.profitToUsd=function(){return s.doConvert(c.convUSDAssets,n.decimalRound(c.profit(),c.user.currencyDigits),"buy",1)},this.distance=function(){var e=0;return c.action.match(/^sell/)&&(e=c.openPrice-c.closePrice()),c.action.match(/^buy/)&&(e=c.closePrice()-c.openPrice),3===c.asset.digits||5===c.asset.digits?parseFloat(i.fromPoints(e,c.asset.digits)/10).toFixed(1):parseInt(i.fromPoints(e,c.asset.digits),10)},this.pendingDistance=function(){return i.fromPoints(Math.abs(c.pendingCurrentPrice()-c.openPrice)/10,c.asset.digits)},this.update=function(e){c.asset=o.collection.get({id:e.id}),c.outputName=e.OutputName,c.action=a.actionsId[e.Cmd],c.actionCode=e.Cmd,c.openPrice=e.OpenPrice,c.openTime=parseInt(e.OpenTime+"000",10),c.closeTime=parseInt(e.CloseTime+"000",10),c.digits=e.Digits,c.lots=e.Volume,c.contractSize=e.ContractSize,c.amount=c.contractSize*c.lots,c.stopLoss=e.sl,c.takeProfit=e.tp,c.commission=e.Commission,c.taxes=e.Taxes,c.swap=e.Storage,c.symbolCurrency=c.asset.currency,c.comment=e.Comment},this.clear=function(){c.closePrice=l,c.profit=l,c.distance=l,c.asset=null,c.user=null},this.getTrade=function(){return{orderId:c.orderId,openTime:c.openTime,openPrice:c.openPrice,lots:c.lots,amount:c.amount,symbol:c.outputName,swaps:c.swap,stopLoss:c.stopLoss,takeProfit:c.takeProfit,action:c.action,profit:c.profit()}}}return l}]),models.service("QuestionModel",["constants",function(e){function t(t,n){function a(t,n){var a=e.questionnaireAnswersOverrides&&e.questionnaireAnswersOverrides[o.id]&&e.questionnaireAnswersOverrides[o.id][t],i=o.translation&&(o.translation[a]||o.translation.questionnarie_answers[t.toString()])||t.toString();return{id:t.toString(),label:i,_selected:n}}var o=this;o.translation=n,o.id=t.id,o.label=o.translation.questionnarie_questions[t.id.toString()]||t.title,o.allowOther=!!t.free,o.isMulti=!!t.multi,o.formModelName="question-"+o.id,o.other="",o.answers=t.answers.map(function(e){return a(e,t.values.indexOf(e)>=0)});var i=t.values.map(function(e){return a(e)}),s=t.values.length>0?a(t.values[0]):"";o.values=o.isMulti?i:s,o.allowOther&&(o.other=t.other,o.answers.push(a(-1,o.other.length>0)),Array.isArray(o.values)&&o.other.length>0&&o.values.push(a(-1))),o.group=t.group,o.parentAnswers=t.parentAnswers||[],o.valid=!1,o.formatAnswer=a}return t}]),models.service("TransactionHistoryModel",["$filter","constants","Utils",function(e,t,n){function a(e){var t=this;t.amount=e.amount,t.bankAcccountNumberLast4Digits=e.bankAcccountNumberLast4Digits,t.bankName=e.bankName,t.confirmDate=parseInt(1e3*parseInt(e.confirmDate,10),10),t.creditCardLast4Digits=e.creditCardLast4Digits,t.creditcardType=e.creditcardType,t.method=e.method&&n.toCamelCase(e.method.toString()),t.requestDate=parseInt(1e3*parseInt(e.requestDate,10),10),t.type=e.type,t.live=n.toBoolean(e.live),t.login=e.login,t.currency=e.currency,t.transactionId=e.transactionId,t.fromTradingAccount=e.fromMt4AccountId>0?e.fromMt4AccountId:null,t.toTradingAccount=e.toMt4AccountId>0?e.toMt4AccountId:null,t.clear=function(){}}return a}]),models.service("UserModel",["constants","LocalStorage","appsflyer","Utils","config","Storage",function(e,t,n,a,o,i){function s(){function t(e){const t=(i.get("currencies")||[]).find(function(t){return t.currency===e.currency});return{login:e.login,currency:e.currency,isCryptoCurrency:a.toBoolean(parseInt(t.crypto)),leverage:e.leverage||100,active:a.toBoolean(e.active),balance:e.balance,equity:e.equity,freeMargin:e.freeMargin,marginLevel:e.marginLevel,margin:e.margin||0,credit:e.credit,source:e.source,live:a.toBoolean(e.live),id:[e.login,e.live].join("-"),tradingPlatform:e.tradingPlatform||"MT4",cryptoWallet:e.cryptoWallet||{},isEsma:a.toBoolean(e.isESMA),currencyDigits:t.digits,customerType:e.customerType}}var n=this;n.login="",n.email="",n.firstName="",n.lastName="",n.country="",n.address="",n.city="",n.postCode="",n.phone="",n.birthday="",n.nationalId="",n.citizenship="",n.birthCountry="",n.timeZone="",n.activeTradingAccount=null,n.currency="USD",n.baseCurrency=null,n.currencyDigits=2,n.registrationState=0,n.complianceStatus="",n.complianceStatusNegative=!1,n.language="",n.isSuspended=!1,n.isBlocked=!1,n.tradingAccounts=[],n.loggedIn=!1,n.leverage=o.defaultLeverage||100,n.usCitizen=!1,n.usTaxId="",n.smsVerified=!1,n.state="",n.liveAccountExists=!1,n.customerType="",n.otpEnabled=!1,n.classification="",n.isMarried=!1,n.tnc=!1,n.token=null,n.tin="",n.taxCountry="",n.companyName="",n.riskAcceptance=!1,n.riskApprovalDate=!1,n.depositValidationRequired=!1,n.birthPlace="",n.funded=!1,n.customerId="",this.onLogin=function(e){if(n.customerId=e.hashedCustomerId,n.login=e.login,n.email=e.login,n.firstName=e.firstName,n.lastName=e.lastName,n.country=e.country,n.address=e.address,n.city=e.city,n.postCode=e.postCode,n.phone=e.phone.replace("+",""),n.birthday=e.birthday,n.nationalId=e.nationalId,n.citizenship=e.citizenship,n.birthCountry=e.birthCountry,n.registrationState=e.registrationState,n.salesStatus=e.salesStatus,n.complianceStatus=e.complianceStatus,n.setComplianceStatus(),n.language=e.language,n.isSuspended=a.toBoolean(e.isSuspended),n.isBlocked=a.toBoolean(e.isBlocked),n.usCitizen=1===e.usCitizen||!1,n.usTaxId=e.usTaxId,n.smsVerified=a.toBoolean(e.smsVerified),n.liveAccountExists=a.toBoolean(e.mt4AccountsLiveExists),n.baseCurrency=e.currency,n.state=e.state||"",n.customerType=e.customerType||"",n.otpEnabled=!!e.otpEnabled,n.classification=e.classification,n.depositValidationRequired=a.toBoolean(e.validationRequired),n.birthPlace=e.birthPlace,e.mt4Accounts.length>0){if(n.tradingAccounts=e.mt4Accounts.map(t),n.activeTradingAccount=n.setActiveAccount(),!n.activeTradingAccount)return;n.currency=n.activeTradingAccount.currency;var o=(i.get("currencies")||[]).find(function(e){return e.currency===n.currency});n.currencyDigits=o.digits}n.isMarried=a.toBoolean(e.married),n.tnc=a.toBoolean(e.terms),n.tin=e.tin,n.taxCountry=e.taxCountry,n.companyName=e.companyName,n.riskApprovalDate=e.riskApprovalDate,this.updateRisk(),n.funded=a.toBoolean(e.funded)},this.updateRisk=function(){if(!e.scoringRules)return void(n.riskAcceptance=!1);const t=_.find(e.scoringRules,{classification:n.classification});if(!t)return void(n.riskAcceptance=!1);t.hasOwnProperty("acceptPopup")&&!0===t.acceptPopup&&0===n.riskApprovalDate.length&&(n.riskAcceptance=!0)},this.addTradingAccount=function(e){var a=t(e)
;n.tradingAccounts.push(a),a.live&&(n.liveAccountExists=!0)},this.setActiveAccount=function(){return n.tradingAccounts.filter(function(e){return e.active}).shift()},this.switchAccount=function(e,t){n.tradingAccounts.forEach(function(n){n.active=!1,n.login===e&&n.live===t&&(n.active=!0)}),n.activeTradingAccount=n.setActiveAccount(),n.currency=n.activeTradingAccount.currency,n.currencyDigits=(i.get("currencies")||[]).find(function(e){return e.currency===n.currency}).digits},this.updateBalance=function(e){var t=n.getAccount(e.login,1===e.live);t&&(t.balance=e.Balance,t.margin=e.Margin,t.equity=e.Equity,t.credit=e.Credit,t.freeMargin=t.equity-t.margin)},this.isDemoAccounts=function(){return n.tradingAccounts.filter(function(e){return!e.live}).length},this.isLiveAccounts=function(){return this.tradingAccounts.filter(function(e){return e.live}).length},this.getAccount=function(e,t){return this.tradingAccounts.filter(function(n){return n.login===e&&n.live===t}).pop()},this.updatePersonalDetails=function(e){this.firstName=e.firstName,this.lastName=e.lastName,this.birthday=e.birthday,this.country=e.country,this.currency=e.currency,this.address=e.address,this.city=e.city,this.postCode=e.postCode,this.phone=e.phone.replace("+",""),this.citizenship=e.citizenship,this.state=e.state||"",this.customerType=e.customerType||"",this.currencyDigits=(i.get("currencies")||[]).find(function(t){return t.currency===e.currency}).digits,this.classification=e.classification,this.depositValidationRequired=a.toBoolean(e.validationRequired)},this.setComplianceStatus=function(){var e=["no kyc","rejected","partial kyc","awaiting review"],t=["partial kyc - can trade"];if("approved"===this.complianceStatus)return void(this.complianceStatusNegative=!1);e.indexOf(this.complianceStatus)>-1&&(this.complianceStatusNegative=!0),t.indexOf(this.complianceStatus)>-1&&(this.complianceStatusNegative=!1)},this.getCustomer=function(){return{login:this.login,email:this.email,firstName:this.firstName,lastName:this.lastName,country:this.country,address:this.address,city:this.city,postCode:this.postCode,phone:this.phone,birthday:this.birthday,citizenship:this.citizenship,currency:this.currency,registrationState:this.registrationState,salesStatus:this.salesStatus,complianceStatus:this.complianceStatus,isSuspended:this.isSuspended,isBlocked:this.isBlocked,loggedIn:this.loggedIn,smsVerified:this.smsVerified,liveAccountExists:this.liveAccountExists,tradingAccounts:this.tradingAccounts,funded:this.funded,customerId:this.customerId}}}return s}]),models.service("WithdrawRequestModel",["$filter","constants","Utils",function(e,t,n){function a(e){var n=this;n.confirmDate=parseInt(1e3*parseInt(e.confirmDate,10),10),n.requestDate=parseInt(1e3*parseInt(e.requestDate,10),10),n.status=t.withdrawRequestStatusToType[e.status]||"",n.amount=e.amount,n.currency=e.currency,n.method=t.paymentMethodsToTypes[e.method],n.login=e.login,n.id=e.id,n.transactionId=e.transactionId,n.clear=function(){}}return a}]),app.filter("camelize",function(){return function(e){if(e)return e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(e,t){return 0==+e?"":0===t?e.toLowerCase():e.toUpperCase()})}}),app.filter("cryptoCurrency",["Utils","Storage","constants","$filter",function(e,t,n,a){var o=function(e){return(t.get("currencies")||[]).find(function(t){return t.currency.toLowerCase()===e.toLowerCase()&&"1"===t.crypto})};return function(t,i,s){var r=n.currencySymbols[i]||i||"";if(i&&o(i)){var l=e.decimalRound(t,s);return a("currency")(l,r,s)}if(n.cryptoBaseCurrencies&&n.cryptoBaseCurrencies.indexOf(i)>-1)return a("currency")(t,r,5);var l=e.decimalRound(t,s);return a("currency")(l,r,s)}}]),app.directive("accountSelect",["LocaleService","constants","Storage",function(e,t,n){return{scope:{accounts:"=",current:"=",user:"<",config:"<"},restrict:"E",template:'<div class="row p-0"><div class="col account-select-wrapper mt-10 mb-10"><div class="form-group as-select"><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="transfer-from" id="transfer-from" ng-model="current" ng-options="account.description for account in accounts"></select></div><div ng-if="config.type === \'withdraw\'"><div class="row mt-10 pl-0 account-select-title"><div class="col account-withdraw roboto-medium"><span>{{::translation.fundsWithdraw}}</span> <span>{{current.fundsToWithdraw | cryptoCurrency :current.currency: user.currencyDigits}}</span></div></div></div><div ng-if="config.type === \'transferFrom\'"><div class="row mt-10 pl-0 account-select-title"><div class="col account-withdraw roboto-medium"><span>{{::translation.availableTransfer}}</span> <span>{{current.fundsToWithdraw | cryptoCurrency :current.currency: user.currencyDigits}}</span></div></div></div><div ng-if="config.type === \'balance\'"><div class="layout-row just-space account-select-title mt-10 pl-7 pr-7"><div class="layout-col width-100"><div class="layout-row infoTitle font-13">{{::translation.balance}}</div><div class="layout-row infoValues roboto-medium">{{current.balance | cryptoCurrency :current.currency :user.currencyDigits}}</div></div><div class="layout-col width-100" ng-if="showCredit"><div class="layout-row infoTitle font-13">{{::translation.credit}}</div><div class="layout-row infoValues roboto-medium">{{current.credit | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle font-13">{{::translation.equity}}</div><div class="layout-row infoValues roboto-medium">{{current.equity | cryptoCurrency :current.currency :user.currencyDigits}}</div></div></div></div></div></div>',link:function(a){e.wait().then(function(e){a.translation=e}),a.constants=t,a.showCredit=n.get("allowCredit")}}}]),app.directive("amountSelect",["$state","$ionicHistory","$ionicModal","$timeout","LocaleService","UserService","constants","Storage",function(e,t,n,a,o,i,s,r){return{scope:{amount:"=",config:"<",next:"&"},link:function(a,l){o.wait().then(function(e){a.translation=e}),a.paymentMethods=r.get("paymentMethods")||[],a.user=i.get(),a.constants=s,a.changeStep=50,a.navigate=function(t,n){return e.go(t,n)},a.close=function(){t&&t.clearHistory(),a.modal.hide(),a.paymentMethods.length>1?a.navigate("root.app.wallet",{direction:"right"}):a.navigate("root.app.assets",{direction:"right"})},a.continue=function(e){if(e.$valid)return t&&t.clearHistory(),a.modal.hide(),a.next()},n.fromTemplateUrl("templates/directives/amountSelect.html",{scope:a,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){a.modal=e,a.modal.show()}),l.on("$destroy",function(){t&&t.clearHistory(),a.modal&&a.modal.remove&&a.modal.remove(),a.modal=null})}}}]),app.directive("appFooter",["$state","$ionicSideMenuDelegate","$document","$timeout",function(e,t,n,a){var o,i;return{link:function(s,r){function l(){i=o.getElementsByClassName("tab")[0],s.activeIndicator={width:i.offsetWidth+"px",left:0},console.info(s.activeIndicator,3)}s.activeIndicator={},n.ready(function(){o=r[0],i=o.getElementsByClassName("tab")[0],a(l,0)}),s.state=!0,s.active=e.current.name;var c=s.$watch(function(){return e.$current.name},function(){s.state=e.current.data&&e.current.data.footer,s.active=e.current.name});s.switchIndicator=function(t){var n=o.getElementsByClassName(t)[0];s.activeIndicator={width:i.offsetWidth+"px",left:n.offsetLeft+"px",right:n.offsetLeft+i.offsetWidth+"px"},e.go("root.app."+t)},s.openSideMenu=function(){t.toggleRight()},s.$on("clear",function(){console.log("reset active element on clear"),s.activeIndicator={width:i.offsetWidth+"px",left:0}}),r.on("$destroy",function(){c()})},template:'<ion-footer-bar align-title="left" class="footer footer-bg p-0" ng-style="{visibility: state ? \'visible\' : \'hidden\'}"><div class="row app-footer p-0"><div class="col tab align-self font-22 text-center assets" ng-class="{\'active-tab\': active === \'app.assets\' && \'active-footer\'}" on-tap="switchIndicator(\'assets\')"><div><i class="icon icon-Instruments"></i> <span>Instruments</span></div></div><div class="col tab align-self font-22 text-center openTrades" ng-class="{\'active-tab\': active == \'app.openTrades\' && \'active-footer\' }" on-tap="switchIndicator(\'openTrades\')"><div><i class="icon icon-OpenTrades"></i> <span>Open Trades</span></div></div><div class="col tab align-self font-22 text-center test" ng-class="{\'active-tab\': active == \'app.test\' && \'active-footer\' }" on-tap="switchIndicator(\'test\')"><div><i class="icon icon-PendingTrades"></i> <span>Schedule</span></div></div><div class="col tab align-self font-22 text-center"><div><i class="icon icon-Wallet"></i> <span>Wallet</span></div></div><div class="col tab main-menu align-self text-center" on-tap="openSideMenu()"><div><i class="icon icon-Menu font-22"></i> <span>Menu</span></div></div><div class="indicator" ng-style="activeIndicator"></div></div></ion-footer-bar>'}}]),app.directive("assetItem",[function(){return{restrict:"E",template:'<div class="asset-item"><div class="row p-0"><div class="col-50 symbol" on-tap="app.navigate(\'root.app.chart\', {direction:\'left\',assetId: asset.id, category: selectedIndex})"><div class="chart-icon-wrapper"><div class="chart-icon"><i class="icon icon-candle font-24"></i></div><div class="assets-name-wrapper"><div class="name roboto-light asset-name">{{asset.outputName}}</div><span class="font-12 open-sans" ng-class="asset.dailyChangeRender()">{{ asset.dailyChange() }}%</span></div></div></div><div class="col-50 price text-right"><div class="row p-0"><div class="col-50 pr-2"><button on-tap="app.navigate(\'root.app.invest\', {action:\'sell\',direction:\'left\',assetId: asset.id, category: selectedIndex})" class="sell-button font-12 width-95 mr-3 open-sans" ng-if="!state"><span>{{::translation.sell}}</span></button> <button on-tap="app.navigate(state, {direction:\'left\'})" class="sell-button font-12 width-95 mr-3 open-sans" ng-if="state"><span>{{::translation.sell}}</span></button><div class="font-12 open-sans black text-center asset-price" ng-class="asset.bidDirection">{{asset.markupBid() | number:asset.digits }}</div></div><div class="col-50 pl-2"><button on-tap="app.navigate(\'root.app.invest\', {action:\'buy\',direction:\'left\',assetId: asset.id, category: selectedIndex})" class="buy-button font-12 width-95 open-sans" ng-if="!state"><span>{{::translation.buy}}</span></button> <button on-tap="app.navigate(state, {direction:\'left\'})" class="buy-button font-12 width-95 open-sans" ng-if="state"><span>{{::translation.buy}}</span></button><div class="font-12 open-sans black text-center asset-price" ng-class="asset.askDirection">{{asset.markupAsk() | number:asset.digits }}</div></div></div></div></div></div>'}}]),app.directive("closedTradeItem",[function(){return{restrict:"E",template:'<div class="closedtrade-item"><div class="card-ios p-0" ng-if="trade.actionCode < 6"><div class="font-14 row"><div class="col col-33 trade-name">{{ \'#\' + trade.orderId }}&zwj;</div><div class="col col-33 trade-name">{{ trade.outputName }}</div><div class="col col-33"><div class="current-state font-12" ng-class="trade.action"><span class="title roboto-light">{{translation[trade.action]}}</span> <span class="value">{{ trade.lots }}</span></div></div></div><div class="row"><div class="tradeInfo col col-67 display-flex"><div class="col col-50 symbol"><div><span class="display-block font-11 status roboto-light">{{::translation.open_price}}</span> <span class="font-13 open-sans price-value">{{ trade.openPrice | number:trade.digits }}</span></div><div class="openDate font-10 open-sans"><span class="display-block">{{ trade.openTime | date:\'dd.MM.yyyy\':clientTimeZone }}</span> <span class="display-block">{{ trade.openTime | date:\'HH:mm:ss\':clientTimeZone }}</span></div></div><div class="col col-50 border-right-order"><div><span class="display-block font-11 status roboto-light">{{::translation.close}}</span> <span class="font-13 open-sans price-value">{{ trade.closePrice | number:trade.digits }}</span></div><div class="closeDate font-10 open-sans"><span class="display-block">{{ trade.closeTime | date:\'dd.MM.yyyy\':clientTimeZone }}</span> <span class="display-block">{{ trade.closeTime | date:\'HH:mm:ss\':clientTimeZone }}</span></div></div></div><div class="col col-33 display-flex results-section"><div><div class="col"><div class="display-block font-10 lh-1"><span>TP</span> <span>{{ trade.takeProfit | number:trade.digits }}</span></div><div class="display-block font-10 lh-1"><span>SL</span> <span>{{ trade.stopLoss | number:trade.digits }}</span></div></div></div><div><div class="text-right width-100"><span class="font-11 status roboto-light display-block">{{::translation.profit}}</span> <span class="font-11 roboto-medium" ng-class="[trade.profit > 0 ? \'up\' : \'down\', showConvertToUsd ? \'display-block\' : \'\']">{{ trade.profit | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span> <span class="font-10 roboto-medium profitValueUSD" ng-if="showConvertToUsd" ng-class="trade.profit > 0 ? \'up\' : \'down\'">({{trade.profitToUsd() | cryptoCurrency:\'USD\':2}})</span></div></div></div></div></div><div class="card-ios p-0" ng-if="trade.actionCode >= 6"><div class="font-14 row"><div class="col col-33 trade-name">{{ \'#\' + trade.orderId }}&zwj;</div><div class="col col-33 trade-name">{{ trade.outputName }}</div><div class="col col-33"><div class="current-state font-12 buy"><span class="title roboto-light">{{translation[trade.action]}}</span></div></div></div><div class="row"><div class="tradeInfo col col-67 display-flex"><div class="col col-50 symbol"><div><span class="display-block font-11 status roboto-light">{{::translation.open_price}}</span> <span class="font-13 open-sans price-value">{{ trade.openPrice | number:trade.digits }}</span></div><div class="openDate font-10 open-sans"><span class="display-block">{{ trade.openTime | date:\'dd.MM.yyyy\':clientTimeZone }}</span> <span class="display-block">{{ trade.openTime | date:\'HH:mm:ss\':clientTimeZone }}</span></div></div><div class="col col-50 border-right-order"><div><span class="display-block font-11 status roboto-light">{{::translation.close}}</span> <span class="font-13 open-sans price-value">{{ trade.closePrice | number:trade.digits }}</span></div></div></div><div class="col col-33 display-flex results-section"><div><div class="col"><div class="display-block font-10 lh-1"><span>TP</span> <span>{{ trade.takeProfit | number:trade.digits }}</span></div><div class="display-block font-10 lh-1"><span>SL</span> <span>{{ trade.stopLoss | number:trade.digits }}</span></div></div></div><div><div class="text-right width-100"><span class="font-11 status roboto-light display-block">{{::translation.profit}}</span> <span class="font-11 roboto-medium" ng-class="[trade.profit > 0 ? \'up\' : \'down\', showConvertToUsd ? \'display-block\' : \'\']">{{ trade.profit | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span> <span class="font-10 roboto-medium profitValueUSD" ng-if="showConvertToUsd" ng-class="trade.profit > 0 ? \'up\' : \'down\'">({{trade.profitToUsd() | cryptoCurrency:\'USD\':2}})</span></div></div></div></div></div></div>'}}]),app.directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,n,a){a.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("otherModelValue",function(){a.$validate()})}}}),app.directive("countrySelect",["$ionicModal","LocaleService",function(e,t){return{scope:{items:"<",config:"<",submit:"&onSubmit",close:"&onClose"},restrict:"E",link:function(n,a){n.search={};var o={label:"value",titleLabel:"select",id:"id"};n.config=angular.merge(o,n.config),t.wait().then(function(e){n.translation=e}),e.fromTemplateUrl("templates/directives/countrySelect.html",{scope:n,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){n.modal=e,n.modal.show()}),n.setItem=function(e){n.modal.hide(),n.submit({message:e})},n.closeModal=function(){n.modal.hide(),n.close()},a.on("$destroy",function(){n.closeModal()})}}}]),app.directive("customFields",[function(){return{template:'<div ng-repeat="field in personalProfileForm.country.customFields"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form[field.field].$invalid && !form[field.field].$pristine) || (form.$submitted && form[field.field].$invalid) }"><input type="text" name="{{ field.field }}" ng-model="personalProfileForm.customFields[field.field]" ng-minlength="2" ng-maxlength="32" keyboard-watcher required> <span>{{translation[field.label]}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form[field.field].$error" ng-if="form[field.field].$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div>'}}]),app.directive("elementReady",["$parse","$timeout",function(e,t){return{restrict:"A",link:function(n,a,o){var i,s=e(o.elementReadySuccess),r=e(o.elementReadyFail);a.on("load",function(){n.$apply(function(){return t.cancel(i),s(n)})}),i=t(function(){a.off("load"),t.cancel(i),n.$apply(function(){return r(n)})},6e4)}}}]),app.directive("incDec",["$interval",function(e){return{link:function(t,n,a){function o(e){var t,n,a=Math.pow(10,e.digits);if(n=e.step,t=e.model.value,e.hasOwnProperty("speedStep")){var o=e.speedStep;s++,o&&"object"==typeof o&&Object.keys(o).forEach(function(e){s>parseInt(e)&&(n=o[e])})}var i=parseFloat(Math.max((t*a+("increase"===e.direction?n:-1*n))/a,0).toFixed(e.digits));return e.min&&e.max?(e.model.value||(e.model.value=e.min),function(e,t,n){if(e>=parseFloat(t)&&e<=parseFloat(n))return e}(i,e.min,e.max)?e.model.value=i:void 0):e.model.value=i}var i,s;t.upDown=function(t){return e.cancel(i),o(t)},t.upDownRepeat=function(t){e.cancel(i),s=0,i=e(function(){return o(t)},150)},t.upDownStop=function(){e.cancel(i)}}}}]),app.directive("input",[function(){return{restrict:"E",compile:function(){return{post:function(e,t,n){var a=t.parent();a.hasClass("item-input")&&(t.bind("focus",function(){a.addClass("is-focused")}),t.bind("keyup",function(){""!==t.val()?a.addClass("is-changed"):a.removeClass("is-changed")}),t.bind("blur",function(){a.removeClass("is-focused"),""!==t.val()?a.addClass("is-dirty"):a.removeClass("is-dirty")})),n.hasOwnProperty("disabled")&&!0===n.disabled&&a.addClass("is-disabled")}}}}}]),app.directive("inputMask",["$filter",function(e){return{require:"?ngModel",link:function(e,t,n,a){function o(e){if(!e)return 0;e=e.toString();var t=e.replace(/[^0-9.]/g,"");return t.split(".").length>2&&(t=t.substring(0,t.length-1)),n.inputMaskMax&&parseFloat(t)>parseFloat(n.inputMaskMax)&&(t=a.$modelValue.toString()),t!==e&&(a.$setViewValue(t),a.$render()),parseFloat(t)}a.$parsers.push(o)}}}]),app.directive("keyboardWatcher",["$document","$timeout","$interval",function(e,t,n){return{restrict:"A",scope:!1,link:function(e,a,o,i,s){function r(){var e=a[0];e&&(/^(input|textarea|select)$/i.test(e.tagName)||e.isContentEditable)&&(e.blur&&e.blur(),document.querySelector("ion-content").style.height="unset")}function l(e){e&&(n.cancel(e),c=null,console.log("stop timer"))}var c=null,d=0,u=0,p=window.innerHeight;ionic.Platform.isAndroid()&&(a.on("focusin",function(e){t(function(){d=window.innerHeight,u=window.innerWidth,c||(c=n(function(){console.log("full height",p,"height",d),window.innerHeight===p&&window.innerWidth===u&&(l(c),r())},100,0,!1))},650)}),a.on("focusout",function(){l(c),r()}),a.on("$destroy",function(){l(c),r()}))}}}]),app.directive("keyboard",["$state","$filter","$ionicModal","Utils","LocaleService",function(e,t,n,a,o){return{scope:{data:"<",onLoadCallback:"&"},link:function(e,t){function i(t){var n=t.toString().split(".");return n[0]&&n[0].length>0?n[0].toString():e.dataModel.minval.toString()}function s(t){var n=[e.dataModel.model.value,t].join(""),a=new RegExp("^\\d*(\\.\\d{0,"+e.dataModel.digits+"})?$");return n.split(".").length>2||n>parseFloat(e.data.maxval)||!a.test(n)}function r(){return!(e.dataModel.model.value.toString().length>0)}e.isShow=!0,e.dataModel=angular.copy(e.data),e.dataModel.model.value=a.decimalRound(e.dataModel.model.value,e.dataModel.digits||0),e.isDone=!0,n.fromTemplateUrl("templates/directives/keyboard.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t,e.openModal()}),o.wait().then(function(t){e.translation=t}),e.openModal=function(){e.modal.show()},e.closeModal=function(){e.modal.hide()},e.isDone=r(),e.onClick=function(t){s(t)||e.dataModel.model.value.toString().length<e.dataModel.maxval.toString().length+1+e.dataModel.digits&&(1===e.dataModel.model.value.toString().length&&0===e.dataModel.model.value&&(e.dataModel.model.value=""),e.dataModel.model.value=[e.dataModel.model.value,t].join(""),e.dataModel.model.value.startsWith(".")&&(e.dataModel.model.value=e.dataModel.model.value.toString().padStart(2,"0")),e.dataModel.model.value.includes(".")||(e.dataModel.model.value=parseFloat(e.dataModel.model.value))),e.isDone=r()},e.onCancel=function(){e.dataModel.model.value="",e.isDone=r()},e.onDone=function(){e.isShow=!0,e.dataModel.model.value.toString().endsWith(".")&&(e.dataModel.model.value=i(e.dataModel.model.value)),e.isDone=r(),e.onLoadCallback({arg1:e.dataModel}),e.closeModal()},e.onDelete=function(){e.dataModel.model.value=e.dataModel.model.value.toString().substring(0,e.dataModel.model.value.toString().length-1),e.isDone=r()},e.onOpen=function(){e.isShow=!1},e.onClose=function(){e.isShow=!0,e.onLoadCallback({arg1:null}),e.closeModal()},t.on("$destroy",function(){e.closeModal()})}}}]),app.directive("languageSelect",["$ionicModal","LocaleService","LocalStorage",function(e,t,n){return{restrict:"E",replace:!0,scope:{languages:"=",onResult:"&callback"},link:function(a,o,i){a.selectedId=n.get("language"),a.selectedItem=a.languages.find(function(e){return a.selectedId===e.id}),t.wait().then(function(e){a.translation=e,a.selectedId=n.get("language"),a.selectedItem=a.languages.find(function(e){return a.selectedId===e.id})}),a.languagesModal=function(){e.fromTemplateUrl("templates/directives/languagesSelect.html",{scope:a,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){a.modal=e,t.wait().then(function(e){a.translation=e}),a.selectedId=n.get("language"),a.languagesList=a.languages,a.languageModal=e,a.languageModal.show()})},a.setLanguage=function(e){a.selectedItem=a.languages.find(function(t){return t.id===e.id}),a.onResult({item:a.selectedItem}),a.languageModal&&a.languageModal.hide()},a.closeLanguageModal=function(){a.languageModal&&a.languageModal.hide(),a.languagesList=null},o.on("$destroy",function(){a.modal&&a.modal.remove()})},template:['<div class="languageSelect">','<div class="result row" on-tap="languagesModal()">',"<i class=\"icon flag-union\" ng-class=\"[{true:'flag-icon-'+selectedItem['id']}[true]]\"></i>","</div>","</div>"].join("\n")}}]),app.directive("logoTitle",function(){return{template:'<div class="logo-title"><img src="img/logo.svg"></div>'}}),app.directive("modal",["$state","$ionicHistory","$ionicModal","$timeout","$interval","LocaleService",function(e,t,n,a,o,i){return{scope:{data:"<",template:"@",back:"<",close:"@"},link:function(o,s){function r(n){var a=n||o.data.back||o.back;if(a)return"object"==typeof a?(a.clearHistory&&t.clearHistory(),e.go(a.state,a.params)):"function"==typeof a?a():(t.clearHistory(),e.go(a))}function l(e){o.modal=e}i.wait().then(function(e){o.translation=e}),o.backCounter=o.close,o.hide=function(e){return a.cancel(void 0),o.data.state=!1,o.modal.hide(),t.clearHistory(),r(e)},n.fromTemplateUrl(o.template||"templates/directives/popup.html",{scope:o,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(l);var c=o.$watch("data.state",function(e,t){e!==t&&e&&o.modal.show(),e===t||e||o.hide()});s.on("$destroy",function(){t&&t.clearHistory(),c(),o.data=null,o.modal&&o.modal.remove(),o.modal=null})}}}]),app.directive("modalDialog",["$ionicModal","$ionicHistory","LocaleService",function(e,t,n){return{scope:{data:"<",onOk:"&onOk",onCancel:"&onCancel"},restrict:"E",link:function(a,o){function i(){a.modal.hide(),a.data.isOpened=!1}e.fromTemplateUrl("templates/directives/modalDialog.html",{scope:a,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){a.modal=e}),n.wait().then(function(e){a.translation=e});var s=a.$watch("data.isOpened",function(e,t){e!==t&&e&&a.modal.show()});o.on("$destroy",function(){console.log("ELEMENET $destroy"),t&&t.clearHistory(),s(),a.data=null,a.modal&&a.modal.remove(),a.modal=null}),a.tapCancel=function(){i(),a.onCancel&&a.onCancel()},a.tapOk=function(){i(),a.onOk&&a.onOk()}}}}]),app.directive("openTradeItem",[function(){return{restrict:"E",template:'<div class="opentrade-item"><div class="row card-ios p-0"><div class="col col-67 display-flex"><div class="col col-50 symbol"><div class="name font-14 roboto">{{ trade.outputName }}</div><div class="sub-name"><span class="display-block font-11 status roboto-light">{{::translation.open_price}}</span> <span class="font-13 roboto status-value">{{ trade.openPrice | number:trade.asset.digits }}</span></div></div><div class="col col-50 state border-right-order pt-2"><div class="current-state font-12 short"><span class="trade-state roboto-light" ng-class="trade.action === \'buy\' ? \'buy\' : \'short\'">{{translation[trade.action]}}</span> <span class="short-color">{{ trade.lots | number:2 }}</span></div><div class="sub-name"><span class="display-block font-11 status roboto-light">{{::translation.market_price}}</span> <span class="font-13 roboto"><span class="direction-state" ng-class="trade.closePriceDirection === \'asset-up\' ? \'up\' : \'down\'"><i class="icon font-12" ng-class="trade.closePriceDirection === \'asset-up\' ? \'ion-android-arrow-up\' : \'ion-android-arrow-down\'"></i></span> <span ng-class="trade.closePriceDirection === \'asset-up\' ? \'up\' : \'down\'">{{ trade.closePrice() | number:trade.asset.digits }}</span></span></div></div></div><div class="col col-33 display-flex results-section"><div class="row"><div class="col p-0"><div class="display-block font-10 lh-1"><span class="trade-name">TP:</span> <span class="trade-value" ng-if="trade.takeProfit > 0">{{ trade.takeProfit | number:trade.asset.digits }}</span></div><div class="display-block font-10 lh-1"><span class="trade-name">SL:</span> <span class="trade-value" ng-if="trade.stopLoss > 0">{{ trade.stopLoss | number:trade.asset.digits }}</span></div></div></div><div class="row profit-section text-right"><div class="sub-name width-100"><span class="font-11 status roboto-light display-block">{{::translation.profit}}</span> <span class="font-11 roboto-medium profitValue" ng-class="[trade.profitDirection, showConvertToUsd ? \'display-block\' : \'\']">{{trade.profit() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span> <span class="font-10 roboto-medium profitValueUSD" ng-if="showConvertToUsd" ng-class="trade.profitDirection">({{trade.profitToUsd() | cryptoCurrency:\'USD\':2}})</span></div></div></div></div></div>'}}]),app.directive("passwordmix",[function(){return{require:"?ngModel",link:function(e,t,n,a){a.$validators.passwordmix=function(e,t){var n=0;return/[0-9]/.test(e)?n++:n--,/[a-z]/i.test(e)?n++:n--,2===n}}}}]),app.directive("pendingTradeItem",[function(){return{restrict:"E",template:'<div class="pending-item"><div class="card-ios p-0"><div class="row"><div class="col pb-5"><div class="font-14 output-name">{{trade.outputName}}</div></div><div class="col state"><div class="current-state font-11 text-right"><span class="trade-state roboto-light short" ng-class="(trade.action === \'buy_stop\' || trade.action === \'buy_limit\') ? \'buy\' : \'short\'">{{translation[trade.action]}}</span> <span>{{trade.lots | number:2}}</span> <span>{{::translation.lots}}</span></div></div></div><div class="row align-self"><div class="row pl-0 pt-0 pr-0"><div class="col-33 font-12 border-right-pending roboto pending-section"><div class="roboto-light muted">{{::translation.current}}</div><div class="roboto"><span class="direction-state" ng-class="trade.closePriceDirection === \'asset-up\' ? \'up\' : \'down\'"><i class="icon font-12" ng-class="trade.closePriceDirection === \'asset-up\' ? \'ion-android-arrow-up\' : \'ion-android-arrow-down\'"></i></span> <span ng-class="trade.closePriceDirection === \'asset-up\' ? \'up\' : \'down\'">{{ trade.pendingCurrentPrice() | number:trade.asset.digits }}</span></div></div><div class="col-33 font-12 border-right-pending roboto pending-section center-text"><div class="roboto-light muted">{{::translation.distance}}</div><div class="roboto">{{ trade.pendingDistance() | number:2}}</div></div><div class="col-33 font-12 roboto pending-section text-right"><div class="roboto-light muted">{{::translation.target}}</div><div class="roboto">{{ trade.openPrice | number:trade.asset.digits }}</div></div></div></div></div></div>'}}]),app.directive("personalDetails",[function(){return{
template:'<div ng-if="!profileRulesHelper.isHidden(\'firstName\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="firstName" ng-class="{ \'has-error\' : (form.firstName.$invalid && !form.firstName.$pristine) || (form.$submitted && form.firstName.$invalid) }"><input type="text" name="firstName" ng-model="personalProfileForm.firstName" ng-minlength="1" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'name\')" ng-required="profileRulesHelper.isRequired(\'firstName\')" ng-readonly="profileRulesHelper.isReadonly(\'firstName\', user.firstName)"> <span>{{::translation.firstName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.firstName.$error" ng-if="form.firstName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Firtsname}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'lastName\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="lastName" ng-class="{ \'has-error\' : (form.lastName.$invalid && !form.lastName.$pristine) || (form.$submitted && form.lastName.$invalid) }"><input type="text" name="lastName" ng-model="personalProfileForm.lastName" ng-minlength="1" ng-maxlength="32" ng-pattern="validator(\'name\')" keyboard-watcher ng-required="profileRulesHelper.isRequired(\'lastName\')" ng-readonly="profileRulesHelper.isReadonly(\'lastName\', user.lastName)"> <span>{{::translation.lastName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.lastName.$error" ng-if="form.lastName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Lastname}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'birthday\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="birthday" ng-class="{ \'has-error\' : form.birthday.$invalid && !form.birthday.$pristine }"><input type="date" name="birthday" ng-model="personalProfileForm.birthday" max="{{ minBirth }}" ng-required="profileRulesHelper.isRequired(\'birthday\')" ng-readonly="profileRulesHelper.isReadonly(\'birthday\', user.birthday)"> <span>{{::translation.dateBirth}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.birthday.$error" ng-if="form.dateBirth.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.datepickerFormat}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'phone\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="phone" ng-class="{ \'has-error\' : (form.phone.$invalid && !form.phone.$pristine) || (form.$submitted && form.phone.$invalid) }"><input type="tel" name="phone" ng-model="personalProfileForm.phone" minLength="5" maxLength="17" ng-minlength="5" ng-maxlength="17" keyboard-watcher ng-pattern="validator(\'phone\')" ng-required="profileRulesHelper.isRequired(\'phone\')" ng-readonly="profileRulesHelper.isReadonly(\'phone\', user.phone)"> <span>{{::translation.phoneFull}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.phone.$error" ng-if="form.phone.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'country\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="country" ng-class="{ \'has-error\' : (form.country.$invalid && !form.country.$pristine) || (form.$submitted && form.country.$invalid) }"><input type="text" class="custom-select custom-input" name="country" ng-model="personalProfileForm.country.country" on-tap="!profileRulesHelper.isReadonly(\'country\', user.country) && openCountryModal()" readonly ng-required="profileRulesHelper.isRequired(\'country\')"> <span>{{::translation.country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="countryModal" items="countries" config="countryModalConfig" on-submit="setCountry(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.country.$error" ng-if="form.country.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-hide="personalProfileForm.country.states.length === 0"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="state" ng-class="{ \'has-error\' : (form.state.$invalid && !form.state.$pristine) || (form.$submitted && form.state.$invalid) }"><input type="text" class="custom-select custom-input" name="state" ng-model="personalProfileForm.state.stateName" on-tap="!profileRulesHelper.isReadonly(\'state\', user.state) && openCountryStateModal()" readonly> <span>{{::translation.state}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="countryStateModal" items="countryStates" config="countryStateModalConfig" on-submit="setCountryState(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.state.$error" ng-if="form.state.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'citizenship\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="citizenship" ng-class="{ \'has-error\' : (form.citizenship.$invalid && !form.citizenship.$pristine) || (form.$submitted && form.citizenship.$invalid) }"><input type="text" class="custom-select custom-input" name="citizenship" ng-model="personalProfileForm.citizenship.citizenship" on-tap="!profileRulesHelper.isReadonly(\'citizenship\', user.citizenship) && openCitizenshipModal()" readonly ng-required="profileRulesHelper.isRequired(\'citizenship\')"> <span>{{::translation.citizenship}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="citizenshipModal" items="citizenships" config="citizenshipModalConfig" on-submit="setCitizenship(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.citizenship.$error" ng-if="form.citizenship.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'address\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="address" ng-class="{ \'has-error\' : (form.address.$invalid && !form.address.$pristine) || (form.$submitted && form.address.$invalid) }"><input type="text" name="address" ng-model="personalProfileForm.address" ng-minlength="2" ng-maxlength="100" keyboard-watcher ng-pattern="validator(\'address\')" ng-required="profileRulesHelper.isRequired(\'address\')" ng-readonly="profileRulesHelper.isReadonly(\'address\', user.address)"> <span>{{::translation.address}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.address.$error" ng-if="form.address.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_address}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'city\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="city" ng-class="{ \'has-error\' : (form.city.$invalid && !form.city.$pristine) || (form.$submitted && form.city.$invalid) }"><input type="text" name="city" ng-model="personalProfileForm.city" ng-minlength="2" ng-maxlength="100" ng-required="profileRulesHelper.isRequired(\'city\')" ng-readonly="profileRulesHelper.isReadonly(\'city\', user.city)" keyboard-watcher ng-pattern="validator(\'name\')" style="user-select: text !important;"> <span>{{::translation.city}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.city.$error" ng-if="form.city.$dirty || from.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_city}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'postCode\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="postCode" ng-class="{ \'has-error\' : (form.postCode.$invalid && !form.postCode.$pristine) || (form.$submitted && form.postCode.$invalid) }"><input type="text" name="postCode" ng-model="personalProfileForm.postCode" ng-minlength="3" ng-maxlength="15" keyboard-watcher ng-pattern="validator(\'alphanum\')" ng-required="profileRulesHelper.isRequired(\'postCode\')" ng-readonly="profileRulesHelper.isReadonly(\'postCode\', user.postCode)"> <span>{{::translation.zipCode}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.postCode.$error" ng-if="form.postCode.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'currency\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="currency" ng-class="{ \'has-error\' : (form.currency.$invalid && !form.currency.$pristine) || (form.$submitted && form.currency.$invalid) }"><select name="currency" class="form-select" ng-required="profileRulesHelper.isRequired(\'currency\')" ng-options="currency.currency for currency in currencyList" ng-model="personalProfileForm.currency"></select><span>{{::translation.currency}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.currency.$error" ng-if="form.currency.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'customerType\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="customerType" ng-class="{ \'has-error\' : (form.customerType.$invalid && !form.customerType.$pristine) || (form.$submitted && form.customerType.$invalid) }"><select name="customerType" class="form-select" ng-required="profileRulesHelper.isRequired(\'customerType\')" ng-options="customerType.label for customerType in customerTypes track by customerType.name" ng-model="personalProfileForm.customerType"></select><span>{{::translation.customerType}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.customerType.$error" ng-if="form.customerType.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.select_account_type}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'tradingExperience\')"><div class="padding pb-0 pl-0">{{::translation.trading_experience}}</div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" id="tradingExperience" ng-class="{ \'has-error\' : form.tradingExperience.$invalid && !form.tradingExperience.$pristine }"><ion-radio ng-value="false" name="tradingExperience" class="text-transform-capitalize" ng-model="personalProfileForm.tradingExperience" ng-required="profileRulesHelper.isRequired(\'tradingExperience\')">{{::translation.no}}</ion-radio><ion-radio ng-value="true" name="tradingExperience" class="text-transform-capitalize" ng-model="personalProfileForm.tradingExperience" ng-required="profileRulesHelper.isRequired(\'tradingExperience\')">{{::translation.yes}}</ion-radio></div><div class="messages font-12" ng-messages="form.tradingExperience.$error" ng-if="form.tradingExperience.$dirty"><div class="help-block" ng-message="required">Please select at least one option</div></div></div>'}}]),app.directive("personalDetailsRegulated",[function(){return{template:'<div ng-if="!profileRulesHelper.isHidden(\'tin\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="tin" ng-class="{ \'has-error\' : (form.tin.$invalid && !form.tin.$pristine) || (form.$submitted && form.tin.$invalid) }"><input type="text" name="tin" ng-model="personalProfileForm.tin" ng-minlength="2" ng-maxlength="50" ng-required="profileRulesHelper.isRequired(\'tin\')" ng-readonly="profileRulesHelper.isReadonly(\'tin\', user.tin)" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <span>{{::translation.tin}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.tin.$error" ng-if="form.tin.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'tinAbsenceReason\') && !personalProfileForm.tin"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="tinAbsenceReason" ng-class="{ \'has-error\' : (form.tinAbsenceReason.$invalid && !form.tinAbsenceReason.$pristine) || (form.$submitted && form.tinAbsenceReason.$invalid) }"><input type="text" name="tinAbsenceReason" ng-model="personalProfileForm.tinAbsenceReason" ng-required="profileRulesHelper.isRequired(\'tinAbsenceReason\') || !personalProfileForm.tin" keyboard-watcher> <span>{{::translation.tinAbsence}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.tinAbsenceReason.$error" ng-if="form.tinAbsenceReason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'pep\')"><div class="padding pb-0 pl-0" ng-click="showInfo(\'pep\')" style="display: flex;">{{::translation.pep}} <span class="pep-description">?</span></div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" id="pep" ng-class="{ \'has-error\' : form.pep.$invalid && !form.pep.$pristine }"><ion-radio ng-value="false" name="pep" class="text-transform-capitalize" ng-model="personalProfileForm.pep" ng-required="profileRulesHelper.isRequired(\'pep\')">{{::translation.no}}</ion-radio><ion-radio ng-value="true" name="pep" class="text-transform-capitalize" ng-model="personalProfileForm.pep" ng-required="profileRulesHelper.isRequired(\'pep\')">{{::translation.yes}}</ion-radio></div><div class="messages font-12" ng-messages="form.pep.$error" ng-if="form.pep.$dirty"><div class="help-block" ng-message="required">Please select at least one option</div></div></div><div ng-If="!profileRulesHelper.isHidden(\'taxCountry\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="taxCountry" ng-class="{ \'has-error\' : (form.taxCountry.$invalid && !form.taxCountry.$pristine) || (form.$submitted && form.taxCountry.$invalid) }"><input type="text" class="custom-select custom-input" name="taxCountry" ng-model="personalProfileForm.taxCountry.country" on-tap="openTaxCountryModal()" readonly ng-required="profileRulesHelper.isRequired(\'taxCountry\')"> <span>{{::translation.tax_country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="taxCountryModal" items="taxCountries" config="countryModalConfig" on-submit="setTaxCountry(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.taxCountry.$error" ng-if="form.taxCountry.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'isUSCitizen\')"><div class="padding pb-0 pl-0">{{::translation.us_reportable}}</div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" id="usCitizen" ng-class="{ \'has-error\' : form.usCitizen.$invalid && !form.usCitizen.$pristine }"><ion-radio ng-value="false" name="usCitizen" class="text-transform-capitalize" ng-model="personalProfileForm.usCitizen" ng-required="profileRulesHelper.isRequired(\'isUSCitizen\')">{{::translation.no}}</ion-radio><ion-radio ng-value="true" name="usCitizen" class="text-transform-capitalize" ng-model="personalProfileForm.usCitizen" ng-required="profileRulesHelper.isRequired(\'isUSCitizen\')" ng-change="showUsCitizenPopup()">{{::translation.yes}}</ion-radio></div><div class="messages font-12" ng-messages="form.usCitizen.$error" ng-if="form.usCitizen.$dirty"><div class="help-block" ng-message="required">Please select at least one option</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'nationalId\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="nationalId" ng-class="{ \'has-error\' : (form.nationalId.$invalid && !form.nationalId.$pristine) || (form.$submitted && form.nationalId.$invalid) }"><input type="text" name="nationalId" ng-model="personalProfileForm.nationalId" ng-required="profileRulesHelper.isRequired(\'nationalId\')" ng-readonly="profileRulesHelper.isReadonly(\'nationalId\', user.nationalId)" keyboard-watcher> <span>{{::translation.nationalId}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.nationalId.$error" ng-if="form.nationalId.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'companyName\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="companyName" ng-class="{ \'has-error\' : (form.companyName.$invalid && !form.companyName.$pristine) || (form.$submitted && form.companyName.$invalid) }"><input type="text" name="companyName" ng-model="personalProfileForm.companyName" ng-required="profileRulesHelper.isRequired(\'companyName\')" ng-readonly="profileRulesHelper.isReadonly(\'companyName\', user.companyName)" keyboard-watcher> <span>{{::translation.company_name}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.companyName.$error" ng-if="form.companyName.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'isMarried\')"><div class="padding pb-0 pl-0">{{::translation.isMarried}}</div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" id="isMarried" ng-class="{ \'has-error\' : form.isMarried.$invalid && !form.isMarried.$pristine }"><ion-radio ng-value="false" name="isMarried" class="text-transform-capitalize" ng-model="personalProfileForm.isMarried" ng-required="profileRulesHelper.isRequired(\'isMarried\')">{{::translation.no}}</ion-radio><ion-radio ng-value="true" name="isMarried" class="text-transform-capitalize" ng-model="personalProfileForm.isMarried" ng-required="profileRulesHelper.isRequired(\'isMarried\')">{{::translation.yes}}</ion-radio></div><div class="messages font-12" ng-messages="form.isMarried.$error" ng-if="form.isMarried.$dirty"><div class="help-block" ng-message="required">Please select at least one option</div></div><div class="padding pb-0 pl-0" ng-if="personalProfileForm.isMarried">{{::translation.isSpouse}}</div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" id="isSpouse" ng-if="personalProfileForm.isMarried" ng-class="{ \'has-error\' : form.isSpouse.$invalid && !form.isSpouse.$pristine }"><ion-radio ng-value="false" name="isSpouse" class="text-transform-capitalize" ng-model="personalProfileForm.isSpouse" ng-required="true">{{::translation.no}}</ion-radio><ion-radio ng-value="true" name="isSpouse" class="text-transform-capitalize" ng-model="personalProfileForm.isSpouse" ng-required="true">{{::translation.yes}}</ion-radio></div><div class="messages font-12" ng-messages="form.isSpouse.$error" ng-if="personalProfileForm.isMarried && form.isSpouse.$dirty"><div class="help-block" ng-message="required">Please select at least one option</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'birthPlace\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="birthPlace" ng-class="{ \'has-error\' : (form.birthPlace.$invalid && !form.birthPlace.$pristine) || (form.$submitted && form.birthPlace.$invalid) }"><input type="text" name="birthPlace" ng-model="personalProfileForm.birthPlace" ng-required="profileRulesHelper.isRequired(\'birthPlace\')" ng-readonly="profileRulesHelper.isReadonly(\'birthPlace\', user.birthPlace)" keyboard-watcher> <span>{{::translation.birthPlace}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.birthPlace.$error" ng-if="form.birthPlace.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><custom-fields ng-if="personalProfileForm.country && personalProfileForm.country.customFields"></custom-fields>'}}]),app.directive("proChart",["$timeout","$ionicLoading","config","ServerTimeService","ProChartService","LocaleService",function(e,t,n,a,o,i){return{scope:{asset:"<",chart:"<"},replace:!0,link:function(s,r){function l(){return s.$watch("asset.bid",function(e,t){e&&e!==t&&s.chart.ready&&m()})}function c(){function a(){var e=n.chartTheme||"default",t=n.chartLayout||"layout-mobile";h=ProChart_InitLayout("#chart",t,e),h.apiinit.rootpath=n.chartUrl,h.events.layout.readyComplete=i,h.gui.loadLayout(),h.events.layout.initComplete=d,h.events.chart.createComplete=function(){h.chart.GetNumOfCandles&&h.chart.SetZoom(h.chart.GetNumOfCandles()-C,h.chart.GetNumOfCandles(),!0)}}function i(){h.api.layout.set("width||height",r[0].clientWidth+"||"+r[0].clientHeight),s.chart&&(s.chart.loadstate="success"),b&&e.cancel(b)}if(h=null,o.loaded)a();else{var l=o.getLoader();l.LoaderInitComplete=a,l.LoaderInitCombine(),b=e(function(){s.chart&&(s.chart.loadstate="fail"),t.hide(),e.cancel(b)},2e4)}}function d(){h.chart.DateFormat={realtime:"DD/MM/YYYY HH:mm:ss",minutes:"HH:mm",hours:"DD/MM/YYYY HH:mm:ss",eod:"DD/MM/YYYY",datebarYear:"YYYY",datebarMonthDay:"DD/MM",datebarDay:"DD",datebarFull:"DD/MM/YYYY",datebarHoursMinutes:"HH:mm",datebarMonth:"MM"},h.chart.WaterMark=!1,h.chart.StudiesToLoad=[],h.chart.ShowBarData="false",h.chart.hAxis.hPadInPixelsLeft=10,h.chart.vAxis.vPadInPixelsTop=50,h.chart.PriceChartType=T[s.chart.type.type],h.chart.Symbol=s.asset.outputName,h.chart.SymbolName=s.asset.outputName,h.chart.TimeScale=A[s.chart.range.title],h.chart.Precision=s.asset.digits,h.chart.TimeZone=k,h.chart.JSPush={enableHistory:!0,enableRT:!0,enableSymbols:!0,enableStudies:!0,funcFetchData:u},o.loaded=!0,b&&e.cancel(b)}function u(e,n,a,o){switch(a.toLowerCase()){case"getrecenthistory":var i=p(s.chart.data);return h.chart.Push(e,n,a,i),t.hide(),y&&y(),void(y=l());case"getmultirt":w={objChartContext:e,objRequestContext:n,strRequest:a}}}function p(e){return e[e.length-1][S.close]=s.asset.markupBid(),{id:s.asset.outputName,lastTimeStamp:e[e.length-1][S.timestamp],data:e.map(function(e){return{open:e[S.open],close:e[S.close],low:e[S.low],high:e[S.high],other:0,date:e[S.timestamp]}})}}function m(){var e=a.time,t=[{id:s.asset.outputName,lastTimeStamp:e,data:[{bid:s.asset.markupBid(),ask:s.asset.markupAsk(),other:0,date:e}]}];h&&h.chart&&h.chart.Push(w.objChartContext,w.objRequestContext,w.strRequest,t)}function g(e){e&&h.chart.ChangePriceType(e)}function v(e){h&&h.chart.ChangeTimeScale(e),h&&h.chart.SetZoom(h.chart.GetNumOfCandles()-C,h.chart.GetNumOfCandles(),!0)}function f(){h&&h.chart.ChangeSymbol({id:s.asset.outputName,name:s.asset.description,precision:s.asset.digits}),v(A[s.chart.range.title])}var h,b,y,w={objChartContext:null,objRequestContext:null,strRequest:null},k=-1*a.timeZoneOffset*60,C=35,S={timestamp:0,open:1,high:2,low:3,close:4},T={line:"line",areaspline:"area",ohlc:"line",candlestick:"candlesticks"},A={"1min":"1m","5min":"5m","15min":"15m","30min":"30m","1hour":"60m","4hours":"4h","1day":"1d","1week":"1w","1month":"1n"};b&&e.cancel(b);var $=s.$watch("chart.ready",function(e,n){if(e!==n&&e)return s.loadingMessage=i.translation.loading_chart,t.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:s}),h?f():c()}),x=s.$watch("chart.type",function(e,t){e&&e!==t&&s.chart.ready&&h&&g(T[e.type])});r.on("$destroy",function(){b&&e.cancel(b),h&&h.chart.StopRTRequests(),y&&y(),$&&$(),x&&x();try{h&&h.chart.CleanUp(),document.getElementById("chart").innerHTML=""}catch(e){console.warn("chart cleanup failed",e)}h=null,s.asset=null,s.chart=null})},template:'<div style="position: relative" class="chart" id="chart"></div>'}}]),app.directive("question",["LocaleService","constants","$ionicPopup",function(e,t,n){return{scope:{question:"<",control:"=",viewOnly:"<"},restrict:"E",template:'<div class="tap-radio" id="question-{{question.id}}"><form name="form" novalidate><div class="labetTitle text-center">{{::question.label}}</div><div class="answer" ng-repeat="answer in question.answers"><label ng-class="{\'disabled\': viewOnly, \'active\': answer.id === tmp.value }"><input type="radio" required value="{{answer.id}}" ng-model="tmp.value" ng-change="updateModel()" ng-disabled="viewOnly"> <span>{{answer.label}}</span></label></div><div class="form-group item-stacked-label bottom-border" ng-if="showOther" ng-class="{ \'has-error\' : (form.other.$invalid && !form.other.$pristine) || (form.$submitted && form.other.$invalid) }"><label>{{::translation.specifyOtherAnswer}}</label> <input type="text" name="other" ng-model="question.other" ng-minlength="1" ng-maxlength="128" required keyboard-watcher ng-disabled="viewOnly" ng-change="updateModel()"></div></form></div>',link:function(a,o){a.translation=e.translation,a.showOther=a.question.other.length>0,a.tmp={value:a.viewOnly?a.question.values.id:""},a.control[a.question.id]={},a.control[a.question.id].validate=function(){return a.validate()},a.updateModel=function(){if(!a.viewOnly&&(a.question.values=a.question.formatAnswer(a.tmp.value),a.question.allowOther&&(a.showOther=a.isOther()),t.questionnairePopups&&t.questionnairePopups[a.tmp.value])){var e=t.questionnairePopups[a.tmp.value];a.showPopup("",a.translation[e])}},a.isOther=function(){return a.question.isMulti?Array.isArray(a.question.values)&&!!_.find(a.question.values,{id:"-1"}):"-1"==a.question.values.id},a.showPopup=function(o,i){var s=[];t.questionnaireResetAnswerButton&&s.push({text:e.translation.close,onTap:function(e){e.preventDefault(),a.tmp.value="",a.updateModel(),r.close()}}),s.push({text:t.questionnaireResetAnswerButton?e.translation.i_understand:e.translation.continue,type:"button-positive",onTap:function(e){e.preventDefault(),r.close()}});var r=n.show({template:i,title:o||"Warning",scope:a,buttons:s})},a.validateForm=function(){this.form.other&&(this.form.other.$setTouched(),this.form.other.$setDirty())},a.validate=function(){if(a.validateForm(),a.question.valid=!1,a.question.allowOther){var e=a.isOther();a.question.allowOther&&!e&&(a.question.other=""),e&&a.question.other&&a.question.other.length>0&&(a.question.valid=!0),!e&&a.question.values&&Array.isArray(a.question.values)&&a.question.values.length>0&&(a.question.valid=!0),e||!a.question.values||a.question.isMulti||(a.question.valid=!0)}else a.question.values&&Array.isArray(a.question.values)&&a.question.values.length>0&&(a.question.valid=!0),a.question.values&&!Array.isArray(a.question.values)&&(a.question.valid=!0);return a.question.valid},o.on("$destroy",function(){delete a.control[a.question.id]})}}}]),app.directive("signupDefault",[function(){return{
template:'<div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.email.$invalid && !form.email.$pristine) || (form.$submitted && form.email.$invalid) }"><input type="email" name="email" ng-model="signupForm.email" ng-minlength="4" ng-maxlength="80" ng-pattern="validator(\'email\')" keyboard-watcher required> <span class="input-label">{{::translation.emailRegistration}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.email.$error" ng-if="form.email.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="email">{{::translation.messages.invalid_email}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div><div class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.password.$invalid && !form.password.$pristine) || (form.$submitted && form.password.$invalid) }"><input type="{{password.checked?\'text\':\'password\'}}" name="password" ng-model="signupForm.password" ng-minlength="6" ng-maxlength="12" ng-pattern="validator(\'password\')" required keyboard-watcher passwordmix> <span class="input-label">{{::translation.password}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.password.$error" ng-if="form.password.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div></div><div class="col pr-0 pb-0 pt-0 pl-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.confirmPassword.$invalid && !form.confirmPassword.$pristine) || (form.$submitted && form.confirmPassword.$invalid) }"><input type="{{password.checked?\'text\':\'password\'}}" name="confirmPassword" ng-model="signupForm.confirmPassword" required keyboard-watcher compare-to="signupForm.password"> <span class="input-label">{{::translation.confirmPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.confirmPassword.$error" ng-if="form.confirmPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="compareTo">{{::translation.messages.password_not_matched}}</div></div></div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="country" ng-class="{ \'has-error\' : (form.country.$invalid && !form.country.$pristine) || (form.$submitted && form.country.$invalid) }"><input type="text" class="custom-select custom-input" name="country" ng-model="countryName" on-tap="countriesModal(\'country\', form)" readonly required> <span>{{::translation.country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.country.$error" ng-if="form.country.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div><div ng-if="isPromo"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="promocode" ng-class="{ \'has-error\' : form.promocode.$invalid && !form.promocode.$pristine }"><input type="text" name="promocode" ng-model="signupForm.promocode" on-tap="promoCodes.length && countriesModal(\'promocode\', form)" ng-minlength="2" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <span>{{::translation.promo}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.promocode.$error" ng-if="form.promocode.$dirty"><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="p-0"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" ng-class="{\'error-checkbox\': (form.terms.$invalid && !form.terms.$pristine) || (form.$submitted && form.terms.$invalid) }" name="terms" ng-model="signupForm.terms" ng-required="true">{{::translation.login_bottom_text}}</ion-checkbox></div></div><div class="p-0" ng-if="constants.signupEnableCheckKYC"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0 layout-row customer-policy"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info layout-column" ng-class="{\'error-checkbox\': (form.kyc.$invalid && !form.kyc.$pristine) || (form.$submitted && form.kyc.$invalid) }" name="kyc" ng-model="signupForm.acceptKyc" ng-required="true">{{::translation.readAndAgree}}</ion-checkbox><span class="layout-column font-12 mt-10 pl-0 item border-0"><a href="{{constants.externalLinks.kycPolicy}}" target="_blank">{{::translation.kyc}}</a></span></div></div><div class="p-0" ng-if="isAcceptPromotions"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" name="acceptPromotions" ng-model="signupForm.acceptPromotions">{{::translation.acceptPromotions}}</ion-checkbox></div></div>'}}]),app.directive("signupLong",[function(){return{template:'<div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="firstName" ng-class="{ \'has-error\' : (form.firstName.$invalid && !form.firstName.$pristine) || (form.$submitted && form.firstName.$invalid) }"><input type="text" name="firstName" ng-model="signupForm.firstName" ng-minlength="1" ng-maxlength="32" required keyboard-watcher class="has-context-menu" ng-pattern="validator(\'name\')"> <span>{{::translation.firstName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.firstName.$error" ng-if="form.firstName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Firtsname}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="lastName" ng-class="{ \'has-error\' : (form.lastName.$invalid && !form.lastName.$pristine) || (form.$submitted && form.lastName.$invalid) }"><input type="text" name="lastName" ng-model="signupForm.lastName" ng-minlength="1" ng-maxlength="32" ng-pattern="validator(\'name\')" keyboard-watcher class="has-context-menu" required> <span>{{::translation.lastName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.lastName.$error" ng-if="form.lastName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Lastname}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.email.$invalid && !form.email.$pristine) || (form.$submitted && form.email.$invalid) }"><input type="email" name="email" ng-model="signupForm.email" ng-minlength="4" ng-maxlength="80" ng-pattern="validator(\'email\')" keyboard-watcher class="has-context-menu" required> <span class="input-label">{{::translation.emailRegistration}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.email.$error" ng-if="form.email.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="email">{{::translation.messages.invalid_email}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div><div class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.password.$invalid && !form.password.$pristine) || (form.$submitted && form.password.$invalid) }"><input type="{{password.checked?\'text\':\'password\'}}" name="password" ng-model="signupForm.password" ng-minlength="6" ng-maxlength="12" ng-pattern="validator(\'password\')" keyboard-watcher class="has-context-menu" required> <span class="input-label">{{::translation.password}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.password.$error" ng-if="form.password.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div></div><div class="col pr-0 pb-0 pt-0 pl-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.confirmPassword.$invalid && !form.confirmPassword.$pristine) || (form.$submitted && form.confirmPassword.$invalid) }"><input type="{{password.checked?\'text\':\'password\'}}" name="confirmPassword" ng-model="signupForm.confirmPassword" required keyboard-watcher class="has-context-menu" compare-to="signupForm.password"> <span class="input-label-75">{{::translation.confirmPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.confirmPassword.$error" ng-if="form.confirmPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="compareTo">{{::translation.messages.password_not_matched}}</div></div></div></div><div class="row p-0"><div class="col col-33 pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border country-wrapper" id="country" ng-class="{ \'has-error\' : (form.country.$invalid && !form.country.$pristine) || (form.$submitted && form.country.$invalid) }" on-tap="countriesModal(\'country\', form)"><div class="flag-icon" ng-class="\'flag-icon-\' + signupForm.country.toLowerCase()"></div><div class="flag-plus" ng-if="signupForm.country">+</div><input type="text" class="custom-select custom-input flag-select" name="country" ng-model="phoneCode" readonly keyboard-watcher required> <span>{{::translation.country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.country.$error" ng-if="form.country.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div class="col col-67 pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="phone" ng-class="{ \'has-error\' : (form.phone.$invalid && !form.phone.$pristine) || (form.$submitted && form.phone.$invalid) }"><input type="tel" name="phone" ng-model="signupForm.phone" minLength="5" maxLength="17" ng-minlength="5" ng-maxlength="17" required keyboard-watcher ng-pattern="validator(\'phone\')"> <span>{{::translation.phone}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.phone.$error" ng-if="form.phone.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div></div><div ng-if="isPromo"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="promocode" ng-class="{ \'has-error\' : form.promocode.$invalid && !form.promocode.$pristine }"><input ng-if="promoCodes.length > 0" type="text" name="promocode" ng-model="signupForm.promocode" on-tap="countriesModal(\'promocode\', form)" ng-minlength="2" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <input ng-if="promoCodes.length == 0" type="text" name="promocode" ng-model="signupForm.promocode" ng-minlength="2" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <span>{{::translation.promo}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.promocode.$error" ng-if="form.promocode.$dirty"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="p-0"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-if="!constants.signUpOver18CheckboxIsHidden"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" ng-class="{\'error-checkbox\': (form.terms.$invalid && !form.terms.$pristine) || (form.$submitted && form.terms.$invalid) }" name="terms" ng-model="signupForm.terms" ng-required="!constants.termsNonLeverage || !signupForm.termsNonLeverage" ng-if="!constants.signupTermsExtended"><span>{{::translation.login_bottom_text}}</span>&nbsp; <span ng-if="constants.externalLinks.accountTerms">{{::translation.login_bottom_text2}}</span></ion-checkbox><a ng-if="constants.externalLinks.accountTerms" target="_blank" class="text-transform-capitalize" href="{{constants.externalLinks.accountTerms}}">{{::translation.login_bottom_text2}}</a><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" ng-class="{\'error-checkbox\': (form.terms.$invalid && !form.terms.$pristine) || (form.$submitted && form.terms.$invalid) }" name="terms" ng-model="signupForm.terms" ng-required="!constants.termsNonLeverage || !signupForm.termsNonLeverage" ng-if="constants.signupTermsExtended">{{::translation.over_18_year_part1}}</ion-checkbox><div ng-if="!constants.disclaimerV2enabled"><a ng-if="constants.externalLinks.termsAndConditions" ng-href="{{constants.externalLinks.termsAndConditions + \'?lang=\' + lang}}" target="_blank">{{::translation.over_18_year_part2}}&nbsp;</a> <span ng-if="constants.externalLinks.termsAndConditions === \'\'">{{::translation.over_18_year_part2}}&nbsp;</span> <a ng-if="constants.externalLinks.privacyPolicy" ng-href="{{constants.externalLinks.privacyPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_a}}&nbsp;</a> <span ng-if="constants.externalLinks.privacyPolicy === \'\'">, {{::translation.over_18_year_part2_a}}&nbsp;</span> <a ng-if="constants.externalLinks.riskDislosure" ng-href="{{constants.externalLinks.riskDislosure + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_b}}</a> <a ng-if="constants.externalLinks.orderExecutionPolicy" ng-href="{{constants.externalLinks.orderExecutionPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_c}}</a> <a ng-if="constants.externalLinks.conflictsofInterestPolicy" ng-href="{{constants.externalLinks.conflictsofInterestPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_d}}</a> <a ng-if="constants.externalLinks.clientCategorisation" ng-href="{{constants.externalLinks.clientCategorisation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_e}}</a> <a ng-if="constants.externalLinks.investorCompensation" ng-href="{{constants.externalLinks.investorCompensation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_g}}</a> <a ng-if="constants.externalLinks.keyInformation" ng-href="{{constants.externalLinks.keyInformation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_i}}</a> <span ng-if="constants.signupTermsExtended">{{::translation.over_18_year_part3}}&nbsp;</span> <a ng-if="constants.externalLinks.accountTerms && translation.over_18_year_part4" ng-href="{{constants.externalLinks.accountTerms + \'?lang=\' + lang}}" target="_blank">{{::translation.over_18_year_part4}}&nbsp;</a> <span ng-if="!constants.externalLinks.accountTerms && translation.over_18_year_part4">{{::translation.over_18_year_part4}}&nbsp;</span> <span ng-if="translation.over_18_year_part5">{{::translation.over_18_year_part5}}</span></div><div ng-if="constants.disclaimerV2enabled"><span ng-repeat="(key, link) in constants.externalLinks" class="disclaimerV2enabledLink"><a href="{{link[lang]}}" target="_blank">{{::translation[key]}}</a></span></div></div></div><div class="p-0" ng-if="constants.signupEnableCheckKYC"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0 layout-row customer-policy"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info layout-column" ng-class="{\'error-checkbox\': (form.kyc.$invalid && !form.kyc.$pristine) || (form.$submitted && form.kyc.$invalid) }" name="kyc" ng-model="signupForm.acceptKyc" ng-required="true">{{::translation.readAndAgree}}</ion-checkbox><span class="layout-column font-12 mt-10 pl-0 item border-0"><a href="{{constants.externalLinks.kycPolicy}}" target="_blank">{{::translation.kyc}}</a></span></div></div><div class="p-0" ng-if="constants.termsNonLeverage"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" name="termsNonLeverage" ng-model="signupForm.termsNonLeverage" ng-required="!signupForm.terms">{{::translation.termsNonLeverage}}</ion-checkbox></div></div><div class="p-0" ng-if="isAcceptPromotions"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" name="acceptPromotions" ng-model="signupForm.acceptPromotions">{{::translation.acceptPromotions}}</ion-checkbox></div></div>'}}]),app.directive("signupSocial",[function(){return{
template:'<div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="firstName" ng-class="{ \'has-error\' : (form.firstName.$invalid && !form.firstName.$pristine) || (form.$submitted && form.firstName.$invalid) }"><input type="text" name="firstName" ng-model="signupForm.firstName" ng-minlength="2" ng-maxlength="32" required keyboard-watcher class="has-context-menu" ng-pattern="validator(\'name\')"> <span>{{::translation.firstName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.firstName.$error" ng-if="form.firstName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Firtsname}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="lastName" ng-class="{ \'has-error\' : (form.lastName.$invalid && !form.lastName.$pristine) || (form.$submitted && form.lastName.$invalid) }"><input type="text" name="lastName" ng-model="signupForm.lastName" ng-minlength="1" ng-maxlength="32" ng-pattern="validator(\'name\')" keyboard-watcher class="has-context-menu" required> <span>{{::translation.lastName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.lastName.$error" ng-if="form.lastName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Lastname}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.email.$invalid && !form.email.$pristine) || (form.$submitted && form.email.$invalid) }"><input type="email" name="email" ng-model="signupForm.email" ng-minlength="4" ng-maxlength="80" ng-pattern="validator(\'email\')" keyboard-watcher class="has-context-menu" required> <span class="input-label">{{::translation.emailRegistration}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.email.$error" ng-if="form.email.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="email">{{::translation.messages.invalid_email}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div><div class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.password.$invalid && !form.password.$pristine) || (form.$submitted && form.password.$invalid) }"><input type="{{password.checked?\'text\':\'password\'}}" name="password" ng-model="signupForm.password" ng-minlength="6" ng-maxlength="12" ng-pattern="validator(\'password\')" keyboard-watcher class="has-context-menu" required> <span class="input-label">{{::translation.password}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.password.$error" ng-if="form.password.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div></div><div class="col pr-0 pb-0 pt-0 pl-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.confirmPassword.$invalid && !form.confirmPassword.$pristine) || (form.$submitted && form.confirmPassword.$invalid) }"><input type="{{password.checked?\'text\':\'password\'}}" name="confirmPassword" ng-model="signupForm.confirmPassword" required keyboard-watcher class="has-context-menu" compare-to="signupForm.password"> <span class="input-label-75">{{::translation.confirmPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.confirmPassword.$error" ng-if="form.confirmPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="compareTo">{{::translation.messages.password_not_matched}}</div></div></div></div><div class="row p-0"><div class="col col-33 pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border country-wrapper" id="country" ng-class="{ \'has-error\' : (form.country.$invalid && !form.country.$pristine) || (form.$submitted && form.country.$invalid) }" on-tap="countriesModal(\'country\', form)"><div class="flag-icon" ng-class="\'flag-icon-\' + signupForm.country.toLowerCase()"></div><div class="flag-plus" ng-if="signupForm.country">+</div><input type="text" class="custom-select custom-input flag-select" name="country" ng-model="phoneCode" readonly keyboard-watcher required> <span>{{::translation.country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.country.$error" ng-if="form.country.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div class="col col-67 pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="phone" ng-class="{ \'has-error\' : (form.phone.$invalid && !form.phone.$pristine) || (form.$submitted && form.phone.$invalid) }"><input type="tel" name="phone" ng-model="signupForm.phone" minLength="5" maxLength="17" ng-minlength="5" ng-maxlength="17" required keyboard-watcher ng-pattern="validator(\'phone\')"> <span>{{::translation.phone}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.phone.$error" ng-if="form.phone.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div></div><div ng-if="isPromo"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="promocode" ng-class="{ \'has-error\' : form.promocode.$invalid && !form.promocode.$pristine }"><input ng-if="promoCodes.length > 0" type="text" name="promocode" ng-model="signupForm.promocode" on-tap="countriesModal(\'promocode\', form)" ng-minlength="2" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <input ng-if="promoCodes.length == 0" type="text" name="promocode" ng-model="signupForm.promocode" ng-minlength="2" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <span>{{::translation.promo}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.promocode.$error" ng-if="form.promocode.$dirty"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="p-0"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-if="!constants.signUpOver18CheckboxIsHidden"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" ng-class="{\'error-checkbox\': (form.terms.$invalid && !form.terms.$pristine) || (form.$submitted && form.terms.$invalid) }" name="terms" ng-model="signupForm.terms" ng-required="!constants.termsNonLeverage || !signupForm.termsNonLeverage" ng-if="!constants.signupTermsExtended"><span>{{::translation.login_bottom_text}}</span>&nbsp; <span ng-if="constants.externalLinks.accountTerms">{{::translation.login_bottom_text2}}</span></ion-checkbox><a ng-if="constants.externalLinks.accountTerms" target="_blank" class="text-transform-capitalize" href="{{constants.externalLinks.accountTerms}}">{{::translation.login_bottom_text2}}</a><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" ng-class="{\'error-checkbox\': (form.terms.$invalid && !form.terms.$pristine) || (form.$submitted && form.terms.$invalid) }" name="terms" ng-model="signupForm.terms" ng-required="!constants.termsNonLeverage || !signupForm.termsNonLeverage" ng-if="constants.signupTermsExtended">{{::translation.over_18_year_part1}}</ion-checkbox><a ng-if="constants.externalLinks.termsAndConditions" ng-href="{{constants.externalLinks.termsAndConditions + \'?lang=\' + lang}}" target="_blank">{{::translation.over_18_year_part2}}&nbsp;</a> <span ng-if="constants.externalLinks.termsAndConditions === \'\'">{{::translation.over_18_year_part2}}&nbsp;</span> <a ng-if="constants.externalLinks.privacyPolicy" ng-href="{{constants.externalLinks.privacyPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_a}}&nbsp;</a> <span ng-if="constants.externalLinks.privacyPolicy === \'\'">, {{::translation.over_18_year_part2_a}}&nbsp;</span> <a ng-if="constants.externalLinks.riskDislosure" ng-href="{{constants.externalLinks.riskDislosure + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_b}}</a> <a ng-if="constants.externalLinks.orderExecutionPolicy" ng-href="{{constants.externalLinks.orderExecutionPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_c}}</a> <a ng-if="constants.externalLinks.conflictsofInterestPolicy" ng-href="{{constants.externalLinks.conflictsofInterestPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_d}}</a> <a ng-if="constants.externalLinks.clientCategorisation" ng-href="{{constants.externalLinks.clientCategorisation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_e}}</a> <a ng-if="constants.externalLinks.investorCompensation" ng-href="{{constants.externalLinks.investorCompensation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_g}}</a> <a ng-if="constants.externalLinks.keyInformation" ng-href="{{constants.externalLinks.keyInformation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_i}}</a> <span ng-if="constants.signupTermsExtended">{{::translation.over_18_year_part3}}&nbsp;</span> <a ng-if="constants.externalLinks.accountTerms && translation.over_18_year_part4" ng-href="{{constants.externalLinks.accountTerms + \'?lang=\' + lang}}" target="_blank">{{::translation.over_18_year_part4}}&nbsp;</a> <span ng-if="!constants.externalLinks.accountTerms && translation.over_18_year_part4">{{::translation.over_18_year_part4}}&nbsp;</span> <span ng-if="translation.over_18_year_part5">{{::translation.over_18_year_part5}}</span></div></div><div class="p-0" ng-if="constants.signupEnableCheckKYC"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0 layout-row customer-policy"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info layout-column" ng-class="{\'error-checkbox\': (form.kyc.$invalid && !form.kyc.$pristine) || (form.$submitted && form.kyc.$invalid) }" name="kyc" ng-model="signupForm.acceptKyc" ng-required="true">{{::translation.readAndAgree}}</ion-checkbox><span class="layout-column font-12 mt-10 pl-0 item border-0"><a href="{{constants.externalLinks.kycPolicy}}" target="_blank">{{::translation.kyc}}</a></span></div></div><div class="p-0" ng-if="constants.termsNonLeverage"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" name="termsNonLeverage" ng-model="signupForm.termsNonLeverage" ng-required="!signupForm.terms">{{::translation.termsNonLeverage}}</ion-checkbox></div></div><div class="p-0" ng-if="isAcceptPromotions"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" name="acceptPromotions" ng-model="signupForm.acceptPromotions">{{::translation.acceptPromotions}}</ion-checkbox></div></div><div class="content"><div class="sub-details text-center padding add-line font-11" on-tap="navigate(\'welcome\')">{{::translation.signupWith}}</div><div class="social"><button class="button button-social font-14" on-tap="signinWithGoogle(form)" type="button" ng-if="socialAuthService.isProviderReady(\'google\')"><i class="button-google"></i> Google</button> <button class="button button-social font-14" on-tap="signinWithFacebook(form)" type="button" ng-if="socialAuthService.isProviderReady(\'facebook\')"><i class="button-facebook"></i> Facebook</button></div><div class="sub-info text-center padding font-12">{{::translation.login_bottom_text}}</div></div>'}}]),app.directive("smsVerification",["$state","$ionicHistory","$ionicLoading","$ionicTabsDelegate","$ionicModal","LocaleService","Storage","$timeout","UserService","Utils","Validator","API","ErrorService","constants","LocalStorage",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g){return{restrict:"E",link:function(e,a){function r(e,t){if(0===e.status)throw new p({source:"AppController",type:m.error.type.VALIDATION,severity:"warning",code:e.code||"general_error",data:{request:t,response:e}});return e}var v=3e5;if(i.wait().then(function(t){e.translation=t}),e.validator=d.getPattern,e.user=l.get(),!(!s.get("smsVerification")||s.get("smsVerification")&&e.user.smsVerified)){t&&t.clearHistory(),e.sms={phone:"",code:"",codeSent:!1};var f={isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1};e.modal=angular.copy(f);var h=g.get("smsVerification");h&&function(e){return Date.now()-e.expire<=v}(JSON.parse(h))?e.sms=JSON.parse(h).data:e.sms.phone=e.user.phone,o.fromTemplateUrl("templates/directives/popup-sms.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){e.modal=t,e.modal.show()}),e.close=function(){e.modal.hide()},e.sendPhone=function(t){if(c.formRevalidate(t),t.$valid){e.sms.code="",e.sms.codeSent=!1;var a={phone:e.sms.phone};return n.show(),u.smsVerificationPhone(a).then(r).then(function(t){n.hide(),e.sms.codeSent=!0,g.set("smsVerification",JSON.stringify({data:e.sms,expire:Date.now()+v}))}).catch(function(t){n.hide(),e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textTitle=t&&i.translation.messages[t.code]||i.translation.messages.general_error,e.modal.textContent=i.translation.messages.smsPhoneFailed,e.modal.actionText=i.translation.try_again,e.modal.state=!0})}},e.sendCode=function(t){if(c.formRevalidate(t),t.$valid){var a={phone:e.sms.phone,code:e.sms.code};return n.show(),u.smsVerificationCode(a).then(r).then(function(t){n.hide(),e.user.smsVerified=!0,g.remove("smsVerification"),e.modal.hide()}).catch(function(t){n.hide(),e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textTitle=t&&i.translation.messages[t.code]||i.translation.messages.general_error,e.modal.textContent=i.translation.messages.smsVerificationFailed,e.modal.actionText=i.translation.try_again,e.modal.state=!0})}},a.on("$destroy",function(){t&&t.clearHistory(),e.modal&&e.modal.remove(),e.modal=null,e.sms=null})}}}}]),app.directive("tickpChart",["$timeout","$ionicLoading","chartThemes","ServerTimeService",function(e,t,n,a){return{restrict:"E",scope:{asset:"<",chart:"<"},replace:!0,link:function(o,i){function s(e){u=tickp(i[0],{theme:n.light,moment:moment,hammer:Hammer}),set_textRenderContext(u.ctx),u.initDataGraph([],function(e,t){alert(t)},[]),u.setSize(i[0].clientWidth,i[0].clientHeight),e.forEach(function(e){u.addCandleWithoutPlot(e[0],e[1],e[2],e[3],e[4])}),u.showVolumeChart(!1),u.setCandleBorder("#999999",0),u&&u.setDigits(o.asset.digits),u.changemode(1),u.setTimeScale(0),u.cp.type=v[o.chart.type.type],u.horizontallines=[],u.verticallines=[],u.setCrossHairVisibility(!1),d(),p=i.find("canvas")[1],m=!0}function r(){var e=u.current.ohlc[u.current.ohlc.length-1];return[u.current.ts[u.current.ts.length-1]].concat(e)}function l(){var e=r(),t=[o.asset.ask,o.asset.bid],n=t[1]>e[2]?t[1]:e[2],a=t[1]<e[3]?t[1]:e[3];u.updateRecord(e[0]+","+e[1]+","+n+","+a+","+t[1]),d()}function c(){var e=r(),t=a.time;0==t%(60*parseInt(o.chart.range,10)*1e3)&&(u.addNewRecord(t+","+e[4]+","+e[4]+","+e[4]+","+e[4]),d())}function d(){u.preparePlot(),u.plot()}var u,p,m,g=[],v={line:3,ohlc:2,candlestick:1},f=o.$watch("chart.ready",function(n,a){n!==a&&n&&(u=null,i.children().remove(),t.show({noBackdrop:!0}),e(function(){s(o.chart.data),t.hide()},350))}),h=o.$watch("asset.lastUpdateTime",function(e,t){e&&e!==t&&m&&u&&l()}),b=o.$watch(function(){return a.time},function(e,t){e!==t&&u&&u&&c()}),y=o.$watch("chart.type",function(e,t){e!==t&&e&&u&&(u.cp.type=v[e.type],d())}),w=o.$watch("chart.range",function(e,t){e!==t&&e&&u&&d()});i.on("$destroy",function(){f(),h(),b(),y(),w(),g.length>0&&g.forEach(function(e){ionic.EventController.offGesture(e.ref,e.gesture,e.handler)}),log("chart destroy")})},template:'<div style="position: relative" class="chart" id="chart"></div>'}}]);var module=angular.module("appsflyer",[]);module.provider("appsflyer",function(){this.$get=["LocalStorage",function(e){var t,n=this.devKey,a=this.appId,o=this.options;return{init:function(){function i(t){var n=e.get("appsflyer");if(log("AppsFlyer SDK init successful"),!n||"done"!==n)return e.set("appsflyer","object"==typeof t?JSON.stringify(t||{}):t),t}function s(){log("Failed to init AppsFlyer SDK")}ionic.Platform.isIOS()&&(o.appId=a),o.devKey=n;try{t=window.plugins.appsFlyer,t.initSdk(o,i,s)}catch(e){log("AppsFlyer plugin is not found in window.plugins")}},setAppUserId:function(e){try{t.setAppUserId(e)}catch(e){log("AppsFlyer plugin is not found in window.plugins")}},trackEvent:function(e,n){try{t.trackEvent(e,n)}catch(e){log("AppsFlyer plugin is not found in window.plugins")}}}}]}),services.factory("API",["$socket","$q","$timeout","$http","md5","config","constants","ErrorService",function(e,t,n,a,o,i,s,r){function l(e,a){return function(a){function o(){throw h.off(e),console.log("canceling request!",angular.copy(p)),delete v[u],m.reject("cancelRequest"),new r({source:"API",type:s.error.type.VALIDATION,severity:"warning",code:"cancelRequest",data:{request:angular.copy(p)}})}function l(t){h.off(e),delete v[u],"string"==typeof t&&(t=angular.fromJson(t)),d&&n.cancel(d),d=null,m.resolve(t)}var d,u=c(e,a),p=angular.extend({},a||{},{reqId:u}),m=t.defer();return v[u]?t.reject("[createEmitMethod] Request exists"):(h.emit(e,p||{}),v[u]=m.promise,h.on(e,l),d=n(o,i.requestTimeout),m.promise)}}function c(e,t){return o.createHash(e+JSON.stringify(t))}function d(){var e=t.defer();return log("socket is connecting..."),h.getInstance().connected?(log("socket connected!"),e.resolve()):(h.connect(),h.on("connect",function(){return console.log("socket connected!"),e.resolve()}),e.promise)}function u(){Object.keys(h.subscribers()).forEach(function(e){f.test(e)||h.removeAllListeners(e)})}function p(){console.log("socket is disconnecting..."),h.disconnect()}function m(e,n){var o={method:"GET",url:i.loginUrl,params:{Login:e,Password:n,Source:s.system.loginSources[0].id},timeout:5e3};return a(o).then(function(e){if("1"!=e.data.Code)throw new r({source:"API",type:s.error.type.VALIDATION,code:"authFailed",severity:"warning",data:{request:o.params,response:e.data}});return e.data}).catch(function(e){if(e&&"object"==typeof e&&"-1"==e.status)throw new r({source:"API",type:s.error.type.NETWORK,code:"authTimeout",data:{request:o.params}});return t.reject(e)})}function g(e){var t={"Content-Type":"application/json"};return function(n,o){return o&&o.token&&(t.token=o.token),console.log("api base url:::",b),a({method:"GET",url:b+"/"+e,headers:t,params:n})}}var v={},f=/\b(connect|disconnect|serverTime|loginToken|error|refreshClient|refreshSite)/,h=new e(i.socket.serverAddress,i.socket),b=i.socket.serverAddress.replace("wss","https")+"/http-api";return h.on("disconnect",function(){console.log("socket disconnected!!!"),v={},u()}),{setup:function(){h=new e(i.socket.serverAddress,i.socket)},getSocket:function(){return h},connect:d,disconnect:p,login:l("login"),loginToken:l("loginToken"),loginDetails:l("loginDetails"),loginDetailsMT4:l("loginDetailsMT4Login"),loginTokenDetails:l("loginTokenDetails"),loginTokenDetailsMT4:l("loginTokenDetailsMT4Login"),quotesHistoryByTimeFrame:l("QuotesHistoryByTimeFrame"),mt4AccountSetPassword:l("MT4AccountSetPassword"),mt4LoginToken:l("MT4LoginToken"),mt4Login:l("MT4Login"),mt4Logout:l("MT4Logout"),mt4GetClientSymbols:l("MT4GetClientSymbols"),mt4GetAllSymbols:l("MT4GetAllSymbols"),MT4GetSymbolCategories:l("MT4GetSymbolCategories"),mt4GetSymbolsSnapshot:l("MT4GetSymbolsSnapshot"),mt4GetOpenPositions:l("MT4GetOpenPositions"),mt4GetClosedPositions:l("MT4GetClosedPositions"),mt4GetChart:l("MT4GetChart"),mt4OpenPosition:l("MT4OpenPosition"),mt4ClosePosition:l("MT4ClosePosition"),mt4UpdatePosition:l("MT4UpdatePosition"),mt4DeletePosition:l("MT4DeletePosition"),mt4SwitchAccount:l("MT4AccountLogin"),getCustomerDetails:l("customerDetails"),logout:l("logout"),quotesSubscribe:l("quotesSubscribe"),quotesUnsubscribe:l("quotesUnsubscribe"),registration:l("registration"),personalDetails:l("updateCustomerDetailsRegistrationState"),updatePersonalDetails:l("updateCustomerDetails"),questionnaire:l("questionnaire"),mt4CreateAccount:l("MT4AccountCreate"),forgotPassword:l("forgotPassword"),changePassword:l("changePassword"),updateCustomer:l("updateCustomer"),transactionHistory:l("transactions"),getCountries:l("countries"),getCurrencies:l("currencies"),creditCardDeposit:l("creditCardDeposit"),geo:l("ipInfo"),depositValue:l("depositValue"),demoDepositValues:l("demoDepositValues"),documents:l("documents"),document:l("document"),documentUpload:l("documentUpload"),documentDelete:l("documentDelete"),documentsGet:l("documentsGet"),documentSet:l("documentSet"),getTickets:l("tickets"),closeTicket:l("ticketClose"),createTicket:l("ticket"),transfer:l("transfer"),timezone:l("timezone"),promocode:l("promocode"),smsVerification:l("smsVerification"),smsVerificationPhone:l("smsVerificationPhone"),smsVerificationCode:l("smsVerificationCode"),location:l("location"),brandConfiguration:l("brandConfiguration"),wiretransfer:l("wiretransfer"),platform:l("platform"),bitcoinOrangepayDeposit:l("bitcoinOrangepayDeposit"),hostedPageDeposit:l("hostedPageDeposit"),qrcodeDeposit:l("qrcodeDeposit"),pendingDeposit:l("pendingDeposit"),initializeTransfer:l("initializeTransfer"),customerWithdrawalMethods:function(e,t){switch(t){case"Get":return g(e);case"Post":case"Put":case"Delete":throw new Error("not implemented!")}}("withdrawalCustomerAccountMethods","Get"),getWithdrawalMethods:l("withdrawalMethods"),getLocalBanks:l("localBanks"),getWithdrawalReasons:l("withdrawalReasons"),withdrawal:l("withdrawalWireTransfer"),withdrawalLocalWireTransfer:l("withdrawalLocalWireTransfer"),withdrawalCreditCard:l("withdrawalCreditCard"),withdrawalSkrill:l("withdrawalSkrill"),withdrawalNeteller:l("withdrawalNeteller"),withdrawalFasaPay:l("withdrawalFasaPay"),withdrawalUnionPay:l("withdrawalUnionPay"),withdrawalCrypto:l("withdrawalCrypto"),withdrawalOther:l("withdrawalOther"),withdrawalCancel:l("withdrawalCancel"),withdrawalHistory:l("withdrawalRequests"),getPaymentMethods:l("depositMethods"),getFriendInvites:l("friendInvites"),getFriendInviteId:l("friendInviteId"),getOTP:l("getOTP"),setOTP:l("setOTP"),questions:l("questions"),calcScoring:l("customerScore"),acceptRisk:l("riskApproval"),complianceStatus:l("complianceStatus"),acceptTnc:l("acceptTerms"),initializeVerification:l("initializeVerification"),registrationThirdParty:l("registrationThirdParty"),loginThirdParty:l("loginDetailsThirdParty"),loginWebTrader:l("loginDetailsWebTrader"),loginTokenWebTrader:l("loginTokenMT4Login"),subscribe:function(e,t){h.on(e,t)},unsubscribe:function(e){h.off(e)},onConnect:function(e){console.log("onconnect"),h.on("connect",e)},onDisconnect:function(e){h.on("disconnect",e)},onReconnect:function(e){h.on("reconnect",e)},onReconnectAttempt:function(e){h.on("reconnect_attempt",function(t){e(t)})},getToken:m}}]),services.service("AccountService",["UserService","$state","constants","API","Utils","LoginService","ErrorService",function(e,t,n,a,o,i,s){function r(e){if(1!==e.status)throw new s({source:"AccountService",type:n.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}return this.switchAccount=function(t,n){var s={login:t,live:o.fromBoolean(n)},l=e.get();return a.mt4SwitchAccount(s).then(r).then(function(){return l.switchAccount(t,n),l=e.get(),i.mt4ClearServices().then(i.mt4InitServices)})},this.createAccount=function(t,i,s,l){var c=e.get(),d={live:o.fromBoolean(t),currency:i||c.currency,leverage:s||c.leverage};return n.customerTypeForTA&&(d.customerType=c.customerType||""),l&&(d.tradingPlatform=l),a.mt4CreateAccount(d).then(r).then(function(e){return c.addTradingAccount(e.mt4Account),t&&(c.registrationState=n.userState.questionnaire),e})},this.checkTradingAccounts=function(){var t=e.get();if(!(t.registrationState<=n.userState.personal||t.riskAcceptance)){if(n.scoringRules){var a=_.find(n.scoringRules,{classification:t.classification});if(a&&a.hasOwnProperty("acceptPopup")&&!0===a.acceptPopup&&"Negative"===t.classification)return console.log("risk acceptance"),"signupQuestionnaire"}return 0!==t.tradingAccounts.length||t.liveAccountExists?0===t.tradingAccounts.length&&t.liveAccountExists?"accountFrozen":t.activeTradingAccount?void 0:"root.app.manageAccounts":"createFirstAccount"}},this}]),services.service("AssetService",["$q","config","constants","ErrorService","API","AssetCollection","AssetModel","UserService","FavoritesService","Validator","Utils","CurrencyConvertService","CustomerEventsService",function(e,t,n,a,o,i,s,r,l,c,d,u,p){function m(e){if(1!==e[0].status||1!==e[1].status)throw new a({source:"AssetService",type:n.error.type.SYSTEM,severity:"critical",code:"getSymbolsFailed",data:{failedRequest:1!==e[0].status?"mt4GetAllSymbols":1!==e[1].status&&"mt4GetClientSymbols"}});return e}function g(){function t(e){var t=[],n=e[0].Symbols,a=e[1].Symbols;return n.forEach(function(e){var n=_.find(a,{id:e.id});n?(e.IsTradeable=n.IsTradeable,e.Markup=n.Markup,e.Percentage=n.Percentage,e.MaxLot=n.MaxLot,e.MinLot=n.MinLot,e.StepLot=n.StepLot,e.SwapsLong=n.SwapsLong,e.SwapsShort=n.SwapsShort,e.SwapsCode=null!==n.SwapsCode&&n.SwapsCode>=0?n.SwapsCode:3,e.StopLevels=n.hasOwnProperty("StopLevels")?n.StopLevels:e.StopLevels,e.IsShow=!n.hasOwnProperty("IsShow")||d.toBoolean(n.IsShow),e.isClient=!0):e.IsShow=!1,t.push(e)}),t}return e.all([o.mt4GetAllSymbols(),o.mt4GetClientSymbols()]).then(m).then(t)}function v(){function e(e){if(1!==e.status)throw new a({source:"AssetService",type:n.error.type.SYSTEM,severity:"critical",code:"getAllSymbolsFailed"});return e.Symbols}return o.mt4GetAllSymbols().then(e)}function f(){function e(e){if(1!==e.status)throw new a({source:"AssetService",type:n.error.type.SYSTEM,severity:"critical",code:"GetSymbolCategoriesFailed"});return e.Categories}return o.MT4GetSymbolCategories().then(function(t){T.assetCategories=e(t)}).catch(function(){T.assetCategories=n.assetsTypes})}function h(e,t){var n=l.get(t.id)&&!0;switch(e){case"esma":return t.s.match(/\!/)?(t.IsShow=1,t.isEsma=!0):t.IsShow=0,new s(t,!1,n);default:return t.s.match(/\!/)&&(t.IsShow=0,t.isEsma=!0),new s(t,!1,n)}}function b(){var e=r.get();return e&&e.activeTradingAccount&&e.activeTradingAccount.isEsma&&"esma"}function y(e){var t=b();e.forEach(function(e){var n=h(t,e);T.collection.add(n)})}function w(){var e=T.collection.find({isShow:!0,isClient:!0});T.clientCollection.fill(e);var t=T.clientCollection.find({quickAccess:!0});T.clientQuickAccessCollection.fill(t)}function k(){var e=T.collection.find({isShow:!0});T.clientCollection.fill(e)}function C(e){e.reduce(function(e,t){var n=T.collection.get({id:t[0]});n&&n.update(t)},e[0]),e=null}function S(){var e=u,t=r.get();T.collection.getAll().forEach(function(n){var a=[],o=[];try{a=e.find(T,n.baseCurrency,t.currency,n.ending,n.profitMode),o=0===n.profitMode?e.find(T,n.currency,t.currency,n.ending,n.profitMode):a,n.setConvAssets(a),n.setConvAssetsMargin(o)}catch(e){console.warn("NO CONV ASSETS FOR:",n.s,"TO USER CURRENCY:",t.currency)}})}var T=this;return T.collection=null,T.clientCollection=null,T.clientQuickAccessCollection=null,T.assetCategories=null,this.init=function(){var t=r.get();return T.collection=new i,T.clientCollection=new i,T.clientQuickAccessCollection=new i,o.unsubscribe("subscribe"),log("assetService init"),t.loggedIn&&t.activeTradingAccount?e.all([g().then(y).then(w).then(S).then(T.subscribe),f()]):v().then(y).then(k).then(S).then(T.subscribe)},this.sortByFavorites=function(e){var t=l.getAll(),n=T.clientCollection.find(e),a=[];return t.forEach(function(e){a.push(_.find(n,{id:e}))}),a},this.subscribe=function(){log("Starting to listen to socket updates"),o.subscribe("quotes",C);var e=r.get().activeTradingAccount;o.quotesSubscribe({real:e?d.fromBoolean(e.live):0}),o.unsubscribe("MT4MarginCallAdd"),o.subscribe("MT4MarginCallAdd",function(){var e=r.get();p.trackEvent(p.events.MarginCall,{marginLevel:e.activeTradingAccount.marginLevel})})},this.getAssetByName=function(e){return T.clientCollection.get({outputName:e.toUpperCase()})},this.clear=function(){log("clear asset service"),o.quotesUnsubscribe(),o.unsubscribe("quotes",C),T.collection&&T.collection.clear()},this}]),services.service("ClosedTradeService",["$q","moment","API","constants","ClosedTradeCollection","ClosedTradeModel","ServerTimeService","UserService",function(e,t,n,a,o,i,s,r){function l(e){function n(e){return t.utc(s.time).startOf(e)}var a,o=e.split(" ");return o[1].toLowerCase().match("day")&&(a=function(e){return n("day").subtract(e,"day")}(parseInt(o[0],10))),o[1].toLowerCase().match("week")&&(a=function(e){return n("week").subtract(e,"week")}(parseInt(o[0],10))),o[1].toLowerCase().match("month")&&(a=function(e){return n("month").subtract(e,"month")}(parseInt(o[0],10))),a.unix()}function c(t){return 1===t.status&&t.Trades?t:e.reject(t.code)}function d(e){e.Trades.forEach(function(e){m.collection.add(new i(e))})}function u(e){var t,n;switch(e){case"day":t=l("0 days");break;case"threedays":t=l("2 days");break;case"week":t=l("0 week");break;case"month":t=l("0 month");break;case"threemonths":t=l("2 month");break;case"all":t=1}return n=parseInt(s.time/1e3,10),{Start:t,End:n}}function p(e){return m.collection&&m.collection.clear(),n.mt4GetClosedPositions(u(e))}var m=this;return m.collection=null,this.init=function(){if(m.collection=new o,!r.get().isLoggedInMT4)return void log("not starting closedtrades service")},this.getHistory=function(e){return p(e).then(c).then(d).catch(function(e){log("no closed trades",e)})},this.clear=function(){log("clear closedtrade service"),
m.collection&&m.collection.clear()},this}]),services.service("CountryService",["$q","$http","config","constants","ErrorService","Utils","Storage","BaseCollection",function(e,t,n,a,o,i,s,r){var l=new r;return this.init=function(){var e=s.get("countries").map(function(e){return e.customFields||(e.customFields=[]),e});l.fill(e),log("Initializing country service")},this.get=function(){return l.getAll()},this.getCitizenships=function(){const e=l.findBy({},function(e){return e.citizenship.length>0});return _.chain(e).uniqBy("citizenship").orderBy("citizenship").value()},this.getAllowedCountries=function(){return l.find({allowRegistration:1})},this.getCountryStates=function(e){return e.states.length>0?_.orderBy(e.states,["stateName"]):[]},this.getAllowedUserCountries=function(e){return l.getAll().map(function(t){return t.code===e&&(t.allowRegistration=1),t}).filter(function(e){return 1===e.allowRegistration})},this.countries=l,this}]),services.factory("CurrencyConvertService",["constants","UserService",function(e,t){function n(n,a,i,s,r,l){var d=[];if(t.get().loggedIn&&!l)return o(n,a,i,s,r);if(a===i)return d;var u={s:a+e.currencySeparator+i+s},p=_.assign({},u,{s:i+e.currencySeparator+a+s}),m=n.collection.get(u),g=!0;if(m||(m=n.collection.get(p),g=!1),m)return d.push({asset:m,reverse:g}),d;if("USD"!==a){if(m=n.collection.get({s:"USD"+e.currencySeparator+a+s}),g=!1,m||(m=n.collection.get({s:a+e.currencySeparator+"USD"+s}),g=!0),!m)throw console.warn("NOT FOUND FROM_ASSET:",a,i,s,r),new Error("FROM_ASSET IS NOT FOUND");d.push({asset:m,reverse:g,isUSD:c.test(m.s)})}if("USD"!==i){var v=n.collection.get({s:"USD"+e.currencySeparator+i+s}),f=!0;v||(v=n.collection.get({s:i+e.currencySeparator+"USD"+s}),f=!1),v||console.warn("NOT FOUND TO_ASSET:",a,i,s,r),d.push({asset:v,reverse:f,isUSD:c.test(v.s)})}return d}function a(n,a,i,s,r,l,c){if(t.get().loggedIn&&!c)return o(a,i,s,r,l);var d=s,u=r.match(/^buy/)?"Bid":"Ask";if("USD"!==a){var p=n.collection.get({s:"USD"+e.currencySeparator+a}),m=!1;p||(p=n.collection.get({s:a+e.currencySeparator+"USD"}),m=!0),d=m?s*p["markup"+u]():s/p["markup"+u]()}if("USD"!==i){var g=n.collection.get({s:"USD"+e.currencySeparator+i}),v=!0;g||(g=n.collection.get({s:i+e.currencySeparator+"USD"}),v=!1),d=v?d*g["markup"+u]():d/g["markup"+u]()}return d}function o(t,n,a,s,r,l){var c=[],u=0===r,p=e.defaultCurrencyConvertCategory||"FOREX";if(d.activeTradingAccount&&void 0!==d.activeTradingAccount.isCryptoCurrency&&(p=d.activeTradingAccount.isCryptoCurrency?"CRYPTO":"FOREX"),n===a)return c;var m={s:n+e.currencySeparator+a+s,isClient:!0},g=u?_.assign({},m,{category:l||p}):_.assign({},m,{}),v=_.assign({},g,{s:a+e.currencySeparator+n+s}),f=t.collection.get(g),h=!0;return f||(f=t.collection.get(v),h=!1),f?(c.push({asset:f,reverse:h}),c):l?i(t,n,a,s,r):o(t,n,a,s,r,"FOREX")}function i(t,a,o,i,s){var r=[],l=0===s;if("USD"!==a){var c={s:a+e.currencySeparator+"USD"+i,isClient:!0},d=l?_.assign({},c,{category:"FOREX"}):_.assign({},c,{}),u=_.assign({},d,{s:"USD"+e.currencySeparator+a+i}),p=t.collection.get(d),m=!0;if(p||(p=t.collection.get(u),m=!1),!p)return n(t,a,o,i,s,!0);r.push({asset:p,reverse:m,isUSD:!0})}if("USD"!==o){var g={s:"USD"+e.currencySeparator+o+i,isClient:!0},v=l?_.assign({},g,{category:"FOREX"}):_.assign({},g,{}),f=_.assign({},v,{s:o+e.currencySeparator+"USD"+i}),h=t.collection.get(v),b=!0;if(h||(h=t.collection.get(f),b=!1),!h)return n(t,a,o,i,s,!0);r.push({asset:h,reverse:b,isUSD:!0})}return r}function s(e,t,n,a){if(a){if("sell"===t||"sell_limit"===t||"sell_stop"===t)return e.markupAsk();if("buy"===t||"buy_limit"===t||"buy_stop"===t)return e.markupBid()}return 0!==n?e.markupBid():"sell"===t||"sell_limit"===t||"sell_stop"===t?e.markupAsk():"buy"===t||"buy_limit"===t||"buy_stop"===t?e.markupBid():void 0}function r(e,t,n,a){return e.reduce(function(e,t){var o=s(t.asset,n,a,t.isUSD);return l(e,t.reverse,o)},t)}function l(e,t,n){return t?e*n:e/n}var c=new RegExp(/USD/),d=t.get();return{find:n,currencyConvert:a,doConvert:r}}]),services.service("CustomerEventsService",["$q","$window",function(e,t){var n,a=this;return this.events={InsufficientFunds:"insufficientFunds",MarginCall:"marginCall",TradeOpen:"tradeOpen",TradeClose:"tradeClose",TradeUpdate:"tradeUpdate",TradeCancel:"tradeCancel",BalanceUpdate:"balanceUpdate",MarginUtilization:"marginUtilization"},this.trackEvent=function(e,n){t.parent&&t.parent.postMessage({source:"nfp",event:"cfd:"+e,payload:n},"*")},this.startSessionPing=function(e){n=setInterval(function(){a.trackEvent("online",{customer:e.getCustomer()})},1e4)},this.stopSessionPing=function(){n&&clearInterval(n)},this}]),services.service("DocumentService",["UserService","$state","constants","API","Utils","ErrorService","DocumentModel",function(e,t,n,a,o,i,s){function r(e){if(1!==e.status)throw new i({source:"DocumentService",type:n.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}var l=this;return l.documents=[],l.documentsOther=[],this.deleteDocument=function(e){return a.documentDelete(e).then(r).then(function(){return _.remove(l.documentsOther,{id:e.id})})},this.initDocuments=function(){var e=[];return n.documentTypes.forEach(function(t){var n={id:null,type:t.id,status:"new",url:"",category:t.category,baseCategory:t.baseCategory};e.push(new s(n))}),a.documents().then(r).then(function(e){return l.documentsOther=e.documents.filter(function(e){return"Other"===e.type}).map(function(e){return e.status=n.documentToStatuses[e.status],e}),e}).then(function(e){return _.uniqBy(e.documents,function(e){return e.type})}).then(function(t){return e.map(function(e){var a=_.find(t,{type:n.documentFromTypes[e.type]});a&&(e.status=n.documentToStatuses[a.status])}),l.documents=e,l.documents})},this}]),services.factory("$exceptionHandler",["$log","$window","constants","ErrorService",function(e,t,n,a){function o(t){switch(t.severity){case"info":return e.info("Handler",t);case"warning":return r&&r.scope(s(t)).warning(s(t).message),e.warn("Handler",t);case"critical":return r&&r.scope(s(t)).error(s(t).message),e.error("Handler",t);default:return e.debug("Handler",t)}}function i(t){return r&&r.error(t),e.error("Application error",t)}function s(e){return{source:e.source,type:n.error.typeById[e.type],severity:e.severity,message:e.message||e.code,data:e.data}}var r;return t.hasOwnProperty("Rollbar")&&(r=t.Rollbar),function(e){return"object"==typeof e&&e instanceof a?o(e):i(e)}}]),services.service("ErrorService",["constants",function(e){function t(e,t){this.source=e.source,this.type=e.type,this.code=e.code||0,this.severity=e.severity||"critical",this.message=e.message,this.data=e.data}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}]),services.service("ExternalScriptLoader",["$q",function(e){function t(){function t(e){return!!Array.from(document.getElementsByTagName("script")).find(function(t){return t.getAttribute("src")===e})}function n(e){const t=Array.from(document.getElementsByTagName("script")),n=t.find(function(t){return t.getAttribute("src")===e});n&&n.parentNode.removeChild(n)}this.load=function(a){return t(a)?e.resolve():e(function(e,t){const o=document.createElement("script");o.src=a,o.type="text/javascript",o.async=!1,o.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(o),o.onload=function(){e()},o.onerror=function(){n(a),t()}})}}return t}]),services.service("FavoritesService",["constants","LocalStorage","UserService",function(e,t,n){function a(){try{l=JSON.parse(t.get(s))||[]}catch(e){t.remove(s),l=[]}}function o(e){t.set(s,JSON.stringify(e||l))}function i(){var e=n.get();return s=e&&e.activeTradingAccount?[r,e.login,e.activeTradingAccount.id].join("|"):[r,e.login].join("|")}var s,r="favorites",l=[];return this.init=function(){i(),a()},this.getAll=function(){return a(),l},this.get=function(e){return _.find(l,function(t){return t===e})},this.add=function(e){a(),l.push(e),o()},this.remove=function(e){_.remove(l,function(t){return t===e}),o()},this.length=function(){return l.length},this.clearAll=function(){l.length=0,t.remove(s)},this.clear=function(){l.length=0,s=r},this.sync=o,this}]),services.service("FirebaseService",["$q","$http","config","constants","md5","ionicToast",function(e,t,n,a,o,i){var s=this,r=n.socket.serverAddress.replace(/^wss:/,"https:");if(s.isEnabled=n.firebase&&Object.keys(n.firebase).length>0,!s.isEnabled)return void console.warn("Firebase services are disabled");this.getPermission=function(e,t,n){return s.messaging.getToken().then(function(a){return s.fcmToken=a,s.messageSubscribe(e),s.updateToken(a,t,e,n)}).catch(function(e){console.warn("Unable to get permission to notify.",e.toString())})},this.unregister=function(){if(s.fcmToken)return s.messaging.deleteToken(s.fcmToken)},this.logEvent=function(e,t){s.isEnabled&&s.analytics.logEvent(e,t)},this.setUserId=function(e){if(s.isEnabled){var t=o.createHash(e).toString();s.analytics.setUserId(t)}},this.setScreen=function(e){s.isEnabled&&s.analytics.setCurrentScreen(e)},this.registerSW=function(){return navigator.serviceWorker.register("/mobile/nfp-messaging-sw.js",{scope:"/mobile/firebase-cloud-messaging-push-scope"}).then(function(e){console.warn("Registering custom service worker"),s.messaging.useServiceWorker(e)}).catch(function(e){console.warn("Firebase service worker registration failed",e.toString())})},this.messageSubscribe=function(e){s.messaging.onMessage(function(e){i.show(e.data.body,"top",!1,5e3,"")})},this.updateToken=function(e,n,a,o){var i={login:a.login,deviceId:o.toString(),token:n,fcmToken:e};return t.post(r+"/messaging/update",i)};try{firebase.initializeApp(n.firebase),s.messaging=firebase.messaging(),s.analytics=firebase.analytics(),s.registerSW()}catch(e){console.warn("Failed to initialize firebase services",e.toString()),s.isEnabled=!1}return this}]),services.factory("Init",["$state","$ionicLoading","$ionicHistory","$rootScope","config","constants","ErrorService","API","LoginService","LocaleService","LocalStorage","Storage","UserService","AccountService","ProChartService","CountryService","$q","SocialAuthService","Utils","$cookies","moment","Onesignal",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b,y,w,k){function C(){return log("handle connect"),r.platform({platform:i.platformById.webMobile}),h.init(),k.init(),T().then(function(){var e=b.getURLParameterByName("asset");e&&d.save("link",JSON.stringify({name:"asset",params:e}))}).then(v.init).then(l.loginToken).then(l.initServices).then(function(){$.isInitialized=!0,t.hide()}).then(A).then(function(){k.setTag("platform",i.platformById.webMobile)})}function S(){log("handle disconnect"),$.isInitialized=!1,n.clearHistory(),a.loadingMessage=c.translation.connection||c.messages.connection,t.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:a}),l.clearServices().then(function(){throw new s({source:"API",type:i.error.type.NETWORK,severity:"warning",code:"socketDisconnected"})})}function T(){return u.load("brandConfiguration",!0).then(function(){return u.load(["countries","currencies","geo","withdrawalReasons"])})}function A(){var e=b.getUrlRemarketing(),t=y.get("remarketing");if(e&&!t){var n=w().add(30,"day").calendar();y.put("remarketing",e,{path:"/",expires:n})}}var $=this;return $.isInitialized=!1,$.returnStateAfterDisconnect="root.app.assets",this.run=function(){return console.log("Init run()"),$.isInitialized?(console.log("Already initialized."),f.resolve()):c.load().then(r.connect).then(C)},this.setInitialzied=function(e){$.isInitialized=e},this.updateInitializedStatus=function(){$.isInitialized=p.get().loggedIn&&r.getSocket().getInstance().connected},r.onReconnect(function(){log("onReconnect handler."),c.load().then(T).then(v.init).then(l.loginToken).then(l.initServices).then(function(){return $.isInitialized=!0,t.hide(),a.$emit("reconnect"),e.go("root.app.assets")}).catch(function(n){return log("onReconnect error: ",n),$.isInitialized=!1,t.hide(),e.go("welcome",{cache:!1},{reload:!0})})}),r.onDisconnect(S),this}]),services.factory("InvestCalcService",["constants","AssetService","CurrencyConvertService",function(e,t,n){function a(e,t){return e*(1/Math.pow(10,t))}function o(e,t){return e*Math.pow(10,t)}function i(e,t){return"sell"===e||"sell_limit"===e||"sell_stop"===e?t.markupBid():t.markupAsk()}function s(e,t){switch(e){case"sell":return t.markupAsk();case"buy":return t.markupBid();default:return i(e,t)}}function r(e,t){switch(e){case"sell":case"sell_limit":case"sell_stop":return t.markupBid();case"buy":case"buy_limit":case"buy_stop":return t.markupAsk()}}function l(e,t,n,o,i){var s=a(o,t.digits);switch(e){case"sell":case"sell_limit":case"sell_stop":return"stopLoss"===i?n+s:n-s;case"buy":case"buy_limit":case"buy_stop":return"stopLoss"===i?n-s:n+s}}function c(e,t,n,i){switch(t=Math.round(o(t,i)),n=Math.round(o(n,i)),e){case"sell":case"sell_limit":case"sell_stop":return a(t-n,i);case"buy":case"buy_limit":case"buy_stop":return a(n-t,i)}}function d(n,a){return a?t.collection.get({outputName:"USD"+e.currencySeparator+n}):t.collection.get({outputName:n+e.currencySeparator+"USD"})}function u(e,t,n,a){var o=a&&"buy"===a?t.markupAsk():t.markupBid(),i=n.activeTradingAccount&&n.activeTradingAccount.leverage||n.leverage,s=t.percentage/100,r=e*t.contractSize,l=1===t.marginMode&&0===t.profitMode?99:t.marginMode;if(2!==l&&t.initialMargin>0){var c=e*t.initialMargin;return 0===l||4===l?c/i:c}switch(l){case 0:return r/i*s;case 1:return r*o*s;case 2:return e*t.initialMargin*s;case 3:return r*(o*(t.tickPrice/t.tickSize))*s;case 4:return r*o/i*s;case 5:case 99:return r*s}}function p(e,t,a,o,i){var s,r=0,l=i&&a.swapsCode&&2===a.swapsCode?a.convAssets:a.convAssetsMargin;return s=void 0!==i?i:u(parseFloat(e)||1,a,o,t),r=n.doConvert(l,s,t,a.profitMode),{baseVal:r,requiredMargin:s}}function m(e,t){return 0===e.profitMode?Math.ceil(e.contractSize/t):Math.ceil(e.contractSize*e.markupBid()/t)}function g(e){var t=(e.markupAsk()-e.markupBid())*Math.pow(10,e.digits),n=(t+e.stopLevels)/10;return Math.ceil(n)}return{updatedPrice:s,currentPrice:i,getSymbolCurrency:d,fromPoints:o,getPoints:a,getOpenPrice:r,getClosePrice:l,getPairVal:c,getRequiredMargin:u,calcMargin:p,calcLeverage:m,getPipsLimit:g}}]),services.service("InvestService",["",function(){}]),services.service("LocalStorage",function(){var e=this,t=isLocalStorageAvailable()?window.localStorage:new MemoryStorage,n="panda-forex__";return this.save=function(e,a){t.setItem(n+e,a)},this.set=this.save,this.get=function(e){return t.getItem(n+e)},this.remove=function(e){t.removeItem(n+e)},this.clear=function(){Object.keys(t).forEach(function(t){t.match(new RegExp("^"+n))&&e.remove(t)})},this}),services.service("LocaleService",["$q","$http","config","constants","ErrorService","LocalStorage","messages","Utils",function(e,t,n,a,o,i,s,r){function l(e){if(u.hasOwnProperty(e)&&!u[e].hasOwnProperty("_fallback"))return{data:u[e],lang:e}}function c(e){var i=l(e);return i||t({method:"GET",url:n.localizationPath+e+".json?"+Date.now(),timeout:n.localizationLoadTimeout}).then(function(t){return t.lang=e,t}).catch(function(t){throw new o({source:"LocaleService",type:a.error.type.SYSTEM,severity:"warning",code:"translationNotFound",message:'translation "'+e+'" not found'})})}var d=this,u={},p=n.languagesPriority;return d.lang=!1,d.translation={},d.translationPromise=e.when(d.translation),d.messages=s,this.wait=function(){return e(function(e,t){return d.translationPromise.then(e).catch(t)})},this.replaceVars=function(e,t){var n=new RegExp("\\$\\{"+e+"\\}","gi");Object.keys(d.translation).forEach(function(e){"string"==typeof d.translation[e]&&(d.translation[e]=d.translation[e].replace(n,t))})},this.load=function(t){function a(t){return d.translation=t.data,d.replaceVars("brandName",n.traderName),d.lang=t.lang,i.set("language",d.lang),d.translationPromise=e.when(d.translation),t.data}function o(e){return d.translation._fallback||(u[d.lang]=d.translation),e}var m=r.getURLParameterByName("lang"),g=t||m||i.get("language")||n.defaultLanguage||p.shift();return function(t){return t.reduce(function(e,t){return e.catch(function(e){return c(t)})},e.when(c(g)))}(p).then(a).catch(function(){return log("Failed to load all translations - fallback to built-in en"),a(l("en")||{data:s,lang:"en"})}).then(o,o)},this}]),services.service("LocationService",["constants","API",function(e,t){return this.enter=function(e){if(e)return t.location({location:e})},this}]),app.service("LoginService",["$q","$timeout","$rootScope","Utils","API","constants","ErrorService","UserService","LocalStorage","ServerTimeService","AssetService","OpenTradeService","ClosedTradeService","TransactionHistoryService","PnlMarginService","FavoritesService","$injector","WithdrawHistoryService","FirebaseService","SocialAuthService","VerificationV2Service","CustomerEventsService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b,y,w,k){function C(e){if(1!==e.status)throw new s({source:"LoginService",type:i.error.type.VALIDATION,code:"tokenFailed",severity:"warning",data:{response:e}});return e}function S(e){return r.login(e.customer)}function T(e){if(1!==e.status)throw new s({source:"LoginService",type:i.error.type.VALIDATION,code:e.code||"authFailed",severity:"warning",data:{response:e}});return e}function A(e){return r.get().token=e.token,l.set("token",e.token),e}function $(e){if(1!==e.status)throw new s({source:"LoginService",type:i.error.type.VALIDATION,code:"tradeLoginFailed",severity:"warning",data:{response:e}});return e}var x=this,P=[c.init,v.init,d.init,u.init,p.init,m.init,g.init,h.init,w.init],_=[a.wait(1e3),c.clear,g.clear,u.clear,p.clear,m.clear,v.clear,d.clear,r.clear,h.clear],M=[v.init,d.init,u.init,p.init,m.init,h.init,g.init],D=[g.clear,u.clear,p.clear,m.clear,h.clear,v.clear,d.clear],L=new Fingerprint({canvas:!0}).get();return this.loginToken=function(){var t=a.getURLParameterByName("token")||l.get("token");return t&&t.length>0?(log("relogin with existing token"),function(){return i.authType&&"webtrader"===i.authType?o.loginTokenWebTrader({token:t,fingerprint:L}):o.loginTokenDetailsMT4({token:t,fingerprint:L})}().then(C).then(function(e){return A({token:t}),e}).then(S).then(function(){k.startSessionPing(r.get())}).catch(function(t){return l.remove("token"),k.stopSessionPing(),e.reject(t)})):(l.remove("token"),e.reject("noToken"))},this.mt4LoginSequence=function(){var t=r.get(),n=t.getTradeableAccount();return n?o.mt4Login({source:n.source,loginID:n.login}).then($).then(t.onMT4Login).then(function(){t.setActiveAccount(n.login,n.source)}).catch(function(t){return log("can not login to tradeable account",n,t),e.reject(i.loginStatus.failedActiveAccount)}):"2"==t.registrationPhase?e.reject(i.loginStatus.noActiveAccount):void 0},this.mt4ClearServices=function(){return a.runChain(D)},this.mt4InitServices=function(){return a.runChain(M)},this.mt4Logout=function(){function t(){return n.isLoggedInMT4&&o.mt4Logout()}var n=r.get();return e(function(e,t){e()}).then(t)},this.login=function(e,t,n){var a={login:e,password:t,fingerprint:L};return i.enable2FA&&n&&(a.otpCode=n),o.loginDetailsMT4(a).then(T).then(A).then(S)},this.loginThirdParty=function(e,t,n){var a={login:e,password:"",fingerprint:L,provider:t,tokenThirdParty:n};return o.loginThirdParty(a).then(T).then(A).then(S)},this.loginWebTrader=function(e,t,n){var a={login:e,password:t,source:n,fingerprint:L};return o.loginWebTrader(a).then(T).then(A).then(S)},this.logout=function(){return l.remove("token"),y.signOut(),x.clearServices().then(o.logout).then(function(){l.remove("activeAccount"),k.stopSessionPing()})},this.initServices=function(){return log("init services"),a.runChain(P)},this.clearServices=function(){return log("clear services"),a.runChain(_)},this}]),services.service("OpenTradeService",["$rootScope","$q","$log","config","constants","API","ErrorService","OpenTradeCollection","OpenTradeModel","AssetService","UserService","Validator","Utils","Onesignal","CustomerEventsService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g){function v(e){return 1===e.status&&e.Trades?e:t.reject(e)}function f(e){var t=[],n=a.validations.openTrade,i=u(e,n);if(i&&t.push({asset:e.OutputName,tradeId:e.OrderID,validations:i}),t.length>0)return new s({source:"OpenTradeService",severity:"warning",type:o.error.type.VALIDATION,message:"opentrade validation failed",data:t},!0)}function h(e){e.Trades.forEach(function(e){var t=c.collection.get({id:e.id});t&&!f(e)&&k.collection.add(new l(e,t))})}function b(e){return i.mt4GetOpenPositions()}function y(){log("Starting to listen to trade updates"),i.subscribe("MT4NewTrade",k.newTrade),i.subscribe("MT4CloseTrade",k.closeTrade),i.subscribe("MT4UpdateTrade",k.updateTrade),i.subscribe("MT4DeletePosition",k.deleteTrade)}function w(e){var t=d.get();return e.login===t.activeTradingAccount.login&&p.toBoolean(e.live)===t.activeTradingAccount.live}var k=this;return k.collection=new r,this.init=function(){return k.collection=new r,d.get().activeTradingAccount?b().then(v).then(h).then(y).catch(function(e){n.error(new s({source:"OpenTradeService",type:o.error.type.SYSTEM,severity:"warning",code:"noOpenTrades",data:{response:e}}))}):void log("not starting opentrades service")},this.newTrade=function(t){if(w(t)){if(k.collection.get({orderId:t.Trade.OrderID}))k.updateTrade(t);else{var n=c.collection.get({id:t.Trade.id});if(n){var a=new l(t.Trade,n);k.collection.add(a),e.$emit("pnl"),m.setTag("last_trade_symbol",a.asset.outputName),m.setTag("last_trade_openprice",a.openPrice),m.setTag("last_trade_opentime",a.openTime),m.setTag("last_trade_volume",a.lots),m.setTag("last_trade_category",a.asset.category),g.trackEvent(g.events.TradeOpen,a.getTrade())}}}},this.closeTrade=function(t){if(w(t)){var n=k.collection.get({orderId:t.Trade.OrderID});n&&(k.collection.remove(n),e.$emit("pnl"),g.trackEvent(g.events.TradeClose,n.getTrade()))}},this.updateTrade=function(t){if(w(t)){var n=k.collection.get({orderId:t.Trade.OrderID});n&&(n.update(t.Trade),e.$emit("pnl"),g.trackEvent(g.events.TradeUpdate,n.getTrade()))}},this.deleteTrade=function(t){if(w(t)){var n=k.collection.get({orderId:t.OrderID});n&&(k.collection.remove(n),e.$emit("pnl"),g.trackEvent(g.events.TradeCancel,n.getTrade()))}},this.clear=function(){log("clear OpenTradeService"),i.unsubscribe("MT4NewTrade",k.newTrade),i.unsubscribe("MT4CloseTrade",k.closeTrade),i.unsubscribe("MT4UpdateTrade",k.updateTrade),k.collection&&k.collection.clear()},this}]),services.service("PnlMarginService",["$rootScope","constants","UserService","OpenTradeService","CurrencyConvertService","AssetService","Utils","CustomerEventsService",function(e,t,n,a,o,i,s,r){function l(){var e=n.get();!e||e&&!e.activeTradingAccount||r.trackEvent(r.events.MarginUtilization,{balance:e.activeTradingAccount.balance,equity:d.equity(),credit:e.activeTradingAccount.balance,freeMargin:d.data.freeMargin,totalPnl:d.data.totalProfit,marginUtilization:d.marginUtilization(),server:e.activeTradingAccount.live?"live":"demo",tradingAccount:e.activeTradingAccount.login})}var c,d=this,u=[];return d.convAssets=[],d.data={freeMargin:0,totalProfit:0,netPl:0,equity:0,pnl:0},setInterval(l,1e4),this.init=function(){log("PnlMarginService init");var t=n.get();if(!t.activeTradingAccount)return void log("not starting PnlMarginService");d.convAssets=o.find(i,t.currency,"USD","",1),c=e.$on("pnl",function(e){e.stopPropagation(),e.preventDefault(),d.profitUnSubscribe(),d.profitSubscribe(),d.calcTotalNetPl()}),d.profitUnSubscribe(),d.profitSubscribe(),d.calcTotalNetPl(),l()},this.equity=function(){var e=n.get();if(e){var t;return t=e.activeTradingAccount.balance+d.data.netPl+e.activeTradingAccount.credit,d.data.freeMargin=t-e.activeTradingAccount.margin,t}},this.marginLevel=function(){var e=n.get();return e.loggedIn&&e.activeTradingAccount.marginLevel>0?d.equity()/e.activeTradingAccount.marginLevel*100:0},this.calcTotalNetPl=function(){if(n.get().activeTradingAccount){var e=0,t=0;return a.collection.getAll().forEach(function(n){e+=n.profit()+n.swap+n.commission+n.taxes,t+=n.profit()}),d.data.totalProfit=e,d.data.netPl=this.data.totalProfit,d.data.equity=this.equity(),d.data.pnl=t,d.data}},this.profitSubscribe=function(){a.collection.getAll().forEach(function(t){var n=e.$watch(function(){return t.asset.bid},function(e,t){e!==t&&d.calcTotalNetPl()});u.push(n)})},this.profitUnSubscribe=function(){u.forEach(function(e){e&&e()})},this.marginUtilization=function(){var e=n.get();if(!e||e&&!e.activeTradingAccount)return 0;var t=e.activeTradingAccount.margin,a=d.data.equity,o=0;if(0!==a)o=t/a*100;else if(0!==t)return 999;return o>=0&&o<=200?o:999},this.clear=function(){log("Clear PnlMarginService"),c&&c(),d.profitUnSubscribe(),u=[],d.data.freeMargin=0,d.data.totalProfit=0,d.data.netPl=0,d.data.equity=0,d.data.pnl=0},this}]),services.service("ProChartService",["config",function(e){function t(){}function n(){i.LoaderInitComplete=a,i.LoaderInitCombine()}function a(){o=ProChart_InitLayout("#chartpreload",l,r),o.apiinit.rootpath=e.chartUrl,o.events.layout.readyComplete=t,o.gui.loadLayout(),o.events.layout.initComplete=function(){o.chart.JSPush={enableHistory:!0,enableRT:!0,enableSymbols:!0,enableStudies:!0,funcFetchData:t},s.loaded=!0},o.events.chart.createComplete=t}var o,i=ProChart_Loader(),s=this,r=e.chartTheme||"default",l=e.chartLayout||"layout-mobile";return function(e,t){i.init.loadertemplates.push(e),i.init.rootpath=t,i.combinemode=!0,s.loaded||n()}({layout:l,template:r},e.chartUrl),this.getLoader=function(){return i},this.loaded=!1,this}]),services.service("ProfileRulesHelper",[function(){function e(e,n){var a=function(e,t){return Object.keys(e).reduce(function(n,a){return n[a]=Object.assign({},e[a],e[a].scopes[t]),n},{})}(angular.merge(t,e),n);this.get=function(){return a},this.isHidden=function(e){return a[e].hidden},this.isVisible=function(e){return!a[e].hidden},this.isReadonly=function(e,t){return t?a[e].readonly||t&&a[e].readonlyIfNotEmpty:a[e].readonly},this.isRequired=function(e){return a[e].required},this.getRawName=function(e){return a[e].rawName},this.getRuleByRawName=function(e){const t=Object.keys(a).find(function(t){return a[t].rawName===e});return t&&a[t]}}var t={firstName:{required:!0,rawName:"firstName",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},lastName:{required:!0,rawName:"lastName",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},birthday:{required:!0,rawName:"birthday",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},country:{required:!0,rawName:"country",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},state:{required:!0,rawName:"state",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},city:{required:!0,rawName:"city",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},address:{required:!0,rawName:"address",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},currency:{required:!0,rawName:"currency",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},customerType:{required:!1,rawName:"customerType",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},citizenship:{required:!0,rawName:"citizenship",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},postCode:{required:!0,rawName:"postCode",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},phone:{required:!0,rawName:"phone",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!0},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isUSCitizen:{required:!0,rawName:"usCitizen",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},tin:{required:!1,rawName:"tin",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},taxCountry:{required:!1,rawName:"taxCountry",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},nationalId:{required:!1,rawName:"nationalId",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},companyName:{required:!1,rawName:"companyName",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isMarried:{required:!1,rawName:"married",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isSpouse:{required:!1,rawName:"spouseAware",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},birthPlace:{required:!1,rawName:"birthPlace",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},tradingExperience:{required:!1,rawName:"tradingExperience",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},pep:{required:!1,rawName:"is_pep",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},tinAbsenceReason:{required:!1,rawName:"tin_absence_reason",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}}};return e}]),services.service("ServerTimeService",["API","Storage",function(e,t){function n(e){a.time=parseInt(1e3*parseInt(e,10),10)}var a=this,o=new Date;return this.time=Date.now(),this.serverTimezone=3,this.clientTimeZone=-o.getTimezoneOffset()/60,this.timeZoneOffset=0,this.init=function(){log("start ServerTimeService"),t.load("timezone").then(function(){a.serverTimezone=parseInt(t.get("timezone"),10),a.timeZoneOffset=a.clientTimeZone-a.serverTimezone}),e.subscribe("serverTime",n)},this.clear=function(){log("clear ServerTimeService"),e.unsubscribe("serverTime",n)},this}]),app.service("$socket",["$rootScope","$timeout",function(e,t){return function(n,a){function o(t){return function(){var n=arguments;e.$apply(function(){try{t.apply(i,n)}catch(e){console.error("Can not apply callback on emit ",e)}})}}var i=io(n,a);return this.getInstance=function(){return i},this.connect=function(){t(function(){i.connect()},0)},this.disconnect=function(){t(function(){i.removeAllListeners(),i.disconnect()},0)},this.on=function(e,t){var n=o(t);return i.on(e,n),n},this.off=function(e,t){"function"==typeof t?i.removeListener(e,t):i.removeAllListeners(e)},this.emit=function(t,n,a){"function"==typeof a?i.emit(t,n,function(){var t=arguments;e.$apply(function(){a.apply(i,t)})}):i.emit(t,n)},this.removeListener=function(e,n){t(function(){i.removeListener(e,n)},0)},this.removeAllListeners=function(e){t(function(){i.removeAllListeners(e)},0)},this.subscribers=function(){return i._callbacks},this}}]),services.service("Storage",["$q","API","ErrorService","constants",function(e,t,n,a){function o(e){if(1!==e.status)throw new n({source:"StorageService",type:a.error.type.VALIDATION,code:"loadStorageItemFailed",severity:"warning",data:{response:e}});return e}function i(e){if(!(e.filter(function(e){return e}).length>0))throw new n({source:"StorageService",type:a.error.type.VALIDATION,code:"loadStorageFailed",severity:"warning",data:{response:e}});return e}function s(e){switch(e){case"currencies":
return t.getCurrencies();case"countries":return t.getCountries();case"geo":return t.geo();case"depositValue":return t.depositValue();case"demoDepositValues":return t.demoDepositValues();case"timezone":return t.timezone();case"promocode":return t.promocode();case"smsVerification":return t.smsVerification();case"brandConfiguration":return t.brandConfiguration();case"withdrawalMethods":return t.getWithdrawalMethods();case"localBanks":return t.getLocalBanks();case"withdrawalReasons":return t.getWithdrawalReasons();case"paymentMethods":return t.getPaymentMethods();case"friendInvites":return t.getFriendInvites()}}function r(e,t){switch(e){case"brandConfiguration":return function(e){return{acceptPromotions:e.acceptPromotions,allowCredit:!!e.allowCredit,promocode:e.promocode,promoCodes:e.promoCodes||[],smsVerification:e.smsVerification,regulated:e.regulated,timezone:e.timezone,useDemo:e.demoAccountCreation,template:e.registrationTemplate,withdrawalReason:e.withdrawalReason,tradingPlatforms:e.tradingPlatforms||["MT4"],defaultTradingPlatform:e.defaultTradingPlatform||"MT4",maxLiveAccounts:e.maxLiveAccounts||9999,customerTypes:e.customerTypes||[],editSensitiveDetails:0!==e.editSensitiveDetails,friendInviteActive:!!e.friendInviteActive||!1,friendRegistrationUrl:e.friendRegistrationUrl}}(t)}}function l(t){var n=t.map(function(e){return s(e).then(o).catch(function(){return!1})});return e.all(n)}var c={};return this.set=function(e,t){c.hasOwnProperty(e)||(c[e]=""),c[e]=t},this.get=function(e){if(c.hasOwnProperty(e))return c[e]},this.remove=function(e){delete c[e]},this.getAll=function(){return c},this.clearAll=function(){c={}},this.load=function(e,t){function n(t,n){if(t){var a=e[n];c[a]=t[a]}}return"string"==typeof e&&t?s(e).then(o).then(function(t){var n=r(e,t[e]);Object.keys(n).forEach(function(e){c[e]=n[e]})}):"string"==typeof e?s(e).then(o).then(function(t){c[e]=t[e]}):Array.isArray(e)?l(e).then(i).then(function(e){return e.map(n)}):void 0},this}]),services.factory("TestService",[function(){function e(){return"hello"}return{say:e}}]),services.service("TransactionHistoryService",["$q","API","constants","TransactionHistoryCollection","TransactionHistoryModel","ServerTimeService","UserService",function(e,t,n,a,o,i,s){function r(){d.collection=new a}function l(e){e.transactions.forEach(function(e){d.collection.add(new o(e))})}function c(e){if(1!==e.status)throw new ErrorService({source:"TransactionHistoryService",type:n.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}var d=this;return d.user=null,d.collection=null,this.init=function(){d.user=s.get(),d.user.loggedIn},this.getTransactions=function(){return d.user.activeTradingAccount?t.transactionHistory().then(c).then(function(e){return r(),e}).then(l):(r(),e.resolve())},this}]),services.service("UserControl",["UserService","$state","constants",function(e,t,n){return this.getState=function(){var t=e.get();if(t){if(!t.tnc&&n.tncPopup)return"tnc";if(!t.activeTradingAccount)switch(t.registrationState){case n.userState.initial:return"signupPersonalProfile";case n.userState.personal:case n.userState.questionnaire:return"signupQuestionnaire"}}},this}]),services.service("UserService",["$rootScope","API","UserModel","LocalStorage","Storage","$state","constants","Onesignal","CustomerEventsService",function(e,t,n,a,o,i,s,r,l){var c=this;return c.user=new n,this.login=function(e){c.user.onLogin(e),c.user.loggedIn=!0,o.load(["withdrawalMethods","localBanks"]),c.subscribe(),c.oneSignalLogin()},this.get=function(){return c.user},this.subscribe=function(){t.subscribe("MT4UpdateBalance",function(t){c.user.updateBalance(t),e.$emit("pnl"),t.Order>0&&l.trackEvent(l.events.BalanceUpdate,{tradingAccount:t.login,server:t.live?"live":"demo",profit:t.Profit,orderId:t.Order,comment:t.comment})})},this.clear=function(){log("clear user service"),c.user&&t.unsubscribe("MT4UpdateBalance"),c.user=new n,c.oneSignalLogout()},this.kycCheck=function(){if(s.kycCheck&&(!s.kycCheck||"approved"!==c.user.complianceStatus))return c.user.complianceStatus&&c.user.complianceStatusNegative?i.go("kycCheck",{cache:!1}):void 0},this.oneSignalLogin=function(){r.setUserId(c.user.customerId),r.setTag("compliance_status",c.user.complianceStatus),r.setTag("ftd",c.user.funded),r.setTag("currency",c.user.baseCurrency),r.setTag("account_type",c.user.funded&&c.user.isLiveAccounts()>0?"LIVE":"DEMO")},this.oneSignalLogout=function(){},this}]),services.factory("Utils",["$timeout","$q","ServerTimeService","constants",function(e,t,n,a){function o(){}return{noop:o,wait:function(t){return function(n){return e(t||1e3).then(function(){return n})}},formatTradingTimes:function(e,t){function a(e){return{hour:e.split(":")[0],minute:e.split(":")[1]}}function o(e,t,n,o){var i=a(n);return moment.prototype.toUnix=function(){return this.unix()+60*this.utcOffset()},new moment.utc(e).weekday(t).startOf("day").hour(i.hour).minute(i.minute).utcOffset(o)}function i(e,t){e.hasOwnProperty(t)||(e[t]=[])}function s(e,t,n,a){var o="object"==typeof n?n.format("HH:mm"):n,i="object"==typeof a?a.format("HH:mm"):a;e[t].push([o,i])}function r(e){return e.clone().startOf("day").toUnix()}return function(e,t,a){var l=n.time,c={};return Object.keys(a).forEach(function(n){a[n].forEach(function(a){var d=o(l,n,a[0],e),u=o(l,n,a[1],e),p=o(l,n,a[0],t),m=o(l,n,a[1],t);r(p)<r(d)&&r(m)<r(u)?(i(c,p.day()),s(c,p.day(),p,m)):r(p)<r(d)&&r(m)===r(u)?(i(c,p.day()),s(c,p.day(),p,"23:59"),"00:00"!==m.format("HH:mm")&&(i(c,d.day()),s(c,d.day(),"00:00",m))):r(p)>r(d)&&r(m)>r(u)?(i(c,p.day()),s(c,p.day(),p,m)):r(m)>r(u)&&r(p)===r(d)?(i(c,p.day()),s(c,p.day(),p,"23:59"),"00:00"!==m.format("HH:mm")&&(i(c,m.day()),s(c,m.day(),"00:00",m))):(i(c,d.day()),s(c,d.day(),p,m))})}),c}(0,e,t)},runChain:function(e,n){var a=t(function(e,t){e()});return e.reduce(function(e,t){return e.then(n?t[n]:t)},a)},toBoolean:function(e){return!!e},fromBoolean:function(e){return e?1:0},formRevalidate:function(e,t){Object.keys(e).filter(function(n){return t?!n.match(/^\$/):!n.match(/^\$/)&&e[n].$viewValue}).forEach(function(t){e[t].$setDirty(),e[t].$setTouched()})},getCurrencyByCountry:function(e,t,n){function a(e){return _.find(n,{currency:e})}if(!e)return n[0].currency;var o=_.find(t,{code:e});if(o){var i=_.find(n,{currency:o.currency});if(i)return i.currency;if("GB"===e){if(a("EUR"))return"EUR";if(a("USD"))return"USD"}return o.currency}},capitalize:function(e){return e.toLowerCase().charAt(0).toUpperCase()+e.toLowerCase().slice(1)},toCamelCase:function(e){var t=this,n=e.split(" ").reduce(function(e,n){return e.concat(t.capitalize(n))},"");return n.charAt(0).toLowerCase()+n.slice(1)},toSnakeCase:function(e){return e.replace(/\s/g,"_").toLowerCase()},getDateRange:function(e){function t(e){return moment().utc(n.time).startOf(e)}var a,o=e.split(" ");return o[1].toLowerCase().match("day")&&(a=function(e){return t("day").subtract(e,"day")}(parseInt(o[0],10))),o[1].toLowerCase().match("week")&&(a=function(e){return t("isoweek").subtract(e,"week")}(parseInt(o[0],10))),o[1].toLowerCase().match("month")&&(a=function(e){return t("month").subtract(e,"month")}(parseInt(o[0],10))),a.unix()},setTimeRange:function(e){var t,a,o=this;switch(e){case"day":t=o.getDateRange("0 days");break;case"threedays":t=o.getDateRange("2 days");break;case"week":t=o.getDateRange("0 week");break;case"month":t=o.getDateRange("0 month");break;case"threemonths":t=o.getDateRange("2 month");break;case"all":t=1}return a=parseInt(n.time/1e3,10),{Start:t,End:a}},generateForm:function(e,t){var n=document.createElement("form");return n.id="form3ds",n.method="POST",n.action=e,t.forEach(function(e){var t=document.createElement("input");t.type="hidden",t.name=e.name,t.value=e.value,n.appendChild(t)}),n},insertDocumentScripts:function(e,t){var n=e.getElementsByTagName("body")[0];t.filter(function(e){return"script"===e.name}).forEach(function(e){var t=document.createElement("script");t.src=e.value,n.appendChild(t)})},getURLParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},getDiffInPoints:function(e,t,n){return Math.round(Math.abs(e-t)*Math.pow(10,n))},getReferralString:function(){return location.search.replace("?","").split("&").filter(function(e){return!e.match(/^token=|^etoken|^action=/)}).join("|")},getUrlRemarketing:function(){var e=this.getURLParameterByName("remarketing");if(e)return e},decimalRound:function(e,t){var n=Math.abs(e)*Math.pow(10,t),a=Math.floor(Number(n))/Math.pow(10,t);return e>=0?a:-1*a},createLinkByLang:function(e,t,n){var o=_.get(a,e+"."+t);return o||(o=_.get(a,n)),o||_.get(a,e)}}}]),services.service("Validator",function(){function e(e){return"object"==typeof e&&!Array.isArray(e)}return validate.formatters.custom=function(e){return e.map(function(e){return{field:e.attribute,value:e.attributes[e.attribute],validator:e.validator,message:e.error,options:e.options}})},validate.validators.isTradingTimes=function(t,n,a,o){var i;return e(t)&&null!==t?(Object.keys(t).forEach(function(n){Array.isArray(t[n])||(i=n+": Is not array"),i||t[n].forEach(function(t){e(t)||(i=n+"."+t+": Not an object"),i||(t.hasOwnProperty("CloseHour")||(i=n+"."+t+': has no property "CloseHour"'),t.hasOwnProperty("CloseMinute")||(i=n+"."+t+': has no property "CloseMinute"'),t.hasOwnProperty("OpenHour")||(i=n+"."+t+': has no property "OpenHour"'),t.hasOwnProperty("OpenMinute")||(i=n+"."+t+': has no property "OpenMinute"'))})}),i||void 0):t+": Not an object"},validate.options={format:"custom"},validate.getPattern=function(e){switch(e){case"alpha":return"[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*";case"phone":return"[0-9]{1,}";case"email":return'(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))';case"password":return"(\\d+[A-Za-z]+|[A-Za-z]+\\d+)[A-Za-z\\d]*";case"number":return"([0-9]+)";case"alphanum":return"[a-zA-Z0-9-\\.]+";case"alphanumMultiple":return"[A-Za-z0-9 _]*[A-Za-z0-9][A-Za-z0-9 _]*";case"name":return"[^[0-9\\]\\'\\.\\?\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\_\\+\\=\\{\\}\\(\\)\\/><\\][\\\\\",;|]+";case"freetext":return"[^\\'\\.\\?\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\_\\+\\=\\{\\}\\(\\)\\/><\\][\\\\\",;|]+";case"address":return"[^\\'\\?\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\_\\+\\=\\{\\}\\/><\\][\\\\\",;|]+"}},validate}),services.service("VerificationV2Service",["UserService","$state","constants","API","Utils","ErrorService","DocumentV2Model","BaseCollection","Storage","$q",function(e,t,n,a,o,i,s,r,l,c){function d(e){if(1!==e.status)throw new i({source:"VerificationV2Service",type:n.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function u(e){return new s(e)}var p=this;p.collection=new r,this.init=function(){return e.get().loggedIn?"internal-v2"!==n.verificationProvider?c.resolve():(p.collection.clear(),a.documentsGet().then(d).then(function(e){var t=e.documentsRequired.map(function(e){return u(e)});p.collection.fill(t),l.set("verification",p.collection.find({status:"New"}).length>0)}).catch(function(e){console.warn("Failed to retrieve documents",e)})):c.resolve()}}]),services.service("WithdrawHistoryService",["$q","API","constants","UserService","TransactionHistoryCollection","WithdrawRequestModel",function(e,t,n,a,o,i){function s(e){e.withdrawalRequests.forEach(function(e){c.collection.add(new i(e))})}function r(){c.collection=new o}function l(e){if(1!==e.status)throw new ErrorService({source:"WithdrawHistoryService",type:n.error.type.SYSTEM,code:e.code,severity:"critical",data:{response:e}});return e}var c=this;return c.user=null,c.collection=null,this.init=function(){c.user=a.get()},this.getWithdrawalRequests=function(){return c.user.activeTradingAccount?t.withdrawalHistory().then(l).then(function(e){return r(),e}).then(s):(r(),e.resolve())},this.cancelWithdrawalRequest=function(e){var n={id:e};return t.withdrawalCancel(n).then(l).then(function(t){c.collection.get({id:e}).status="cancelledByCustomer"})},this.clear=function(){c.collection&&c.collection.clear(),c.collection=null},this}]),services.factory("mockAPI",["$socket","$q","$timeout","$http","md5","config","constants","ErrorService",function(e,t,n,a,o,i,s,r){function l(e,t){switch(e){case"login":return{Code:1,Description:"",Token:"aaabbbcccddd"};case"getCustomerData":return{Code:1,data:{Email:"yurii.rynkov@pandats.com",FirstName:"Yurii",LastName:"Rynkov",CreatedOnDate:"01-02-2017",City:"Haifa",Country:"Israel",PostalCode:"123",PreferredLocale:"en",Street:"Some street",Telephone:"123123123",UserID:"12345",RealAccounts:[{Balance:"12345.67",Credit:"0",Currency:"USD",Enable:"true",Equity:"0",Leverage:"0",Margin:"0",Login:"789456"}],DemoAccounts:[]}};case"mt4login":case"forgotPassword":return{Code:1,Description:""}}}function c(e,a){return function(a){function o(){throw console.log("canceling request!",angular.copy(m)),delete f[p],g.reject("cancelRequest"),new r({source:"mockAPI",type:s.error.type.VALIDATION,severity:"warning",code:"cancelRequest",data:{request:m}})}function c(e){delete f[p],"string"==typeof e&&(e=angular.fromJson(e)),u&&n.cancel(u),u=null,g.resolve(e)}var u,p=d(e,a),m=angular.extend({},a||{},{reqID:p}),g=t.defer();return f[p]?t.reject():(n(function(){return c(l(e,m||{}))},500),f[p]=g.promise,u=n(o,i.requestTimeout),g.promise)}}function d(e,t){return o.createHash(e+JSON.stringify(t))}function u(){var n=t.defer();return console.log("socket is connecting..."),e.connect(),e.on("connect",function(){return console.log("socket connected!"),v.status=!0,n.resolve()}),n.promise}function p(){Object.keys(e.subscribers()).forEach(function(t){h.test(t)||e.removeAllListeners(t)}),v.status=!1}function m(){console.log("socket is disconnecting..."),e.disconnect()}function g(e,n){var o={method:"GET",url:i.loginUrl,params:{Login:e,Password:n,Source:s.system.loginSources[0].id},timeout:5e3};return a(o).then(function(e){if("1"!=e.data.Code)throw new r({source:"API",type:s.error.type.VALIDATION,code:"authFailed",data:{request:o.params,response:e.data}});return e.data}).catch(function(e){if(e&&"object"==typeof e&&"-1"==e.status)throw new r({source:"API",type:s.error.type.NETWORK,code:"authTimeout",data:{request:o.params}});return t.reject(e)})}var v=this,f={},h=/\b(connect|disconnect|sendServerTime|loginToken|error|refreshClient|refreshSite)/;return v.status=!1,e.on("disconnect",function(){console.log("socket disconnected!!!"),f={},p()}),{status:function(){return v.status},connect:u,disconnect:m,login:c("login"),loginToken:c("loginToken"),quotesHistoryByTimeFrame:c("QuotesHistoryByTimeFrame"),mt4LoginToken:c("MT4LoginToken"),mt4Login:c("MT4Login"),mt4GetClientSymbols:c("MT4GetClientSymbols"),mt4GetAllSymbols:c("MT4GetAllSymbols"),mt4GetSymbolsSnapshot:c("MT4GetSymbolsSnapshot"),mt4GetOpenPositions:c("MT4GetOpenPositions"),mt4GetClosedPositions:c("MT4GetClosedPositions"),mt4GetChart:c("MT4GetChart"),mt4OpenPosition:c("MT4OpenPosition"),mt4ClosePosition:c("MT4ClosePosition"),mt4UpdatePosition:c("MT4UpdatePosition"),mt4DeletePosition:c("MT4DeletePosition"),getCustomerData:c("getCustomerData"),logout:c("logout"),quotesSubscribe:c("quotesSubscribe"),quotesUnsubscribe:c("quotesUnsubscribe"),forgotPassword:c("forgotPassword"),subscribe:function(t,n){e.on(t,n)},unsubscribe:function(t){e.off(t)},onConnect:function(t){e.on("connect",t)},onDisconnect:function(t){e.on("disconnect",t)},onReconnect:function(t){e.on("reconnect",t)},getToken:g}}]),services.service("Onesignal",["$q","config","ExternalScriptLoader",function(e,t,n){var a=new n,o=t.onesignal&&Object.keys(t.onesignal).length>0;return o||console.warn("Onesignal services are disabled"),this.init=function(){if(o)return a.load("https://cdn.onesignal.com/sdks/OneSignalSDK.js").then(function(){if(!window.OneSignal)return e.reject("sdk is not loaded")}).then(function(){OneSignal.push(function(){console.log("ONESIGNAL INITIALIZE SERVICES"),OneSignal.init({appId:t.onesignal.appId,safari_web_id:t.onesignal.safariWebId,notifyButton:{enable:!1}})})}).catch(function(e){console.warn("Onesignal services are disabled",e.toString()),o=!1})},this.setUserId=function(e){o&&OneSignal.push(function(){console.log("ONESIGNAL SET EXTERNAL USER ID:",e),OneSignal.setExternalUserId(e)})},this.removeUserId=function(){o&&OneSignal.push(function(){console.log("ONESIGNAL SET REMOVE USER ID"),OneSignal.removeExternalUserId()})},this.setEmail=function(e){o&&OneSignal.push(function(){console.log("ONESIGNAL SET EMAIL:",e),OneSignal.setEmail(e)})},this.removeEmail=function(e){o&&OneSignal.push(function(){console.log("ONESIGNAL REMOVE EMAIL"),OneSignal.logoutEmail()})},this.setTag=function(e,t){o&&OneSignal.push(function(){console.log("ONESIGNAL SET TAG:",e,t),OneSignal.sendTag(e,t,function(e){console.log("Tags sent:",e)})})},this.getTags=function(){return o?e(function(e,t){OneSignal.push(function(){OneSignal.getTags(function(t){e(t)})})}):e.resolve()},this.isEnabled=function(){return o},this}]),controllers.controller("AccountFrozenController",["$scope","$state","$ionicLoading","LocaleService","API","constants","LoginService",function(e,t,n,a,o,i,s){a.wait().then(function(t){e.translation=t}),e.sendTicket=function(){var e={type:i.ticketTypes.loginProblem,subject:"Reactivate Account / No trading Account",description:"Contact the customer for account reactivation or login to the trading account. The customer`s account has been deleted, archived or other issue that prevent successful login"};return n.show(),o.createTicket(e),s.logout().then(function(){return n.hide(),t.go("welcome")})}}]),controllers.controller("AccountsChangePasswordController",["$scope","$state","$ionicLoading","$ionicHistory","LocaleService","UserService","constants","API","ErrorService","Utils","Validator",function(e,t,n,a,o,i,s,r,l,c,d){function u(e,t){if(0===e.status)throw new l({source:"AccountsChangePasswordController",type:s.error.type.VALIDATION,severity:"warning",code:e.code||"general_error",data:{request:t,response:e}});return e}o.wait().then(function(t){e.translation=t}),e.user=i.get(),e.validator=d.getPattern,e.tradingAccounts=e.user.tradingAccounts,e.initialSelectedAccount=null,e.auth={password:"",confirmPassword:"",tradingAccount:e.user.activeTradingAccount};var p={isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1};e.modal=angular.copy(p),e.changeAccountPassword=function(t){if(c.formRevalidate(t),t.$valid){n.show();var a={login:e.auth.tradingAccount.login,source:e.auth.tradingAccount.source,password:e.auth.password};r.mt4AccountSetPassword(a).then(function(e){return u(e,a)}).then(function(t){n.hide(),e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textTitle=o.translation.messages.password_changed,e.modal.back="root.app.manageAccounts",e.modal.actionText=o.translation.back,e.modal.state=!0}).catch(function(t){n.hide(),e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textTitle=t&&o.translation.messages[t.code]||o.translation.messages.general_error,e.modal.textContent=o.translation.messages.err_password_changed,e.modal.actionText=o.translation.try_again,e.modal.state=!0})}}}]),controllers.controller("AccountsTransferController",["$scope","$state","$ionicLoading","$ionicHistory","LocaleService","UserService","constants","API","ErrorService","Utils",function(e,t,n,a,o,i,s,r,l,c){function d(e){if(1!==e.status)throw new l({source:"AccountsTransferController",type:s.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function u(){p(),a.clearHistory()}o.wait().then(function(t){e.translation=t}),e.user=i.get(),e.constants=s,e.transfer={accountFrom:"",accountTo:"",value:0},e.config={digits:e.user.currencyDigits,step:1,min:1,max:1e5},e.accountFromConfig={type:"transferFrom"},e.accountToConfig={type:"balance"},e.accounts=e.user.tradingAccounts.filter(function(e){return e.live}).map(function(t){var n=s.currencySymbols[t.currency],a=t.balance.toFixed(e.user.currencyDigits),o=Math.min(t.freeMargin-t.credit,t.balance);return t.fundsToWithdraw=o>0?o:0,t.description=[t.login,"LIVE",e.translation.balance,n,a].join(" "),t}),e.accountsFrom=e.accounts.filter(function(e){return e.balance>0}),e.accountsFrom.length>0?e.transfer.accountFrom=e.user.activeTradingAccount.live?e.user.activeTradingAccount:e.accountsFrom[0]:e.transfer.accountFrom=null,e.accountsTo=e.accounts.filter(function(t){return e.transfer.accountFrom&&t.login!==e.transfer.accountFrom.login}),e.accountsTo.length>0?e.transfer.accountTo=e.accountsTo[0]:e.transfer.accountTo=null;var p=e.$watch("transfer.accountFrom",function(t,n){t&&t.login!==n.login&&e.updateAccountsTo()});e.updateAccountsTo=function(){log("model change",e.transfer.accountFrom.login),e.accountsTo=e.accounts.filter(function(t){return t.login!==e.transfer.accountFrom.login}),e.accountsTo.length>0?e.transfer.accountTo=e.accountsTo[0]:e.transfer.accountTo=null,e.transfer.value=0,log(e.accountsFrom),log(e.accountsTo)},e.modal={actionText:o.translation.try_again,state:!1},e.submit=function(t){if(t.$valid){var a={from:e.transfer.accountFrom.login,to:e.transfer.accountTo.login,amount:parseInt(e.transfer.value,10)};return(e.constants.platformSelect||e.constants.customerTypeForTA)&&(a.fromTradingPlatform=e.transfer.accountFrom.tradingPlatform,a.toTradingPlatform=e.transfer.accountTo.tradingPlatform),n.show(),r.transfer(a).then(d).then(c.wait(1e3)).then(function(t){n.hide(),e.modal.textTitle=o.translation.messages.transferSuccess,e.modal.isError=!1,e.modal.actionText=o.translation.continue,e.modal.textContent="",e.modal.back="root.app.manageAccounts",e.modal.state=!0}).catch(function(t){n.hide(),e.modal.textTitle=o.translation.messages.transferFailed,e.modal.actionText=o.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=o.translation.messages[t.code]||"",e.modal.state=!0})}},e.$on("$ionicView.beforeLeave",u),e.$on("clear",u)}]),controllers.controller("AddNewAccountController",["$scope","$state","$ionicLoading","LocaleService","Storage","API","Validator","ErrorService","constants","config","UserControl","UserService","Utils","CountryService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m){function g(e,t){if(0===e.status)throw new r({source:"AddNewAccountController",type:l.error.type.VALIDATION,severity:"warning",code:e.code||"general_error",data:{request:t,response:e}});return e}function v(){var t=e.demoDepositValues.find(function(t){return t.currency===e.addAccount.currency.currency});t&&(e.addAccountDefaults={min:t.minimum,max:t.maximum,value:t.visual})}a.wait().then(function(t){e.translation=t});var f=u.get();e.liveAccont=!0,e.currencies=[];var h=m.countries.get({code:f.country}),b=h&&h.allowedCurrencies&&h.allowedCurrencies.length&&h.allowedCurrencies;b&&b.length&&(e.currencies=(o.get("currencies")||[]).filter(function(e){return-1!==b.indexOf(e.currency)})),e.currencies.length||(e.currencies=(o.get("currencies")||[]).filter(function(e){return e.currency===h.currency})),e.validator=s.getPattern,e.useDemoAccounts=o.get("useDemo"),e.showLeverage=l.showLeverageDropdown,e.constants=l;var y=l.scoringRules&&_.find(l.scoringRules,{classification:f.classification});e.leverages=y?y.leverages:c.leverages,e.demoDepositValues=o.get("demoDepositValues"),e.addAccount={currency:_.find(e.currencies,function(e){return e.currency===f.baseCurrency})||e.currencies[0],leverage:_.find(e.leverages,function(e){return e===c.defaultLeverage})||e.leverages[0]},e.addAccountDefaults={min:100,max:5e4,value:l.initialDeposit},e.platforms=o.get("tradingPlatforms").map(function(t){return{id:t,label:e.translation[t]||t}}),l.platformSelect&&(e.addAccount.platform=_.find(e.platforms,{id:o.get("defaultTradingPlatform")}));var w=o.get("maxLiveAccounts");e.customerTypes=o.get("customerTypes")||[];var k=_.find(e.customerTypes,{selected:1});k&&(e.addAccount.customerType=k);var C={isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1};e.modal=angular.copy(C),e.setForm=function(t){e.form=t},e.toggleAccount=function(t){e.liveAccont=t},e.$on("$ionicView.beforeEnter",function(){var e=d.getState();e&&t.go(e,{cache:!1}),v()}),e.sendAccount=function(t){if(p.formRevalidate(t,!0),t.$valid){var o={live:e.liveAccont?1:0,currency:e.addAccount.currency.currency,leverage:e.addAccount.leverage+"",initialDeposit:e.liveAccont?0:e.addAccountDefaults.value};l.platformSelect&&(o.tradingPlatform=e.addAccount.platform.id),l.customerTypeForTA&&(o.customerType=e.addAccount.customerType.name||""),n.show(),i.mt4CreateAccount(o).then(function(e){return g(e,o)}).then(function(t){n.hide(),f.addTradingAccount(t.mt4Account),e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textTitle=a.translation.messages.createAccountSuccess,e.modal.back="root.app.manageAccounts",e.modal.actionText=a.translation.back,e.modal.state=!0}).catch(function(t){n.hide(),e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textTitle=t&&a.translation.messages[t.code]&&a.translation.messages[t.code].replace(/\%X\%/,w)||a.translation.messages.general_error,e.modal.textContent=a.translation.messages.createAccountFailed,e.modal.actionText=a.translation.try_again,e.modal.state=!0})}};var S=e.$watch("addAccount.currency",function(e,t){e!==t&&e&&v()});e.$on("$ionicView.beforeLeave",S),e.$on("$ionicView.unloaded",S),e.$on("clear",S)}]),controllers.controller("AppController",["$scope","$state","$ionicHistory","$ionicLoading","$ionicTabsDelegate","$ionicModal","LocaleService","Storage","$timeout","UserService","constants",function(e,t,n,a,o,i,s,r,l,c,d){e.verificationRequered=r.get("verification")||!1,e.authType=d.authType?d.authType:"newforex",s.wait().then(function(t){e.translation=t});var u=e.$watch(function(){return t.$current.name},function(){o.showBar(t.current.data&&t.current.data.footer)});e.$on("$destroy",function(){u()}),this.navigate=function(e,n){return t.go(e,n)},this.back=function(){n.goBack()}}]),controllers.controller("AssetInfoController",["$scope","$state","$ionicLoading","moment","config","constants","Utils","AssetService","LocaleService","InvestCalcService","UserService","ServerTimeService",function(e,t,n,a,o,i,s,r,l,c,d,u){function p(){if(void 0!==e.clientTimezone){var t=u.time,n=e.clientTimezone,a=_.assign({},e.asset.tradingTimes);Object.keys(a).forEach(function(e){"24:00"===a[e][0][1]&&(a[e][0][1]="23:59")}),e.tradingTimesFormat=b(t,n,a)}}function m(e){return{hour:e.split(":")[0],minute:e.split(":")[1]}}function g(e,t,n,o){var i=m(n);return a.prototype.toUnix=function(){return this.unix()+60*this.utcOffset()},a.utc(e).weekday(t).startOf("day").hour(i.hour).minute(i.minute).utcOffset(o)}function v(e){return e.clone().startOf("day").toUnix()}function f(e,t){e.hasOwnProperty(t)||(e[t]=[])}function h(e,t,n,a){var o="object"==typeof n?n.format("HH:mm"):n,i="object"==typeof a?a.format("HH:mm"):a;e[t].push(o+"-"+i)}function b(e,t,n){var a=e,o={};return Object.keys(n).forEach(function(e){n[e].forEach(function(n){var i=g(a,e,n[0],0),s=g(a,e,n[1],0),r=g(a,e,n[0],t),l=g(a,e,n[1],t);v(r)<v(i)&&v(l)<v(s)?(f(o,r.day()),h(o,r.day(),r,l)):v(r)<v(i)&&v(l)===v(s)?(f(o,r.day()),h(o,r.day(),r,"23:59"),"00:00"!==l.format("HH:mm")&&(f(o,i.day()),h(o,i.day(),"00:00",l))):v(r)>v(i)&&v(l)>v(s)?(f(o,r.day()),h(o,r.day(),r,l)):v(l)>v(s)&&v(r)===v(i)?(f(o,r.day()),h(o,r.day(),r,"23:59"),"00:00"!==l.format("HH:mm")&&(f(o,l.day()),h(o,l.day(),"00:00",l))):(f(o,i.day()),h(o,i.day(),r,l))})}),o}function y(){var t=c.calcMargin(1,"sell",e.asset,e.user),n=c.calcMargin(1,"buy",e.asset,e.user);return e.leverage=c.calcLeverage(e.asset,t.requiredMargin),{ask:n.requiredMargin,bid:t.requiredMargin,askCurrency:n.baseVal,bidCurrency:t.baseVal}}function w(){var t=e.asset.swapsLong,n=e.asset.swapsShort,a=c.calcMargin(1,"sell",e.asset,e.user,n);return{long:t,short:n,longCurrency:c.calcMargin(1,"buy",e.asset,e.user,t).baseVal,shortCurrency:a.baseVal}}function k(){if(!e.translation.assetInfo||e.translation.assetInfo&&!e.translation.assetInfo.nameMatch)return void(e.description=void 0);var t=function(t){if(new RegExp(t.pattern).test(e.asset.s))return t.text};e.description=e.translation.assetInfo.nameMatch.reduce(function(e,n){return t(n)||e},"")}l.wait().then(function(t){e.translation=t}),e.constants=i,e.asset=r.collection.get({id:parseInt(t.params.assetId,10)}),e.user=d.get(),e.clientTimezone=u.timeZoneOffset,e.margin={ask:"",bid:"",askCurrency:"",bidCurrency:""},e.swap={long:"",short:"",longCurrency:"",shortCurrency:""},e.leverage="",e.asset&&(e.margin=y(),e.swap=w()),e.tradingTimes=function(){return e.asset&&e.tradingTimesFormat?Object.keys(e.tradingTimesFormat):[]};var C=e.$watchGroup(["asset.bid","asset.ask"],function(t,n){t&&n&&(t[0]!==n[0]||t[1]!==n[1])&&(e.margin=y(),e.swap=w())});e.$on("$ionicView.beforeEnter",function(){p(),k()}),e.$on("clear",function(){log("clear asset info controller"),C()})}]),controllers.controller("AssetsController",["$scope","$state","$ionicPopover","$ionicLoading","$injector","config","constants","AssetService","API","FavoritesService","LocaleService","UserService","UserControl","LocalStorage","$rootScope",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g){function v(){return log("init assets controller after switch account"),f("FAVORITES"===e.selectedIndex?e.selectedIndex:e.selectedIndex)}function f(t){if(r.collection){var n={};"FAVORITES"===t?(n.isFavorite=!0,e.assets=r.sortByFavorites(n)):"QUICK ACCESS"===t?e.assets=r.clientQuickAccessCollection.getAll():(n.category=t,e.assets=r.clientCollection.find(n))}}d.wait().then(function(t){e.translation=t}),e.state=null,e.categories=function(e){if(r.collection){var t=_.uniq(r.clientCollection.getAll().map(function(e){return e.category})),n=e.filter(function(e){return t.indexOf(e.id)>-1});return n=n.map(function(e){return _.assign(e,{selected:!1})}),n[0].selected=!0,n}}(r.assetCategories||s.assetsTypes),e.quickAccessExists=e.assets=r.clientQuickAccessCollection.getAll().length>0,e.showSearch=!1,e.search={};var h=t.params.category;e.constants=s,n.fromTemplateUrl("templates/instruments-menu.html",{scope:e.$new()}).then(function(t){e.popover=t}),e.openPopover=function(t){e.popover.show(t)},e.openSearchAssets=function(){e.showSearch=!e.showSearch,e.showSearch?e.assets=r.clientCollection.getAll():(e.search={},f(e.selectedIndex))},e.navigate=function(n,a){e.popover&&e.popover.remove(),t.go(n,a)},e.assets=[],function(){e.selectedIndex=h?h.toUpperCase():c.length()>0?"FAVORITES":e.categories[0].id}(),f(e.selectedIndex),e.toggleCategory=function(t){e.selectedIndex=t,f(t)},e.user=u.get(),e.$on("$ionicView.beforeEnter",function(){return e.state=p.getState(),v()}),e.$on("init",v),e.$on("clear",function(){log("clear assets controller"),e.assets=[],e.popover.remove()}),e.$on("$ionicView.afterEnter",function(){var e=m.get("link");if(e){var n=JSON.parse(e);if("asset"===n.name){m.remove("link");var a=r.getAssetByName(n.params);if(a)return t.go("root.app.chart",{category:a.category,assetId:a.id})}}}),g.$on("reconnect",function(){v()}),e.customSearch=function(t,n,a){return e.search&&e.search.outputName?t.outputName.toLowerCase().indexOf(e.search.outputName.toLowerCase())>=0&&t.category.length>0:t.category.length>0}}]),controllers.controller("BankTransferController",["$scope","$state","constants","LocaleService","Storage",function(e,t,n,a,o){a.wait().then(function(t){e.translation=t}),e.paymentMethods=o.get("paymentMethods")||[],e.defaultBankDetails=n.wiretransferDetails||{beneficiary_name:"",beneficiary_address:"",beneficiary_bank:"",bank_address:"",beneficiary_account_number:"",beneficiary_iban:"",swift:"",comments:""},e.customBankDetails=n.bankTransferCustomBankDetails}]),controllers.controller("BitgoController",["$scope","LocaleService","constants","UserService","ErrorService","ionicToast","Storage",function(e,t,n,a,o,i,s){t.wait().then(function(t){e.translation=t}),e.user=a.get(),e.paymentMethods=s.get("paymentMethods")||[],e.constants=n,e.displayCurrency=e.user.currency,e.cryptoWallet={qrCode:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",address:"N/A",transactionId:"N/A"},
e.user.activeTradingAccount.cryptoWallet&&(e.cryptoWallet=e.user.activeTradingAccount.cryptoWallet,e.cryptoWallet.currency&&(e.displayCurrency=e.cryptoWallet.currency)),e.modal={actionText:t.translation.try_again,state:!1},e.copyToClipBoard=function(){var t=document.getElementsByClassName("depositAddress");HTMLCollection.prototype.isPrototypeOf(t)&&t.length&&(t=t[0]),t&&(t.select(),t.setSelectionRange(0,e.cryptoWallet.address.length),document.execCommand("copy"),t.blur(),window.getSelection().removeAllRanges(),i.show(e.translation.copiedToCB,"top",!1,5e3,""))}}]),controllers.controller("ChartController",["$q","$scope","$state","$ionicLoading","config","constants","API","AssetService","LocaleService","UserService","Utils",function(e,t,n,a,o,i,s,r,l,c,d){function u(){return s.mt4GetChart({SymbolID:t.asset.id,TimeFrame:t.chart.range.timeFrame||1})}function p(t){var n=JSON.parse(t.Chart);return n&&1===t.status&&n.length>10?n:e.reject()}function m(){return u().then(p).then(function(e){t.chart.data=e,t.chart.ready=!0,t.loadstate="loading"}).catch(function(){t.modal.textTitle=l.translation.noChartData,t.modal.isError=!0,t.modal.state=!0})}function g(){t.asset=null,t.chart=null,t.user=null}l.wait().then(function(e){t.translation=e}),t.category=n.params.category;var v=n.params.assetId;t.asset=r.collection.get({id:parseInt(v,10)}),t.user=c.get(),t.chart={ready:!1,loadstate:"loading"},t.chart.type=i.chartTypes[0],t.chartTypes=i.chartTypes,t.chart.range=i.chartRangeParams[1],t.chartRangeParams=i.chartRangeParams,t.modal={actionText:"Close",state:!1,back:"root.app.assets"},function(){m()}(),t.changeTimeRange=function(e){return t.chart.range=e,t.chart.ready=!1,m()},t.$watch("chart.loadstate",function(e,n){e!==n&&"fail"===e&&(t.modal.textTitle=l.translation.noChartData,t.modal.isError=!0,t.modal.state=!0)}),t.$on("$ionicView.afterLeave",g),t.$on("$ionicView.unloaded",g),t.$on("clear",g)}]),controllers.controller("ClosedTradeController",["$scope","$state","$filter","$ionicModal","$ionicLoading","$timeout","$ionicPopup","config","constants","Utils","API","UserService","InvestCalcService","LocaleService","ClosedTradeService","ServerTimeService","UserControl",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f){function h(n){if(e.user&&!l.skipRegistrationStateCheck)switch(e.user.registrationState){case l.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case l.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}return e.loadingMessage=m.translation.loading_closed_trades,o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),e.trades=[],g.collection&&g.getHistory(n).then(c.wait(500)).then(function(){o.hide(),"all"===e.filter.tradeAction.id?e.trades=g.collection.getAllTrades():e.trades=g.collection.find({tradeAction:e.filter.tradeAction.id})})}function b(){e.trades=[],e.user=null}e.trades=[],e.user=u.get(),m.wait().then(function(t){e.translation=t}),e.clientTimeZone=v.timeZoneOffset>=0?"+"+v.timeZoneOffset.toString():v.timeZoneOffset.toString(),e.constants=l,e.showConvertToUsd=l.showConvertToUsd||!1,e.selectedRange="day",e.tradeActions=[{label:m.translation.allTypes,id:"all"},{label:m.translation.trades,id:"trades"},{label:m.translation.balance,id:"balance"},{label:m.translation.credit,id:"credit"},{label:m.translation.other,id:"other"}],e.filter={tradeAction:_.find(e.tradeActions,{id:"trades"})||e.tradeActions[0]},e.toggleCategory=function(t){e.selectedRange=t,e.trades.length=0,h(t)},e.toggleCategory(e.selectedRange),e.showFilter=function(){var t=s.show({template:'<div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.type}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="tradeAction" ng-model="filter.tradeAction" ng-options="tradeAction.label for tradeAction in tradeActions"></select></div></div></div>',title:'<span class="roboto">'+m.translation.filterClosedTrades+"</span>",scope:e,buttons:[{text:m.translation.cancel,type:"button-block"},{text:m.translation.filter,type:"button-block button-full",onTap:function(n){n.preventDefault(),"all"===e.filter.tradeAction.id?e.trades=g.collection.getAllTrades():e.trades=g.collection.find({tradeAction:e.filter.tradeAction.id}),t.close()}}]})},e.$on("$ionicView.beforeEnter",function(){return e.state=f.getState(),e.state?t.go(e.state,{cache:!1}):u.kycCheck()}),e.$on("$ionicView.afterLeave",b),e.$on("$ionicView.unloaded",b),e.$on("clear",b)}]),controllers.controller("CreateFirstAccountController",["$scope","$state","$ionicLoading","LocaleService","UserService","AccountService","Utils","Storage","constants","CountryService",function(e,t,n,a,o,i,s,r,l,c){function d(){var t=e.user.baseCurrency;if(t)return _.find(e.currencyList,{currency:t})&&t}a.wait().then(function(t){e.translation=t}),e.currencyList=r.get("currencies"),e.countries=c.get(),e.user=o.get(),e.constants=l,e.modal={actionText:a.translation.try_again,state:!1,isProcess:!1};var u=r.get("maxLiveAccounts");e.createAccount=function(){var o=d()||s.getCurrencyByCountry(e.user.country,e.countries,e.currencyList);return n.show(),i.createAccount(!0,o).then(s.wait(2e3)).then(function(e){return i.switchAccount(e.mt4Account.login,!0)}).then(function(){return n.hide(),s.getURLParameterByName("action")===l.depositActionName?t.go("root.app.wallet"):t.go("root.app.assets")}).catch(function(t){n.hide(),e.modal.isError=!0,e.modal.textTitle=t&&a.translation.messages[t.code]&&a.translation.messages[t.code].replace(/\%X\%/,u)||a.translation.messages.general_error,e.modal.textContent="",e.modal.state=!0})},e.logout=function(){},l.autoUpdatePersonalDetails&&!l.skipCreateFirstAccountPage&&e.createAccount(),e.$on("$ionicView.beforeEnter",function(){l.skipCreateFirstAccountPage&&e.createAccount()})}]),controllers.controller("CreditCardController",["$scope","$state","$filter","$timeout","$ionicLoading","$ionicHistory","$q","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$interval","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b){function y(e){if(1!==e.status)throw new f({source:"CreditCardController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function w(n){return s(function(a,i){function s(t){v.unsubscribe("depositConfirm"),e.paymentPopup&&e.paymentPopup.close();try{y(t)}catch(e){i(e)}a(t)}function r(){e.paymentPopup&&e.paymentPopup.closed&&(h.cancel(l),e.paymentPopup=null,o.hide(),e.paymentMethods.length>1?t.go("root.app.wallet"):t.go("root.app.assets"))}var l=h(r,100);v.subscribe("depositConfirm",s);var c=["toolbar=no","status=no","menubar=no","scrollbars=no","resizable=no","left=10000","top=10000","width=10","height=10","visible=none"].join(",");n.RedirectURL&&!n.PostData&&(e.paymentPopup=window.open(n.RedirectURL,"_blank",c))})}function k(){return o.show(),v.creditCardDeposit(S).then(y).then(function(e){return e.RedirectURL&&e.RedirectURL.length>0?w(e):e}).then(function(t){e.paymentPopup&&e.paymentPopup.close(),o.hide(),b.get("remarketing")&&b.remove("remarketing"),e.modal.textTitle=r.translation.messages.depositSuccess,e.modal.isError=!1,e.modal.actionText=r.translation.startTrading,e.modal.back="root.app.assets",e.modal.transactionId=t.transactionId,e.modal.date=Date.now(),e.modal.amount=u.currencySymbols[t.currency]+" "+t.amount,e.modal.method="Credit Card **** "+(t.creditCardLast4Digits||t.lastDigits),e.modal.state=!0}).catch(function(t){o.hide(),e.modal.textTitle=r.translation.messages.depositFailed,e.paymentPopup&&e.paymentPopup.close(),e.modal.actionText=r.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=r.translation.messages.depositFailedText,e.modal.state=!0})}function C(){v.unsubscribe("depositConfirm"),e.creditCard=null,e.depositValue=null,e.user=null,e.paymentPopup=null,e.user=null,i.clearHistory()}r.wait().then(function(t){e.translation=t}),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.constants=u,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.minDate=p.time,e.creditCard={value:e.depositValue.visual,holder:e.user.firstName+" "+e.user.lastName},e.paymentPopup=null;var S={amount:0,currency:e.user.activeTradingAccount.currency,type:"",number:"",cvv:"",expiryMonth:null,expiryYear:null,holder:e.user.firstName+" "+e.user.lastName,country:e.user.country,address:e.user.address,city:e.user.city,phone:e.user.phone,state:"",postcode:e.user.postCode,phoneCountryCode:"",phoneAreaCode:"",platform:u.platformById.webMobile};e.config={digits:0,step:50,min:e.depositValue.minimum,max:e.depositValue.maximum},e.changeStep=l.stepChange,e.listAmounts=[];var T=[];Array(5).fill(null).reduce(function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return T.push(a),a},e.depositValue.visual<=e.config.min?e.config.min:e.depositValue.visual),T.length>0&&(e.listAmounts=T),e.confirm=function(t){if(t.$valid){var a=n("date")(e.creditCard.date,"MM"),o=n("date")(e.creditCard.date,"yyyy");return S.type="",S.number=e.creditCard.number,S.cvv=e.creditCard.cvv,S.expiryMonth=parseInt(a,10),S.expiryYear=parseInt(o,10),S.holder=e.creditCard.holder,S.amount=parseFloat(e.creditCard.value),S.remarketing=b.get("remarketing")||"",k()}},e.modal={actionText:r.translation.try_again,state:!1},e.$on("$ionicView.afterLeave",C),e.$on("clear",C)}]),controllers.controller("CreditCardSecuredController",["$scope","$state","$filter","$timeout","$ionicLoading","$ionicHistory","$q","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h){function b(e){if(1!==e.status)throw new f({source:"CreditCardController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function y(t){return s(function(n,a){function o(){return e.paymentPopup.show(),t.PostData&&r()}function i(){e.paymentPopup.close(),e.paymentPopup.removeEventListener("exit",i),e.paymentPopup.removeEventListener("loadstop",o),e.paymentPopup.removeEventListener("loaderror",i),e.paymentPopup=null,a()}function s(t){v.unsubscribe("depositConfirm"),e.paymentPopup&&e.paymentPopup.close();try{b(t)}catch(e){a(e)}n(t)}function r(){var n="postData('"+t.RedirectURL+"','"+JSON.stringify(t.PostData)+"')";e.paymentPopup.executeScript({code:n})}v.subscribe("depositConfirm",s);window.cordova&&window.cordova.InAppBrowser&&(t.RedirectURL&&!t.PostData?e.paymentPopup=window.cordova.InAppBrowser.open(t.RedirectURL,"_blank","location=yes,hidden=yes"):e.paymentPopup=window.cordova.InAppBrowser.open("templates/deposit-inapp.html","_blank","location=yes,hidden=yes")),e.paymentPopup.addEventListener("exit",i),e.paymentPopup.addEventListener("loadstop",o),e.paymentPopup.addEventListener("loaderror",i)})}function w(){return o.show(),v.creditCardDeposit(C).then(b).then(function(e){return e.RedirectURL&&e.RedirectURL.length>0?y(e):e}).then(function(t){e.paymentPopup&&e.paymentPopup.close(),o.hide(),h.get("remarketing")&&h.remove("remarketing"),e.modal.textTitle=r.translation.messages.depositSuccess,e.modal.isError=!1,e.modal.actionText=r.translation.startTrading,e.modal.back="root.app.assets",e.modal.transactionId=t.transactionId,e.modal.date=Date.now(),e.modal.amount=u.currencySymbols[t.currency]+" "+t.amount,e.modal.method="Credit Card **** "+(t.creditCardLast4Digits||t.lastDigits),e.modal.state=!0}).catch(function(t){o.hide(),e.modal.textTitle=r.translation.messages.depositFailed,e.paymentPopup&&e.paymentPopup.close(),e.modal.isError=!0,e.modal.textContent=r.translation.messages.depositFailedText,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0})}function k(){v.unsubscribe("depositConfirm"),e.creditCard=null,e.depositValue=null,e.user=null,e.paymentPopup=null,e.user=null,i.clearHistory()}r.wait().then(function(t){e.translation=t}),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.constants=u,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.minDate=p.time,e.creditCard={value:e.depositValue.visual,holder:e.user.firstName+" "+e.user.lastName},e.paymentPopup=null;var C={amount:0,currency:e.user.activeTradingAccount.currency,type:"",number:"",cvv:"",expiryMonth:null,expiryYear:null,holder:e.user.firstName+" "+e.user.lastName,country:e.user.country,address:e.user.address,city:e.user.city,phone:e.user.phone,state:"",postcode:e.user.postCode,phoneCountryCode:"",phoneAreaCode:"",secure:!0,platform:u.platformById.webMobile};e.config={digits:0,step:50,min:e.depositValue.minimum,max:e.depositValue.maximum},e.changeStep=l.stepChange,e.listAmounts=[];var S=[];Array(5).fill(null).reduce(function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return S.push(a),a},e.depositValue.visual<=e.config.min?e.config.min:e.depositValue.visual),S.length>0&&(e.listAmounts=S),e.confirm=function(t){if(t.$valid){var a=n("date")(e.creditCard.date,"MM"),o=n("date")(e.creditCard.date,"yyyy");return C.type="",C.number=e.creditCard.number,C.cvv=e.creditCard.cvv,C.expiryMonth=parseInt(a,10),C.expiryYear=parseInt(o,10),C.holder=e.creditCard.holder,C.amount=parseFloat(e.creditCard.value),C.remarketing=h.get("remarketing")||"",w()}},e.modal={actionText:r.translation.try_again,state:!1},e.$on("$ionicView.afterLeave",k),e.$on("clear",k)}]),controllers.controller("DepositController",["$scope","$rootScope","$state","$ionicLoading","config","constants","Utils","UserService","LocaleService","API","Storage","$sce","appsflyer",function(e,t,n,a,o,i,s,r,l,c,d,u,p){l.wait().then(function(t){e.translation=t})}]),controllers.controller("ExternalController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f){function h(){e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.user=null}r.wait().then(function(t){e.translation=t}),self.iframeEl=null,e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.lang=r.lang,e.methodName=t.params.method.name||"",e.iframeUrl=s.trustAsResourceUrl(t.params.method.url+"?lang="+e.lang),o.show(),e.modal={actionText:r.translation.try_again,state:!1},e.iframeLoad=function(){o.hide(),e.iframeReady=!0},e.iframeLoadFail=function(){o.hide(),e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0},e.$on("$ionicView.afterLeave",h),e.$on("clear",h)}]),controllers.controller("FavoritesController",["$scope","$state","$ionicLoading","config","constants","AssetService","FavoritesService","LocaleService",function(e,t,n,a,o,i,s,r){function l(t){if(i.collection){var n={category:t||e.categories[0]};e.assets=i.clientCollection.find(n)}}function c(){e.assets=[]}r.wait().then(function(t){e.translation=t}),e.assets=[],e.categories=function(e){if(i.collection){var t=_.uniq(i.clientCollection.getAll().map(function(e){return e.category})),n=e.filter(function(e){return t.indexOf(e.id)>-1});return n=n.map(function(e){return _.assign(e,{selected:!1})}),n[0].selected=!0,n}}(o.assetsTypes)||o.assetsTypes,e.selectedIndex=e.categories[0].id,e.favorites=s.getAll(),e.search={},l(e.selectedIndex),e.toggleCategory=function(t){e.selectedIndex=t,l(t)},e.toggle=function(e){var t=i.collection.get({id:e});t.isFavorite?(s.remove(e),t.isFavorite=!1):(s.add(e),t.isFavorite=!0)},e.$on("$ionicView.afterLeave",c),e.$on("clear",c)}]),controllers.controller("FavoritesEditController",["$scope","$state","$ionicLoading","$injector","config","constants","FavoritesService","API","AssetService",function(e,t,n,a,o,i,s,r,l){function c(){e.favorites.length>0?s.sync(function(t){return _.toArray(_.mapValues(e.favorites,t))}("id")):s.clearAll()}function d(){e.favorites=[]}e.favorites=[],function(){function t(t){var n=l.collection.get({id:t});return n&&e.favorites.push({id:t,name:n.outputName})}var n=s.getAll();n&&l.collection&&n.forEach(t)}(),e.moveItem=function(t,n,a){e.favorites.splice(n,1),e.favorites.splice(a,0,t),c()},e.removeItem=function(t){l.collection.get({id:t.id}).isFavorite=!1,_.remove(e.favorites,t),c()},e.$on("$ionicView.afterLeave",d),e.$on("clear",d)}]),controllers.controller("HelpDeskController",["$scope","$state","LocaleService",function(e,t,n){n.wait().then(function(t){e.translation=t})}]),controllers.controller("HostedPageController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h){function b(e){if(1!==e.status)throw new f({source:"HostedPageController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function y(n){v.unsubscribe("depositConfirm");try{b(n)}catch(n){return o.hide(),n.code,void(e.paymentMethods.length>1?t.go("root.app.wallet"):t.go("root.app.assets"))}o.hide(),h.get("remarketing")&&h.remove("remarketing"),e.modal.textTitle=r.translation.messages.depositSuccess,e.modal.isError=!1,e.modal.actionText=r.translation.startTrading,e.modal.back="root.app.assets",e.modal.transactionId=n.transactionId,e.modal.date=Date.now(),e.modal.amount=u.currencySymbols[n.currency]+" "+n.amount,e.modal.method="",e.modal.state=!0}function w(){var n={amount:parseInt(e.amount.value,10),pspCurrency:e.amount.pspCurrency||void 0,pspName:u.paymentMethodsBlueprint[t.params.method.name]||t.params.method.name,remarketing:h.get("remarketing")||""};return o.show(),v.hostedPageDeposit(n).then(b).then(function(t){e.iframeUrl=s.trustAsResourceUrl(t.RedirectURL),e.urlReady=!0,v.subscribe("depositConfirm",y)}).catch(function(t){return e.iframeLoadFail()})}function k(){e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.user=null}r.wait().then(function(t){e.translation=t}),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.showAmountSelect=!0,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.methodName=t.params.method.name||"",e.pspCurrencies=t.params.method.pspCurrencies||[],e.pspCurrency=e.pspCurrencies.length>0?e.pspCurrencies[0]:null,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:e.pspCurrencies},e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.urlReady=!1;var C=[];Array(5).fill(null).reduce(function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return C.push(a),a},e.config.visual<=e.config.min?e.config.min:e.config.visual),C.length>0&&(e.config.listAmounts=C),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.modal={actionText:r.translation.try_again,state:!1},e.getUrl=function(){return w()},e.iframeLoad=function(){o.hide(),e.iframeReady=!0,o.hide()},e.iframeLoadFail=function(){o.hide(),e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0},e.$on("$ionicView.beforeEnter",function(){t.params.method.hasOwnProperty("amountRequired")&&!t.params.method.amountRequired&&(e.showAmountSelect=!1,e.amount.value=1,w())}),e.$on("$ionicView.afterLeave",k),e.$on("clear",k)}]),controllers.controller("HostedPagePopupController",["$scope","$state","$filter","$timeout","$ionicLoading","$ionicHistory","$q","LocaleService","config","Validator","Storage","constants","UserService","API","Utils","ErrorService","$interval","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h){function b(e){if(1!==e.status||e.RedirectURL&&0===e.RedirectURL.length)throw new v({source:"HostedPagePopupController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function y(n){return s(function(a,i){function s(){e.paymentPopup&&e.paymentPopup.closed&&(f.cancel(l),e.paymentPopup=null,o.hide(),e.paymentMethods.length>1?t.go("root.app.wallet"):t.go("root.app.assets"))}function r(t){m.unsubscribe("depositConfirm"),f.cancel(l),e.paymentPopup&&e.paymentPopup.close();try{b(t)}catch(e){i(e)}a(t)}var l=f(s,100);m.subscribe("depositConfirm",r),!n.RedirectURL||n.PostData&&n.PostData.length||(e.paymentPopup.location=n.RedirectURL),n.RedirectURL&&n.PostData&&n.PostData.length&&(g.insertDocumentScripts(e.paymentPopup.document,n.PostData),e.paymentPopup.document.getElementsByTagName("body")[0].appendChild(g.generateForm(n.RedirectURL,n.PostData)),e.paymentPopup.document.getElementById("form3ds").submit())})}function w(){o.show(),k();var n={amount:parseInt(e.amount.value,10),pspCurrency:e.amount.pspCurrency||void 0,pspName:u.paymentMethodsBlueprint[t.params.method.name]||t.params.method.name,remarketing:h.get("remarketing")||""};return m.hostedPageDeposit(n).then(b).then(function(e){if(e.RedirectURL&&e.RedirectURL.length>0)return y(e)}).then(function(n){e.paymentPopup&&e.paymentPopup.close(),o.hide(),h.get("remarketing")&&h.remove("remarketing"),e.modal.textTitle=r.translation.messages.depositSuccess,e.modal.isError=!1,e.modal.actionText=r.translation.startTrading,e.modal.date=Date.now(),e.modal.transactionId=n.transactionId,e.modal.amount=n.amount,e.modal.currency=n.currency,e.modal.method=t.params.method.name,e.modal.state=!0,e.modal.back="root.app.assets"}).catch(function(t){o.hide(),e.modal.textTitle=r.translation.messages.depositFailed,e.paymentPopup&&e.paymentPopup.close(),e.modal.isError=!0,e.modal.textContent=r.translation.messages.depositFailedText,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0})}function k(){e.paymentPopup=window.open("","_blank","toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,left=10000, top=10000, width=10, height=10, visible=none")}function C(){m.unsubscribe("depositConfirm"),e.depositValue=null,e.user=null,e.paymentPopup=null,i.clearHistory()}r.wait().then(function(t){e.translation=t}),e.user=p.get(),e.paymentMethods=d.get("paymentMethods")||[],e.showAmountSelect=!0,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.paymentPopup=null,e.methodName=t.params.method.name||"",e.pspCurrencies=t.params.method.pspCurrencies||[],e.pspCurrency=e.pspCurrencies.length>0?e.pspCurrencies[0]:null,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:e.pspCurrencies},e.getUrl=function(){return w()};var S=[];Array(5).fill(null).reduce(function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return S.push(a),a},e.config.visual<=e.config.min?e.config.min:e.config.visual),S.length>0&&(e.config.listAmounts=S),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.modal={actionText:r.translation.try_again,state:!1},e.$on("$ionicView.beforeEnter",function(){t.params.method.hasOwnProperty("amountRequired")&&!t.params.method.amountRequired&&(e.showAmountSelect=!1,e.amount.value=1,w())}),e.$on("$ionicView.afterLeave",C),e.$on("clear",C)}]),controllers.controller("HostedPageWindowController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$window","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b){function y(e){if(1!==e.status)throw new f({source:"HostedPageController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function w(){var n={amount:parseInt(e.amount.value,10),pspCurrency:e.amount.pspCurrency||void 0,pspName:u.paymentMethodsBlueprint[t.params.method.name]||t.params.method.name,remarketing:b.get("remarketing")||""};return o.show(),v.hostedPageDeposit(n).then(y).then(function(e){if(e&&e.RedirectURL)return o.hide(),h.open(e.RedirectURL,"_self","hardwareback=no,location=0,menubar=0,closebuttoncaption=Back,hidden=yes"),t.go("root.app.assets")}).catch(function(t){o.hide(),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0})}function k(){e.user=null}r.wait().then(function(t){e.translation=t}),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.showAmountSelect=!0,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.methodName=t.params.method.name||"",e.pspCurrencies=t.params.method.pspCurrencies||[],e.pspCurrency=e.pspCurrencies.length>0?e.pspCurrencies[0]:null,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:e.pspCurrencies},e.urlReady=!1;var C=[];Array(5).fill(null).reduce(function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return C.push(a),a},e.config.visual<=e.config.min?e.config.min:e.config.visual),C.length>0&&(e.config.listAmounts=C),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.modal={actionText:r.translation.try_again,state:!1},e.getUrl=function(){return w()},e.$on("$ionicView.beforeEnter",function(){t.params.method.hasOwnProperty("amountRequired")&&!t.params.method.amountRequired&&(e.showAmountSelect=!1,e.amount.value=1,w())}),e.$on("$ionicView.afterLeave",k),e.$on("clear",k)}]),controllers.controller("InvestController",["$scope","$state","$filter","$q","$timeout","$ionicScrollDelegate","config","constants","Utils","ErrorService","AssetService","API","UserService","InvestCalcService","CurrencyConvertService","LocaleService","PnlMarginService","Storage",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h){function b(e){for(var t in e)e.hasOwnProperty(t)&&e[t].hasOwnProperty("lock")&&(e[t].lock=!1),e.hasOwnProperty(t)&&e[t].hasOwnProperty("keyboard")&&(e[t].keyboard="text")}function y(e,t){var n=angular.copy(t);delete n.checked,angular.merge(e,n)}function w(){e.loss.checked&&(e.loss.rate.lock||(e.loss.rate.value=S()),e.loss.pips.lock||(e.loss.pips.value=parseInt(T(),10))),e.profit.checked&&(e.profit.rate.lock||(e.profit.rate.value=A()),e.profit.pips.lock||(e.profit.pips.value=parseInt($(),10)))}function k(){var t=parseFloat(e.reach.value);e.action.match(/^buy/)?(t<e.asset.markupAsk()&&(e.action="buy_limit"),t>e.asset.markupAsk()&&(e.action="buy_stop")):e.action.match(/^sell/)&&(t>e.asset.markupBid()&&(e.action="sell_limit"),t<e.asset.markupBid()&&(e.action="sell_stop")),log("action updated",e.action)}function C(t,n,a,o,i){var s,r=p.get(),l=e.reach.checked?parseFloat(e.reach.value):m.getOpenPrice(t,e.asset),c=1===a?m.getClosePrice(t,e.asset,l,parseFloat(n),o):n,d=i,u=(e.asset.currency,r.currency,m.getPairVal(t,l,c,e.asset.digits));return 0===e.asset.profitMode&&e.asset.outputName.slice(-3),s=e.asset.profitMode<2?u*e.asset.contractSize*d:u*(e.asset.tickPrice/e.asset.tickSize)*d,s=g.doConvert(e.asset.convAssets,s,t,e.asset.profitMode),parseFloat(s)}function S(){var t=e.asset.digits,n=m.getPoints(10*parseFloat(e.loss.pips.value),t),a=e.reach.checked?parseFloat(e.reach.value):m.currentPrice(e.action,e.asset);return P(e.action,a,n,t)}function T(){var t=0,n=0,a=e.reach.checked?parseFloat(e.reach.value):m.currentPrice(e.action,e.asset);return e.action.match(/^sell/)&&(t=e.loss.rate.value-a),e.action.match(/^buy/)&&(t=a-e.loss.rate.value),n=m.fromPoints(t/10,e.asset.digits),parseInt(n,10)}function A(){var t=e.asset.digits,n=m.getPoints(10*parseFloat(e.profit.pips.value),t),a=e.reach.checked?parseFloat(e.reach.value):m.currentPrice(e.action,e.asset);return x(e.action,a,n,t)}function $(){var t=0,n=0,a=e.reach.checked?parseFloat(e.reach.value):m.currentPrice(e.action,e.asset);return e.action.match(/^sell/)&&(t=a-e.profit.rate.value),e.action.match(/^buy/)&&(t=e.profit.rate.value-a),n=m.fromPoints(t/10,e.asset.digits),parseInt(n,10)}function x(e,t,n,a){return e.match(/^sell/)?(t-n).toFixed(a):e.match(/^buy/)?(t+n).toFixed(a):void 0}function P(e,t,n,a){return e.match(/^sell/)?(t+n).toFixed(a):e.match(/^buy/)?(t-n).toFixed(a):void 0}function M(){var t,n=e.asset,a=e.action,o=e.reach.checked,i=parseFloat(e.reach.value),s=n.stopLevels;switch(a){case"buy_stop":return t=l.getDiffInPoints(i,n.markupAsk(),n.digits),o&&i>n.markupAsk()&&t>=s;case"sell_stop":return t=l.getDiffInPoints(i,n.markupBid(),n.digits),o&&i<n.markupBid()&&t>=s;case"sell_limit":return t=l.getDiffInPoints(i,n.markupBid(),n.digits),o&&i>n.markupBid()&&t>=s;case"buy_limit":return t=l.getDiffInPoints(i,n.markupAsk(),n.digits),o&&i<n.markupAsk()&&t>=s;default:return!1}}function D(){function t(){return 0===o?parseFloat(e.loss.pips.value)>=F:0===i?parseFloat(e.profit.pips.value)>=N:parseFloat(e.loss.pips.value)>=F&&parseFloat(e.profit.pips.value)>=N}if(e.asset){var n=e.action,a=e.asset,o=(e.profit.pips.lock?A():parseFloat(e.profit.rate.value))||0,i=(e.loss.pips.lock?S():parseFloat(e.loss.rate.value))||0,s=e.reach.checked,r=parseFloat(e.reach.value);return n.match(/^buy/)?0===o&&0===i||(0===o?(s?r>i:a.markupAsk()>i)&&t():0===i?(s?r<o:a.markupAsk()<o)&&t():(s?r<o&&r>i:a.markupAsk()<o&&a.markupAsk()>i)&&t()):n.match(/^sell/)?0===o&&0===i||(0===o?(s?r<i:a.markupBid()<i)&&t():0===i?(s?r>o:a.markupBid()>o)&&t():(s?r>o&&r<i:a.markupBid()>o&&a.markupBid()<i)&&t()):void 0}}function L(e){if(1!==e.status)throw new c({source:"InvestController",type:r.error.type.VALIDATION,code:e.code||"orderFailed",severity:"warning",data:{response:e}});return e}function I(){j(),B(),V(),z(),W(),H(),G(),Y(),Q(),e.asset=null}e.user=p.get(),e.user&&!e.user.activeTradingAccount&&t.go("signupPersonalProfile",{cache:!1}),e.navigate=function(e,n){t.go(e,n)},e.isFooter=!0,e.showFooter=function(){e.isFooter=!0},v.wait().then(function(t){e.translation=t}),e.category=t.params.category;var q=t.params.assetId;e.constants=r,e.action=t.params.action,e.asset=null,e.sltpAutoSet=r.sltpAutoSet||!1,e.hideSlTp=r.hideSlTp||!1,e.showConvertToUsd=r.showConvertToUsd||!1,e.investAmount={value:"0.01"},e.rate={checked:!1,value:0},e.asset=d.collection.get({id:parseInt(q,10)}),e.investAmount.value=e.asset.minLot<1?e.constants.defaultInvestAmount:e.asset.minLot.toFixed(2),e.rate.value=e.action.match(/^buy/)?e.asset.markupAsk().toFixed(e.asset.digits):e.asset.markupBid().toFixed(e.asset.digits);var F=m.getPipsLimit(e.asset),N=Math.ceil(e.asset.stopLevels/10);e.convAssets=g.find(d,e.user.currency,"USD","",1);var E={checked:!1,pips:{value:F||0,lock:!0,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}},R={checked:!1,pips:{value:N||0,lock:!0,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}},U={checked:!1,pips:{value:"",lock:!1,keyboard:"text"},rate:{value:"",lock:!1,keyboard:"text"}},O={checked:!1,value:"0.0000",keyboard:"text"};e.loss=angular.copy(U),e.profit=angular.copy(U),e.reach=angular.copy(O),e.keyboardModelName=null,e.isKeyboardShow=!1,e.inputFocus=function(t,n,a,o,i,s){if(t.hasOwnProperty("lock")&&!t.lock||t.hasOwnProperty("checked")&&!t.checked)return e.isKeyboardShow=!1,void(e.keyboardModelName=null);e.isKeyboardShow=!0,e.keyboardModelName={model:t,name:n,minval:a,maxval:o,digits:i,viewName:s},e.showFooter()},e.myCallback=function(t){t?(_.set(e,t.name,t.model.value),e.isKeyboardShow=!1,e.keyboardModelName=null):(e.isKeyboardShow=!1,e.keyboardModelName=null)},e.lock=function(t,n){e.isFooter=!1,b(e[t]),e[t][n].lock=!0,
"android"===h.get("platform")&&(e[t][n].keyboard="number"),i.scrollBottom(!0)},e.updateReach=function(){e.isFooter=!1,"android"===h.get("platform")&&(e.reach.keyboard="number"),i.scrollBottom(!0)},e.pnlData=f.data;var B=e.$watch("loss.checked",function(t,n){t!==n&&t&&y(e.loss,E),t===n||t||(e.loss=angular.copy(U))}),V=e.$watch("profit.checked",function(t,n){t!==n&&t&&y(e.profit,R),t===n||t||(e.profit=angular.copy(U))}),z=e.$watch("loss.pips.value",function(t,n){t!==n&&t&&!e.loss.rate.lock&&(e.loss.rate.value=S())}),W=e.$watch("loss.rate.value",function(t,n){t!==n&&t&&!e.loss.pips.lock&&(e.loss.pips.value=parseInt(T(),10))}),H=e.$watch("profit.pips.value",function(t,n){t!==n&&t&&!e.profit.rate.lock&&(e.profit.rate.value=A())}),G=e.$watch("profit.rate.value",function(t,n){t!==n&&t&&!e.profit.pips.lock&&(e.profit.pips.value=parseInt($(),10))}),j=e.$watchGroup(["asset.bid","asset.ask"],function(e,t){e&&t&&(e[0]!==t[0]||e[1]!==t[1])&&w()}),Y=e.$watch("reach.checked",function(n,a){n!==a&&(n?(i.scrollBottom(!0),e.reach.value=e.action.match(/^buy/)?e.asset.markupAsk():e.asset.markupBid()):(y(e.reach,O),e.action=t.params.action),w())}),Q=e.$watch("reach.value",function(t,n){t!==n&&t&&e.reach.checked&&(k(),w())});e.requiredMargin=function(){var t=0,n=p.get();return e.asset&&parseFloat(e.investAmount.value)>0&&(t=m.calcMargin(parseFloat(e.investAmount.value),e.action||"buy",e.asset,n)),t?t.baseVal:0},e.requiredMarginUsd=function(){return g.doConvert(e.convAssets,l.decimalRound(e.requiredMargin(),e.user.currencyDigits),"buy",1)},e.availableFundsUsd=function(){return g.doConvert(e.convAssets,l.decimalRound(e.pipValue(),e.user.currencyDigits),"buy",1)},e.calcLossValue=function(){if(e.asset){var t=e.loss.pips.lock?1:2,n=1===t?10*e.loss.pips.value:e.loss.rate.value,a=n>0?C(e.action,n,t,"stopLoss",parseFloat(e.investAmount.value)):0;return e.loss.checked?a:0}},e.calcProfitValue=function(){if(e.asset){var t=e.profit.pips.lock?1:2,n=1===t?10*e.profit.pips.value:e.profit.rate.value,a=n>0?C(e.action,n,t,"takeProfit",parseFloat(e.investAmount.value)):0;return e.profit.checked?a:0}},e.pipValue=function(t){var n=t||"buy";return e.asset&&parseFloat(e.investAmount.value)>0?C(n,10,1,"takeProfit",e.investAmount.value):0},e.sltpAutoSet&&function(){e.loss.checked=!0,e.profit.checked=!0,e.lock("profit","pips"),e.lock("loss","pips");var t=Math.max(Math.floor(e.requiredMargin()/e.pipValue(e.action)),F),n=Math.max(Math.floor(e.requiredMargin()/e.pipValue(e.action)),N);e.loss.pips.value=t.toString(),e.profit.pips.value=n.toString(),w(),e.showFooter()}(),e.validate=function(){if(e.asset){var t=D(),n=parseFloat(e.investAmount.value);if(e.reach.checked){var a=M();return n>0&&t&&a}return n>0&&t}};var Z={isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1};e.modal=angular.copy(Z),e.createTrade=function(){var t={SymbolID:e.asset.id,Lots:parseFloat(e.investAmount.value),OpenPrice:e.reach.checked?parseFloat(e.reach.value):m.getOpenPrice(e.action,e.asset),StopLoss:(e.loss.pips.lock?S():parseFloat(e.loss.rate.value))||0,TakeProfit:(e.profit.pips.lock?A():parseFloat(e.profit.rate.value))||0,Expiration:0,Cmd:r.actions[e.action],Slippage:0,Comment:""};return e.modal.isProcess=!0,e.modal.textTitle=v.translation.messages.orderProcessing,e.modal.textContent="",e.modal.state=!0,e.modal.isMoney=!1,u.mt4OpenPosition(t).then(L).then(function(t){e.loss=angular.copy(U),e.profit=angular.copy(U),e.reach=angular.copy(O),e.investAmount.value="";var n=r.actionsId[t.Trade.Cmd].replace("_limit","").replace("_stop",""),a=t.Trade.OpenPrice.toFixed(t.Trade.Digits);e.modal.textTitle=t.Trade.Cmd>1&&t.Trade.Cmd<6?v.translation.openPending:v.translation.openPosition,e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textContent=["#"+t.Trade.OrderID+"&zwj;",v.translation[n],t.Trade.OutputName,v.translation.at,a,v.translation.successful].join(" "),e.modal.actionText=v.translation.continueTrading,e.modal.back={state:"root.app.assets",params:{category:e.category}}}).catch(function(t){if(e.modal.textTitle=v.translation.messages.orderFailed,e.modal.textContent=v.translation.messages[t.code]||v.translation.messages.general_error_text,e.modal.isError=!0,e.modal.isProcess=!1,e.modal.actionText=v.translation.tryAgain,t.code&&1134===t.code)return e.modal.action2Text=v.translation.addFunds,void(e.modal.isMoney=!0)})},e.$on("$ionicView.beforeEnter",function(){return p.kycCheck()}),e.$on("$ionicView.beforeLeave",I),e.$on("$ionicView.unloaded",I),e.$on("clear",I)}]),controllers.controller("InviteFriendsController",["$scope","$state","LocaleService","constants","$ionicLoading","UserService","API","Storage","ionicToast",function(e,t,n,a,o,i,s,r,l){function c(e){if(1!==e.status)throw new ErrorService({source:"InviteFriendsController",type:a.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}n.wait().then(function(t){e.translation=t}),e.user=i.get(),o.hide(),e.inputModel={},e.signedUpFriends=r.get("inviteFriends").filter(function(e){return!e.bonusUsd}),e.qualifiedFriends=r.get("inviteFriends").filter(function(e){return!!e.bonusUsd}),e.totalEarnings=e.qualifiedFriends.reduce(function(e,t){return e+t.bonusUsd},0),e.friendInviteActive=r.get("friendInviteActive"),e.friendInviteActive&&s.getFriendInviteId().then(c).then(function(t){var n=new URL(r.get("friendRegistrationUrl"));n.searchParams.append("invite_id",t.referralLink),e.inputModel.link=n.href}),e.copyLink=function(){var t=document.getElementsByClassName("link-input-pandats");HTMLCollection.prototype.isPrototypeOf(t)&&t.length&&(t=t[0]),t&&(t.select(),t.setSelectionRange(0,e.inputModel.link.length),document.execCommand("copy"),t.blur(),window.getSelection().removeAllRanges(),l.show(e.translation.copiedToCB,"top",!1,5e3,""))}}]),controllers.controller("KycCheckController",["$scope","$state","$ionicLoading","LocaleService","UserService","AccountService","Utils","Storage","constants",function(e,t,n,a,o,i,s,r,l){a.wait().then(function(t){e.translation=t,e.showKycModal()}),e.message="",e.onNext=function(){var e=l.verificationProvider,n=e&&"internal"!==e?"internal-v2"===e?"root.app.verification-v2":"sumsub"===e?"root.app.verificationSumsub":"":"root.app.uploadDocuments";return n?t.go(n,{cache:!1}):void console.warn("Unknown verification provider")},e.onCancel=function(){return t.go("root.app.assets",{cache:!1})},e.showKycModal=function(){var t=o.get(),n=t.firstName+" "+t.lastName,a=t.complianceStatusNegative?"compliance_status_negative":"compliance_status_positive";e.message=(e.translation[a]||"").replace(/\%name\%/,n)}}]),controllers.controller("LoginController",["$scope","$ionicHistory","$state","$ionicLoading","config","constants","ErrorService","UserService","LoginService","LocaleService","Validator","AccountService","$injector","Utils","SocialAuthService","Storage",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v){function f(t){var o=r.get();return o&&o.isLoggedInMT4?n.go("root.app.assets",{cache:!1}):(e.loadingMessage=c.translation.logging_in,a.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),function(){return t.provider&&t.tokenThirdParty?l.loginThirdParty(t.email,t.provider,t.tokenThirdParty):l.login(t.email,t.password)}().then(function(){e.loadingMessage=c.translation.starting}).then(l.initServices).then(function(){p.get("Init").isInitialized=!0,a.hide();var e=u.checkTradingAccounts();if(e)return n.go(e);if(i.showPersonal){var t=r.get();if(!t.tnc&&i.tncPopup)return n.go("tnc");if(t.registrationState<=i.userState.personal)return n.go("root.app.personalDetails");if("approved"!==t.complianceStatus&&t.registrationState===i.userState.questionnaire&&i.kycCheck)return n.go("kycCheck")}if(i.viewQuestionnaireEnable&&i.showQuestionnaireInfo&&v.get("regulated")){var t=r.get();if(t.registrationState===i.userState.questionnaire&&""===t.classification&&t.liveAccountExists)return n.go("questionnaireMessage")}n.go("root.app.assets")}).catch(function(t){return t.data&&t.data.response&&3035===t.data.response.code&&i.enable2FA?(a.hide(),n.go("login-otp",{cache:!1,loginData:{email:e.loginForm.email,password:e.loginForm.password}})):t===i.loginStatus.failedActiveAccount?(a.hide(),e.modal.isError=!0,e.modal.textTitle=c.translation.messages.mt4AuthFailed,e.modal.back="root.app.manageaccounts",void(e.modal.state=!0)):void l.logout().then(function(){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&c.translation.messages[t.code]||c.translation.messages.Err600,e.modal.state=!0}).catch(function(t){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&c.translation.messages[t.code]||c.translation.messages.Err600,e.modal.state=!0})}))}c.wait().then(function(t){e.translation=t}),e.navigate=function(e){n.go(e)},e.loginForm={email:"",password:""},e.modal={actionText:c.translation.try_again,state:!1},e.signUpURL=m.createLinkByLang("externalLinks.signUp",c.lang,"externalLinks.signUpDefault"),e.template=v.get("template"),e.validator=d.getPattern,e.socialAuthService=g,e.disableSignUp=i.disableSignup,e.login=function(e){if(m.formRevalidate(e),e.$valid)return f(this.loginForm)},e.signinWithGoogle=function(){return g.signInWithGoogle().then(function(e){return f({email:e.email,password:"",provider:"google",tokenThirdParty:e.idToken})})},e.signinWithFacebook=function(){return g.signInWithFacebook().then(function(e){return f({email:e.email,password:"",provider:"facebook",tokenThirdParty:e.token})})}}]),controllers.controller("LoginOTPController",["$scope","$state","LocaleService","LoginService","UserService","AccountService","Validator","$stateParams","$ionicLoading","$injector","constants",function(e,t,n,a,o,i,s,r,l,c,d){n.wait().then(function(t){e.translation=t}),e.navigate=function(e){t.go(e)},r.loginData||t.navigate("login"),e.loginForm={otpCode:""},e.modal={actionText:n.translation.try_again,state:!1},e.validator=s.getPattern,e.login=function(s){if(s.$valid){var d=o.get();if(d&&d.isLoggedInMT4)return t.go("root.app.assets",{cache:!1});e.loadingMessage=n.translation.logging_in,l.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),a.login(r.loginData.email,r.loginData.password,e.loginForm.otpCode).then(function(){e.loadingMessage=n.translation.starting}).then(a.initServices).then(function(){c.get("Init").isInitialized=!0,l.hide();var e=i.checkTradingAccounts();if(e)return t.go(e);t.go("root.app.assets")}).catch(function(t){if(t&&"authFailed"===t.code)return l.hide(),e.modal.isError=!0,e.modal.textTitle=n.translation.messages.mt4AuthFailed,e.modal.back="login",void(e.modal.state=!0);a.logout().then(function(){l.hide(),e.modal.isError=!0,e.modal.textTitle=t&&n.translation.messages[t.code]||n.translation.messages.Err600,e.modal.state=!0}).catch(function(t){l.hide(),e.modal.isError=!0,e.modal.textTitle=t&&n.translation.messages[t.code]||n.translation.messages.Err600,e.modal.state=!0})})}}}]),controllers.controller("LoginWebtraderController",["$scope","$ionicHistory","$state","$ionicLoading","config","constants","ErrorService","UserService","LoginService","LocaleService","Validator","AccountService","$injector","Utils","SocialAuthService","Storage",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v){function f(t){var o=r.get();return o&&o.isLoggedInMT4?n.go("root.app.assets",{cache:!1}):(e.loadingMessage=c.translation.logging_in,a.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),function(){return t.provider&&t.tokenThirdParty?l.loginThirdParty(t.email,t.provider,t.tokenThirdParty):i.authType&&"webtrader"===i.authType?l.loginWebTrader(t.login,t.password,t.source):l.login(t.email,t.password)}().then(function(){e.loadingMessage=c.translation.starting}).then(l.initServices).then(function(){p.get("Init").isInitialized=!0,a.hide();var e=u.checkTradingAccounts();if(e)return n.go(e);if(i.showPersonal){var t=r.get();if(!t.tnc&&i.tncPopup)return n.go("tnc");if(t.registrationState<=i.userState.personal)return n.go("root.app.personalDetails");if("approved"!==t.complianceStatus&&t.registrationState===i.userState.questionnaire&&i.kycCheck)return n.go("kycCheck")}if(i.viewQuestionnaireEnable&&v.get("regulated")){var t=r.get();if(t.registrationState===i.userState.questionnaire&&""===t.classification&&t.liveAccountExists)return n.go("questionnaireMessage")}n.go("root.app.assets")}).catch(function(t){return t.data&&t.data.response&&3035===t.data.response.code&&i.enable2FA?(a.hide(),n.go("login-otp",{cache:!1,loginData:{email:e.loginForm.email,password:e.loginForm.password}})):t===i.loginStatus.failedActiveAccount?(a.hide(),e.modal.isError=!0,e.modal.textTitle=c.translation.messages.mt4AuthFailed,e.modal.back="root.app.manageaccounts",void(e.modal.state=!0)):void l.logout().then(function(){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&c.translation.messages[t.code]||c.translation.messages.Err600,e.modal.state=!0}).catch(function(t){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&c.translation.messages[t.code]||c.translation.messages.Err600,e.modal.state=!0})}))}c.wait().then(function(t){e.translation=t}),e.navigate=function(e){n.go(e)},e.loginForm={login:"",password:"",source:void 0},e.modal={actionText:c.translation.try_again,state:!1},e.signUpURL=m.createLinkByLang("externalLinks.signUp",c.lang,"externalLinks.signUpDefault"),e.template=v.get("template"),e.validator=d.getPattern,e.socialAuthService=g,e.disableSignUp=i.disableSignup,e.source=i.source,e.login=function(e){if(m.formRevalidate(e),e.$valid)return f(this.loginForm)},e.signinWithGoogle=function(){return g.signInWithGoogle().then(function(e){return f({email:e.email,password:"",provider:"google",tokenThirdParty:e.idToken})})},e.signinWithFacebook=function(){return g.signInWithFacebook().then(function(e){return f({email:e.email,password:"",provider:"facebook",tokenThirdParty:e.token})})}}]),controllers.controller("ManageAccountsController",["$scope","$rootScope","$state","$ionicPopover","$ionicLoading","$ionicHistory","LocaleService","UserService","constants","PnlMarginService","LoginService","LocalStorage","Utils","API","UserControl","ErrorService","Storage",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f){function h(){if(e.user){if(e.realAccounts=_.filter(e.user.tradingAccounts,{live:!0}),e.demoAccounts=_.filter(e.user.tradingAccounts,{live:!1}),!e.user.activeTradingAccount)return;_.remove(e.realAccounts,{login:e.user.activeTradingAccount.login,live:e.user.activeTradingAccount.live}),_.remove(e.demoAccounts,{login:e.user.activeTradingAccount.login,live:e.user.activeTradingAccount.live})}}function b(e){if(1!==e.status)throw new v({source:"ManageAccountsController",type:l.error.type.VALIDATION,code:e.code||"switchAccountFailed",severity:"warning",data:{response:e}});return e}function y(t,a){var s={login:t,live:p.fromBoolean(a)};return m.mt4SwitchAccount(s).then(b).then(function(){return e.user.switchAccount(t,a),e.user=r.get(),d.mt4ClearServices().then(d.mt4InitServices).then(function(){o.hide(),i.clearHistory(),n.go("root.app.assets",{cache:!1})})})}s.wait().then(function(t){e.translation=t}),e.user=r.get(),e.pnl=c,e.constants=l,e.showCredit=f.get("allowCredit"),a.fromTemplateUrl("templates/manageaccount-menu.html",{scope:e}).then(function(t){e.popover=t}),e.openPopover=function(t){e.popover.show(t)},e.navigate=function(t,a){e.popover.remove(),n.go(t,a)},e.user.tradingAccounts.length>0&&h(),e.modal={actionText:s.translation.try_again,state:!1},e.switchAccount=function(t,n){return e.loadingMessage=s.translation.logging_in,o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),y(t,n).then(function(){return h()}).catch(function(t){o.hide(),e.modal.isProcess=!1,e.modal.isError=!0,e.modal.textTitle=s.translation.messages.mt4AuthFailed,e.modal.back="root.app.manageAccounts",e.modal.state=!0})},e.logout=function(){e.loadingMessage=s.translation.logging_out,o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),d.logout().then(function(){o.hide(),n.go("welcome")}).catch(function(e){o.hide(),n.go("welcome")})},e.$on("$ionicView.beforeEnter",function(){if(e.state=g.getState(),e.state)return n.go(e.state,{cache:!1});if(e.user&&!e.user.tnc&&l.tncPopup)return n.go("tnc",{cache:!1});if(e.user&&!l.skipRegistrationStateCheck)switch(e.user.registrationState){case l.userState.initial:return n.go("signupPersonalProfile",{cache:!1});case l.userState.personal:return n.go("signupQuestionnaire",{cache:!1})}return r.kycCheck()}),e.$on("$destroy",function(){e.popover.remove()})}]),controllers.controller("MenuController",["$scope","$state","$ionicLoading","LoginService","LocaleService","UserService","constants","Storage","config",function(e,t,n,a,o,i,s,r,l){o.wait().then(function(t){e.translation=t}),e.lang=o.lang,e.constants=s,e.user=i.get(),e.friendInviteActive=r.get("friendInviteActive"),e.verificationRequered=r.get("verification"),e.authType=s.authType?s.authType:"newforex";var c=e.$watch(i.get,function(t,n){t!==n&&t&&(e.user=i.get())});e.customLinks=l.customLinks||[],e.logout=function(){r.remove("registration"),e.loadingMessage=o.translation.logging_out,n.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),a.logout().then(function(){n.hide(),t.go("welcome")}).catch(function(e){n.hide(),t.go("welcome")})},e.$on("clear",function(){c()}),e.openCustomLinkByLang=function(t){var n=t[e.lang]?t[e.lang].url:t.en.url;window.open(n)},e.linkTitleByLang=function(t){return t[e.lang]?t[e.lang].title:t.en.title},e.openLink=function(e){window.open(s.externalLinks[e])}}]),controllers.controller("ModifyPendingTradeController",["$scope","$state","$filter","$q","$timeout","$ionicScrollDelegate","config","constants","Utils","ErrorService","AssetService","OpenTradeService","API","UserService","InvestCalcService","CurrencyConvertService","LocaleService","PnlMarginService","Storage",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b){function y(e){for(var t in e)e.hasOwnProperty(t)&&e[t].hasOwnProperty("lock")&&(e[t].lock=!1),e.hasOwnProperty(t)&&e[t].hasOwnProperty("keyboard")&&(e[t].keyboard="text")}function w(e,t){var n=angular.copy(t);delete n.checked,angular.merge(e,n)}function k(){e.loss.checked&&(e.loss.rate.lock||(e.loss.rate.value=S(),e.lossOrigin.rate.value=e.loss.rate.value),e.loss.pips.lock||(e.loss.pips.value=parseInt(T(),10),e.lossOrigin.pips.value=e.loss.pips.value)),e.profit.checked&&(e.profit.rate.lock||(e.profit.rate.value=A(),e.profitOrigin.rate.value=e.profit.rate.value),e.profit.pips.lock||(e.profit.pips.value=parseInt($(),10),e.profitOrigin.pips.value=e.profit.pips.value))}function C(t,n,a,o,i){if(e.trade){var s,r=m.get(),l=parseFloat(e.reach.value),c=1===a?g.getClosePrice(t,e.trade.asset,l,parseFloat(n),o):n,d=i,u=(e.trade.asset.currency,r.currency,g.getPairVal(t,l,c,e.trade.asset.digits));return 0===e.trade.asset.profitMode&&e.trade.asset.outputName.slice(-3),s=e.trade.asset.profitMode<2?u*e.trade.asset.contractSize*d:u*(e.trade.asset.tickPrice/e.trade.asset.tickSize)*d,s=v.doConvert(e.trade.asset.convAssets,s,t,e.trade.asset.profitMode),parseFloat(s)}}function S(){var t=e.trade.asset.digits,n=g.getPoints(10*parseFloat(e.loss.pips.value),t),a=parseFloat(e.reach.value);return e.loss.checked?P(e.trade.action,a,n,t):0}function T(){var t=0,n=0;return e.trade.action.match(/^sell/)&&(t=e.loss.rate.value-parseFloat(e.reach.value)),e.trade.action.match(/^buy/)&&(t=parseFloat(e.reach.value)-e.loss.rate.value),n=g.fromPoints(t/10,e.trade.asset.digits),n.toFixed(0)}function A(){var t=e.trade.asset.digits,n=g.getPoints(10*parseFloat(e.profit.pips.value),t),a=parseFloat(e.reach.value);return e.profit.checked?x(e.trade.action,a,n,t):0}function $(){var t=0,n=0;return e.trade.action.match(/^sell/)&&(t=parseFloat(e.reach.value)-e.profit.rate.value),e.trade.action.match(/^buy/)&&(t=e.profit.rate.value-parseFloat(e.reach.value)),n=g.fromPoints(t/10,e.trade.asset.digits),n.toFixed(0)}function x(e,t,n,a){return e.match(/^sell/)?t-n:e.match(/^buy/)?t+n:void 0}function P(e,t,n,a){return e.match(/^sell/)?t+n:e.match(/^buy/)?t-n:void 0}function M(){var t,n=e.trade.asset,a=e.trade.action,o=parseFloat(e.reach.value),i=e.trade.asset.stopLevels;switch(a){case"buy_stop":return t=l.getDiffInPoints(o,n.markupAsk(),n.digits),o>n.markupAsk()&&t>=i;case"sell_stop":return t=l.getDiffInPoints(o,n.markupBid(),n.digits),o<n.markupBid()&&t>=i;case"sell_limit":return t=l.getDiffInPoints(o,n.markupBid(),n.digits),o>n.markupBid()&&t>=i;case"buy_limit":return t=l.getDiffInPoints(o,n.markupAsk(),n.digits),o<n.markupAsk()&&t>=i;default:return!1}}function D(){if(e.trade){var t=e.trade.action,n=(e.trade.asset,(e.profit.pips.lock?A():parseFloat(e.profit.rate.value))||0),a=(e.loss.pips.lock?S():parseFloat(e.loss.rate.value))||0,o=parseFloat(e.reach.value),i=function(){return 0===n?parseFloat(e.loss.pips.value)>=F:0===a?parseFloat(e.profit.pips.value)>=F:parseFloat(e.loss.pips.value)>=F&&parseFloat(e.profit.pips.value)>=F};return t.match(/^buy/)?0===n&&0===a||(0===n?o>a&&i():0===a?o<n&&i():o<n&&o>a&&i()):t.match(/^sell/)?0===n&&0===a||(0===n?o<a&&i():0===a?o>n&&i():o>n&&o<a&&i()):void 0}}function L(e){if(1!==e.status)throw new c({source:"ModifyTradeController",type:r.error.type.VALIDATION,code:e.Description||"orderFailed",severity:"warning",data:{response:e}});return e}function I(){log("clear modify trade controller"),H(),U(),O(),B(),V(),z(),W(),j(),G(),e.pnlData=null,e.trade=null,e.user=null}e.user=m.get(),e.user&&!e.user.activeTradingAccount&&t.go("signupPersonalProfile",{cache:!1}),e.isFooter=!0,e.showFooter=function(t){e.isFooter=!0,t&&t.hasOwnProperty("keyboard")&&(t.keyboard="text")},e.translate=f.translation,e.constants=r,e.sltpAutoSet=r.sltpAutoSet||!1;var q=t.params.orderId;e.trade=null;e.investAmount={value:"",keyboard:"text"},e.rate={checked:!1,value:0},e.trade=u.collection.get({orderId:parseInt(q,10)}),e.investAmount.value=e.trade.lots,e.user=m.get();var F=parseInt(e.trade.asset.stopLevels/10,10),N={checked:!1,pips:{value:F||0,lock:!0,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}},E={checked:!1,pips:{value:0,lock:!1,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}},R={value:"0.0000",keyboard:"text"};e.loss=angular.copy(E),e.profit=angular.copy(E),e.lossOrigin=angular.copy(N),e.profitOrigin=angular.copy(N),e.reach=angular.copy(R),e.reach.value=e.trade.openPrice.toFixed(e.trade.asset.digits),e.keyboardModelName=null,e.isKeyboardShow=!1,e.inputFocus=function(t,n,a,o,i,s){if(t.hasOwnProperty("lock")&&!t.lock||t.hasOwnProperty("checked")&&!t.checked)return e.isKeyboardShow=!1,void(e.keyboardModelName=null);e.isKeyboardShow=!0,e.keyboardModelName={model:t,name:n,minval:a,maxval:o,digits:i,viewName:s},e.showFooter()},e.myCallback=function(t){t?(_.set(e,t.name,t.model.value),e.isKeyboardShow=!1,e.keyboardModelName=null):(e.isKeyboardShow=!1,e.keyboardModelName=null)},e.lock=function(t,n){e.isFooter=!1,y(e[t]),e[t][n].lock=!0,"pips"===n&&(e[t][n].value=Math.abs(e[t][n].value),k()),"android"===b.get("platform")&&(e[t][n].keyboard="number"),i.scrollBottom(!0)},e.updateReach=function(){e.isFooter=!1,"android"===b.get("platform")&&(e.reach.keyboard="number")},e.updateAmount=function(){e.isFooter=!1,"android"===b.get("platform")&&(e.investAmount.keyboard="number")},e.pnlData=h.data;var U=e.$watch("loss.checked",function(t,n){t!==n&&t&&w(e.loss,N),t===n||t||(e.loss=angular.copy(E))}),O=e.$watch("profit.checked",function(t,n){t!==n&&t&&w(e.profit,N),t===n||t||(e.profit=angular.copy(E))}),B=e.$watch("loss.pips.value",function(t,n){t!==n&&t&&!e.loss.rate.lock&&(e.loss.rate.value=S())}),V=e.$watch("loss.rate.value",function(t,n){t===n||e.loss.pips.lock||(e.loss.pips.value=parseInt(T(),10))}),z=e.$watch("profit.pips.value",function(t,n){t!==n&&t&&!e.profit.rate.lock&&(e.profit.rate.value=A())}),W=e.$watch("profit.rate.value",function(t,n){t===n||e.profit.pips.lock||(e.profit.pips.value=parseInt($(),10))}),H=e.$watchGroup(["trade.asset.bid","trade.asset.ask"],function(e,t){if(e&&t&&(e[0]!==t[0]||e[1]!==t[1]))return k()}),G=e.$watch("reach.value",function(e,t){k()}),j=e.$watch("investAmount.value",function(t,n){e.trade.lots=parseFloat(t)});e.trade.takeProfit>0&&(e.profit.checked=!0,e.profit.rate.value=e.trade.takeProfit,e.profit.rate.lock=!0,e.profitOrigin.rate.value=e.profit.rate.value),e.trade.stopLoss>0&&(e.loss.checked=!0,e.loss.rate.value=e.trade.stopLoss,e.loss.rate.lock=!0,e.lossOrigin.rate.value=e.loss.rate.value),k(),e.requiredMargin=function(){var t,n=0,a=m.get();return e.trade&&e.trade.asset&&parseFloat(e.trade.lots)>0&&(t=g.getRequiredMargin(parseFloat(e.trade.lots),e.trade.asset,a),n=t,n=v.doConvert(e.trade.asset.convAssetsMargin,n,e.trade.action,e.trade.asset.profitMode)),n},e.pendingDistance=function(){return e.trade?g.fromPoints(Math.abs(e.trade.pendingCurrentPrice()-parseFloat(e.reach.value))/10,e.trade.asset.digits):"0.00"},e.calcLossValue=function(){if(e.trade){var t=e.loss.pips.lock?1:2,n=1===t?10*e.loss.pips.value:e.loss.rate.value,a=C(e.trade.action,n,t,"stopLoss",e.trade.lots);return e.loss.checked?a:0}},e.calcProfitValue=function(){if(e.trade){var t=e.profit.pips.lock?1:2,n=1===t?10*e.profit.pips.value:e.profit.rate.value,a=C(e.trade.action,n,t,"takeProfit",e.trade.lots);return e.profit.checked?a:0}},e.pipValue=function(){return e.trade.asset&&parseFloat(e.trade.lots)>0?C("buy",10,1,"takeProfit",e.trade.lots):0},e.validate=function(){if(e.trade){var t=D(),n=M();return parseFloat(e.investAmount.value)>0&&t&&n}},e.isModified=function(){return e.loss.checked===!e.trade.stopLoss||e.profit.checked===!e.trade.takeProfit||parseFloat(e.reach.value)!==parseFloat(e.trade.openPrice.toFixed(e.trade.asset.digits))||(e.loss.checked&&(e.loss.pips.value!==e.lossOrigin.pips.value||e.loss.rate.value!==e.lossOrigin.rate.value)||e.profit.checked&&(e.profit.pips.value!==e.profitOrigin.pips.value||e.profit.rate.value!==e.profitOrigin.rate.value))};var Y={isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1,back:"root.app.pendingTrades"};e.modal=angular.copy(Y),e.modifyTrade=function(){var t={OrderID:e.trade.orderId,OpenPrice:parseFloat(e.reach.value),StopLoss:(e.loss.pips.lock?parseFloat(S()):parseFloat(e.loss.rate.value))||0,TakeProfit:(e.profit.pips.lock?parseFloat(A()):parseFloat(e.profit.rate.value))||0,Lots:parseFloat(e.investAmount.value)};return e.modal.isProcess=!0,e.modal.textTitle=f.translation.messages.orderProcessing,e.modal.state=!0,p.mt4UpdatePosition(t).then(L).then(function(t){e.modal.textTitle=f.translation.modifyTrade,e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textContent=["#"+t.Trade.OrderID,f.translation.successupdated].join(" "),e.modal.actionText=f.translation.continueTrading}).catch(function(t){e.modal.textTitle=f.translation.modifyTrade,e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textContent=f.translation.messages[t.code]||f.translation.messages.Err600,e.modal.actionText=f.translation.tryAgain})},e.deleteTrade=function(){var t={OrderID:e.trade.orderId};return e.modal.state=!0,e.modal.isProcess=!0,p.mt4DeletePosition(t).then(L).then(function(){e.modal.textTitle=f.translation.deleteOrder,e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textContent=f.translation.orderDeleted,e.modal.actionText=f.translation.continueTrading}).catch(function(t){e.modal.textTitle=f.translation.deleteOrderFailed,e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textContent=f.translation.messages[t.code]||f.translation.messages.Err600,e.modal.actionText=f.translation.tryAgain})},e.$on("$ionicView.beforeLeave",I),e.$on("clear",I)}]),controllers.controller("ModifyTradeController",["$scope","$state","$filter","$q","$timeout","$ionicScrollDelegate","config","constants","Utils","ErrorService","AssetService","OpenTradeService","API","UserService","InvestCalcService","CurrencyConvertService","LocaleService","PnlMarginService","Storage","ServerTimeService","UserControl",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b,y,w){function k(e){for(var t in e)e.hasOwnProperty(t)&&e[t].hasOwnProperty("lock")&&(e[t].lock=!1),e.hasOwnProperty(t)&&e[t].hasOwnProperty("keyboard")&&(e[t].keyboard="text")}function C(e,t){var n=angular.copy(t);delete n.checked,angular.merge(e,n)}function S(){e.loss.checked&&(e.loss.rate.lock||(e.loss.rate.value=A(),e.lossOrigin.rate.value=e.loss.rate.value),e.loss.pips.lock||(e.loss.pips.value=parseInt($(),10),e.lossOrigin.pips.value=e.loss.pips.value)),e.profit.checked&&(e.profit.rate.lock||(e.profit.rate.value=x(),e.profitOrigin.rate.value=e.profit.rate.value),e.profit.pips.lock||(e.profit.pips.value=parseInt(P(),10),e.profitOrigin.pips.value=e.profit.pips.value))}function T(t,n,a,o,i){if(e.trade){var s,r=m.get(),l=e.trade.openPrice,c=g.updatedPrice(t,e.trade.asset),d=1===a?g.getClosePrice(t,e.trade.asset,c,parseFloat(n),o):n,u=i,p=(e.trade.asset.currency,r.currency,g.getPairVal(t,l,d,e.trade.asset.digits));return 0===e.trade.asset.profitMode&&e.trade.asset.outputName.slice(-3),s=e.trade.asset.profitMode<2?p*e.trade.asset.contractSize*u:p*(e.trade.asset.tickPrice/e.trade.asset.tickSize)*u,s=v.doConvert(e.trade.asset.convAssets,s,t,e.trade.asset.profitMode),parseFloat(s)}}function A(){var t=e.trade.asset.digits,n=g.getPoints(10*parseFloat(e.loss.pips.value),t);return e.loss.checked?D(e.trade.action,g.updatedPrice(e.trade.action,e.trade.asset),n,t):0}function $(){var t=0,n=0;return e.trade.action.match(/^sell/)&&(t=e.loss.rate.value-g.updatedPrice(e.trade.action,e.trade.asset)),e.trade.action.match(/^buy/)&&(t=g.updatedPrice(e.trade.action,e.trade.asset)-e.loss.rate.value),n=g.fromPoints(t/10,e.trade.asset.digits),n.toFixed(0)}function x(){var t=e.trade.asset.digits,n=g.getPoints(10*parseFloat(e.profit.pips.value),t);return e.profit.checked?M(e.trade.action,g.updatedPrice(e.trade.action,e.trade.asset),n,t):0}function P(){var t=0,n=0;return e.trade.action.match(/^sell/)&&(t=g.updatedPrice(e.trade.action,e.trade.asset)-e.profit.rate.value),e.trade.action.match(/^buy/)&&(t=e.profit.rate.value-g.updatedPrice(e.trade.action,e.trade.asset)),n=g.fromPoints(t/10,e.trade.asset.digits),n.toFixed(0)}function M(e,t,n,a){return e.match(/^sell/)?t-n:e.match(/^buy/)?t+n:void 0}function D(e,t,n,a){return e.match(/^sell/)?t+n:e.match(/^buy/)?t-n:void 0}function L(){function t(){return 0===o?parseFloat(e.loss.pips.value)>=N:0===i?parseFloat(e.profit.pips.value)>=N:parseFloat(e.loss.pips.value)>=N&&parseFloat(e.profit.pips.value)>=N}if(e.trade){var n=e.trade.action,a=e.trade.asset,o=(e.profit.pips.lock?x():parseFloat(e.profit.rate.value))||0,i=(e.loss.pips.lock?A():parseFloat(e.loss.rate.value))||0;return n.match(/^buy/)?0===o&&0===i||(0===o?a.markupBid()>i&&t():0===i?a.markupBid()<o&&t():a.markupBid()<o&&a.markupBid()>i&&t()):n.match(/^sell/)?0===o&&0===i||(0===o?a.markupAsk()<i&&t():0===i?a.markupAsk()>o&&t():a.markupAsk()>o&&a.markupAsk()<i&&t()):void 0}}function I(e){if(1!==e.status)throw new c({source:"ModifyTradeController",type:r.error.type.VALIDATION,code:e.Description||"orderFailed",severity:"warning",data:{response:e}});return e}function q(){log("clear modify trade controller"),H(),U(),O(),B(),V(),z(),W(),e.showPartialClose=!1,e.pnlData=null,e.trade=null,e.user=null}e.user=m.get(),e.user&&!e.user.activeTradingAccount&&t.go("signupPersonalProfile",{cache:!1}),e.clientTimeZone=y.timeZoneOffset>=0?"+"+y.timeZoneOffset.toString():y.timeZoneOffset.toString(),e.isFooter=!0,e.showPartialClose=!1,e.partialCloseChecked=!1,e.showFooter=function(){e.isFooter=!0},e.translate=f.translation;var F=t.params.orderId;e.constants=r,e.sltpAutoSet=r.sltpAutoSet||!1,e.trade=null,e.rate={checked:!1,value:0},e.trade=u.collection.get({orderId:parseInt(F,10)}),e.user=m.get();var N=parseInt(e.trade.asset.stopLevels/10,10);e.investAmount={value:e.trade.lots};var E={checked:!1,pips:{value:N||0,lock:!0,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}},R={checked:!1,pips:{value:0,lock:!1,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}};e.loss=angular.copy(R),e.profit=angular.copy(R),e.lossOrigin=angular.copy(E),e.profitOrigin=angular.copy(E),
e.keyboardModelName=null,e.isKeyboardShow=!1,e.inputFocus=function(t,n,a,o,i,s){if(t.hasOwnProperty("lock")&&!t.lock||t.hasOwnProperty("checked")&&!t.checked)return e.isKeyboardShow=!1,void(e.keyboardModelName=null);console.log(t,n,a,o,i,s),e.isKeyboardShow=!0,e.keyboardModelName={model:t,name:n,minval:a,maxval:o,digits:i,viewName:s},e.showFooter()},e.myCallback=function(t){t?(_.set(e,t.name,t.model.value),e.isKeyboardShow=!1,e.keyboardModelName=null):(e.isKeyboardShow=!1,e.keyboardModelName=null)},e.lock=function(t,n){e.isFooter=!1,k(e[t]),e[t][n].lock=!0,"pips"===n&&(e[t][n].value=Math.abs(e[t][n].value),S()),"android"===b.get("platform")&&(e[t][n].keyboard="number"),i.scrollBottom(!0)},e.pnlData=h.data;var U=e.$watch("loss.checked",function(t,n){t!==n&&t&&C(e.loss,E),t===n||t||(e.loss=angular.copy(R))}),O=e.$watch("profit.checked",function(t,n){t!==n&&t&&C(e.profit,E),t===n||t||(e.profit=angular.copy(R))}),B=e.$watch("loss.pips.value",function(t,n){t!==n&&t&&!e.loss.rate.lock&&(e.loss.rate.value=A())}),V=e.$watch("loss.rate.value",function(t,n){t===n||e.loss.pips.lock||(e.loss.pips.value=parseInt($(),10))}),z=e.$watch("profit.pips.value",function(t,n){t!==n&&t&&!e.profit.rate.lock&&(e.profit.rate.value=x())}),W=e.$watch("profit.rate.value",function(t,n){t===n||e.profit.pips.lock||(e.profit.pips.value=parseInt(P(),10))}),H=e.$watchGroup(["trade.asset.bid","trade.asset.ask"],function(e,t){if(e&&t&&(e[0]!==t[0]||e[1]!==t[1]))return S()});e.trade.takeProfit>0&&(e.profit.checked=!0,e.profit.rate.value=e.trade.takeProfit,e.profit.rate.lock=!0,e.profitOrigin.rate.value=e.profit.rate.value),e.trade.stopLoss>0&&(e.loss.checked=!0,e.loss.rate.value=e.trade.stopLoss,e.loss.rate.lock=!0,e.lossOrigin.rate.value=e.loss.rate.value),S(),e.requiredMargin=function(){var t,n=0,a=m.get();return e.trade.asset&&parseFloat(e.trade.lots)>0&&(t=g.getRequiredMargin(parseFloat(e.trade.lots),e.trade.asset,a),n=t,n=v.doConvert(e.trade.asset.convAssetsMargin,n,e.trade.action,e.trade.asset.profitMode)),n},e.calcLossValue=function(){if(e.trade){var t=e.loss.pips.lock?1:2,n=1===t?10*e.loss.pips.value:e.loss.rate.value,a=T(e.trade.action,n,t,"stopLoss",e.trade.lots);return e.loss.checked?a:0}},e.calcProfitValue=function(){if(e.trade){var t=e.profit.pips.lock?1:2,n=1===t?10*e.profit.pips.value:e.profit.rate.value,a=T(e.trade.action,n,t,"takeProfit",e.trade.lots);return e.profit.checked?a:0}},e.pipValue=function(){return e.trade.asset&&parseFloat(e.trade.lots)>0?T("buy",10,1,"takeProfit",e.trade.lots):0},e.validate=function(){if(e.trade){return L()}},e.closeTradeValidate=function(){if(e.trade)return e.investAmount.value>=e.trade.asset.minLot&&e.investAmount.value<=e.trade.lots},e.isModified=function(){return e.loss.checked===!e.trade.stopLoss||e.profit.checked===!e.trade.takeProfit||(e.loss.checked&&(e.loss.pips.value!==e.lossOrigin.pips.value||e.loss.rate.value!==e.lossOrigin.rate.value)||e.profit.checked&&(e.profit.pips.value!==e.profitOrigin.pips.value||e.profit.rate.value!==e.profitOrigin.rate.value))};var G={isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1,back:"root.app.openTrades"};e.modal=angular.copy(G),e.modifyTrade=function(){var t={OrderID:e.trade.orderId,OpenPrice:parseFloat(g.getOpenPrice(e.trade.action,e.trade.asset)),StopLoss:(e.loss.pips.lock?A():parseFloat(e.loss.rate.value))||0,TakeProfit:(e.profit.pips.lock?x():parseFloat(e.profit.rate.value))||0};return e.modal.isProcess=!0,e.modal.textTitle=f.translation.messages.orderProcessing,e.modal.state=!0,p.mt4UpdatePosition(t).then(I).then(function(t){e.modal.textTitle=f.translation.messages.modifyTrade,e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textContent=["#"+t.Trade.OrderID+"&zwj;",f.translation.successupdated].join(" "),e.modal.actionText=f.translation.continueTrading}).catch(function(t){e.modal.textTitle=f.translation.messages.orderFailed,e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textContent=f.translation.messages[t.code]||f.translation.messages.Err600,e.modal.actionText=f.translation.tryAgain})},e.openPartialClose=function(){e.investAmount={value:e.trade.lots},e.showPartialClose=!0},e.cencelPartialClose=function(){e.showPartialClose=!1},e.closeTrade=function(){var t={ClosePrice:e.trade.closePrice(),OrderID:e.trade.orderId,Lots:parseFloat(e.investAmount.value)};return e.modal.state=!0,e.modal.isProcess=!0,e.modal.textTitle=f.translation.messages.orderProcessing,p.mt4ClosePosition(t).then(I).then(function(n){var a=r.actionsId[n.Trade.Cmd].replace("_limit","").replace("_stop",""),o=n.Trade.OpenPrice.toFixed(n.Trade.Digits);e.modal.textTitle=f.translation.closeTrade,e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textContent=["#"+n.Trade.OrderID+"&zwj;",f.translation[a],t.Lots,n.Trade.OutputName,f.translation.at,o,"<br/>",f.translation.closedAt,l.decimalRound(n.Trade.ClosePrice,n.Trade.Digits)].join(" "),e.modal.actionText=f.translation.continueTrading}).catch(function(t){e.modal.textTitle=f.translation.closeTrade,e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textContent=f.translation.messages[t.code]||f.translation.messages.Err600,e.modal.actionText=f.translation.continueTrading})},e.$on("$ionicView.beforeEnter",function(){var e=w.getState();return e&&t.go(e,{cache:!1}),m.kycCheck()}),e.$on("$ionicView.beforeLeave",q),e.$on("clear",q)}]),controllers.controller("OpenTradeController",["$scope","$state","$filter","$ionicModal","$ionicLoading","$timeout","$q","config","constants","Utils","AssetService","API","UserService","InvestCalcService","LocaleService","OpenTradeService","PnlMarginService","UserControl","CurrencyConvertService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b){function y(){e.trades=function(){if(v.collection)return k?v.collection.getPendingTrades():v.collection.getTrades()}(),f.calcTotalNetPl()}function w(){e.trades=[],e.user=null,e.pnl=null}g.wait().then(function(t){e.translation=t}),e.trades=[],e.user=p.get(),e.pnl=f,e.constants=l,e.showConvertToUsd=l.showConvertToUsd||!1;var k=t.current.data.orderFilter;e.convAssets=b.find(d,e.user.currency,"USD","",1),y(),e.calcMarginPercents=function(){if(e.user.activeTradingAccount)return e.user.activeTradingAccount.margin>0?e.pnl.data.equity/e.user.activeTradingAccount.margin*100:0},e.marginLevel=function(){return{width:e.pnl.data.freeMargin/e.pnl.data.pnl*100+"%"}},e.marginUtilization=0,e.calcMarginUtilization=function(){if(e.user.activeTradingAccount){var t=e.pnl.data.equity>0?e.user.activeTradingAccount.margin/e.pnl.data.equity*100:0;return t>=0&&t<=200?(e.marginUtilization=e.pnl.data.equity>0?e.user.activeTradingAccount.margin/e.pnl.data.equity*100:0,e.marginUtilization):(e.marginUtilization=999,e.marginUtilization)}},e.getMarginUtilizationBarWidth=function(){return 999===e.marginUtilization?"100%":e.marginUtilization/2+"%"},e.freeMarginToUsd=function(){return b.doConvert(e.convAssets,e.pnl.data.freeMargin,"buy",1)},e.usedFundsToUsd=function(){return e.user.activeTradingAccount?b.doConvert(e.convAssets,c.decimalRound(e.user.activeTradingAccount.margin,e.user.currencyDigits),"buy",1):0},e.equityToUsd=function(){return b.doConvert(e.convAssets,c.decimalRound(e.pnl.data.equity,e.user.currencyDigits),"buy",1)},e.totalProfitUsd=function(){return b.doConvert(e.convAssets,c.decimalRound(e.pnl.data.totalProfit,e.user.currencyDigits),"buy",1)},e.$watch(function(){return v.collection.length()},function(e,t){e!==t&&y()}),e.$on("$ionicView.beforeEnter",function(){var e=h.getState();return e&&t.go(e,{cache:!1}),p.kycCheck()}),e.$on("$ionicView.afterLeave",w),e.$on("$ionicView.unloaded",w),e.$on("clear",w)}]),controllers.controller("OrangepayBtcController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h){function b(e){if(1!==e.status)throw new f({source:"OrangepayBtcController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function y(){var t={amount:parseInt(e.amount.value,10),remarketing:h.get("remarketing")||""};return o.show(),v.bitcoinOrangepayDeposit(t).then(b).then(function(t){e.iframeUrl=s.trustAsResourceUrl(t.RedirectURL),e.urlReady=!0}).catch(function(t){return e.iframeLoadFail()})}function w(){e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.user=null}r.wait().then(function(t){e.translation=t}),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[]},e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.urlReady=!1;var k=[];Array(5).fill(null).reduce(function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return k.push(a),a},e.config.visual<=e.config.min?e.config.min:e.config.visual),k.length>0&&(e.config.listAmounts=k),e.amount={value:e.config.visual},e.modal={actionText:r.translation.try_again,state:!1},e.getUrl=function(){return y()},e.iframeLoad=function(){o.hide(),e.iframeReady=!0,o.hide()},e.iframeLoadFail=function(){o.hide(),e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0},e.$on("$ionicView.afterLeave",w),e.$on("clear",w)}]),controllers.controller("OtpController",["$scope","LocaleService","config","API","UserService","$q","ionicToast",function(e,t,n,a,o,i,s){t.wait().then(function(t){e.translation=t}),e.user=o.get(),e.showSpinner=!1,e.otp={qrcode:void 0,secret:"",code:"",enabled:e.user.otpEnabled},e.formV=void 0,e.modal={actionText:t.translation.try_again,state:!1},e.config=n,e.OnOtpChange=function(){e.otp.enabled&&e.getOtp()},e.verifyOtp=function(){e.toggleOtp(!e.user.otpEnabled)},e.getOtp=function(){return e.showSpinner=!0,a.getOTP().then(function(t){e.showSpinner=!1,e.otp.qrcode="data:image/png;base64,"+t.qrcode,e.otp.secret=t.secret}).catch(function(t){e.showSpinner=!1})},e.toggleOtp=function(n){e.showSpinner=!0;var o={login:e.user.login,otpCode:e.otp.code,enable:n&&1||0};return a.setOTP(o).then(function(a){if(console.log(a),e.showSpinner=!1,1!==a.status)return i.reject();e.user.otpEnabled=n,e.user.otpEnabled?e.modal.textContent=t.translation.otpVerified:e.modal.textContent=t.translation.otpDisabled,e.modal.textTitle=t.translation.successful,e.modal.actionText=t.translation.close,e.modal.isError=!1,e.modal.state=!0,e.modal.back="root.app.menu"}).catch(function(n){e.showSpinner=!1,e.modal.isError=!0,e.modal.textTitle=t.translation.otpVerifyFailed,e.modal.state=!0})},e.copyToClipBoard=function(){var t=document.getElementsByClassName("gac-pandats");HTMLCollection.prototype.isPrototypeOf(t)&&t.length&&(t=t[0]),t&&(t.select(),t.setSelectionRange(0,e.otp.secret.length),document.execCommand("copy"),t.blur(),window.getSelection().removeAllRanges(),s.show(e.translation.copiedToCB,"top",!1,5e3,""))}}]),controllers.controller("PasswordAssistanceController",["$scope","$state","$ionicLoading","$q","config","constants","ErrorService","LocaleService","API",function(e,t,n,a,o,i,s,r,l){function c(e){if(1!==e.status)throw new s({source:"PasswordAssistanceController",type:i.error.type.VALIDATION,code:e.code||"accountNotExists",severity:"warning",data:{response:e}});return e}r.wait().then(function(t){e.translation=t}),e.assistance={email:""},e.validator={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},e.navigate=function(e){t.go(e)};var d={isError:!1,textTitle:"",textContent:"",state:!1,actionText:r.translation.try_again,back:""};e.modal=angular.copy(d),e.restorePassword=function(){n.show(),l.forgotPassword(e.assistance).then(c).then(function(){n.hide(),e.modal.textTitle=r.translation.messages.email_sent,e.modal.actionText=r.translation.close,e.modal.isError=!1,e.modal.state=!0,e.modal.textContent=r.translation.password_changed_text,e.modal.back="login"}).catch(function(t){n.hide(),e.modal.textTitle=t&&t.code&&r.translation.messages[t.code]||r.translation.messages.Err600,e.modal.textContent=t&&t.code&&t.code.toString().match(/^Err6\d\d$/)?r.translation.messages.general_error_text:"",e.modal.isError=!0,e.modal.state=!0})}}]),controllers.controller("PeachPaymentsController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h){function b(e){if(1!==e.status)throw new f({source:"HostedPageController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function y(n){v.unsubscribe("depositConfirm");try{b(n)}catch(n){return o.hide(),n.code,void(e.paymentMethods.length>1?t.go("root.app.wallet"):t.go("root.app.assets"))}o.hide(),h.get("remarketing")&&h.remove("remarketing"),e.modal.textTitle=r.translation.messages.depositSuccess,e.modal.isError=!1,e.modal.actionText=r.translation.startTrading,e.modal.back="root.app.assets",e.modal.transactionId=n.transactionId,e.modal.date=Date.now(),e.modal.amount=u.currencySymbols[n.currency]+" "+n.amount,e.modal.method="",e.modal.state=!0}function w(n){var a={amount:parseInt(e.amount.value,10),pspCurrency:e.amount.pspCurrency||void 0,pspName:u.paymentMethodsBlueprint[t.params.method.name]||t.params.method.name,remarketing:h.get("remarketing")||""};return o.show(),v.hostedPageDeposit(a).then(b).then(function(t){m.insertDocumentScripts(n,t.PostData),n.getElementsByTagName("body")[0].appendChild(m.generateForm(t.RedirectURL,t.PostData));var a=n.getElementById("form3ds");a.className="paymentWidgets",a.dataset.brands=u.peachpaymentsBrands||"VISA MASTER AMEX",e.urlReady=!0,o.hide(),v.subscribe("depositConfirm",y)}).catch(function(t){return e.iframeLoadFail()})}function k(){e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.user=null}r.wait().then(function(t){e.translation=t}),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.showAmountSelect=!0,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.methodName=t.params.method.name||"",e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:[]},e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.urlReady=!0;var C=[];Array(5).fill(null).reduce(function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return C.push(a),a},e.config.visual<=e.config.min?e.config.min:e.config.visual),C.length>0&&(e.config.listAmounts=C),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.modal={actionText:r.translation.try_again,state:!1},e.getUrl=function(){return o.hide(),e.iframeReady=!0,self.iframeEl=angular.element(document).find("iframe")[0],w(self.iframeEl.contentDocument||self.iframeEl.contentWindow.document)},e.iframeLoad=function(){o.hide(),e.iframeReady=!0,o.hide()},e.iframeLoadFail=function(){o.hide(),e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0},e.$on("$ionicView.afterLeave",k),e.$on("clear",k)}]),controllers.controller("PendingDepositController",["$scope","$state","UserService","ErrorService","constants","LocaleService","Storage","API","$ionicLoading",function(e,t,n,a,o,i,s,r,l){function c(e){if(1!==e.status)throw new a({source:"HostedPageController",type:o.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then(function(t){e.translation=t}),e.modal={actionText:i.translation.try_again,state:!1},e.paymentMethods=s.get("paymentMethods")||[],e.method=t.params.method||"",e.depositValue=s.get("depositValue"),e.pspCurrencies=e.method.pspCurrencies||[],e.pspCurrency=e.pspCurrencies.length>0?e.pspCurrencies[0]:null,e.showAmountSelect=!0,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:e.pspCurrencies};var d=n.get();e.pendingDepositMessage=e.translation.pendingDepositMessage.replace("${clientName}",[d.firstName,d.lastName].join(" "))||"Please contact support";var u=[];Array(5).fill(null).reduce(function(e,t,n){var a=Math.ceil(e*o.depositMultipliers[n]);return u.push(a),a},e.config.visual<=e.config.min?e.config.min:e.config.visual),u.length>0&&(e.config.listAmounts=u),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.onDeposit=function(){l.show();var t={type:"Deposit",amount:e.amount.value,paymentMethod:e.translation[e.method.name]||e.method.name};return r.pendingDeposit(t).then(c).then(function(t){l.hide(),e.modal.textTitle=i.translation.messages.pending,e.modal.isError=!1,e.modal.textContent=e.pendingDepositMessage,e.modal.actionText=i.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0}).catch(function(t){l.hide(),e.showMessage=!0,e.modal.textTitle=i.translation.messages.pending,e.modal.isError=!0,e.modal.textContent=e.pendingDepositMessage,e.modal.actionText=i.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0})},e.$on("$ionicView.beforeEnter",function(){e.method.hasOwnProperty("amountRequired")&&!e.method.amountRequired&&(e.showAmountSelect=!1,e.amount.value=1)})}]),controllers.controller("PersonalDetailsController",["$scope","$state","$ionicModal","$ionicLoading","LocaleService","Validator","UserService","Storage","Utils","API","ErrorService","constants","moment","CountryService","ProfileRulesHelper",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g){function v(e){if(1!==e.status)throw new d({source:"PersonalDetailsController",type:u.error.type.VALIDATION,code:e.code||"updateCustomerFailed",severity:"warning",data:{response:e}});return e}o.wait().then(function(t){e.translation=t}),e.constants=u,e.validator=i.getPattern,e.citizenships=m.getCitizenships(),e.editSensitiveDetails=l.toBoolean(r.get("editSensitiveDetails")),e.user=s.get(),e.countries=m.getAllowedUserCountries(e.user.country),e.profileRulesHelper=new g(u.profileFieldRules,"clientArea"),e.allFieldsAreRequired=!u.autoUpdatePersonalDetails,e.minBirth=p().utc().subtract(18,"y").format("YYYY-MM-DD");var f={isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1};e.modal=angular.copy(f),e.search={country:"",citizenship:""},e.personalProfileForm={firstName:e.user.firstName,lastName:e.user.lastName,birthday:e.user.birthday&&p(e.user.birthday).toDate()||"",phone:e.user.phone,country:_.find(e.countries,{code:e.user.country})||"",citizenship:_.find(e.citizenships,{citizenship:e.user.citizenship})||"",address:e.user.address,city:e.user.city,postCode:e.user.postCode},e.personalProfileForm.state=_.find(e.personalProfileForm.country.states,{stateCode:e.user.state}),e.stateName=e.personalProfileForm.state&&e.personalProfileForm.state.stateName||"",e.countryName=e.personalProfileForm.country&&e.personalProfileForm.country.country,e.citizenshipName=e.personalProfileForm.citizenship&&e.personalProfileForm.citizenship.citizenship,e.countriesModal=function(t,a){n.fromTemplateUrl("templates/countries-select.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(n){e.selectType=t,e.countriesList="country"===e.selectType?e.countries:e.citizenships,e.states=e.personalProfileForm.country.states||[],e.countryModal=n,e.countryModal.show(),e.FormController=a})},e.closeCountryModal=function(){e.countryModal&&e.countryModal.hide(),e.countriesList=null,e.search={country:"",citizenship:""}},e.countryModalConfig={label:"country",id:"country",titleLabel:"select_country",flagLabel:"code"},e.countryModal=!1,e.openCountryModal=function(){e.countryModal=!0},e.setCountry=function(t){e.countryModal=!1,e.personalProfileForm.country=t,t.states.length>0&&(e.countryStates=t.states,e.personalProfileForm.state=t.states[0]),e.personalProfileForm.country=t,e.countryName=t.country,e.personalProfileForm.state="",e.stateName=""},e.countryStateModalConfig={label:"stateName",id:"stateCode",titleLabel:"select_state"},e.countryStateModal=!1,e.openCountryStateModal=function(){e.countryStateModal=!0},e.setCountryState=function(t){e.countryStateModal=!1,e.personalProfileForm.state=t},e.citizenshipModalConfig={label:"citizenship",id:"citizenship",titleLabel:"select_citizenship"},e.citizenshipModal=!1,e.openCitizenshipModal=function(){e.citizenshipModal=!0},e.setCitizenship=function(t){e.citizenshipModal=!1,e.personalProfileForm.citizenship=t},e.closeModal=function(){e.countryModal=!1,e.countryStateModal=!1,e.citizenshipModal=!1,e.taxCountryModal=!1},e.updatePersonalDetails=function(t){if(l.formRevalidate(t,!0),t.$valid){var n={firstName:e.personalProfileForm.firstName,lastName:e.personalProfileForm.lastName,birthday:e.personalProfileForm.birthday&&p(e.personalProfileForm.birthday).format("YYYY-MM-DD")||"",country:e.personalProfileForm.country.code,state:e.personalProfileForm.state&&e.personalProfileForm.state.stateCode||"",city:e.personalProfileForm.city||"",address:e.personalProfileForm.address||"",currency:e.user.currency,postCode:e.personalProfileForm.postCode||"",phone:e.personalProfileForm.phone,citizenship:e.personalProfileForm.citizenship.citizenship||"",usCitizen:0,usTaxId:"",is_pep:e.personalProfileForm.pep||0,tin_absence_reason:e.personalProfileForm.tinAbsenceReason||""};return n.citizenship||e.allFieldsAreRequired||(n.citizenship=(e.citizenships.find(function(e){return e.code===n.country})||{}).citizenship),a.show(),c.updatePersonalDetails(n).then(v).then(function(){r.load(["withdrawalMethods","localBanks"]),e.user.updatePersonalDetails(n),a.hide(),e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textTitle=o.translation.messages.updateCustomerSuccess,e.modal.back="root.app.menu",e.modal.actionText=o.translation.back,e.modal.state=!0}).catch(function(t){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.general_error,e.modal.textContent="",e.modal.back="root.app.menu",e.modal.actionText=o.translation.try_again,e.modal.state=!0})}},e.$on("$ionicView.beforeEnter",function(){if(e.user&&!e.user.tnc&&u.tncPopup)return t.go("tnc",{cache:!1});if(e.user)switch(e.user.registrationState){case u.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case u.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}return s.kycCheck()}),e.$on("$ionicView.afterLeave",function(t){e.countryModal&&e.countryModal.hide()&&e.countryModal.remove()})}]),controllers.controller("PersonalProfileController",["$window","$scope","$state","$ionicLoading","$q","$timeout","$ionicModal","$ionicPopup","ionicToast","config","constants","ErrorService","LocaleService","LoginService","API","Utils","LocalStorage","Storage","Validator","UserService","AccountService","ServerTimeService","moment","CountryService","ProfileRulesHelper","Onesignal",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b,y,w,k,C,S,T,A){function $(e){var t=S.countries.get({code:e}),n=t&&t.allowedCurrencies&&t.allowedCurrencies.length&&t.allowedCurrencies,a=[];return n&&n.length&&(a=(h.get("currencies")||[]).filter(function(e){return-1!==n.indexOf(e.currency)})),!a.length&&t&&(a=(h.get("currencies")||[]).filter(function(e){return e.currency===t.currency})),a}function x(e){return _.find(t.currencyList,{currency:v.getCurrencyByCountry(e||t.user.country,t.countries,t.currencyList)})||""}function P(e){if(1!==e.status)throw new u({source:"PersonalProfileController",type:d.error.type.VALIDATION,code:e.code.toString()||"updateCustomerFailed",severity:"warning",data:{response:e}});return e}function M(){function e(e){return t.user.updatePersonalDetails(Object.assign({},o,e)),t.user.registrationState=e.registrationState,t.isRegulated&&t.user.registrationState<3?(a.hide(),n.go("signupQuestionnaire",{cache:!1})):w.createAccount(!0).then(v.wait(2e3)).then(function(e){return w.switchAccount(e.mt4Account.login,!0)}).then(function(){return d.demoAccountCreateWithLive&&w.createAccount(!1)}).then(function(){a.hide(),t.autoUpdatePersonalDetails?n.go("root.app.assets",{cache:!1}):n.go("root.app.wallet",{cache:!1})})}var o={firstName:t.personalProfileForm.firstName,lastName:t.personalProfileForm.lastName,birthday:t.allFieldsAreRequired&&C(t.personalProfileForm.birthday).format("YYYY-MM-DD")||"",country:t.personalProfileForm.country.code,state:t.personalProfileForm.state&&t.personalProfileForm.state.stateCode||"",city:t.personalProfileForm.city||"",address:t.personalProfileForm.address||"",currency:t.personalProfileForm.currency.currency,postCode:t.personalProfileForm.postCode||"",phone:t.personalProfileForm.phone,citizenship:t.personalProfileForm.citizenship.citizenship||"",usCitizen:0,usTaxId:"",customerType:t.personalProfileForm.customerType&&t.personalProfileForm.customerType.name||""};if(t.isRegulated&&(o.tin=t.personalProfileForm.tin,o.usCitizen=v.fromBoolean(t.personalProfileForm.usCitizen)||0,o.taxCountry=t.personalProfileForm.taxCountry&&t.personalProfileForm.taxCountry.code||"",o.nationalId=t.personalProfileForm.nationalId||"",o.companyName=t.personalProfileForm.companyName||"",o.married=v.fromBoolean(t.personalProfileForm.isMarried)||0,o.spouseAware=v.fromBoolean(t.personalProfileForm.isSpouse)||0,o.birthPlace=t.personalProfileForm.birthPlace||"",o.is_pep=v.fromBoolean(t.personalProfileForm.pep)||0,o.tin_absence_reason=t.personalProfileForm.tinAbsenceReason||""),t.profileRulesHelper.isVisible("tradingExperience")&&(o.tradingExperience=v.fromBoolean(t.personalProfileForm.tradingExperience)||0),t.personalProfileForm.customFields&&Object.keys(t.personalProfileForm.customFields).length){var i=t.personalProfileForm.country.customFields,s=Object.keys(t.personalProfileForm.customFields).reduce(function(e,n){var a=_.find(i,{mapTo:n});return a?e[a.field]=t.personalProfileForm.customFields[n]:e[n]=t.personalProfileForm.customFields[n],e},{});o=Object.assign({},o,s)}return A.setTag("currency",o.currency),a.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:t}),g.personalDetails(o).then(P).then(function(t){return e(t)}).catch(function(e){if(a.hide(),"3040"==e.code)throw e;t.modal.isError=!0,t.modal.textTitle=e&&p.translation.messages[e.code]||p.translation.messages.general_error,t.modal.textContent="","3043"!=e.code&&"3044"!=e.code||(t.modal.textTitle=p.translation.messages[3040],t.modal.textContent=e&&p.translation.messages[e.code]||"",t.modal.actionText=p.translation.logout,t.modal.back=function(){return a.show(),m.logout().then(function(){return a.hide(),n.go("welcome",{cache:!1})})}),t.modal.state=!0})}log("personal profile controller"),p.wait().then(function(e){t.translation=e}),t.user=y.get(),t.currencyList=h.get("currencies")||[],t.constants=d,t.useDemoAccounts=h.get("useDemo"),t.pageState=0,t.profileRulesHelper=new T(d.profileFieldRules,"registration"),t.countries=d.profileAllCountries?S.get():S.getAllowedCountries(),t.citizenships=S.getCitizenships(),t.taxCountries=S.get(),t.editSensitiveDetails=v.toBoolean(h.get("editSensitiveDetails")),t.currencyList=$(t.user.country),t.isRegulated=h.get("regulated"),t.isPromo=!0,t.minBirth=C().utc().subtract(18,"y").format("YYYY-MM-DD"),t.defaultProfileForm={firstName:t.user.firstName||"",lastName:t.user.lastName||"",birthday:"",country:_.find(t.countries,{code:t.user.country})||{country:""},state:{stateName:""},citizenship:{citizenship:""},currency:x(),city:"",address:"",postCode:"",phone:t.user.phone,usCitizen:null,usTaxId:"",customerType:""},t.isRegulated&&(t.defaultProfileForm.tin=null,t.defaultProfileForm.taxCountry={country:""},t.defaultProfileForm.nationalId=null,t.defaultProfileForm.companyName=null,t.defaultProfileForm.isMarried=null,t.defaultProfileForm.isSpouse=null,t.defaultProfileForm.birthPlace=null,t.defaultProfileForm.pep=null,t.defaultProfileForm.tinAbsenseReason=null),t.personalProfileForm={customFields:null},t.autoUpdatePersonalDetails=d.autoUpdatePersonalDetails&&t.user.registrationState<d.userState.questionnaire,t.allFieldsAreRequired=!d.autoUpdatePersonalDetails,t.defaultProfileForm.state=_.find(t.defaultProfileForm.country.states,{stateCode:t.user.state}),t.personalProfileForm=angular.copy(t.defaultProfileForm),t.countryStates=t.personalProfileForm.country.states||[],t.countryName=t.defaultProfileForm.country&&t.personalProfileForm.country.country,t.taxCountryName=t.defaultProfileForm.taxCountry&&t.personalProfileForm.taxCountry.country,t.stateName=t.defaultProfileForm.state&&t.defaultProfileForm.state.stateName,t.validator=b.getPattern,t.customerTypes=h.get("customerTypes")||[],t.customerTypes=t.customerTypes.map(function(e){return e.label=p.translation[e.name]||e.name,e});var D=_.find(t.customerTypes,{selected:1});D&&(t.personalProfileForm.customerType=D),t.personalProfileForm.currency=t.defaultProfileForm.currency,t.navigate=function(e,t){n.go(e,t)},t.autoUpdatePersonalDetails&&M(),t.modal={actionText:p.translation.try_again,state:!1,isProcess:!1},t.countryModalConfig={label:"country",id:"country",titleLabel:"select_country",flagLabel:"code"},t.taxCountryModal=!1,t.openTaxCountryModal=function(){t.taxCountryModal=!0},t.setTaxCountry=function(e){if(t.taxCountryModal=!1,t.personalProfileForm.taxCountry=e,"US"===e.code)var n=i(function(){t.showUsCitizenPopup(),i.cancel(n)},500)},t.countryModal=!1,t.openCountryModal=function(){t.countryModal=!0},t.setCountry=function(e){t.countryModal=!1,t.personalProfileForm.country=e,e.states.length>0&&(t.countryStates=e.states,t.personalProfileForm.state=e.states[0]),t.currencyList=$(t.personalProfileForm.country.code),t.personalProfileForm.currency=x(t.personalProfileForm.country.code)},t.countryStateModalConfig={label:"stateName",id:"stateCode",titleLabel:"select_state"},t.countryStateModal=!1,t.openCountryStateModal=function(){t.countryStateModal=!0},t.setCountryState=function(e){t.countryStateModal=!1,t.personalProfileForm.state=e},t.citizenshipModalConfig={label:"citizenship",id:"citizenship",titleLabel:"select_citizenship"},t.citizenshipModal=!1,t.openCitizenshipModal=function(){t.citizenshipModal=!0},t.setCitizenship=function(e){t.citizenshipModal=!1,t.personalProfileForm.citizenship=e},t.closeModal=function(){t.countryModal=!1,t.countryStateModal=!1,t.citizenshipModal=!1,t.taxCountryModal=!1},t.showUsCitizenPopup=function(){var e=r.show({template:t.translation.usCitizenPopupBody,title:'<span class="roboto">'+p.translation.usCitizenPopupTitle+"</span>",scope:t,buttons:[{text:p.translation.no,type:"button-full",onTap:function(n){n.preventDefault(),console.log("reset country and citizen"),t.resetUsCitizen(),e.close()}},{text:p.translation.yes,type:"button-full",onTap:function(t){return t.preventDefault(),e.close(),a.show(),M().catch(function(e){if("3040"==e.code)return m.logout().then(function(){return a.hide(),n.go("welcome",{cache:!1})});throw e})}}]})},t.resetUsCitizen=function(){t.taxCountryName="",t.personalProfileForm.taxCountry=null,t.personalProfileForm.usCitizen=null},t.updatePersonalDetails=function(e){if(v.formRevalidate(e,!0),e.$valid)return t.isRegulated&&0===t.pageState&&!t.constants.disablePersonalDetailsStep2?void(t.pageState=1):M()},t.switchDemoAccount=function(){var e=v.getCurrencyByCountry(t.user.country,t.countries,t.currencyList);if(t.user.activeTradingAccount&&!t.user.activeTradingAccount.live)return a.hide(),n.go("root.app.assets");a.show();var o=_.find(t.user.tradingAccounts,{live:!1})
;return o?w.switchAccount(o.login,!1).then(function(){return a.hide(),n.go("root.app.assets")}).catch(function(e){a.hide(),t.modal.isError=!0,t.modal.textTitle=e&&p.translation.messages[e.code]||p.translation.messages.general_error,t.modal.textContent="",t.modal.state=!0}):w.createAccount(!1,e).then(function(e){return w.switchAccount(e.mt4Account.login,!1)}).then(function(){return a.hide(),n.go("root.app.assets")}).catch(function(e){a.hide(),t.modal.isError=!0,t.modal.textTitle=e&&p.translation.messages[e.code]||p.translation.messages.general_error,t.modal.textContent="",t.modal.state=!0})},t.showInfo=function(e){l.show(t.translation[e+"PopoverContent"],"top",!1,15e3,"")},t.$on("$ionicView.afterLeave",function(e){t.countryModal&&t.countryModal.hide()&&t.countryModal.remove()})}]),controllers.controller("PraxisController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","$cookies","API","ErrorService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h){function b(e){if(1!==e.status)throw new h({source:"PraxisController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function y(t){var n={clearedby:"praxis",lang:e.lang,remarketing:v.get("remarketing")||""};return o.show(),f.initializeTransfer(n).then(b).then(function(n){e.urlReady=!0,t.getElementsByTagName("body")[0].appendChild(m.generateForm(n.RedirectURL,n.PostData)),t.getElementById("form3ds").submit(),f.subscribe("depositConfirm",w)}).catch(function(t){return e.iframeLoadFail()})}function w(e){f.unsubscribe("depositConfirm"),v.get("remarketing")&&v.remove("remarketing")}function k(){e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.user=null}r.wait().then(function(t){e.translation=t}),self.iframeEl=null,e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.urlReady=!1,e.lang=r.lang,e.modal={actionText:r.translation.try_again,state:!1},e.iframeLoad=function(){if(o.hide(),e.iframeReady=!0,!e.urlReady)return self.iframeEl=angular.element(document).find("iframe")[0],y(self.iframeEl.contentDocument||self.iframeEl.contentWindow.document)},e.iframeLoadFail=function(){o.hide(),e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0},e.$on("$ionicView.afterLeave",k),e.$on("clear",k)}]),controllers.controller("QrcodeController",["$scope","$state","LocaleService","constants","UserService","ErrorService","ionicToast","Storage","API","$ionicLoading","$cookies",function(e,t,n,a,o,i,s,r,l,c,d){function u(){var o={amount:parseInt(e.amount.value,10),pspCurrency:e.amount.pspCurrency||void 0,pspName:a.paymentMethodsBlueprint[t.params.method.name]||t.params.method.name,remarketing:d.get("remarketing")||""};return c.show(),l.qrcodeDeposit(o).then(p).then(function(t){e.cryptoWallet.qrCode=t.QRCode,e.cryptoWallet.transactionId=t.transactionId,c.hide()}).catch(function(t){c.hide(),e.modal.isError=!0,e.modal.textTitle=n.translation.messages.general_error,e.modal.textContent=n.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?n.translation.try_again:n.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0})}function p(e){if(1!==e.status)throw new i({source:"QrcodeController",type:a.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}n.wait().then(function(t){e.translation=t}),e.user=o.get(),e.paymentMethods=r.get("paymentMethods")||[],e.showAmountSelect=!0,e.constants=a,e.depositValue=r.get("depositValue"),e.displayCurrency=e.user.currency,e.flagIcon=e.user.currency.toLowerCase(),e.method=t.params.method||"",e.pspCurrencies=e.method.pspCurrencies||[],e.pspCurrency=e.pspCurrencies.length>0?e.pspCurrencies[0]:null,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:e.pspCurrencies},e.cryptoWallet={qrCode:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",address:"N/A",transactionId:"N/A"};var m=[];Array(5).fill(null).reduce(function(e,t,n){var o=Math.ceil(e*a.depositMultipliers[n]);return m.push(o),o},e.config.visual<=e.config.min?e.config.min:e.config.visual),m.length>0&&(e.config.listAmounts=m),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.modal={actionText:n.translation.try_again,state:!1},e.getUrl=function(){return u()},e.$on("$ionicView.beforeEnter",function(){e.method.hasOwnProperty("amountRequired")&&!e.method.amountRequired&&(e.showAmountSelect=!1,e.amount.value=1,u())})}]),controllers.controller("QuestionnaireController",["$scope","$state","$timeout","$location","$ionicScrollDelegate","ionicToast","$ionicLoading","$ionicPopup","$q","LocaleService","API","AccountService","Storage","Utils","UserService","constants","QuestionModel","ErrorService","LoginService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b){function y(e){if(1!==e.status)throw new h({source:"QuestionnaireController",type:v.error.type.VALIDATION,code:e.code||"updateQuestionnaireFailed",severity:"warning",data:{response:e}});return e}function w(e,t){function n(e){var n=_.find(t,{questionId:e.id})||{};return e.values=n.answerIds||[],e.other=n.other||"",e}return e.map(n)}function k(){return b.logout().then(function(){s.hide(),t.go("welcome")}).catch(function(e){s.hide(),t.go("welcome")})}function C(e){return a.hash(e),o.anchorScroll(!0)}function S(e){function t(e){return Number(e.id)}return e.map(function(e){return{questionId:e.id,answerIds:Array.isArray(e.values)?e.values.map(t).filter(function(e){return e>0}):e.values?[Number(e.values.id)]:[],answer:e.other}})}function T(){var n=!e.scoringRule||!!e.scoringRule.live,a=e.scoringRule?e.scoringRule.defaultLeverage:e.user.leverage,o=e.user.baseCurrency||e.user.currency;return s.show(),u.createAccount(n,o,a).then(function(e){return u.switchAccount(e.mt4Account.login,!!e.mt4Account.live)}).then(function(){return v.demoAccountCreateWithLive&&u.createAccount(!1,o,a)}).then(function(){if(v.autoAdditionalAccounts&&n){var e={live:n,leverage:a,currency:o},t=p.get("tradingPlatforms").filter(function(e){return e!==p.get("defaultTradingPlatform")}).map(function(t){return angular.extend({},e,{tradingPlatform:t})});return l.all(t.map(function(e){return u.createAccount(e.live,e.currency,e.leverage,e.tradingPlatform)}))}}).then(function(){return s.hide(),t.go(v.defaultRoute||"root.app.assets",{cache:!1})})}function A(t){var n=e.user.firstName+" "+e.user.lastName;return(e.translation[t]||"").replace(/\%name\%/,n).replace(/\%firstName\%/,e.user.firstName)}e.translation=c.translation,e.permit={checked:!1},e.formTemplate=[],e.formData={},e.questionGroups=Object.assign([],v.questionGroups),e.currentQuestionGroup="",e.currentQuestionnaireGroup=[],e.control={},e.scoringRules=v.scoringRules||[],e.scoringRule=null,e.modal={actionText:c.translation.try_again,state:!1,isProcess:!1},e.user=g.get(),e.navigate=function(e,n){return log("navigate to ",e),t.go(e,n)},e.modalDialogData={},d.questions().then(function(t){e.questionnaire=w(t.questions,t.customerAnswers).map(function(t){return new f(t,e.translation)})}).then(function(){return e.getQuestionnariesGroup()}),e.isVisible=function(t){return 0===t.parentAnswers.length||e.questionnaire.filter(function(e){return t.parentAnswers.indexOf(Number(e.values.id))>-1}).length>0},e.getQuestionnariesGroup=function(){return e.currentQuestionGroup=e.questionGroups.shift(),e.currentQuestionGroup?(e.currentQuestionnaireGroup=this.questionnaire.filter(function(t){return t.group===e.currentQuestionGroup}),e.currentQuestionnaireGroup.filter(function(e){return!!Object.keys(e.values).length}).length>0?e.getQuestionnariesGroup():void 0):v.kycCheck?e.getCustomerComplianceStatus():e.getCustomerScoring()},e.submit=function(){var t=Object.keys(e.control).map(function(t){return{id:t,valid:e.control[t].validate()}}),n=_.find(t,{valid:!1});if(n)return C("question-"+n.id);var a=e.currentQuestionnaireGroup.filter(function(e){return _.find(t,{id:e.id.toString()})}),i=S(a);return s.show(),d.questionnaire({answers:i}).then(y).then(function(){return o.scrollTop(),s.hide(),e.getQuestionnariesGroup()})},e.getCustomerScoring=function(){return s.show(),d.calcScoring().then(y).then(function(n){if(e.scoringRule=_.find(e.scoringRules,{classification:n.classification}),e.user.classification=n.classification,e.user.updateRisk(),e.scoringRule&&e.scoringRule.showMessage){s.hide();var a=A(e.scoringRule.messageTranslationKey);return e.showModalScoringResult(e.translation.scoring_title,a)}return e.user.registrationState===v.userState.questionnaire?(e.user.classification=n.classification,s.hide(),t.go("root.app.assets")):(e.user.registrationState=v.userState.questionnaire,T().then(function(){if(!v.defaultRoute){var e=v.verificationProvider,n=e&&"internal"!==e?"internal-v2"===e?"root.app.verification-v2":"sumsub"===e?"root.app.verificationSumsub":"":"root.app.uploadDocuments";return n?t.go(n,{cache:!1}):void console.warn("Unknown verification provider")}}))}).catch(function(n){if(s.hide(),e.modal.isError=!0,e.modal.textTitle=n&&c.translation.messages[n.code]||c.translation.messages.general_error,e.modal.textContent="","3045"==n.code||"3046"==n.code){e.modal.textTitle=c.translation.messages[3040];var a=e.user.firstName+" "+e.user.lastName;e.modal.textContent=(e.translation.messages[n.code]||"").replace(/\%name\%/,a).replace(/\%firstName\%/,e.user.firstName),e.modal.actionText=c.translation.logout,e.modal.back=function(){return s.show(),b.logout().then(function(){return s.hide(),t.go("welcome",{cache:!1})})}}e.modal.state=!0})},e.getCustomerComplianceStatus=function(){return s.show(),function(){return d.calcScoring().then(d.complianceStatus).then(y).then(function(t){e.user.complianceStatus=t.ComplianceStatus,e.user.setComplianceStatus()}).catch(function(t){console.warn("compliance status request failed",t),e.user.complianceStatus="no kyc",e.user.setComplianceStatus()})}().then(function(){return T().then(function(){return s.hide(),"approved"===e.user.complianceStatus?t.go("root.app.assets"):t.go("kycCheck",{cache:!1})}).catch(function(t){s.hide(),e.modal.isError=!0,e.modal.textTitle=t&&c.translation.messages[t.code]||c.translation.messages.general_error,e.modal.textContent="",e.modal.state=!0})})},e.showModalScoringResult=function(n,a){e.modalDialogData.isOpened=!0,e.modalDialogData.isError=!1,e.modalDialogData.title=n,e.modalDialogData.content=a,e.modalDialogData.cancelTitle=c.translation.i_do_not_accept,e.modalDialogData.okTitle=e.scoringRule.acceptPopup?c.translation.i_accept:c.translation.continue,e.modalDialogData.isCheckbox=v.acceptRiskCheckbox,e.modalDialogData.checkboxText="acceptText",e.modalDialogData.onOk=function(){if(!e.scoringRule.acceptPopup)return e.user.registrationState=v.userState.questionnaire,T();d.acceptRisk({accept:1}).then(function(n){return e.user.classification=n.classification,e.scoringRule=_.find(e.scoringRules,{classification:n.classification}),e.user.updateRisk(),e.user.liveAccountExists?t.go("root.app.assets"):(e.user.registrationState=v.userState.questionnaire,T())})},e.scoringRule.acceptPopup&&e.scoringRule.buttonsView&&"acceptCancel"===e.scoringRule.buttonsView&&(e.modalDialogData.onCancel=function(){k()})},e.showModalWhenRisksDidNotAccept=function(){e.modalDialogData.isOpened=!0,e.modalDialogData.isError=!0,e.modalDialogData.title=e.translation.warning,e.modalDialogData.content=e.translation.risks_not_accepted,e.modalDialogData.onCancel=!1,e.modalDialogData.okTitle=c.translation.i_understand,e.modalDialogData.onOk=function(){k()}},e.showModalWhenFirstLiveAccountCreated=function(){e.modalDialogData.isOpened=!0,e.modalDialogData.isError=!1,e.modalDialogData.title=e.translation.scoring_title,e.modalDialogData.content=e.translation.thanks_for_registering,e.modalDialogData.onCancel=!1,e.modalDialogData.okTitle=c.translation.continue,e.modalDialogData.onOk=function(){t.go("root.app.uploadDocuments")}}}]),controllers.controller("QuestionnaireMessageController",["$scope","$state","$ionicLoading","$ionicModal","LocaleService","UserService","API","Utils","Storage","constants","ErrorService",function(e,t,n,a,o,i,s,r,l,c,d){function u(e){if(1!==e.status)throw new d({source:"TncController",type:c.error.type.VALIDATION,code:e.code.toString()||"updateTncFailed",severity:"warning",data:{response:e}});return e}e.tnc=!1,e.constants=c,e.lang="en";var p={isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1};e.modal=angular.copy(p),o.wait().then(function(t){e.translation=t,e.lang=o.lang}),e.navigate=function(e,n){return t.go(e,n)},e.onNext=function(a){if(r.formRevalidate(a,!0),a.$valid)return n.show(),s.acceptTnc().then(u).then(function(){return i.get().tnc=!0,n.hide(),t.go("root.app.personalDetails",{cache:!1})}).catch(function(t){n.hide(),e.modal.isError=!0,e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.general_error,e.modal.textContent=o.translation.messages.general_error_text,e.modal.actionText=o.translation.try_again,e.modal.state=!0})}}]),controllers.controller("ReferralActivityController",["$scope","$state","LocaleService","constants","$ionicLoading","UserService","API","Storage","ServerTimeService",function(e,t,n,a,o,i,s,r,l){n.wait().then(function(t){e.translation=t}),e.user=i.get(),e.signedUpFriends=r.get("inviteFriends").filter(function(e){return!e.bonusUsd}),e.qualifiedFriends=r.get("inviteFriends").filter(function(e){return!!e.bonusUsd}),e.totalEarnings=e.qualifiedFriends.reduce(function(e,t){return e+t.bonusUsd},0),e.clientTimeZone=l.timeZoneOffset>=0?"+"+l.timeZoneOffset.toString():l.timeZoneOffset.toString(),o.hide(),e.activeTab="signed_up"}]),controllers.controller("SignupController",["$window","$scope","$state","$ionicLoading","$q","$timeout","$ionicModal","config","constants","ErrorService","LocaleService","LoginService","API","Utils","LocalStorage","Storage","Validator","Init","UserService","$cookies","AccountService","CountryService","SocialAuthService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b,y,w,k,C){function S(e){if(1!==e.status)throw new c({source:"SignupController",type:l.error.type.VALIDATION,code:e.code||"registrationFailed",severity:"warning",data:{request:t.signupForm,response:e}});return e}function T(e){return t.loadingMessage=d.translation.logging_in,function(){return e.provider&&e.tokenThirdParty?u.loginThirdParty(e.login,e.provider,e.tokenThirdParty):u.login(e.login,e.password)}().then(function(){t.loadingMessage=d.translation.starting}).then(u.initServices).then(function(){h.isInitialized=!0}).then(function(){a.hide();var e=b.get();if(l.autoUpdatePersonalDetails&&e.registrationState<l.userState.questionnaire)return n.go("signupPersonalProfile",{cache:!1});if(l.showPersonal&&"demo"!==t.accountType){if(!e.tnc&&l.tncPopup)return n.go("tnc");if(e.registrationState<=l.userState.personal)return n.go("root.app.personalDetails")}return l.kycCheck&&"demo"===t.accountType?w.createAccount(!1,e.baseCurrency||e.currency,e.leverage).then(function(e){return w.switchAccount(e.mt4Account.login,!!e.mt4Account.live)}).then(function(){return a.hide(),n.go("root.app.assets",{cache:!1})}):n.go("root.app.assets",{cache:!1})}).catch(function(e){return console.warn(e),e===l.loginStatus.noActiveAccount&&console.warn(e),u.logout().then(function(){a.hide(),t.modal.isError=!0,t.modal.textTitle=d.translation.messages[e.code]||d.translation.messages.Err600,t.modal.textContent=d.translation.messages.general_error_text,t.modal.state=!0}).catch(function(e){console.warn(e)})})}function A(e){switch(e){case"long":return function(n){return{firstName:n.firstName,lastName:n.lastName,phone:t.phoneCode.toString()+n.phone.toString(),login:n.email,password:n.password,country:n.country,fingerprint:123,referral:$(),promocode:n.promocode||"",acceptPromotions:m.fromBoolean(n.acceptPromotions),terms:m.fromBoolean(n.terms),termsNonLeverage:m.fromBoolean(n.termsNonLeverage),template:e,language:t.lang||"en"}};case"social":return function(n){return{firstName:n.firstName,lastName:n.lastName,phone:t.phoneCode.toString()+n.phone.toString(),login:n.email,password:n.password,country:n.country,fingerprint:123,referral:$(),promocode:n.promocode||"",acceptPromotions:m.fromBoolean(n.acceptPromotions),terms:m.fromBoolean(n.terms),termsNonLeverage:m.fromBoolean(n.termsNonLeverage),template:e,language:t.lang||"en",provider:n.provider,tokenThirdParty:n.tokenThirdParty}};default:return function(n){return{login:n.email,password:n.password,country:n.country,fingerprint:123,referral:$(),promocode:n.promocode||"",acceptPromotions:m.fromBoolean(n.acceptPromotions),terms:m.fromBoolean(n.terms),termsNonLeverage:!1,template:e,language:t.lang||"en"}}}}function $(){return decodeURIComponent(y.get("forexAffiliate")||"")||m.getReferralString()||""}function x(){y.remove("forexAffiliate")}function P(e){var n=A(t.template)(e);return t.loadingMessage=d.translation.account_registration,a.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:t}),function(t){return e.provider&&e.tokenThirdParty?p.registrationThirdParty(t):p.registration(t)}(n).then(S).then(function(e){return x(),e}).then(m.wait(3e3)).then(function(){return T(n)}).catch(function(e){a.hide(),t.modal.isError=!0,t.modal.textTitle=e&&d.translation.messages[e.code]||d.translation.messages.general_error,t.modal.textContent="",t.modal.state=!0})}function _(e){return!(e.terms&&!e.terms.$viewValue)||(e.terms.$setDirty(),void e.terms.$setTouched())}if(d.wait().then(function(e){t.translation=e,t.lang=d.lang}),t.currencyList=v.get("currencies"),t.constants=l,t.countries=l.profileAllCountries?k.get():k.getAllowedCountries(),t.search={},t.template=v.get("template"),t.isPromo=v.get("promocode"),t.promoCodes=v.get("promoCodes").reduce(function(e,t){return e.push({promocode:t}),e},[]),t.isAcceptPromotions=m.toBoolean(v.get("acceptPromotions")),t.socialAuthService=C,t.signupForm={email:"",password:"",confirmPassword:"",country:""},v.get("geo")&&v.get("geo").country){var M=k.countries.get({code:v.get("geo").country,allowRegistration:1});M&&(t.signupForm.country=M.code,t.countryName=M.country,t.phoneCode=M.phoneCode)}t.promoCodes.length&&(t.signupForm.promocode=t.promoCodes[0].promocode),t.validator=f.getPattern,t.navigate=function(e,t){n.go(e,t)},t.password={checked:!1},t.modal={actionText:d.translation.try_again,state:!1,isProcess:!1,back:"welcome"},t.accountType=m.getURLParameterByName("accountType"),function(){var e=m.getReferralString();e&&y.put("forexAffiliate",e,{path:"/"})}(),t.countriesModal=function(e,n){s.fromTemplateUrl("templates/countries-select.html",{scope:t,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(a){t.selectType=e,t.countriesList="country"===e?t.countries:t.promoCodes,t.countryModal=a,t.countryModal.show(),t.FormController=n})},t.setCountry=function(e){"country"===t.selectType?(t.signupForm.country=e.code,t.countryName=e.country,t.phoneCode=e.phoneCode,t.FormController.country.$setDirty()):"promocode"===t.selectType&&(t.signupForm.promocode=e.promocode),t.search={},t.countryModal&&t.countryModal.hide()},t.closeCountryModal=function(){t.countryModal&&t.countryModal.hide(),t.countriesList=null},t.doRegistration=function(e){if(m.formRevalidate(e,!0),e.$valid){return P(angular.copy(t.signupForm))}},t.signinWithGoogle=function(e){if(_(e))return C.signInWithGoogle().then(function(e){return P({email:e.email,password:"",provider:"google",tokenThirdParty:e.idToken,firstName:e.firstName,lastName:e.lastName,countryCode:"",phone:"",country:"",promocode:t.signupForm.promocode,acceptPromotions:t.signupForm.acceptPromotions,terms:t.signupForm.terms,termsNonLeverage:t.signupForm.termsNonLeverage})})},t.signinWithFacebook=function(e){if(_(e))return C.signInWithFacebook().then(function(e){return P({email:e.email,password:"",provider:"facebook",tokenThirdParty:e.token,firstName:e.firstName,lastName:e.lastName,countryCode:"",phone:"",country:"",promocode:t.signupForm.promocode,acceptPromotions:t.signupForm.acceptPromotions,terms:t.signupForm.terms,termsNonLeverage:t.signupForm.termsNonLeverage})})},t.$on("$ionicView.afterLeave",function(e){t.countryModal&&t.countryModal.hide()&&t.countryModal.remove()})}]),controllers.controller("Step2RegistrationController",["$scope","$state","$ionicLoading","$q","$timeout","$location","$rootScope","$ionicHistory","$ionicScrollDelegate","$ionicModal","$document","config","constants","ErrorService","API","LocaleService","LoginService","countries","Storage","BlueprintRegistration","UserService","LocalStorage","moment","appsflyer",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b,y,w,k,C,S){function T(e){Object.keys(e).filter(function(e){return!e.match(/^\$/)}).forEach(function(t){e[t].$setDirty(),e[t].$validate()})}function A(a,o){function i(e){if("1"!=e.Code)throw new m({source:"Step2RegistrationController",type:p.error.type.VALIDATION,code:e.Description||"registrationFailed",severity:"warning",data:{request:C,response:e}});return e}function l(t){return e.loadingMessage=v.translation.logging_in,g.getCustomerData().then(function(e){return S.trackEvent("finish_registration",{user:e.data.Email}),h.onLogin(e),{login:t.MT4Login,source:t.isReal?p.system.loginSources[1].id:p.system.loginSources[0].id}})}function c(e){return f.mt4Login(e.login,e.source).then(f.mt4ClearServices).then(f.mt4InitServices).then(function(){return e})}function d(e){k.set("activeAccount",JSON.stringify({login:e.login,source:e.source})),s.$broadcast("init"),r.clearHistory(),n.hide(),t.go("root.app.assets",{cache:!1})}function u(e){return b.remove("registration"),e}var h=w.get();if(o){var C=angular.merge(y.create("long")(b.get("registration")),o);e.loadingMessage=v.translation.updateCustomer,n.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),g.updateCustomer({params:C}).then(i).then(u).then(l).then(c).then(d).catch(function(t){n.hide(),e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textTitle=t&&v.translation.messages[t.code]||v.translation.messages.Err600,e.modal.textContent=t.code&&t.code.match(/^Err6\d\d$/)?v.translation.messages.general_error_text:"",e.modal.state=!0})}}v.wait().then(function(t){e.translation=t}),e.constants=p,e.countries=h.countryCode,e.search={},e.validator={alpha:/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/,email:"[a-zA-Z0-9-+_\\@\\.]+",phone:"^[0-9]{1,}$",mix:/^[a-zA-Z0-9]+$/,birthday:/^\d{2}[.\/-]\d{2}[.\/-]\d{4}$/,address:"[^\\'\\?\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\_\\+\\=\\{\\}/><\\][\\\\\";|]+",city:"[^[0-9\\]\\'\\?\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\_\\+\\=\\{\\}\\()/><\\][\\\\\";|]+",number:"[a-zA-Z0-9-\\.]+"},e.signupForm={};var $=b.get("registration");$&&(e.signupForm=$,e.countryName=_.find(e.countries,{code:e.signupForm.country}).country,e.nationalityName=e.signupForm.citizenship),e.minBirth=C().utc().subtract(18,"y").format("YYYY-MM-DD"),e.navigate=function(e,n){t.go(e,n)},e.password={checked:!1},e.modal={actionText:v.translation.try_again,state:!1,back:"root.app.assets"},e.birthCountry=function(t){if(e.signupForm.isBirthCountry){var n=_.find(e.countries,{code:t});n&&(e.signupForm.citizenship=n.nationality,e.nationalityName=n.nationality,e.FormController&&e.FormController.citizenship.$setDirty(),e.signupForm.birthCountry=e.signupForm.country)}},e.goNextPage=function(n,a){a&&(T(a),o(function(){var a=d[0].getElementById("createAccount").getElementsByClassName("has-error")[0];if(a)return i.hash(a.id),l.anchorScroll();b.set("registration",angular.copy(e.signupForm)),t.go(n,{cache:!1})},0))},e.scrollTo=function(e,t){if("android"===b.get("platform"))return o(function(){return i.hash(t),l.anchorScroll()},500)},e.countriesModal=function(t,n){c.fromTemplateUrl("templates/countries-select.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(a){e.selectType=t,e.countryModal=a,e.countryModal.show(),e.FormController=n})},e.setCountry=function(t){"country"===e.selectType&&(e.signupForm.country=t.code,e.countryName=t.country,e.FormController.country.$setDirty()),"nationality"===e.selectType&&(e.signupForm.citizenship=t.nationality,e.nationalityName=t.nationality,e.FormController.citizenship.$setDirty()),e.search={},e.countryModal.hide()},e.closeCountryModal=function(){e.countryModal&&e.countryModal.hide()},e.$on("registration",A),e.$on("$ionicView.afterLeave",function(t){e.countryModal&&e.countryModal.hide()&&e.countryModal.remove()})}]),controllers.controller("TncController",["$scope","$state","$ionicLoading","$ionicModal","LocaleService","UserService","API","Utils","Storage","constants","ErrorService",function(e,t,n,a,o,i,s,r,l,c,d){function u(e){if(1!==e.status)throw new d({source:"TncController",type:c.error.type.VALIDATION,code:e.code.toString()||"updateTncFailed",severity:"warning",data:{response:e}});return e}e.tnc=!1,e.constants=c,e.lang="en";var p={isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1};e.modal=angular.copy(p),o.wait().then(function(t){e.translation=t,e.lang=o.lang}),e.navigate=function(e,n){return t.go(e,n)},e.onNext=function(a){if(r.formRevalidate(a,!0),a.$valid)return n.show(),s.acceptTnc().then(u).then(function(){return i.get().tnc=!0,n.hide(),t.go("root.app.assets",{cache:!1})}).catch(function(t){n.hide(),e.modal.isError=!0,e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.general_error,e.modal.textContent=o.translation.messages.general_error_text,e.modal.actionText=o.translation.try_again,e.modal.state=!0})}}]),controllers.controller("TransactionHistoryController",["$scope","$state","$filter","$ionicModal","$ionicLoading","$timeout","$ionicPopup","config","constants","Utils","API","UserService","LocaleService","TransactionHistoryService","ServerTimeService","UserControl",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v){function f(){return e.loadingMessage=p.translation.loading_transactions,o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),m.getTransactions().then(o.hide).then(h)}function h(){e.transactions=[];var t={live:!0};if(!m.collection)return e.transactions;e.transactions=m.collection.find(t).filter(function(t){if("all"===e.filter.period.id)return t;var n=c.setTimeRange(e.filter.period.id);return t.requestDate>=1e3*n.Start&&t.requestDate<=1e3*n.End}).filter(function(t){switch(e.filter.transactionType.id){case"all":return t;case"credit":return t.type.match(/^credit/i);default:return t.type===e.filter.transactionType.id}}).filter(function(t){return"all"===e.filter.tradingAccount.id?t:t.login.toString()===e.filter.tradingAccount.id})}p.wait().then(function(t){e.translation=t}),e.transactions=[],e.user=u.get(),e.clientTimeZone=g.clientTimeZone>=0?"+"+g.clientTimeZone.toString():g.clientTimeZone.toString(),e.periods=[{id:"day",label:p.translation.dateRange.day},{id:"threedays",label:p.translation.dateRange.threedays},{id:"week",label:p.translation.dateRange.week},{id:"month",label:p.translation.dateRange.month},{id:"threemonths",label:p.translation.dateRange.threemonths},{id:"all",label:p.translation.dateRange.all}],e.transactionTypes=l.transactionTypes.reduce(function(e,t){return e.push({id:t,label:p.translation.transactionTypes[t]||t}),e},[]),e.tradingAccounts=e.user.tradingAccounts.filter(function(e){return e.live}).map(function(e){return{id:e.login.toString(),label:"#"+e.login+" BALANCE "+l.currencySymbols[e.currency]+e.balance,currency:e.currency}}).concat({id:"all",label:p.translation.all_accounts,currency:""}),e.filter={period:_.find(e.periods,{id:"all"}),transactionType:_.find(e.transactionTypes,{id:"all"}),tradingAccount:_.find(e.tradingAccounts,{id:"all"})},e.navigate=function(e){t.go(e)},e.constants=l,e.selectedRange="day",e.$on("$ionicView.beforeEnter",function(){if(e.state=v.getState(),e.state)return t.go(e.state,{cache:!1});if(e.user&&!e.user.tnc&&l.tncPopup)return t.go("tnc",{cache:!1});if(e.user){switch(e.user.registrationState){case l.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case l.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}return u.kycCheck()||f()}return f()}),e.$on("$ionicView.afterLeave",function(){e.transactions=[]}),e.toggleCategory=function(t){return e.selectedRange=t,e.transactions.length=0,h()},e.showFilter=function(){var t=s.show({template:'<div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.period}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="period" ng-model="filter.period" ng-options="period.label for period in periods"></select></div></div></div><div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.type}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="transactionType" ng-model="filter.transactionType" ng-options="transactionType.label for transactionType in transactionTypes"></select></div></div></div><div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.account}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="tradingAccount" ng-model="filter.tradingAccount" ng-options="tradingAccount.label for tradingAccount in tradingAccounts"></select></div></div></div>',title:'<span class="roboto">'+p.translation.filterBy+"</span>",scope:e,buttons:[{text:p.translation.cancel},{text:p.translation.filter,type:"button-positive",onTap:function(e){e.preventDefault(),h(),t.close()}}]})},e.$on("clear",function(){log("clear transactionHistory controller"),e.user=null,e.transactions.length=0})}]),controllers.controller("UpdatePasswordController",["$scope","$ionicHistory","$state","$ionicLoading","config","constants","ErrorService","UserService","LoginService","LocaleService","API","Validator","Utils","UserControl",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m){function g(e){if(1!==e.status)throw new s({source:"UpdatePasswordController",type:i.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}c.wait().then(function(t){e.translation=t}),e.navigate=function(e){n.go(e)},e.user=r.get(),e.validator=u.getPattern,e.auth={password:""};var v={isError:!1,textTitle:"",textContent:"",state:!1,actionText:c.translation.try_again,back:""};e.modal=angular.copy(v),e.changePassword=function(t){if(p.formRevalidate(t),t.$valid){var n={oldPassword:e.auth.oldPassword,newPassword:e.auth.password};return a.show(),d.changePassword(n).then(g).then(function(){a.hide(),e.modal.textTitle=c.translation.messages.password_changed,e.modal.actionText=c.translation.close,e.modal.isError=!1,e.modal.textContent="",e.modal.back="root.app.menu",e.modal.state=!0}).catch(function(t){a.hide(),e.modal.textTitle=c.translation.messages.err_password_changed,e.modal.isError=!0,e.modal.textContent=c.translation.password_err_changed_text,e.modal.actionText=c.translation.tryAgain,e.modal.state=!0})}},e.$on("$ionicView.beforeEnter",function(){if(e.state=m.getState(),e.state)return n.go(e.state,{cache:!1});if(e.user&&!e.user.tnc&&i.tncPopup)return n.go("tnc",{cache:!1});if(e.user){switch(e.user.registrationState){case i.userState.initial:return n.go("signupPersonalProfile",{cache:!1});case i.userState.personal:return n.go("signupQuestionnaire",{cache:!1})}return r.kycCheck()}})}]),controllers.controller("UploadDocumentsCategoriesController",["$scope","$state","$stateParams","LocaleService","constants",function(e,t,n,a,o){function i(t){return e.documents.filter(function(e){
return e.category===t})}a.wait().then(function(t){e.translation=t}),e.categoryName=n.categoryName,e.categoryVideoLink=n.categoryVideoLink,e.documents=o.documentTypes,e.baseCategories=function(e){return i(e).map(function(e){return e.baseCategory}).filter(function(e,t,n){return n.indexOf(e)==t})}(e.categoryName)}]),controllers.controller("UploadDocumentsController",["$scope","$state","LocaleService","constants","$ionicLoading","UserService","UserControl",function(e,t,n,a,o,i,s){n.wait().then(function(t){e.translation=t,e.lang=n.lang}),e.lang=n.lang,e.user=i.get(),e.categories=a.documentCategories,o.hide(),e.navigate=function(n,a){return"document_other"===a.category.name?t.go("root.app.uploadDocumentsOther"):t.go(n,{categoryName:a.category.name,categoryVideoLink:a.category.videoLinks&&(a.category.videoLinks[e.lang]||a.category.videoLinks.en)})},e.$on("$ionicView.beforeEnter",function(){if(e.state=s.getState(),e.state)return t.go(e.state,{cache:!1});if(e.user&&!e.user.tnc&&a.tncPopup)return t.go("tnc",{cache:!1});if(e.user)switch(e.user.registrationState){case a.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case a.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}})}]),controllers.controller("UploadDocumentsFilesController",["$scope","$q","$state","$stateParams","LocaleService","constants","DocumentService",function(e,t,n,a,o,i,s){function r(e){return{quality:50,destinationType:Camera.DestinationType.FILE_URI,srcType:e,encodingType:Camera.EncodingType.JPEG,mediaType:Camera.MediaType.PICTURE,allowEdit:!0,correctOrientation:!0}}function l(e){return i.fileTypes.filter(function(t){return t===e}).length>0}function c(e){return e>=i.minFileSize&&e<=i.maxFileSize}o.wait().then(function(t){e.translation=t}),e.constants=i,e.baseCategory=a.baseCategory,e.categoryVideoLink=a.categoryVideoLink,e.documents=s.documents,e.files=function(t){return e.documents.filter(function(e){return e.baseCategory===t})}(e.baseCategory),e.category=e.files[0].category;var d={isError:!1,textTitle:"",textContent:"",state:!1,actionText:o.translation.try_again,back:""};e.modal=angular.copy(d),e.uploadFile=function(t){var n=t.target.files[0],a=t.target.attributes["file-id"].value,i="",s=e.files.filter(function(e){return e.type===a}).shift();if(s.uploadStatus=0,n)return l(n.type)?c(n.size)||(s.uploadStatus=-2,i=o.translation.file_is_big_or_small):(s.uploadStatus=-1,i=o.translation.file_incorrect_type),s.uploadStatus<0?(e.modal.textTitle=o.translation.messages.Err600,e.modal.textContent=i,e.modal.isError=!0,void(e.modal.state=!0)):s.startUpload(n).then(function(e){return s.uploadFile(n,e)}).then(function(){s.status="pending"}).catch(function(t){s.status="new",s.uploadStatus=0,console.warn(t),e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.Err600,e.modal.textContent=t&&t.code&&t.code.toString().match(/^Err6\d\d$/)?o.translation.messages.general_error_text:"",e.modal.isError=!0,e.modal.state=!0})},e.takePhoto=function(e){if(e.uploadStatus=0,console.log(e),navigator.hasOwnProperty("camera")){var n=r(Camera.PictureSourceType.CAMERA);return t(function(e,t){function a(t){e(t)}function o(e){t(e)}navigator.camera.getPicture(a,o,n)}).then(function(t){var n={name:"",size:"",type:""};return e.startUpload(n)}).then(function(t){return e.uploadFile(file,t)}).then(function(){e.status="pending"}).catch(function(e){console.warn(e)})}},e.navigate=function(t,a){return n.go(t,{direction:a.direction,categoryName:a.category,categoryVideoLink:e.categoryVideoLink})}}]),controllers.controller("UploadDocumentsOtherController",["$scope","$q","$state","$stateParams","LocaleService","constants","DocumentService","DocumentModel","$ionicPopup",function(e,t,n,a,o,i,s,r,l){function c(e){return i.fileTypes.filter(function(t){return t===e}).length>0}function d(e){return e>=i.minFileSize&&e<=i.maxFileSize}o.wait().then(function(t){e.translation=t});var u={id:null,type:"other",status:"new",url:"",category:"",baseCategory:""},p={isError:!1,textTitle:"",textContent:"",state:!1,actionText:o.translation.try_again,back:""};e.modal=angular.copy(p),e.files=s.documentsOther,e.documentModel=new r(u),e.uploadFile=function(t){var n=t.target.files[0],a=e.documentModel,i="";if(a.uploadStatus=0,n)return c(n.type)?d(n.size)||(a.uploadStatus=-2,i=o.translation.file_is_big_or_small,console.log("file too big or small")):(a.uploadStatus=-1,i=o.translation.file_incorrect_type,console.log("invalid file type")),a.uploadStatus<0?(e.modal.textTitle=o.translation.messages.Err600,e.modal.textContent=i,e.modal.isError=!0,void(e.modal.state=!0)):a.startUpload(n).then(function(e){return a.uploadFile(n,e)}).then(function(){return a.status="new",a.uploadStatus=0,s.initDocuments().then(function(){e.files=s.documentsOther})}).catch(function(t){a.status="new",a.uploadStatus=0,console.warn(t),e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.Err600,e.modal.textContent=t&&t.code&&t.code.toString().match(/^Err6\d\d$/)?o.translation.messages.general_error_text:"",e.modal.isError=!0,e.modal.state=!0})},e.deleteDocument=function(e){l.confirm({title:o.translation.document_remove,template:o.translation.document_confirm_remove}).then(function(t){if(t)return s.deleteDocument(e).catch(function(e){console.error(e)})})}}]),controllers.controller("VerificationSumsubController",["$scope","$state","$ionicLoading","LocaleService","constants","ExternalScriptLoader","API","ErrorService",function(e,t,n,a,o,i,s,r){function l(){return n.show(),s.initializeVerification({provider:"sumsub"}).then(d).then(function(e){n.hide(),c(e.accessToken,e.externalUserId)})}function c(e,t){u=idensic.init("#idensic",{clientId:o.verificationProviderOptions.clientId,accessToken:e,externalUserId:t},function(e,t){console.log("message:",e,t)})}function d(e){if(1!==e.status)throw new r({source:"VerificationSumsubController",type:o.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}a.wait().then(function(t){e.translation=t});var u;(new i).load("https://api.sumsub.com/idensic/static/sumsub-kyc.js").then(l).catch(function(e){console.warn(e)}),e.$on("$ionicView.beforeEnter",function(){if(e.user&&!e.user.tnc&&o.tncPopup)return t.go("tnc",{cache:!1});if(e.user)switch(e.user.registrationState){case o.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case o.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}})}]),controllers.controller("VerificationV2Controller",["$scope","$state","$ionicLoading","$ionicPopup","LocaleService","constants","API","ErrorService","VerificationV2Service",function(e,t,n,a,o,i,s,r,l){function c(e){return i.fileTypes.filter(function(t){return t===e}).length>0}function d(e){return e>=i.minFileSize&&e<=i.maxFileSize}o.wait().then(function(t){e.translation=t}),e.constants=i,e.documents=[],e.isApproved=!1,e.myPopup=null;var u={isError:!1,textTitle:"",textContent:"",state:!1,actionText:o.translation.try_again,back:""};e.modal=angular.copy(u),l.init().then(function(){e.documents=l.collection.getAll(),0===e.documents.length&&(e.isApproved=!0)}),e.uploadFile=function(t){var a=t.target.files[0],i=t.target.attributes["file-id"].value,s=Number(t.target.attributes["file-side"].value),r=_.find(e.documents,{id:i.toString()});return a&&r?(r.uploadStatus=0,c(a.type)?d(a.size)||(r.uploadStatus=-2,message=o.translation.file_is_big_or_small):(r.uploadStatus=-1,message=o.translation.file_incorrect_type),r.uploadStatus<0?(e.modal.textTitle=o.translation.messages.Err600,e.modal.textContent=message,e.modal.isError=!0,void(e.modal.state=!0)):(n.show(),r.startUpload(a,s).then(function(e){return r.uploadFile(a,e)}).then(function(){r.uploaded[s]=!0,r.updateStatus(),r.hasUploaded=!0,r.uploadStatus=0,n.hide(),e.modal.textTitle=o.translation.successful,e.modal.textContent="",e.modal.actionText=o.translation.ok,e.modal.isError=!1,e.modal.state=!0}).catch(function(t){r.status="new",r.uploadStatus=0,console.warn(t),e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.Err600,e.modal.textContent=t&&t.code&&t.code.toString().match(/^Err6\d\d$/)?o.translation.messages.general_error_text:"",e.modal.actionText=o.translation.tryAgain,e.modal.isError=!0,e.modal.state=!0}))):void console.warn("file is not selected or document is not found")},e.toggleImage=function(e){e.toggleImage(),e.twoSidedToggled=!e.twoSidedToggled},e.showSubtype=function(t){e.selectedDocument=t,e.myPopup=a.show({template:'<div class="row p-0 m-0 verification-subtitles"><div class="col p-0 m-0"><ion-list><ion-radio ng-model="selectedDocument.selectedSubType" ng-value="item" ng-change="selectedDocument.updateImages()" ng-repeat="item in selectedDocument.subTypes"><span class="font-13">{{translation[item.id] || item.title}}</span></ion-radio></ion-list></div></div>',title:e.translation.selectOption,scope:e,buttons:[{text:e.translation.select,type:"button-full",onTap:function(t){t.preventDefault(),e.document=e.selectedDocument,e.myPopup.close()}}]})},e.$on("$ionicView.beforeLeave",function(){e.myPopup&&e.myPopup.close(),e.myPopup=null})}]),controllers.controller("ViewQuestionnaireController",["$scope","$state","$timeout","$location","$ionicScrollDelegate","ionicToast","$ionicLoading","$ionicPopup","LocaleService","API","AccountService","Storage","Utils","UserService","constants","QuestionModel","ErrorService","LoginService","UserControl",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g,v,f,h,b){function y(e){if(1!==e.status)throw new f({source:"ViewQuestionnaireComponent",type:g.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function w(e,t){function n(e){var n=_.find(t,{questionId:e.id})||{};return e.values=n.answerIds||[],e.other=n.other||"",e}return e.map(n)}if(e.translation=l.translation,g.viewQuestionnaireEnable&&u.get("regulated")){var k=m.get();if(k.registrationState===g.userState.questionnaire&&""===k.classification&&k.liveAccountExists)return t.go("questionnaireMessage")}e.permit={checked:!1},e.formTemplate=[],e.formData={},e.questionGroups=Object.assign([],g.questionGroups),e.currentQuestionGroup="",e.currentQuestionnaireGroup=[],e.control={},e.scoringRules=g.scoringRules||[],e.scoringRule=null,e.modal={actionText:l.translation.try_again,state:!1,isProcess:!1},e.user=m.get(),e.navigate=function(e,n){return log("navigate to ",e),t.go(e,n)},e.showQuestionnair=3===e.user.registrationState&&e.user.classification.length>0&&e.user.liveAccountExists,e.modalDialogData={},e.showQuestionnair&&c.questions().then(y).then(function(t){e.questionGroups=g.questionGroups.map(function(n){return{group:n,questions:w(t.questions,t.customerAnswers).map(function(t){return new v(t,e.translation)}).filter(function(e){return e.group===n})}})}),e.$on("$ionicView.beforeEnter",function(){if(e.state=b.getState(),e.state)return t.go(e.state,{cache:!1});if(e.user&&!e.user.tnc&&g.tncPopup)return t.go("tnc",{cache:!1});if(e.user)switch(e.user.registrationState){case g.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case g.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}})}]),controllers.controller("WalletController",["$window","$scope","$state","$ionicLoading","LocaleService","UserService","constants","UserControl","config","Storage","$timeout","API","Onesignal",function(e,t,n,a,o,i,s,r,l,c,d,u,p){function m(){}function g(){p.getTags().then(function(e){e&&(e.hasOwnProperty("deposit")?p.setTag("deposit",Number(e.deposit)+1):p.setTag("deposit",1))})}a.hide(),o.wait().then(function(e){t.translation=e}),t.modal={actionText:o.translation.try_again,state:!1},t.config=l,t.paymentMethods=c.get("paymentMethods")||[],t.openDepositPage=function(n){switch(g(),n.type){case"module":return n.hosted?t.navigate("root.app.hostedpage",{method:n}):t.navigate("root.app."+n.name,{method:n});case"modulepopup":return n.hosted?t.navigate("root.app.hostedpage-popup",{method:n}):t.navigate("root.app."+n.name,{method:n});case"modulewindow":return t.navigate("root.app.hostedpage-window",{method:n});case"qrcode":return t.navigate("root.app.qrcode",{method:n});case"pendingDeposit":return t.navigate("root.app.pendingdeposit",{method:n});case"link":return void e.open(n.url,"_blank","hardwareback=no,location=0,menubar=0,closebuttoncaption=Back,hidden=yes");case"iframe":return n.url.length>0?t.navigate("root.app.external",{method:n}):t.navigate("root.app."+n.name,{method:n})}},t.navigate=function(e,t){n.go(e,t)},t.$on("$ionicView.beforeEnter",function(){if(t.state=r.getState(),t.state)return n.go(t.state,{cache:!1});0===t.paymentMethods.length&&(t.modal.textTitle=o.translation.paymentDetails,t.modal.actionText=o.translation.close,t.modal.isError=!1,t.modal.textContent=o.translation.emptyPspMessage,t.modal.back="root.app.assets",d(function(){t.modal.state=!0},0));var e=i.get();if(e){if(e.activeTradingAccount&&!e.activeTradingAccount.live)return t.modal.textTitle=o.translation.depositDemoTitle,t.modal.actionText=o.translation.switchAccountButton,t.modal.isError=!0,t.modal.textContent=o.translation.depositDemoContent,t.modal.back="root.app.manageAccounts",void d(function(){t.modal.state=!0},0);if(e.activeTradingAccount&&e.activeTradingAccount.live&&e.depositValidationRequired)return t.modal.textTitle=o.translation.depositUnavailableTitle,t.modal.actionText=o.translation.continue,t.modal.isError=!0,t.modal.textContent=o.translation.depositUnavailableContent,t.modal.back=t.sendTicket,void d(function(){t.modal.state=!0},0)}1===t.paymentMethods.length&&e.activeTradingAccount&&e.activeTradingAccount.live&&t.openDepositPage(t.paymentMethods[0])}),t.sendTicket=function(){var e={type:"Deposit or Withdrawal",subject:"Unvalidated client Attempted to make a deposit",description:"Unvalidated client has tried to perform a deposit however was rejected due to its validation status.Validation status can be adjusted from the client detailed view page using the CRM action buttons."};return u.createTicket(e).then(function(){return n.go("root.app.assets")})},t.walletNav=function(e){if("wiretransfer"===e.name&&"link"===e.type)return window.open(e.url,"_blank","hardwareback=no,location=0,menubar=0,closebuttoncaption=Back,hidden=yes"),!1;n.go("root.app."+e.name)},t.$on("$ionicView.afterLeave",m),t.$on("$ionicView.unloaded",m),t.$on("clear",m)}]),controllers.controller("WelcomeController",["$scope","$state","$ionicNavBarDelegate","config","constants","LocaleService","Utils",function(e,t,n,a,o,i,s){function r(){e.language=a.languages.find(function(e){return e.id===i.lang}),e.translation=i.translation,e.signUpURL=s.createLinkByLang("externalLinks.signUp",i.lang,"externalLinks.signUpDefault")}n.showBar(!1),i.wait().then(function(t){e.translation=t}),e.languages=a.languages,e.demoAccountCreateAfterSignup=o.demoAccountCreateAfterSignup,e.languageSelectorMarginTop=o.languageSelectorMarginTop,e.disableSignUp=o.disableSignup,e.authType=o.authType?o.authType:"newforex",console.log(">>>>>>>>>>> ",e.authType),r(),e.$watch(function(){return i.lang},function(e,t){e&&e!==t&&r()}),e.updateLang=function(t){i.load(t.id).then(function(){e.translation=i.translation,r()})},e.navigate=function(e,n){t.go(e,n)}}]),controllers.controller("WireTransferController",["$scope","$state","constants","LocaleService","Storage",function(e,t,n,a,o){a.wait().then(function(t){e.translation=t}),e.paymentMethods=o.get("paymentMethods")||[],e.defaultBankDetails=n.wiretransferDetails||{beneficiary_name:"",beneficiary_address:"",beneficiary_bank:"",bank_address:"",beneficiary_account_number:"",beneficiary_iban:"",swift:"",comments:""}}]),controllers.controller("WithdrawController",["$scope","$state","LocaleService","UserService","constants","Storage","config","Utils","$ionicPopover","API",function(e,t,n,a,o,i,s,r,l,c){n.wait().then(function(t){e.translation=t}),e.user=a.get(),e.constants=o,e.formValidator=!1,e.accountConfig={type:"withdraw"},e.withdrawAditionalText=e.constants.withdrawAditionalText||"",e.config={digits:2,step:1,min:50,max:1e5},e.changeStep=s.stepChange,e.accounts=e.user.tradingAccounts.filter(function(e){return e.live}).map(function(t){var n=o.currencySymbols[t.currency],a=t.balance.toFixed(e.user.currencyDigits),s=Math.min(t.freeMargin-t.credit,t.balance);return t.fundsToWithdraw=s>0?s:0,t.description=[t.login,"LIVE",e.translation.balance,n,a].join(" "),t.minWithdrawal=(_.find(i.get("currencies"),{currency:t.currency})||{}).minWithdrawal,t});var d=e.accounts.filter(function(e){return e.active}).shift();e.withdraw={account:d||e.accounts[0],value:50,fundsToWithdraw:0};var u=e.$watch("withdraw.account",function(t,n){e.withdraw.account&&c.customerWithdrawalMethods({login:e.withdraw.account.login,source:e.withdraw.account.source},e.user).then(function(t){e.withdraw.account.minWithdrawal=Number(t.data.minWithdrawal);var n=e.withdraw.account&&e.withdraw.account.minWithdrawal||50;e.config.digits=e.withdraw.account&&e.withdraw.account.currencyDigits||2,e.config.step=1,e.config.min=n,e.withdraw.value=n,e.withdraw.fundsToWithdraw=e.withdraw.account?e.withdraw.account.fundsToWithdraw:0}).catch(function(e){console.warn(e)})});e.withdraw.value=e.withdraw.account&&e.withdraw.account.minWithdrawal||50,e.withdraw.fundsToWithdraw=e.withdraw.account?e.withdraw.account.fundsToWithdraw:0;var p=e.$watch("withdraw.value",function(t,n){e.formValidator=t&&t>0&&t<=e.withdraw.account.fundsToWithdraw});e.paymentTypes=i.get("withdrawalMethods").map(function(t){var n=r.toCamelCase(t);return{id:n,label:e.translation[n]}}),e.selectedModel={},e.selectedModel.selectedPaymentMethod=e.paymentTypes.slice(0,1).pop(),e.submit=function(n){if(n.$valid&&e.withdraw.value>0&&e.withdraw.value<=e.withdraw.fundsToWithdraw){var a="root.app.withdraw-{state}".replace("{state}",e.selectedModel.selectedPaymentMethod.id);return t.go(a,{login:e.withdraw.account.login,amount:e.withdraw.value})}},l.fromTemplateUrl("templates/wallet-menu.html",{scope:e.$new()}).then(function(t){e.popover=t}),e.openPopover=function(t){e.popover.show(t)},e.navigate=function(n,a){e.popover&&e.popover.remove(),t.go(n,a)},e.$on("$ionicView.beforeEnter",function(){var e=a.get();return o.kycCheck&&"partial kyc - can trade"===e.complianceStatus?t.go("kycCheck",{cache:!1}):a.kycCheck()}),e.$on("$ionicView.beforeLeave",function(e){u(),p()})}]),controllers.controller("WithdrawCreditCardController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","ServerTimeService","UserService","$filter",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g){function v(e){if(1!==e.status)throw new r({source:"WithdrawCreditCardController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then(function(t){e.translation=t}),e.user=m.get(),e.validator=c.getPattern,e.minDate=p.time,e.constants=l,e.withdraw={login:n.login,amount:n.amount},e.modal={actionText:i.translation.try_again,state:!1},e.creditCard={holder:e.user.firstName+" "+e.user.lastName},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map(function(t){return{id:t,label:e.translation.withdrawalReason[t]}}),e.reasonModel={},e.reasonModel.selectedReason=null,e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o="";if(e.creditCard.date){var r=g("date")(e.creditCard.date,"MM"),c=g("date")(e.creditCard.date,"yyyy");o="{month} {year}".replace("{month}",parseInt(r,10)).replace("{year}",parseInt(c,10))}var d={login:parseInt(e.withdraw.login,10),amount:parseFloat(e.withdraw.amount),ccNumber:e.creditCard.number||"",ccHolder:e.creditCard.holder,ccCvv:"",ccExpiration:o||"",reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalCreditCard(d).then(v).then(function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0}).catch(function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0})}}}]),controllers.controller("WithdrawCryptoWalletController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,p){function m(e){if(1!==e.status)throw new r({source:"WithdrawNetellerController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then(function(t){e.translation=t}),e.validator=c.getPattern,e.user=p.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.walletAddressModel={walletAddress:""},e.walletTypes=Object.keys(l.cryptoWalletTypes||{}).map(function(e){return{id:e,label:l.cryptoWalletTypes[e]}}),e.selectedModel={},e.selectedModel.selectedWalletType=e.walletTypes.slice(0,1).pop(),e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseFloat(e.withdraw.amount),walletAddress:e.walletAddressModel.walletAddress,reason:"",reasonComment:"",walletType:e.selectedModel.selectedWalletType?e.selectedModel.selectedWalletType.id:"btc"};return a.show(),s.withdrawalCrypto(o).then(m).then(function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0}).catch(function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0})}}}]),controllers.controller("WithdrawFasapayController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,p){function m(e){if(1!==e.status)throw new r({source:"WithdrawFasapayController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then(function(t){e.translation=t}),e.validator=c.getPattern,e.user=p.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map(function(t){return{id:t,label:e.translation.withdrawalReason[t]}}),e.accountModel={accountName:null,accountNumber:null},e.reasonModel={},e.reasonModel.selectedReason=null,e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),fasapayAccountName:e.accountModel.accountName,fasapayAccountNumber:e.accountModel.accountNumber,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalFasaPay(o).then(m).then(function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0}).catch(function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0})}}}]),controllers.controller("WithdrawHistoryController",["$scope","$state","$filter","$ionicModal","$ionicLoading","$timeout","$ionicPopup","config","constants","Utils","API","UserService","LocaleService","WithdrawHistoryService","ServerTimeService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g){function v(){return e.loadingMessage=p.translation.loading_transactions,o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),m.getWithdrawalRequests().then(o.hide).then(f)}function f(){if(e.transactions=[],!m.collection)return e.transactions;e.transactions=m.collection.find().filter(function(t){if("all"===e.filter.period.id)return t;var n=c.setTimeRange(e.filter.period.id);return t.requestDate>=1e3*n.Start&&t.requestDate<=1e3*n.End}).filter(function(t){return"all"===e.filter.transactionType.id?t:"Canceled"===e.filter.transactionType.id?t.status.toLowerCase().includes("cancelled"):t.status===e.filter.transactionType.id}).filter(function(t){return"all"===e.filter.tradingAccount.id?t:t.login.toString()===e.filter.tradingAccount.id})}p.wait().then(function(t){e.translation=t}),e.transactions=[],e.constants=l,e.user=u.get(),e.clientTimeZone=g.clientTimeZone>=0?"+"+g.clientTimeZone.toString():g.clientTimeZone.toString(),e.periods=[{id:"day",label:p.translation.dateRange.day},{id:"threedays",label:p.translation.dateRange.threedays},{id:"week",label:p.translation.dateRange.week},{id:"month",label:p.translation.dateRange.month},{id:"threemonths",label:p.translation.dateRange.threemonths},{id:"all",label:p.translation.dateRange.all}],e.transactionTypes=[{id:"pending",label:p.translation.pending},{id:"approved",label:p.translation.approved},{id:"Canceled",label:p.translation.canceled||"Canceled"},{id:"rejected",label:p.translation.rejected},{id:"all",label:p.translation.all}],e.tradingAccounts=e.user.tradingAccounts.filter(function(e){return e.live}).map(function(e){return{id:e.login.toString(),label:"#"+e.login+" LIVE",currency:e.currency}}).concat({id:"all",label:p.translation.all_accounts,currency:""}),e.filter={period:_.find(e.periods,{id:"all"}),transactionType:_.find(e.transactionTypes,{id:"all"}),tradingAccount:_.find(e.tradingAccounts,{id:"all"})},e.modal={actionText:p.translation.try_again,state:!1},e.navigate=function(e){t.go(e)},e.showFilter=function(){var t=s.show({template:'<div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.period}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="period" ng-model="filter.period" ng-options="period.label for period in periods"></select></div></div></div><div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.type}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="transactionType" ng-model="filter.transactionType" ng-options="transactionType.label for transactionType in transactionTypes"></select></div></div></div><div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.account}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="tradingAccount" ng-model="filter.tradingAccount" ng-options="tradingAccount.label for tradingAccount in tradingAccounts"></select></div></div></div>',title:'<span class="roboto">'+p.translation.filterBy+"</span>",scope:e,buttons:[{text:p.translation.cancel},{text:p.translation.filter,type:"button-positive",onTap:function(e){e.preventDefault(),f(),t.close()}}]})},e.cancelRequest=function(t){s.confirm({title:e.translation.withdrawRequest,template:e.translation.cancelWithdrawal}).then(function(n){n&&(e.loadingMessage="",o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),m.cancelWithdrawalRequest(t.id).then(function(){o.hide(),e.modal.textTitle=p.translation.messages.cancelRequest,e.modal.isError=!1,e.modal.actionText=p.translation.continueTrading,e.modal.textContent=p.translation.withdrawCancelSuccess,e.modal.back="root.app.withdraw",e.modal.state=!0}).catch(function(t){o.hide(),e.modal.textTitle=p.translation.messages.general_error,e.modal.actionText=p.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=p.translation.messages[t.code]||p.translation.withdrawCancelFailed,e.modal.back="root.app.withdraw",e.modal.state=!0}))})},e.$on("$ionicView.beforeEnter",function(){if(e.user){switch(e.user.registrationState){case l.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case l.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}return u.kycCheck()||v()}return v()}),e.$on("$ionicView.afterLeave",function(){e.transactions=[]})}]),controllers.controller("WithdrawLocalWireTransferController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService","CountryService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m){function g(e){if(1!==e.status)throw new r({source:"WithdrawLocalWireTransferController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then(function(t){e.translation=t}),e.user=p.get(),e.validator=c.getPattern,e.countries=m.get(),e.constants=l,e.withdraw={login:n.login,amount:n.amount},e.modal={actionText:i.translation.try_again,state:!1},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map(function(t){return{id:t,label:e.translation.withdrawalReason[t]}}),e.localBanks=d.get("localBanks").map(function(e,t){return{id:t,label:e}}),e.reasonModel={},e.reasonModel.selectedReason=null,e.predefinedCountryObject=_.find(e.countries,{code:e.user.country}),e.countryName=e.predefinedCountryObject.country,console.log({test:e}),e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),bankName:e.withdraw.bankName.label,bankAccountHolder:e.withdraw.accountHolder,bankAccountNumber:e.withdraw.bankNumber,bankCountry:e.predefinedCountryObject.code,bankCity:e.withdraw.bankCity||"",bankState:e.withdraw.bankState||"",bankAddress:e.withdraw.bankStreet,comment:e.withdraw.comment,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalLocalWireTransfer(o).then(g).then(function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0}).catch(function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0})}},e.$on("$ionicView.afterView",function(t){console.log(e)}),e.$on("$ionicView.afterLeave",function(t){e.countryModal&&e.countryModal.hide()&&e.countryModal.remove()})}]),controllers.controller("WithdrawNetellerController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,p){function m(e){if(1!==e.status)throw new r({source:"WithdrawNetellerController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then(function(t){e.translation=t}),e.validator=c.getPattern,e.user=p.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map(function(t){return{id:t,
label:e.translation.withdrawalReason[t]}}),e.accountNumberModel={},e.accountNumberModel.accountNumber="",e.reasonModel={},e.reasonModel.selectedReason=null,e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),neteller:e.accountNumberModel.accountNumber,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalNeteller(o).then(m).then(function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0}).catch(function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0})}}}]),controllers.controller("WithdrawOtherController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,p){function m(e){if(1!==e.status)throw new r({source:"WithdrawOtherController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then(function(t){e.translation=t}),e.validator=c.getPattern,e.user=p.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.detailsModel={},e.detailsModel.details="",e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),other:e.detailsModel.details};return a.show(),s.withdrawalOther(o).then(m).then(function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0}).catch(function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0})}}}]),controllers.controller("WithdrawSkrillController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,p){function m(e){if(1!==e.status)throw new r({source:"WithdrawSkrillController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then(function(t){e.translation=t}),e.validator=c.getPattern,e.user=p.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map(function(t){return{id:t,label:e.translation.withdrawalReason[t]}}),e.accountEmail="",e.reasonModel={},e.reasonModel.selectedReason=null,e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),skrill:this.accountEmail,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalSkrill(o).then(m).then(function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0}).catch(function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0})}}}]),controllers.controller("WithdrawUnionpayController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService","CountryService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m){function g(e){if(1!==e.status)throw new r({source:"WithdrawUnionpayController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then(function(t){e.translation=t}),e.validator=c.getPattern,e.user=p.get(),e.constants=l,e.countries=m.get(),e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.unionPayModel={bankName:null,unionpayCardholderName:null,unionpayBankCardNumber:null,unionpayNationalIdCard:null,bankCountry:null,bankCity:null,bankBranch:null,bankCountryCode:null,bankCountryName:null},e.countriesModal=function(t,n){o.fromTemplateUrl("templates/countries-select.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(a){e.selectType=t,e.countriesList=e.countries,e.countryModal=a,e.countryModal.show(),e.FormController=n})},e.setCountry=function(t){"country"===e.selectType&&(e.unionPayModel.bankCountryName=t.country,e.unionPayModel.bankCountryCode=t.code,e.FormController.bankCountry.$setDirty()),e.search={},e.countryModal.hide()},e.closeCountryModal=function(){e.countryModal&&e.countryModal.hide(),e.countriesList=null},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),bankName:e.unionPayModel.bankName,unionpayCardholderName:e.unionPayModel.unionpayCardholderName,unionpayBankCardNumber:e.unionPayModel.unionpayBankCardNumber,unionpayNationalIdCard:e.unionPayModel.unionpayNationalIdCard,bankCountry:e.unionPayModel.bankCountryCode,bankCity:e.unionPayModel.bankCity,bankBranch:e.unionPayModel.bankBranch};return a.show(),s.withdrawalUnionPay(o).then(g).then(function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.menu",e.modal.state=!0}).catch(function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0})}},e.$on("$ionicView.afterLeave",function(t){e.countryModal&&e.countryModal.hide()&&e.countryModal.remove()})}]),controllers.controller("WithdrawWireTransferController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService","CountryService",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m){function g(e){if(1!==e.status)throw new r({source:"WithdrawWireTransferController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then(function(t){e.translation=t}),e.user=p.get(),e.validator=c.getPattern,e.countries=m.get(),e.constants=l,e.withdrawWireTransferBankStateNotRequired=e.constants.withdrawWireTransferBankStateNotRequired,e.withdraw={login:n.login,amount:n.amount},e.modal={actionText:i.translation.try_again,state:!1},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map(function(t){return{id:t,label:e.translation.withdrawalReason[t]}}),e.reasonModel={},e.reasonModel.selectedReason=null,e.countriesModal=function(t,n){o.fromTemplateUrl("templates/countries-select.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(a){e.selectType=t,e.countriesList=e.countries,e.countryModal=a,e.countryModal.show(),e.FormController=n})},e.setCountry=function(t){"country"===e.selectType&&(e.withdraw.country=t.code,e.countryName=t.country,e.FormController.bankCountry.$setDirty()),e.search={},e.countryModal.hide()},e.closeCountryModal=function(){e.countryModal&&e.countryModal.hide(),e.countriesList=null},e.search={},e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),bankName:e.withdraw.bankName,bankAccountHolder:e.withdraw.accountHolder,bankAccountNumber:e.withdraw.bankNumber,swift:e.withdraw.code,bankCountry:e.withdraw.country,bankCity:e.withdraw.bankCity||"",bankState:e.withdraw.bankState||"",bankAddress:e.withdraw.bankStreet,comment:e.withdraw.comment,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),console.log({request:o}),s.withdrawal(o).then(g).then(function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0}).catch(function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0})}},e.$on("$ionicView.afterLeave",function(t){e.countryModal&&e.countryModal.hide()&&e.countryModal.remove()})}]),controllers.controller("WithdrawalComplianceController",["$scope","$state","$timeout","$location","$ionicScrollDelegate","ionicToast","$ionicLoading","LocaleService","API","ErrorService","AccountService","Storage","Utils","UserService","constants",function(e,t,n,a,o,i,s,r,l,c,d,u,p,m,g){function v(){function t(e){return"string"==typeof e?[Number(e)]:Object.keys(e).reduce(function(t,n){return"$$hashKey"!==n&&e[n]&&t.push(Number(n)),t},[])}return e.quizItems.reduce(function(n,a){return n.push({questionId:a.id,answerIds:t(e.formData[a.formModelName]),answer:e.formData[a.formModelName+"OtherAnswer"]||""}),n},[])}function f(e){if(1!==e.status)throw new c({source:"DynamicController",type:g.error.type.VALIDATION,code:e.code||"updateCustomerFailed",severity:"warning",data:{response:e}});return e}r.wait().then(function(t){e.translation=t}),e.translation=r.translation,e.permit={checked:!1},e.modal={actionText:r.translation.try_again,state:!1},e.questions=[],e.formData={},e.formTemplate=[],e.quizItems=[],e.navigate=function(e,n){return log("navigate to ",e),t.go(e,n)},l.questions().then(f).then(function(t){var n=Array.isArray(t.customerAnswers)?t.customerAnswers:[];return t.questions.reduce(function(t,a){var o=n.length&&n.find(function(e){return e.questionId===a.id})||{};return t.push({id:a.id,label:e.translation&&e.translation.quizQuestions[a.id.toString()]||a.id.toString(),allowOther:!!a.free,isMulti:!!a.multi,other:o.other||void 0,otherShown:!!o.other,formModelName:"question"+a.id,answers:a.answers.reduce(function(t,n){return t[n.toString()]={label:e.translation&&e.translation.quizAnswers[n.toString()]||n.toString(),slaveTo:-1!==(o.answerIds||[]).indexOf(n),isOn:!0},t},{})}),t},[])}).then(function(t){e.quizItems=t,e.formTemplate.push({type:"titleseparator",label:e.translation.withdrawalInformation,labelclass:"separator-title",mainclass:"title"}),t.map(function(t){Object.keys(t.answers).length&&(!e.formData[t.formModelName]&&(e.formData[t.formModelName]={}),Object.keys(t.answers).forEach(function(n){!!t.answers[n].slaveTo&&(e.formData[t.formModelName][n]=!0)})),t.isMulti?e.formTemplate.push({type:"checklist",label:t.label,labelclass:"question-title text-center",labelid:t.formModelName,class:"'form-select no-appearance checklist'",model:t.formModelName,mainwrapper:"div",mainclass:"tap-checklist",empty:"Select option",val:e.formData[t.formModelName]||null,required:!0,options:t.answers,multiple:t.isMulti}):e.formTemplate.push({type:"select",label:t.label,labelclass:"question-title text-center",labelid:t.formModelName,class:"'form-select no-appearance select'",model:t.formModelName,mainwrapper:"div",mainclass:"tap-select",empty:"Select option",val:Object.keys(e.formData[t.formModelName]).length&&e.formData[t.formModelName]||null,required:!0,options:t.answers}),e.formTemplate.push({type:"validatemessages",mainclass:"font-12 messages",formMessages:t.formModelName,errorMessageClass:"help-block",errorMessages:[{field:"required",text:"Please select one option"}]}),t.allowOther&&(e.formData[t.formModelName+"OtherAllow"]=!!t.other,e.formTemplate.push({type:"checkbox",label:"Other",labelclass:"form-group item-input item-stacked-label p-0",mainclass:"font-12 messages checkbox-wrapper",class:"'checkbox-other'",formMessages:t.formModelName,model:t.formModelName+"OtherAllow",slaveTo:!!t.other}),e.formTemplate.push({type:"text",class:"{'form-select no-appearance': true, 'shown': formData."+t.formModelName+"OtherAllow}",model:t.formModelName+"OtherAnswer",mainwrapper:"div",mainclass:"",placeholder:e.translation.specifyOtherAnswer,val:t.other,minLength:3,required:!0}))})}),e.validateForm=function(){var t=!1;return!(Object.keys(e.formData).length&&e.quizItems.find(function(n){return!e.formData[n.formModelName+"OtherAllow"]&&e.formData[n.formModelName+"OtherAnswer"]&&e.formData[n.formModelName+"OtherAnswer"].length&&(e.formData[n.formModelName+"OtherAnswer"]=void 0),t=Object.keys(e.formData[n.formModelName]||{}).find(function(t){return e.formData[n.formModelName][t]}),!(!e.formData[n.formModelName+"OtherAllow"]&&t||e.formData[n.formModelName+"OtherAllow"]&&e.formData[n.formModelName+"OtherAnswer"]&&e.formData[n.formModelName+"OtherAnswer"].length>2)}))},e.processForm=function(){return s.show(),l.questionnaire({answers:v(e.formData)}).then(f).then(function(){return s.hide(),t.go("root.app.uploadDocuments")}).catch(function(t){s.hide(),e.modal.isError=!0,e.modal.textTitle=t&&r.translation.messages[t.code]||r.translation.messages.general_error,e.modal.textContent="",e.modal.state=!0})},e.$on("$destroy",function(){e.formData={},e.formTemplate=[],e.quizItems=[]})}]),services.service("FacebookAuthProvider",["$q","ExternalScriptLoader",function(e,t){function n(n){function a(){return e(function(e,t){FB.getLoginStatus(function(n){"connected"===n.status&&e(n.authResponse),t("User is not logged in")})})}function o(){return e(function(e,t){FB.api("/me?fields="+s,function(t){var n={provider:"facebook",id:t.id,email:t.email,name:t.name,photoUrl:"https://graph.facebook.com/"+t.id+"/picture?type=normal",firstName:t.first_name,lastName:t.last_name,facebook:t};e(n)})})}var i=this,s="name,email,picture,first_name,last_name",r=new t,l={scope:"email,public_profile"},c=n.id;i.ready=!1,this.init=function(){function t(){return new e(function(e,t){FB.init({appId:c,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:"v4.0"}),i.ready=!0,e()})}return r.load("//connect.facebook.net/en_US/sdk.js").then(t)},this.isLoggedIn=function(){return a().then(function(){return!0}).catch(function(e){return!1})},this.signIn=function(t){return function(){return e(function(e,t){FB.login(function(n){n.authResponse?e(n.authResponse):t("Facebook login failed")},l)})}().then(function(e){return o().then(function(t){return t.token=e.accessToken,t})})},this.signOut=function(t){return e(function(e,t){FB.logout(e)})},this.getUser=function(){return e.all([a(),o()]).then(function(e){var t=e[0],n=e[1];return n.token=t.accessToken,n})}}return n}]),services.service("GoogleAuthProvider",["$q","ExternalScriptLoader",function(e,t){function n(n){var a=this,o=new t,i=n.id,s=null;a.ready=!1,this.init=function(){var t=function(){return e(function(e,t){function n(){s=gapi.auth2.init({client_id:i}),s.then(function(){a.ready=!0,e()}).catch(function(e){a.re=!1,t(e)})}gapi.load("auth2",n)})};return o.load("https://apis.google.com/js/platform.js").then(t)},this.isLoggedIn=function(){return e.resolve().then(function(){return s.isSignedIn.get()})},this.signIn=function(e){return s.signIn(e).then(a.getUser)},this.signOut=function(e){return e?s.disconnect():s.signOut()},this.getUser=function(){if(!a.isLoggedIn())return e.resolve(null);var t=s.currentUser.get().getBasicProfile(),n=s.currentUser.get().getAuthResponse(!0).access_token,o=s.currentUser.get().getAuthResponse(!0).id_token,i={provider:"google",id:t.getId(),email:t.getEmail(),name:t.getName(),photoUrl:t.getImageUrl(),firstName:t.getGivenName(),lastName:t.getFamilyName(),token:n,idToken:o};return e.resolve(i)}}return n}]),services.service("SocialAuthService",["$q","config","ExternalScriptLoader","GoogleAuthProvider","FacebookAuthProvider",function(e,t,n,a,o){function i(){var e=[];return t.googleProviderId&&e.push({provider:"google",id:t.googleProviderId}),t.facebookProviderId&&e.push({provider:"facebook",id:t.facebookProviderId}),e}function s(e){switch(e.provider){case"google":return new a(e);case"facebook":return new o(e);default:throw new Error("Auth provider ["+e.provider+"] is not implemented!")}}var r=new Map;return this.init=function(){i().forEach(function(e){var t=s(e);t.init().then(function(){r.set(e.provider,t)}).catch(function(t){console.warn("Auth provider ["+e.provider+"] initialization error",t)})})},this.signInWithGoogle=function(){var e=r.get("google");if(!e)throw new Error("Auth provider [google] is not registered!");return e.signIn()},this.signInWithFacebook=function(){var e=r.get("facebook");if(!e)throw new Error("Auth provider [facebook] is not registered!");return e.signIn()},this.signOut=function(){return e.all(Array.from(r.keys()).map(function(e){return r.get(e).signOut(!0)})).catch(function(e){console.warn(e)})},this.isProviderReady=function(e){var t=r.get(e);return t&&t.ready},this}]);
//# sourceMappingURL=app.min.js.map
