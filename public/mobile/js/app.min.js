var app=angular.module("forex-mobile",["ionic","ngAnimate","app.controllers","app.services","dynform","appsflyer","ionic-toast","ngCookies","720kb.socialshare","social"]),controllers=angular.module("app.controllers",["ngMessages","ngMask","angularMoment"]),models=angular.module("app.models",["angularMoment"]),collections=angular.module("app.collections",[]),services=angular.module("app.services",["app.models","app.collections","ionic","angular-md5"]);app.run(["$ionicPlatform","$ionicLoading","$injector","config","constants","Storage","appsflyer","$rootScope","$state","$q","$urlRouter","Utils",function(e,t,n,a,o,i,s,r,l,c,d,u){e.ready((function(){ionic.Platform.isFullScreen=!0,log("App run phase."),i.set("platform",ionic.Platform.platform()),t.show(),e.registerBackButtonAction((function(e){e.preventDefault()}),500),n.get("Init").run().then((function(){t.hide(),m(),u.getURLParameterByName("action")===o.depositActionName?l.go("root.app.wallet"):l.go("root.app.assets")})).catch((function(e){if(log("Init run error: ",e),m(),t.hide(),!document.location.hash.match(/login/)&&!document.location.hash.match(/signup/))return l.go("welcome");d.sync()}))})),r.$on("$stateChangeError",(function(e,n,a,o,i,s){log("$stateChangeError: ",s,o,n),e.preventDefault(),t.hide(),l.go("welcome")}));var m=r.$on("$stateChangeStart",(function(e){e.preventDefault()}));r.$on("$stateChangeStart",(function(e,t,a,o,i){var s=n.get("constants");s.disabledStates&&s.disabledStates.indexOf(t.name)>-1&&(console.warn("State disabled: [",t.name,"]"),l.go("welcome"),e.preventDefault())}))}]),app.config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","$socketProvider","configProvider","$animateProvider","$compileProvider","appsflyerProvider","$injector",function(e,t,n,a,o,i,s,r,l){function c(e,t,n,a){return n.show({noBackdrop:!0}),e.load("depositValue").then(n.hide).catch((function(a){e.set("depositValue",t.defaultDeposit),n.hide()}))}function d(e){return function(t){return t.enter(e),!0}}e.state("root",{url:"",cache:!1,template:"<ion-nav-view/>",abstract:!0,controller:["$state","rootResolver","AccountService",function(e,t,n){console.log("Root state controller: ",t);var a=n.checkTradingAccounts();if(a)return e.go(a)}],resolve:{rootResolver:["$injector","$q",function(e,t){return e.get("Init").isInitialized?t.resolve():t.reject("not initialized!")}]}}).state("root.app",{url:"/app",cache:!1,abstract:!0,template:'<ion-tabs class="tabs-icon-top tabs-color-active-positive footer-menu"><ion-tab title="{{::translation.instruments}}" icon-off="icon-Instruments" icon-on="icon-Instruments" ui-sref="root.app.assets"><ion-nav-view name="tab-assets"></ion-nav-view></ion-tab><ion-tab title="COOMA" icon-off="icon-social" icon-on="icon-social" ui-sref="root.app.social" hidden="{{!isSocial}}"><ion-nav-view name="tab-social"></ion-nav-view></ion-tab><ion-tab title="{{::translation.openPositions}}" icon-off="icon-OpenTrades" icon-on="icon-OpenTrades" ui-sref="root.app.openTrades"><ion-nav-view name="tab-opentrades"></ion-nav-view></ion-tab><ion-tab title="{{::translation.pending}}" icon-off="icon-PendingTrades" icon-on="icon-PendingTrades" ui-sref="root.app.pendingTrades"><ion-nav-view name="tab-pending"></ion-nav-view></ion-tab><ion-tab title="{{::translation.deposit}}" icon-off="icon-Wallet" icon-on="icon-Wallet" ui-sref="root.app.wallet" hidden="{{authType===\'webtrader\'}}"><ion-nav-view name="tab-wallet"></ion-nav-view></ion-tab><ion-tab title="{{::translation.closedPositions}}" icon-off="icon-ClosedTrades" icon-on="icon-ClosedTrades" ui-sref="root.app.closedTrades"><ion-nav-view name="tab-closedtrades"></ion-nav-view></ion-tab><ion-tab title="{{::translation.menu}}" icon-off="icon-Menu" ng-class="verification" class="more-menu-item {{verificationRequired ? \'verificationRequired\' : \'\'}}" icon-on="icon-Menu" ui-sref="root.app.menu"><ion-nav-view name="tab-menu"></ion-nav-view></ion-tab></ion-tabs><modal data="modal" template="templates/directives/popup-message.html"></modal>',controller:"AppController",controllerAs:"app",data:{footer:!1}}).state("welcome",{url:"/welcome",cache:!1,template:'<div class="main-img"><div class="logo"><logo-title></logo-title></div><div class="content welcome-page-content height-100"><div class="row row-bottom navigation-content responsive-sm position-bottom"><div class="col"><div class="row" ng-if="!disableSignUp"><div class="col"><a href="#/signup" class="button main-button width-100 button-full" ng-if="!demoAccountCreateAfterSignup && !signUpURL">{{translation.get_started}}</a> <a href="{{signUpURL}}" target="_blank" class="button main-button width-100 button-full" ng-if="signUpURL">{{translation.get_started}}</a> <a href="#/signup?accountType=live" class="button main-button width-100 button-full" ng-if="demoAccountCreateAfterSignup && !signUpURL">{{translation.sign_up}}</a> <a href="#/signup?accountType=demo" class="button main-button width-100 button-transparent button-transparent-white" ng-if="demoAccountCreateAfterSignup && !signUpURL">{{translation.sign_up_demo}}</a></div></div><div class="row languageSelector" ng-style="{\'margin-top\': languageSelectorMarginTop || 0}"><div class="content white welcome-message width-80"><div ng-if="!disableSignUp" id="login-btn-container" on-tap="authType===\'webtrader\' ? navigate(\'login-webtrader\') : navigate(\'login\')" class="width-100"><span>{{translation.already_member}}</span> <span class="underline-none login">{{translation.log_in}}</span></div></div><div class="content" ng-if="languages.length > 1"><div class="localization-wrapper"><div class="localization-area"><language-select languages="languages" callback="updateLang(item)"></language-select></div></div></div></div><div class="row" ng-if="disableSignUp"><a href="#/login" ng-if="authType === \'newforex\'" class="button main-button width-100 button-full">{{translation.log_in}}</a> <a href="#/login-webtrader" ng-if="authType === \'webtrader\'" class="button main-button width-100 button-full">{{translation.log_in}}</a></div></div></div></div></div>',controller:"WelcomeController",data:{footer:!1}}).state("login",{url:"/login",cache:!1,template:'<ion-view class="login"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'welcome\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.sign_in}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row mt-08"><div class="col text-right"><a href="#/forgetpassword" class="underline-none">{{::translation.forgot_password}}</a></div></div><div class="login-type-select-btns-container" ng-if="isLoginWithSMSEnabled"><a href="#/login" class="underline-none selected">{{translation[\'login\']}}</a> <a href="#/login-sms" class="underline-none">{{translation[\'smsLogin\']}}</a></div><form class="list padding" name="form" ng-submit="login(form)" novalidate><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.email.$invalid && !form.email.$pristine) || (form.$submitted && form.email.$invalid) }"><input type="email" name="email" keyboard-watcher ng-model="loginForm.email" ng-minlength="4" ng-maxlength="80" ng-pattern="validator(\'email\')" class="has-context-menu" required> <span class="input-label">{{::translation.emailRegistration}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.email.$error" ng-if="form.email.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.password.$invalid && !form.password.$pristine) || (form.$submitted && form.password.$invalid) }"><input type="{{showPassword?\'text\':\'password\'}}" name="password" ng-model="loginForm.password" required keyboard-watcher ng-minlength="6" ng-maxlength="24" class="has-context-menu"> <span class="input-label">{{::translation.password}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.password.$error" ng-if="form.password.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.passwordRequired}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div><ion-checkbox class="mt-10 border-0 font-14 show-password" ng-model="showPassword">{{::translation.show_password}}</ion-checkbox><button class="button button-block main-button button-full" type="submit">{{::translation.sign_in}}</button><div class="content" ng-if="template === \'social\'"><div class="sub-details text-center padding add-line font-11" on-tap="navigate(\'welcome\')">{{::translation.signinWith}}</div><div class="social"><button class="button button-social font-14" on-tap="signinWithGoogle()" type="button" ng-if="socialAuthService.isProviderReady(\'google\')"><i class="button-google"></i> Google</button> <button class="button button-social font-14" on-tap="signinWithFacebook()" type="button" ng-if="socialAuthService.isProviderReady(\'facebook\')"><i class="button-facebook"></i> Facebook</button></div></div></form><div class="content" ng-if="!disableSignUp"><div class="sub-details text-center padding add-line font-11" on-tap="navigate(\'welcome\')">{{::translation.new_bdbfx}}</div><div class="padding"><button ng-if="!signUpURL" class="button button-block button-transparent" on-tap="navigate(\'signup\')">{{::translation.new_account}}</button> <a ng-if="signUpURL" href="{{signUpURL}}" target="_blank" class="button button-block button-transparent">{{translation.new_account}}</a></div><div class="sub-info text-center padding font-12">{{::translation.login_bottom_text}}</div></div><modal data="modal"></modal></ion-content></ion-view>',controller:"LoginController",data:{footer:!1}}).state("login-sms",{url:"/login-sms",cache:!1,template:'<ion-view class="login"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'welcome\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.sign_in}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row mt-08"><div class="col text-right"><a href="#/forgetpassword" class="underline-none">{{::translation.forgot_password}}</a></div></div><div class="login-type-select-btns-container"><a href="#/login" class="underline-none">{{translation[\'login\']}}</a> <a href="#/login-sms" class="underline-none selected">{{translation[\'smsLogin\']}}</a></div><form class="list padding" name="form" ng-submit="sendOtp(form)" novalidate ng-if="!otpSent"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.email.$invalid && !form.email.$pristine) || (form.$submitted && form.email.$invalid) }"><input type="email" name="email" keyboard-watcher ng-model="loginForm.email" ng-minlength="4" ng-maxlength="80" ng-pattern="validator(\'email\')" class="has-context-menu" required> <span class="input-label">{{::translation.emailRegistration}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.email.$error" ng-if="form.email.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div><p class="text-center login-with-sms-message" ng-bind-html="translation[\'pleaseInsertYourEmailMessage\']"></p><button class="button button-block main-button button-full" type="submit">{{::translation.sendCode}}</button></form><form class="list padding" name="formotp" ng-submit="login(formotp)" novalidate ng-if="otpSent"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (formotp.tokenThirdParty.$invalid && !formotp.tokenThirdParty.$pristine) || (formotp.$submitted && formotp.tokenThirdParty.$invalid) }"><input type="text" name="tokenThirdParty" keyboard-watcher ng-model="loginForm.tokenThirdParty" ng-minlength="6" ng-maxlength="6" ng-pattern="validator(\'number\')" class="has-context-menu" required> <span class="input-label">{{::translation.smsCode}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="formotp.tokenThirdParty.$error" ng-if="formotp.tokenThirdParty.$dirty || formotp.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.numbers}}</div></div><p class="text-center login-with-sms-message" ng-bind-html="translation[\'enterTheCodeSentMessage\']"></p><p class="text-center login-with-sms-message">{{translation[\'didNotReceiveSms\']}}&nbsp;<a href="#" on-tap="sendOtp()">{{::translation[\'resendCode\']}}</a></p><button class="button button-block main-button button-full" type="submit">{{::translation.sign_in}}</button></form><div class="content" ng-if="!disableSignUp"><div class="sub-details text-center padding add-line font-11" on-tap="navigate(\'welcome\')">{{::translation.new_bdbfx}}</div><div class="padding"><button ng-if="!signUpURL" class="button button-block button-transparent" on-tap="navigate(\'signup\')">{{::translation.new_account}}</button> <a ng-if="signUpURL" href="{{signUpURL}}" target="_blank" class="button button-block button-transparent">{{translation.new_account}}</a></div><div class="sub-info text-center padding font-12">{{::translation.login_bottom_text}}</div></div><modal data="modal"></modal></ion-content></ion-view>',controller:"LoginSmsController",data:{footer:!1}}).state("login-webtrader",{url:"/login-webtrader",cache:!1,template:'<ion-view class="login login-webtrader"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'welcome\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.sign_in}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form class="list padding" name="form" ng-submit="login(form)" novalidate><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.login.$invalid && !form.login.$pristine) || (form.$submitted && form.login.$invalid) }"><input type="number" name="login" keyboard-watcher ng-model="loginForm.login" ng-minlength="2" ng-maxlength="16" ng-pattern="validator(\'number\')" class="has-context-menu" required> <span class="input-label">{{::translation.accountNumber}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.login.$error" ng-if="form.login.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.password.$invalid && !form.password.$pristine) || (form.$submitted && form.password.$invalid) }"><input type="{{showPassword?\'text\':\'password\'}}" name="password" ng-model="loginForm.password" required keyboard-watcher ng-minlength="6" ng-maxlength="24" class="has-context-menu"> <span class="input-label">{{::translation.password}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.password.$error" ng-if="form.password.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.passwordRequired}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" ng-if="!sourcesList" ng-class="{ \'has-error\' : (form.source.$invalid && !form.source.$pristine) || (form.$submitted && form.source.$invalid) }"><ion-radio ng-value="source.demo" name="source" class="text-transform-capitalize account-type" ng-model="loginForm.source" ng-required="true">{{::translation.demo}}</ion-radio><ion-radio ng-value="source.live" name="source" class="text-transform-capitalize account-type" ng-model="loginForm.source" ng-required="true">{{::translation.live}}</ion-radio></div><div class="form-group item-input bottom-border item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-if="sourcesList" ng-class="{ \'has-error\' : (form.source.$invalid && !form.source.$pristine) || (form.$submitted && form.source.$invalid) }"><select name="source" class="no-appearance" ng-model="loginForm.source" ng-options="source.id as source.label for source in sourcesList track by source.id" required></select><span>{{::translation.server}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.source.$error" ng-if="form.source.$dirty || form.$submitted"><div class="help-block mt-10" ng-message="required">{{::translation.selectServer}}</div></div><ion-checkbox class="mt-10 border-0 font-14 show-password" ng-model="showPassword">{{::translation.show_password}}</ion-checkbox><button class="button button-block main-button button-full" type="submit">{{::translation.sign_in}}</button></form><modal data="modal"></modal></ion-content></ion-view>',controller:"LoginWebtraderController",data:{footer:!1}}).state("login-otp",{url:"/otp",cache:!1,template:'<ion-view class="login"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'login\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.enterOTPCode}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row mt-08"><div class="col text-right"><a href="#/login" class="col underline-none button-link">{{::translation.backToLogin}}</a></div></div><form class="list" name="form" ng-submit="login(form)" novalidate><form name="loginOTP" novalidate><div class="padding"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.otpCode.$invalid && !form.otpCode.$pristine) || (form.$submitted && form.otpCode.$invalid) }"><input type="text" name="otpCode" ng-model="loginForm.otpCode" ng-pattern="validator.otpCode" ng-minlength="6" ng-maxlength="24" keyboard-watcher required> <span class="input-label">{{::translation.enterOTPCode}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.otpCode.$error" ng-if="form.otpCode.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div></div><div class="padding"><button class="button button-block main-button button-full" ng-disabled="otpCode.$invalid">{{::translation.login}}</button></div></form></form><modal data="modal"></modal></ion-content></ion-view>',controller:"LoginOTPController",params:{loginData:void 0},data:{footer:!1}}).state("emailVerification",{url:"/email-verification",cache:!1,template:'<ion-view class="login"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">Email verification</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="email-verification"><div class="layout-column shrinkable content-pandats content-gap20"><div class="icon ion-android-arrow-back font-22" ng-if="isSendTicketPart2" on-tap="closePopup()"></div><div class="layout-row just-center"><div class="envelope"></div></div><div class="layout-row" ng-if="!isSendTicketPart2"><div class="layout-column content-gap10"><div>{{translation.emailVerificationPart1}} <a href="#">{{user.login}}</a></div><div>{{translation["emailVerificationPart1.1"]}}</div><div>{{translation.emailVerificationPart2}}</div><div>{{translation.emailVerificationPart3}} <span class="open-ticket" ng-class="ticketSentOnce ? \'disable-send-ticket\' : \'\'" on-tap="sendTicket()">{{translation.emailVerificationSupport}}</span></div><div>{{translation.emailVerificationPart4}}</div></div></div><div class="layout-row shrinkable" ng-if="isSendTicketPart2"><div class="layout-column content-gap10"><div>{{translation.requestSubmittedPart1}}</div><div>{{translation.requestSubmittedPart2}}</div><div class="margin-top-20-pandats">{{translation.requestSubmittedPart3 | replace: [{ key: \'brandName\', value: config.traderName }]}}</div></div></div><div class="layout-row" ng-if="!isSendTicketPart2"><div class="layout-column content-gap10 full-width"><form class="layout-row content-gap10" name="form" novalidate><div class="layout-column shrinkable"><div class="form-group item-input item-stecked-label mb-15 pl-0 bottom-border" ng-class="{ \'has-error\' : (form.code.$invalid && !form.code.$pristine) || (form.$submitted && form.code.$invalid) }"><input type="text" name="code" ng-pattern="validator(\'number\')" required autocomplete="off" ng-minlength="4" ng-maxlength="10" placeholder="{{translation.insertCode}}" ng-model="verification.code" keyboard-watcher></div><div class="messages font-12" ng-messages="form.code.$error" ng-if="form.code.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><button class="button button-block button-full" type="button" ng-disabled="form.$invalid" on-tap="verify(form)">{{translation.verify}}</button></div></form><div class="layout-row just-center content-gap05 align-center link-pandats"><i class="cmicon-reload"></i> <a href="#" on-tap="resend()">{{translation.resendEmail}}</a></div></div></div></div><modal data="modal"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><button class="button button-block button-full button-cancel" ng-disabled on-tap="logout()"><span>{{::translation.logout}}</span></button></div></div></ion-footer-bar></ion-view>',controller:"EmailVerificationController",data:{footer:!1}}).state("signup",{url:"/signup",cache:!1,template:'<ion-view class="signup"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'welcome\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light">{{::translation.signup}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form class="padding" id="signup" name="form" novalidate ng-submit="doRegistration(form)"><signup-default ng-if="template === \'default\'"></signup-default><signup-long ng-if="template === \'long\'"></signup-long><signup-social ng-if="template === \'social\'"></signup-social><div class="row p-0"><button type="submit" class="button button-block text-transform-uppercase button-full">{{::translation.continue}}</button></div></form><div class="row text-center padding-bottom"><a href="#/login" class="col underline-none button-link">{{::translation.have_account}}</a></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content></ion-view>',controller:"SignupController",resolve:{disableSignUp:["$q","constants",function(e,t){return t.disableSignup?e.reject():e.resolve()}]},data:{footer:!1}}).state("signupPersonalProfile",{url:"/signup/personalProfile",cache:!1,template:'<ion-view class="registration-long" ng-class="{\'hidden-content\': autoUpdatePersonalDetails}"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.assets\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.account_registration}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="padding pb-0">{{::translation.completeRegistration}}</div><form class="padding" id="createAccount" name="form" novalidate><personal-details ng-if="pageState === 0"></personal-details><personal-details-regulated ng-if="pageState === 1"></personal-details-regulated><div class="pt-15"><button type="button" class="button button-block button-full text-transform-uppercase" on-tap="updatePersonalDetails(form)">{{::translation.next}}</button></div></form><div class="row text-center padding-bottom" ng-if="useDemoAccounts && !isRegulated"><a href="#" class="col underline-none" on-tap="switchDemoAccount()">{{::translation.continue_demo}}</a></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content></ion-view>',controller:"PersonalProfileController",resolve:{location:["LocationService",d("Signup Personal Profile - Webmobile")]},data:{footer:!1}}).state("signupQuestionnaire",{url:"/signup/questionnaire",cache:!1,template:'<ion-view class="assessment-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.signup}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="padding"><h4 class="pb-0 text-center">{{translation[currentQuestionGroup]}}</h4><div ng-repeat="question in currentQuestionnaireGroup" ng-if="isVisible(question)"><question question="question" control="control"></question></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal><modal-dialog data="modalDialogData" on-ok="modalDialogData.onOk()" on-cancel="modalDialogData.onCancel()"></modal-dialog></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><button class="button button-block button-full" on-tap="submit()">{{::translation.submit}}</button></div></div></ion-footer-bar></ion-view>',controller:"QuestionnaireController",resolve:{location:["LocationService",d("Signup Questionnaire - Webmobile")]},data:{footer:!1}}).state("forgetpassword",{url:"/forgetpassword",cache:!1,template:'<ion-view class="password-assistance"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'login\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.password_assistance}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="content padding font-15">{{::translation.password_assistance_text}}</div><form name="forgetPassword" novalidate><div class="list padding"><div class="form-group item-input item-stacked-label mb-10 mt-10 pl-0 bottom-border" ng-class="{ \'has-error\' : forgetPassword.email.$invalid && !forgetPassword.email.$pristine }"><input type="email" name="email" ng-model="assistance.email" ng-minlength="5" ng-maxlength="50" ng-pattern="validator.email" keyboard-watcher required> <span class="input-label">{{::translation.emailRegistration}}</span></div><div class="messages" ng-messages="forgetPassword.email.$error" ng-if="forgetPassword.email.$dirty"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div></div><div class="padding"><button class="button button-block main-button button-full" on-tap="restorePassword()" ng-disabled="forgetPassword.$invalid">{{::translation.continue}}</button></div></form><h5 class="title padding mg-0 font-22 roboto-bold">{{::translation.email_changed}}</h5><div class="content padding font-15">{{::translation.email_changed_text}}</div><modal data="modal" template="templates/directives/popup-message.html" close="10"></modal></ion-content></ion-view>',controller:"PasswordAssistanceController",resolve:{},data:{footer:!1}}).state("accountFrozen",{url:"/accountFrozen",cache:!1,template:'<ion-view id="accountFrozen"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.frozenAccount}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col"><div class="title roboto-bold font-16">{{::translation.frozenAccountTitle}}</div></div></div><div class="row"><div class="col"><div class="content font-14">{{::translation.frozenAccountText}}</div></div></div></ion-content><ion-footer-bar class="invest-buttons"><div class="row p-0"><div class="col"><button class="button button-block button-blue" on-tap="sendTicket()">{{::translation.logout}}</button></div></div></ion-footer-bar></ion-view>',controller:"AccountFrozenController",resolve:{},data:{footer:!1}}).state("createFirstAccount",{url:"/createFirstAccount",cache:!1,template:'<ion-view id="createFirstAccount"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.openTradingAccount}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col"><div class="title roboto font-24">{{::translation.openTradingAccountTitle}}</div></div></div><div class="row" ng-if="!constants.skipCreateFirstAccountPage"><div class="col"><div class="content roboto font-18">{{::translation.openTradingAccountText}}</div></div></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar class="invest-buttons" ng-if="!constants.skipCreateFirstAccountPage"><div class="row p-0"><div class="col"><button class="button button-block button-blue" on-tap="createAccount()">{{::translation.openTradingAccount}}</button></div></div></ion-footer-bar></ion-view>',controller:"CreateFirstAccountController",resolve:{},data:{footer:!1}}).state("root.app.updatepassword",{url:"/updatepassword",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.updatePassword}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form class="padding" name="form" id="form" novalidate ng-submit="changePassword(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 bottom-border" ng-class="{ \'has-error\' : (form.oldPassword.$invalid && !form.oldPassword.$pristine) || (form.$submitted && form.oldPassword.$invalid) }"><input type="password" name="oldPassword" ng-model="auth.oldPassword" ng-pattern="validator.password" ng-minlength="6" ng-maxlength="12" keyboard-watcher required> <span>{{::translation.enterCurrentPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.oldPassword.$error" ng-if="form.oldPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 bottom-border" ng-class="{ \'has-error\' : (form.newPassword.$invalid && !form.newPassword.$pristine) || (form.$submitted && form.newPassword.$invalid) }"><input type="password" name="newPassword" ng-model="auth.password" ng-minlength="6" ng-maxlength="12" ng-pattern="validator(\'password\')" keyboard-watcher required passwordmix> <span>{{::translation.enterNewPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.newPassword.$error" ng-if="form.newPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div><div class="form-group item-input item-stacked-label bottom-border mb-15 mt-10 pl-0" ng-class="{ \'has-error\' : (form.confirmPassword.$invalid && !form.confirmPassword.$pristine) || (form.$submitted && form.confirmPassword.$invalid) }"><input type="password" name="confirmPassword" ng-model="auth.confirmPassword" compare-to="auth.password" keyboard-watcher required> <span>{{::translation.reEnterPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.confirmPassword.$error" ng-if="form.confirmPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="compareTo">{{::translation.messages.password_not_matched}}</div></div></form><div class="content"><div class="row"><div class="col"><div class="roboto-bold font-20">{{::translation.securePassword}}</div></div></div><div class="row"><div class="col"><ul class="custom-list font-14 padding pt-0"><li>{{::translation.useCharacters}}</li><li>{{::translation.samePassword}}</li><li>{{::translation.usePersonalDetails}}</li></ul></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit" class="for"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"UpdatePasswordController"}},resolve:{location:["LocationService",d("Update Password - Webmobile")]},data:{footer:!1}}).state("root.app.2fa",{url:"/2fa",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.manageSecurity}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="otp-content"><div class="step-wrapper layout-col padding"><div class="layout-row"><div class="enable2fa-wrapper"><label class="layout-row"><input type="checkbox" ng-model="otp.enabled" ng-change="OnOtpChange()"> <span>{{::translation.enable2FA}}</span></label></div></div></div><div class="step-wrapper layout-col padding"><div class="layout-row" ng-if="!user.otpEnabled && otp.enabled"><div class="layout-column"><div class="layout-row">{{::translation.yourGAC}}:</div><div class="layout-row just-center gac-wrapper"><input type="text" name="secret" readonly class="gac-pandats" value="{{otp.secret}}"><div class="copyToCB" ng-click="copyToClipBoard()"><i class="icon ion-ios-copy-outline"></i></div></div><div class="layout-row be-sure padding-bottom">{{::translation.backupGAC}}</div><div class="layout-row">{{::translation.scanQRCodeGoogleAuth}}</div><div class="layout-row qrcode-pandats just-center"><div class="qrcode-wrapper" ng-if="otp.qrcode"><img ng-src="{{otp.qrcode}}"></div></div></div></div><div class="layout-row" ng-if="!user.otpEnabled && !otp.enabled"><div class="layout-col" ng-bind-html="translation.otp_description"></div></div><div class="layout-row" ng-if="user.otpEnabled !== otp.enabled"><form class="layout-col" name="form" id="form" novalidate ng-submit="verifyOtp()"><input type="submit" id="submit" value="Submit" style="display:none"><div class="layout-row">{{::translation.enterYourOTP}}</div><div class="layout-row otp-wrapper"><div class="layout-column"><div class="form-group item-input item-stacked-label mb-15 pl-0 bottom-border" ng-class="{ \'has-error\' : (form.otpCode.$invalid && !form.otpCode.$pristine) || (form.$submitted && form.otpCode.$invalid) }"><input type="text" name="otpCode" ng-model="otp.code" ng-pattern="validator.otpCode" ng-minlength="6" ng-maxlength="24" keyboard-watcher required> <span>{{::translation.enterOTPCode}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.otpCode.$error" ng-if="form.otpCode.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div></div></div></form></div></div><modal data="modal"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0" ng-if="user.otpEnabled !== otp.enabled"><div class="col"><button class="button button-block button-full" on-tap="verifyOtp()"><span>{{::translation.verifyOTP}}</span></button></div></div></ion-footer-bar></ion-view>',controller:"OtpController"}},resolve:{twoFAEnabled:["$q","constants",function(e,t){return t.enable2FA?e.resolve():e.reject()}]},data:{footer:!1}}).state("root.app.uploadDocuments",{url:"/menu/uploadDocuments",cache:!1,views:{"tab-menu":{template:'<ion-view class="uploaddocument-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.accountVerification}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col helper-text"><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationAuthenticate}}</div><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationCamera}}</div></div></div><div class="documents-list"><ion-list><ion-item class="list card" ng-repeat="category in categories" on-tap="navigate(\'root.app.uploadDocumentsCategories\', {category: category})"><span class="item-content"><span class="title"><i class="icon" ng-class="\'icon-\' + category.name"></i> <span class="roboto">{{::translation[category.name]}}</span></span> <i class="icon ion-chevron-right float-right"></i></span></ion-item></ion-list></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col col-10 align-self"><i class="icon ion-locked font-24 helper-text"></i></div><div class="col helper-text font-14 roboto lh-reset">{{::translation.verificationProtected}}</div></div></ion-footer-bar></ion-view>',controller:"UploadDocumentsController"}},resolve:{depositValue:["$q","$ionicLoading","DocumentService",function(e,t,n){return t.show({noBackdrop:!0}),n.initDocuments()}],location:["LocationService",d("Upload Documents (Categories) - Webmobile")]},data:{footer:!1}}).state("root.app.viewQuestionnaire",{url:"/menu/viewQuestionnaire",cache:!1,views:{"tab-menu":{template:'<ion-view class="viewQuestionnaire-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.viewQuestionnaire}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="padding"><div class="group-pandats" ng-repeat="group in questionGroups"><div class="groupName-pandats">{{translation[group.group]}}</div><div ng-repeat="question in group.questions" class="question-item-pandats"><question question="question" control="control" view-only="true"></question></div></div></ion-content></ion-view>',controller:"ViewQuestionnaireController"}},resolve:{location:["LocationService",d("View Questionnaire - Webmobile")]},data:{footer:!1}}).state("root.app.verificationSumsub",{url:"/menu/verificationsumsub",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.uploadDocuments}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="otp-content"><div id="idensic" class="pandats-idensic"></div></ion-content></ion-view>',controller:"VerificationSumsubController"}},resolve:{location:["LocationService",d("Upload Documents - Webmobile")]},data:{footer:!1}}).state("root.app.verification-v2",{url:"/menu/verification-v2",cache:!1,views:{"tab-menu":{template:'<ion-view class="uploaddocument-page documents-v2"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.accountVerification}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="has-header"><div ng-if="!isApproved"><div class="row"><div class="col helper-text"><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationAuthenticate}}</div><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationCamera}}</div></div></div><div class="documents" ng-repeat="document in documents"><div class="list card v2"><div class="item roboto-medium item-divider"><div>{{::translation[document.type] || document.origType}}</div><div class="docStatus" ng-if="document.status.toLowerCase() === \'pending\'"><span>{{::translation[document.status.toLowerCase()]}}</span> <i class="icon icon-pending-doc"></i></div></div><div class="item pt-0 pb-0"><div class="form-group item-input p-0 mt-0 mb-15" id="subtype"><div class="input-label p-5 pl-15 pr-15 roboto-light disabled" ng-if="document.subType">{{translation[document.selectedSubType.id] || document.selectedSubType.title }}</div><div class="input-label p-5 pl-15 pr-15 roboto-light" ng-if="!document.subType" on-tap="showSubtype(document)"><div ng-if="document.selectedSubType">{{translation[document.selectedSubType.id] || document.selectedSubType.title }}</div><div class="placeholder" ng-if="!document.selectedSubType">{{ translation[document.type + "_text"] || translation.requirement_description }}</div></div><div class="icon ion-chevron-right" ng-if="!document.subType"></div></div><div class="row mb-15"><div class="col font-12 roboto-medium upload-button p-0" ng-repeat="side in document.images"><label ng-if="!document.uploaded[side]" class="row"><div><i class="icon icon-Touch_UP_Icon font-24"></i> <input type="file" file-id="{{document.id}}" file-side="{{side}}" onchange="angular.element(this).scope().uploadFile(event)"></div><div><span ng-if="side === 0">{{::translation.front_upload}}</span> <span ng-if="side === 1">{{::translation.back_upload}}</span></div></label> <label ng-if="document.uploaded[side]" class="row uploaded"><div class="title"><input type="file" file-id="{{document.id}}" file-side="{{side}}" onchange="angular.element(this).scope().uploadFile(event)"><div><span ng-if="side === 0">{{::translation.front_uploaded}}</span> <span ng-if="side === 1">{{::translation.back_uploaded}}</span></div></div><div class="replace"><i class="icon ion-refresh font-24"></i><div>{{::translation.replace_image}}</div></div></label></div></div><div class="row twoSideOption" ng-if="document.selectedSubType && document.selectedSubType.images === 0 && document.hasUploaded && !document.uploaded[1]"><div class="col"><ion-checkbox class="border-0 modern-checkbox font-12" name="twoSided" ng-click="toggleImage(document)">{{::translation.two_sided}}</ion-checkbox></div></div></div></div><hr></div><br></div><div class="approved-pandats vertical-align text-center" ng-if="isApproved"><div class="icon-documents no-actions-required-icon"></div><div class="layout-row approved-title-pandats font-36 text-center">{{translation.all_set}}</div><div class="layout-row approved-text-pandats muted"><div>{{translation.account_approved1}}</div></div></div><modal data="modal" template="templates/directives/popup-message.html" close="10"></modal></ion-content></ion-view>',controller:"VerificationV2Controller"}},resolve:{location:["LocationService",d("Upload Documents - Webmobile")]},data:{footer:!1}}).state("root.app.uploadDocumentsCategories",{url:"/menu/uploadDocuments/categories/:category",cache:!1,views:{"tab-menu":{template:'<ion-view class="uploaddocument-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.uploadDocuments\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.uploadDocuments}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row" ng-if="baseCategories.length <= 1"><div class="col helper-text"><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationAuthenticate}}</div><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.verificationCamera}}</div></div></div><div class="row" ng-if="baseCategories.length > 1"><div class="col helper-text font-14 roboto lh-reset pl-10 pr-10">{{::translation.selectOne}}</div></div><div class="documents-list"><ion-list><ion-item class="list card" ng-repeat="category in baseCategories" ui-sref="root.app.uploadDocumentsFiles({baseCategory: category, categoryName: categoryName, categoryVideoLink: categoryVideoLink})"><span class="roboto">{{::translation[category]}}</span> <i class="icon ion-chevron-right float-right"></i></ion-item></ion-list></div><div class="layout-row play-video-area-pandats" ng-if="categoryVideoLink"><div class="layout-column full-width"><div class="layout-row just-center play-video-description" ng-bind-html="translation.need_doc_upload_help"></div><div class="layout-row just-center"><div class="layout-column"><a class="layout-row play-video-btn-pandats just-center" ng-href="{{categoryVideoLink}}" target="_blank"><span class="layout-column shrinkable just-center"><span class="layout-row just-end">{{::translation.play_video}}</span></span> <span class="layout-column just-center"><span class="play-icon"></span></span></a></div></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col col-10 align-self"><i class="icon ion-locked font-24 helper-text"></i></div><div class="col helper-text font-14 roboto lh-reset">{{::translation.verificationProtected}}</div></div></ion-footer-bar></ion-view>',controller:"UploadDocumentsCategoriesController"}},resolve:{location:["LocationService",d("Upload Documents - Webmobile")]},data:{footer:!1},params:{categoryName:null,categoryVideoLink:null}}).state("root.app.uploadDocumentsOther",{url:"/menu/uploadDocuments/other",cache:!1,views:{"tab-menu":{template:'<ion-view class="uploaddocument-page upload-other"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.uploadDocuments\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.uploadDocuments}}</span></ion-nav-title><div class="height-auto bar bar-subheader"><div class="row card"><div class="col"><div class="font-16 roboto file-title lh-reset">{{::translation.uploadDocuments}}</div></div><div class="col col-30 upload"><div ng-if="documentModel.isUploading">{{documentModel.uploadStatus}} %</div><div ng-if="documentModel.status ===\'new\'" ng-show="!documentModel.isUploading"><label><i class="icon icon-Upload font-24"></i> <input type="file" onchange="angular.element(this).scope().uploadFile(event)"></label></div></div></div></div></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><ion-list><ion-item class="card" ng-repeat="file in files"><div class="row"><div class="col col-70"><div class="font-16 roboto file-title lh-reset">{{file.originalFileName}}</div><div class="font-12 roboto lh-reset file-icons"><i class="icon ion-close" ng-if="file.status ===\'rejected\'"></i> <i class="icon ion-refresh" ng-if="file.status ===\'pending\'"></i> <i class="icon ion-checkmark" ng-if="file.status ===\'approved\'"></i> <span class="file-subtitle" ng-class="file.status ===\'approved\'?\'blue-text\':\'helper-text\'">{{translation[file.status]}}</span></div></div><div class="col col-30 remove"><div ng-if="file.status ===\'pending\'"><button on-tap="deleteDocument(file)" class="button icon ion-close"></button></div></div></div></ion-item></ion-list><modal data="modal" template="templates/directives/popup-message.html" close="10"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col col-10 align-self"><i class="icon ion-locked font-24 helper-text"></i></div><div class="col helper-text font-14 roboto lh-reset">{{::translation.verificationProtected}}</div></div></ion-footer-bar></ion-view>',controller:"UploadDocumentsOtherController"}},resolve:{location:["LocationService",d("Upload Other Documents - Webmobile")]},data:{footer:!1}}).state("root.app.uploadDocumentsFiles",{url:"/menu/uploadDocuments/files/:baseCategory",cache:!1,views:{"tab-menu":{template:'<ion-view class="uploaddocument-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.uploadDocumentsCategories\',{direction: \'right\', category: category})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.uploadDocuments}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col helper-text"><div class="pt-0 pb-0 font-14 roboto lh-reset pl-10 pr-10 mb-10">{{::translation.uploadInfoPicture}}</div></div></div><div class="documents-list"><ion-list><ion-item class="list card" ng-repeat="file in files"><div class="row"><div class="col"><div class="font-16 roboto file-title lh-reset">{{::translation[file.type]}}</div><div class="font-12 roboto lh-reset file-icons"><i class="icon ion-close" ng-if="file.status===\'rejected\'"></i> <i class="icon ion-refresh" ng-if="file.status===\'pending\'"></i> <i class="icon ion-checkmark" ng-if="file.status===\'approved\'"></i> <span class="file-subtitle" ng-class="file.status===\'approved\'?\'blue-text\':\'helper-text\'">{{translation[file.status]}}</span></div></div><div class="col col-30 upload"><div ng-if="file.isUploading">{{file.uploadStatus}} %</div><div ng-if="file.status===\'new\' || file.status===\'pending\'" ng-show="!file.isUploading"><label><i class="icon icon-Upload font-24"></i> <input type="file" file-id="{{file.type}}" onchange="angular.element(this).scope().uploadFile(event)"></label></div></div></div></ion-item></ion-list></div><modal data="modal" template="templates/directives/popup-message.html" close="10"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col col-10 align-self"><i class="icon ion-locked font-24 helper-text"></i></div><div class="col helper-text font-14 roboto lh-reset">{{::translation.verificationProtected}}</div></div></ion-footer-bar></ion-view>',controller:"UploadDocumentsFilesController"}},resolve:{location:["LocationService",d("Upload Documents - Webmobile")]},data:{footer:!1},params:{categoryName:null,categoryVideoLink:null}}).state("root.app.inviteFriends",{url:"/menu/inviteFriends",cache:!1,views:{"tab-menu":{template:'<ion-view class="invite-friends-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.invite_a_friend}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="padding"><div class="layout-row"><span ng-bind-html="translation.referral_program_content"></span></div><div class="layout-row sub-head-pandats font-18">{{::translation.share_your_invite_link}}</div><div class="layout-row horizontal-break-pandats"></div><div class="layout-row"><div class="layout-column full-width"><div class="layout-row link-input-wrapper"><div class="layout-column shrinkable"><input type="text" name="link" class="full-height link-input-pandats" ng-model="inputModel.link" readonly></div><div class="layout-column"><button class="button button-blue font-14" type="button" ng-click="copyLink()">{{::translation.copy_link}}</button></div></div><div class="layout-row just-center sns-area"><button socialshare socialshare-provider="facebook" socialshare-url="{{inputModel.link}}" class="layout-column sns-button-pandats just-center"><span class="layout-row just-center full-width"><span class="flag1-pandats flag-icon-pandats flag-icon-pandats-facebook-rounded"></span>&nbsp;Facebook</span></button><div socialshare socialshare-provider="twitter" socialshare-url="{{inputModel.link}}" class="layout-column sns-button-pandats just-center sns-twitter"><span class="layout-row just-center full-width"><span class="flag1-pandats flag-icon-pandats flag-icon-pandats-twitter-rounded"></span>&nbsp;Twitter</span></div></div><div class="child-pages-list"><ion-list><ion-item class="list card" ui-sref="root.app.referralActivity"><span class="title"><i class="icon" ng-class="\'icon-\'"></i> <span class="roboto">{{::translation.referral_activity_n_total_earnings}}</span></span> <i class="icon ion-chevron-right float-right"></i></ion-item></ion-list></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col col-10 align-self"><i class="icon ion-locked font-24 helper-text"></i></div><div class="col helper-text font-14 roboto lh-reset"></div></div></ion-footer-bar></ion-view>',controller:"InviteFriendsController"}},resolve:{inviteFriends:["$q","constants","Storage","API",function(e,t,n,a){return n.get("friendInviteActive")?a.getFriendInvites().then((function(e){n.set("inviteFriends",e.friendInvitesDetails)})):e.reject()}]},data:{footer:!1}}).state("root.app.referralActivity",{url:"/menu/referralActivity",cache:!1,views:{"tab-menu":{template:'<ion-view class="referral-activity-page"><ion-nav-bar class="bar-stable" align-title="center"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.inviteFriends\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title text-left text-align="left"><span class="nav-title roboto-light font-14">{{::translation.referral_activity_n_total_earnings}}</span></ion-nav-title></ion-nav-bar><ion-content class="page-content full-height has-footer" scroll="false"><div class="layout-column full-height"><div class="layout-row font-18 sub-head-pandats">{{::translation.your_referral_activity}}</div><div class="layout-row shrinkable tabs-wrapper"><div class="layout-column full-width"><div class="layout-row head-section"><div class="layout-column" ng-class="{\'active\': activeTab === \'signed_up\'}"><div on-tap="activeTab = \'signed_up\'">{{translation.signed_up}} ({{signedUpFriends.length}})</div></div><div class="layout-column" ng-class="{\'active\': activeTab === \'qualified\', \'readonly\': !qualifiedFriends.length}"><div on-tap="activeTab = \'qualified\'">{{translation.qualified}} ({{qualifiedFriends.length}})</div></div></div><div class="layout-row shrinkable"><div class="layout-column full-width signed-up-area" ng-if="activeTab === \'signed_up\'"><div class="layout-row full-height"><div class="layout-column full-width" ng-if="signedUpFriends.length"><div class="layout-row table-header-pandats"><div class="layout-column shrinkable">Full Name</div><div class="layout-column">Sign-up date</div></div><ion-content class="layout-row table-rows-pandats shrinkable" has-header="false" has-footer="false"><div class="layout-column rows-content full-width" scrollbar-y="true" overflow-scroll="true"><div class="layout-row" ng-repeat="signedUpFriend in signedUpFriends"><div class="layout-column shrinkable">{{signedUpFriend.firstName}}&nbsp;{{signedUpFriend.lastName}}</div><div class="layout-column">{{signedUpFriend.regDate*1000 | date: \'yyyy-MM-dd\': clientTimeZone}}</div></div></div></ion-content></div><div class="layout-column full-width blank-area just-center content-gap12" ng-if="!signedUpFriends.length"><div class="layout-row just-center"><div class="layout-column">There are no sign-ups yet<br>Invite your friends and get started</div></div><div class="layout-row just-center"><div class="layout-row double-users-img"></div></div></div></div></div><div class="layout-column full-width qualified-area" ng-if="activeTab === \'qualified\'"><div class="layout-row full-height"><div class="layout-column full-width"><div class="layout-row table-header-pandats"><div class="layout-column shrinkable">Full Name</div><div class="layout-column">Sign-up date</div></div><ion-content class="layout-row table-rows-pandats shrinkable" has-header="false" has-footer="false"><div class="layout-column rows-content full-width" scrollbar-y="true" overflow-scroll="true"><div class="layout-row" ng-repeat="qualifiedFriend in qualifiedFriends"><div class="layout-column shrinkable">{{qualifiedFriend.firstName}}&nbsp;{{qualifiedFriend.lastName}}</div><div class="layout-column">{{qualifiedFriend.regDate*1000 | date: \'yyyy-MM-dd\': clientTimeZone}}</div></div></div></ion-content></div></div></div></div></div></div><div class="layout-row"><div class="layout-column full-width earnings-area"><div class="layout-row font-18 sub-head-pandats">{{translation.total_earnings}}</div><div class="layout-row horizontal-break-pandats"></div><div class="layout-row shrinkable" ng-if="totalEarnings"><div class="layout-column full-width earnings-bar content-gap10"><div class="layout-row full-height"><div class="layout-column full-width just-center"><div class="layout-row just-center font-18">{{translation.your_earnings}}</div><div class="layout-row"><div class="layout-column"><div class="layout-row coins-stack-img"></div></div><div class="layout-column shrinkable just-center"><div class="layout-row just-center font-40 earnings-wrapper">$&nbsp;{{totalEarnings}}</div></div><div class="layout-column"><div class="layout-row coins-stack-img"></div></div></div><div class="layout-row just-center font-18">{{translation.keep_it_up}}</div></div></div></div></div><div class="layout-row shrinkable" ng-if="!totalEarnings"><div class="layout-column full-width blank-area just-center content-gap12"><div class="layout-row just-center" ng-bind-html="translation.once_you_make_deposit"></div><div class="layout-row just-center"><div class="layout-row coin-dollar-img"></div></div></div></div></div></div></div></ion-content></ion-view>',controller:"ReferralActivityController"}},resolve:{},data:{footer:!1}}).state("root.app.helpdesk",{url:"/helpdesk",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">Help Desk</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"></ion-content></ion-view>',controller:"HelpDeskController"}},resolve:{location:["LocationService",d("HeldDesk - Webmobile")]},data:{footer:!1}}).state("root.app.assets",{url:"/assets/:category",cache:!0,views:{"tab-assets":{template:'<ion-view enable-menu-with-back-views="false" hide-back-button="true" id="assets"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-buttons side="right"><div class="button-bar"><button class="display-flex pl-15 padding-right fake-button" on-tap="openSearchAssets()"><i class="icon ion-search align-self"></i></button> <button class="display-flex pl-15 padding-right fake-button" on-tap="openPopover($event)"><i class="icon ion-android-more-vertical align-self font-17"></i></button></div></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.instruments}}</span></ion-nav-title><div class="bar bar-subheader text-center subheader-color"><div class="item-input-assets-search" ng-if="showSearch"><i class="icon ion-search placeholder-icon"></i> <input type="text" ng-model="search.outputName" placeholder="{{::translation.search_placeholder}}"></div><ion-scroll class="menuWrap font-14" scrollbar-x="false" direction="x" has-bouncing="false" ng-if="!showSearch"><div class="titleHolder" on-tap="toggleCategory(\'FAVORITES\')"><span class="titleItem" ng-class="{ \'active-category\': selectedIndex == \'FAVORITES\' }">{{::translation.favorites}}</span></div><div class="titleHolder" on-tap="toggleCategory(\'QUICK ACCESS\')" ng-if="quickAccessExists"><span class="titleItem" ng-class="{ \'active-category\': selectedIndex == \'QUICK ACCESS\' }">{{::translation.quickaccess || \'QUICK ACCESS\'}}</span></div><div class="titleHolder" ng-repeat="category in categories" on-tap="toggleCategory(category.id)"><span class="titleItem" ng-class="{ \'active-category\': selectedIndex == category.id }">{{::translation[category.name] || category.name.toUpperCase()}}</span></div></ion-scroll></div><ion-content overflow-scroll="true" class="view-area has-subheader"><ion-list><ion-item collection-repeat="asset in assets | filter:customSearch | orderBy: selectedIndex !== \'FAVORITES\' ? \'displayOrder\' : \'\' track by asset.id" class="quote-item pt-11" item-height="70px" item-width="100%"><asset-item></asset-item></ion-item></ion-list><div ng-if="selectedIndex == \'FAVORITES\' && assets.length == 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.no_favorites}}</div><div class="roboto font-18 text-center mt-08 muted">{{::translation.add_favorites}}</div></div></div></ion-content><sms-verification ng-if="user.loggedIn"></sms-verification></ion-view>',controller:"AssetsController"}},resolve:{location:["LocationService",d("Assets - Webmobile")]},data:{footer:!0}}).state("root.app.assetInfo",{url:"/assets/:assetId/info",cache:!0,views:{"tab-assets":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false" class="modify-trade"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.chart\',{direction: \'right\', assetId: asset.id})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title"><span>{{::asset.outputName}}</span> <span>{{::translation.info}}</span></span></ion-nav-title><ion-content scrollbar-y="true" overflow-scroll="true" id="asset-info"><div class="asset-info"><ion-list><ion-item ng-if="assetIntoRules[\'underlyingAssetName\']"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.underlying_asset_name}}</span></div><div class="col-50 info-value">{{::asset.displayName}}</div></div></ion-item><ion-item ng-if="assetIntoRules[\'expiration\'] && asset.expiration"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.contract_expiration}}</span></div><div class="col-50 info-value">{{::asset.expiration | date:\'dd MMMM yyyy\'}}</div></div></ion-item><ion-item ng-if="assetIntoRules[\'spread\']"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.spread}}</span></div><div class="col-50 info-value">{{ asset.spread > 0 ? asset.spreadCalc() : translation[\'floating\'] || \'Floating\'}}</div></div></ion-item><ion-item ng-if="assetIntoRules[\'digits\']"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.digits}}</span></div><div class="col-50 info-value">{{::asset.digits}}</div></div></ion-item><ion-item ng-if="assetIntoRules[\'tradingConditions\'] && asset.tradingConditions"><div class="row info no-border no-padding"><div class="col muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.tradingConditions}}</span></div></div><div class="row info no-padding"><div class="col info-value">{{::asset.tradingConditions}}</div></div></ion-item><ion-item ng-if="assetIntoRules[\'lotValue\']"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.lot_value}}</span></div><div class="col-50 info-value"><span>{{::asset.contractSize}}</span> <span>{{::asset.unit}}</span></div></div></ion-item><ion-item ng-if="assetIntoRules[\'minMaxVolume\']"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.min_max_volume}}</span></div><div class="col-50 info-value"><span>{{::asset.minLot}}</span> - <span>{{::asset.maxLot}}</span></div></div></ion-item><ion-item ng-if="assetIntoRules[\'volumeStep\']"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.volume_step}}</span></div><div class="col-50 info-value">{{::asset.stepLot}}</div></div></ion-item><ion-item ng-if="assetIntoRules[\'leverage\']"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.leverage}}</span></div><div class="col-50 info-value">{{leverage}}</div></div></ion-item><ion-item ng-if="assetIntoRules[\'requiredMargin\']"><div class="row info no-border no-padding"><div class="col muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.requiredMargin}} (1 {{::translation.lot}})</span></div></div><div class="row info no-padding"><div class="col info-value"><div><span>{{::translation.long}}:</span> <span>{{margin.ask | cryptoCurrency :asset.currency :asset.digits}}</span> <span ng-if="user.activeTradingAccount.currency != asset.currency"><span>({{margin.askCurrency | cryptoCurrency : user.activeTradingAccount.currency : user.currencyDigits}})</span></span></div><div><span>{{::translation.short}}:</span> <span>{{margin.bid | cryptoCurrency :asset.currency :asset.digits}}</span> <span ng-if="user.activeTradingAccount.currency != asset.currency"><span>({{margin.bidCurrency | cryptoCurrency : user.activeTradingAccount.currency : user.currencyDigits}})</span></span></div></div></div></ion-item><ion-item ng-if="assetIntoRules[\'swaps\']"><div class="row info no-border no-padding"><div class="col muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.swap}} (1 {{::translation.lot}})</span></div></div><div class="row info no-padding"><div class="col info-value"><div><span>{{::translation.long}}:</span> <span ng-if="asset.swapsCode === 0">{{swap.long}} {{::translation.points}}</span> <span ng-if="asset.swapsCode === 4">{{swap.long | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span> <span ng-if="asset.swapsCode === 5">{{swap.long | number:2}} %</span> <span ng-if="asset.swapsCode > 0 && asset.swapsCode < 4"><span>{{swap.long | cryptoCurrency :asset.swapsCurrency :asset.digits}}</span> <span ng-if="user.activeTradingAccount.currency != asset.swapsCurrency"><span>({{swap.longCurrency | cryptoCurrency:user.activeTradingAccount.currency:user.currencyDigits}})</span></span></span></div><div><span>{{::translation.short}}:</span> <span ng-if="asset.swapsCode === 0">{{swap.short}} {{::translation.points}}</span> <span ng-if="asset.swapsCode === 4">{{swap.short | cryptoCurrency : user.activeTradingAccount.currency : user.currencyDigits}}</span> <span ng-if="asset.swapsCode === 5">{{swap.short | number:2}} %</span> <span ng-if="asset.swapsCode > 0 && asset.swapsCode < 4"><span>{{swap.short | cryptoCurrency :asset.swapsCurrency :asset.digits}}</span> <span ng-if="user.activeTradingAccount.currency != asset.swapsCurrency"><span>({{swap.shortCurrency | cryptoCurrency : user.activeTradingAccount.currency : user.currencyDigits}})</span></span></span></div></div></div></ion-item><ion-item ng-if="assetIntoRules[\'tradingHours\']"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.trading_hours}}</span></div><div class="col-50 info-value"><div class="row time-range" ng-repeat="day in tradingTimes()"><div class="col-50 text-left"><span>{{::translation.daysOfWeek[day] ||constants.daysOfWeek[day]}}</span>:</div><div class="col-50"><div ng-repeat="range in tradingTimesFormat[day]"><span>{{range}}</span></div></div></div></div></div></ion-item><ion-item ng-if="assetIntoRules[\'description\'] && description"><div class="row info"><div class="col-50 muted info-label"><span><i class="ion-ios-information-outline"></i></span> <span>{{::translation.description}}</span></div><div class="col-50 info-value"><div ng-bind-html="description" class="asset-description-list text-left"></div></div></div></ion-item></ion-list></div></ion-content></ion-view>',controller:"AssetInfoController"}},resolve:{location:["LocationService",d("Asset Info - Webmobile")]},data:{footer:!1}}).state("root.app.invest",{url:"/assets/:category/:assetId/:action/:volume",cache:!1,views:{"tab-assets":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false" class="invest-page"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(backPage,{category: category, direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation[action.replace(\'_limit\',\'\').replace(\'_stop\',\'\')]}} {{::asset.outputName }}</span></ion-nav-title><ion-content scrollbar-y="true" overflow-scroll="true"><div class="invest-top"><div><div class="row pt-0"><div class="col rate pt-0"><div ng-if="action === \'buy\' || action === \'buy_stop\' || action === \'buy_limit\'"><h1 class="mb-3 buy invest-value-color roboto-bold">{{ asset.markupAsk() | number:asset.digits}}</h1></div><div ng-if="action === \'sell\' || action === \'sell_stop\' || action === \'sell_limit\'"><h1 class="mb-3 sell invest-value-color roboto-bold">{{ asset.markupBid() | number:asset.digits}}</h1></div><div class="roboto-light font-14 pb-10">{{::translation.currentRate}}</div></div></div><div class="row invest-amount inc-dec pb-0" inc-dec><div class="col amount-area"><button ng-click="upDown({ model: investAmount, digits: asset.lotDigits, step: asset.stepLot * pow(10, asset.lotDigits), direction: \'decrease\', min: asset.minLot, max: asset.maxLot })" on-touch="upDownRepeat({ model: investAmount, digits: asset.lotDigits, step: asset.stepLot * pow(10, asset.lotDigits), direction: \'decrease\', min: asset.minLot, max: asset.maxLot })" on-release="upDownStop()" class="button button-down"><i class="ion-android-remove"></i></button><div class="wrapper-amount" on-tap="inputFocus(investAmount,\'investAmount.value\',asset.minLot,asset.maxLot, asset.lotDigits,\'volume in lot\')"><span class="font-15 text-center" style="display: block;">{{::translation.volumeInLot}}</span><div type="text" ng-model="investAmount.value" class="divTxt amount" input-mask-min="{{asset.minLot}}" input-mask-max="{{asset.maxLot}}">{{investAmount.value}}</div></div><button ng-click="upDown({ model: investAmount, digits: asset.lotDigits, step: asset.stepLot * pow(10, asset.lotDigits), direction: \'increase\', min: asset.minLot, max: asset.maxLot })" on-touch="upDownRepeat({ model: investAmount, digits: asset.lotDigits, step: asset.stepLot * pow(10, asset.lotDigits), direction: \'increase\', min: asset.minLot, max: asset.maxLot })" on-release="upDownStop()" class="button button-up"><i class="ion-android-add"></i></button></div></div><div class="row p-0 pb-7 text-center"><div class="col p-0"><span class="pip-value roboto-light font-14">{{::translation.pipValue}} = <span>{{pipValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></span></div></div></div><div class="row pb-5 pt-0"><div class="col text-center pr-0" ng-class="{\'bordered\': !constants[\'hideRequiredMargin\']}"><div class="roboto-light margin-value pb-5 font-13">{{::translation.availableFunds}}</div><div class="font-13">{{pnlData.freeMargin | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div><div class="font-11 convertusd" ng-if="showConvertToUsd">({{availableFundsUsd() | cryptoCurrency:\'USD\':2}})</div></div><div class="col text-center pl-0" ng-if="!constants[\'hideRequiredMargin\']"><div class="roboto-light margin-value pb-5 font-13">{{::translation.requiredMargin}}</div><div class="font-13">{{requiredMargin() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div><div class="font-11 convertusd" ng-if="showConvertToUsd">({{requiredMarginUsd() | cryptoCurrency:\'USD\':2}})</div></div></div></div><div class="invest-profitloss"><div class="row pt-0" ng-if="!hideSlTp"><div class="row p-0 sltpWrap"><div class="col-40"><div class="row equal-height pl-0"><div class="col pl-1"><ion-checkbox class="checkbox-square checkbox-label transparent-checkbox" ng-class="{\'checked\': loss.checked}" ng-model="loss.checked" ng-disabled="sltpAutoSet"><div>{{::translation.stopLoss}}</div></ion-checkbox></div></div><div ng-if="loss.checked || profit.checked"><div class="row equal-height pl-0"><div class="col"><div type="{{loss.pips.keyboard}}" class="invest-input" ng-class="loss.pips.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'pips\'); inputFocus(loss.pips,\'loss.pips.value\',0,10000000,0,\'Loss Pips\')">{{loss.pips.value}}</div></div></div></div><div class="row equal-height pl-0"><div class="col"><div type="{{loss.rate.keyboard}}" class="invest-input" ng-class="loss.rate.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'rate\'); inputFocus(loss.rate,\'loss.rate.value\',0,100000000,asset.digits,\'Loss Price\')">{{loss.rate.value}}</div></div></div></div><div class="row equal-height pl-0"><div class="col"><div class="invest-money"><span ng-if="loss.checked">{{ calcLossValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div></div><div class="col-20 center-text padding-none"><div class="row equal-height"><div class="col"></div></div><div class="center-text padding-none" ng-if="loss.checked || profit.checked"><div class="row equal-height"><div class="col">{{::translation.pips}}</div></div><div class="row equal-height"><div class="col">{{::translation.price}}</div></div><div class="row equal-height"><div class="col center-transform">{{::translation.value}}</div></div></div></div><div class="col-40"><div class="row equal-height pr-0"><div class="col pl-1"><ion-checkbox class="checkbox-square checkbox-label transparent-checkbox" ng-class="{\'checked\': profit.checked}" ng-model="profit.checked" ng-disabled="sltpAutoSet"><div>{{::translation.takeProfit}}</div></ion-checkbox></div></div><div ng-if="loss.checked || profit.checked"><div class="row equal-height pr-0"><div class="col"><div type="{{profit.pips.keyboard}}" class="invest-input" ng-class="profit.pips.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'pips\'); inputFocus(profit.pips,\'profit.pips.value\',0,10000000, 0,\'Profit Pips\')">{{profit.pips.value}}</div></div></div></div><div class="row equal-height pr-0"><div class="col"><div type="{{profit.rate.keyboard}}" class="invest-input" ng-class="profit.rate.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'rate\'); inputFocus(profit.rate,\'profit.rate.value\',0,100000000, asset.digits,\'Profit Price\')">{{profit.rate.value}}</div></div></div></div><div class="row equal-height pr-0"><div class="col"><div class="invest-money"><span ng-if="profit.checked">{{ calcProfitValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div></div></div></div><div class="row reach"><div class="col p-0 reachWrap"><div class="row equal-height pl-1"><div class="col p-0"><ion-checkbox class="checkbox-square checkbox-label transparent-checkbox" ng-class="{\'checked\': reach.checked}" ng-model="reach.checked"><div>{{::translation.only}} <span>{{::translation[action.replace(\'_limit\',\'\').replace(\'_stop\',\'\')]}}</span> {{::translation.when_reach}}</div></ion-checkbox></div></div><div class="col-40"><div class="row equal-height pl-0" ng-if="reach.checked"><div class="col"><div type="text" class="invest-input" ng-class="reach.value" ng-model="reach.value" on-tap="inputFocus(reach,\'reach.value\',0,100000000,asset.digits,\'Reach\')">{{reach.value | number:asset.digits}}</div></div></div></div></div></div></div><modal data="modal" template="templates/directives/popup-order.html"></modal><div class="row"><div class="row" ng-if="isKeyboardShow"><div class="col"><keyboard data="keyboardModelName" on-load-callback="myCallback(arg1)"></keyboard></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons" ng-show="isFooter"><div class="row p-0"><div class="col"><button class="button invest-buy-button button-full" ng-class="action" on-tap="createTrade()" ng-disabled="!validate()">{{::translation[action]}}</button></div></div></ion-footer-bar></ion-view>',controller:"InvestController"}},params:{backPage:"root.app.assets"},resolve:{location:["LocationService",d("New Trade - Webmobile")]},data:{footer:!1}}).state("root.app.modifyTrade",{url:"/trades/modify/:orderId",cache:!1,views:{"tab-opentrades":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false" class="modify-trade"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.openTrades\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.modify}}</span></ion-nav-title><ion-content scrollbar-y="true" overflow-scroll="true"><div class="trade-info pb-5"><div class="row sub-title"><div class="col title align-self"><h3 class="roboto-light font-28 mb-0">{{trade.asset.outputName}}</h3></div><div class="col labels align-self" ng-class="trade.action === \'buy\' ? \'buy\' : \'short\'"><div class="label action roboto font-14 text-transform-capitalize">{{translation[trade.action]}}</div><div class="label lots roboto font-14"><span>{{trade.lots | number: trade.asset.lotDigits}}</span> <span>{{::translation.lots}}</span></div></div></div><div class="row price"><div class="col roboto-light border-right pt-0 pb-0"><div class="muted font-14">{{::translation.market_rate}}</div><div class="roboto"><span ng-class="trade.closePriceDirection === \'asset-up\' ? \'up\' : \'down\'"><i class="icon font-16" ng-class="trade.closePriceDirection === \'asset-up\' ? \'ion-android-arrow-up\' : \'ion-android-arrow-down\'"></i></span> <span ng-class="trade.closePriceDirection">{{trade.closePrice() | number:trade.asset.digits}}</span></div></div><div class="col roboto-light border-right text-center pt-0 pb-0"><div class="muted font-15">{{::translation.difference}}</div><div class="roboto">{{trade.pendingDistance() | number:2}}</div></div><div class="col roboto-light text-right pt-0 pb-0"><div class="muted font-15">{{::translation.open_rate}}</div><div class="roboto">{{trade.openPrice | number:trade.asset.digits}}</div></div></div><div class="row lh-2 font-14"><div class="col border-top muted">{{::translation.tradeno}}</div><div class="col border-top text-right">#<span>{{trade.orderId}}&zwj;</span></div></div><div class="row lh-2 font-14"><div class="col border-top muted">{{::translation.datetime}}</div><div class="col border-top text-right">{{trade.openTime | date:\'dd/MM/yyyy HH:mm:ss\':clientTimeZone}}</div></div><div class="row lh-2 font-14"><div class="col border-top muted">{{::translation.swap_commission}}</div><div class="col border-top text-right">{{trade.swap | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="row lh-2 font-14" ng-if="constants[\'showCommission\']"><div class="col border-top muted">{{::translation.commission}}</div><div class="col border-top text-right">{{trade.commission | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="row pb-0"><div class="col border-top text-right profit pt-0"><div class="help-wrapper"><span class="roboto font-14">{{::translation.profit}}</span> <span class="roboto font-14">{{ trade.profit() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div><div class="invest-profitloss p-0 col"><div class="row p-0 mb-10"><div class="col-40"><div class="row equal-height pl-0"><div class="col pl-5"><ion-checkbox class="checkbox-square checkbox-label modern-checkbox" ng-class="{\'checked\': loss.checked}" ng-model="loss.checked" ng-disabled="sltpAutoSet"><div>{{::translation.stopLoss}}</div></ion-checkbox></div></div><div class="row equal-height pl-0"><div class="col"><div type="{{loss.pips.keyboard}}" class="invest-input" ng-class="loss.pips.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'pips\'); inputFocus(loss.pips,\'loss.pips.value\',0,10000000,0,\'Loss Pips\')">{{loss.pips.value}}</div></div></div></div><div class="row equal-height pl-0"><div class="col"><div type="{{loss.rate.keyboard}}" class="invest-input" ng-class="loss.rate.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'rate\'); inputFocus(loss.rate,\'loss.rate.value\',0,100000000,trade.asset.digits,\'Loss Price\')">{{loss.rate.value | number: trade.asset.digits}}</div></div></div></div><div class="row equal-height pl-0"><div class="col"><div class="invest-money"><span ng-if="loss.checked">{{ calcLossValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div><div class="col-20 center-text"><div class="row equal-height"><div class="col"></div></div><div class="row equal-height"><div class="col">{{::translation.pips}}</div></div><div class="row equal-height"><div class="col">{{::translation.price}}</div></div><div class="row equal-height"><div class="col center-transform">{{::translation.value}}</div></div></div><div class="col-40"><div class="row equal-height pr-0"><div class="col pl-5"><ion-checkbox class="checkbox-square checkbox-label modern-checkbox" ng-class="{\'checked\': profit.checked}" ng-model="profit.checked" ng-disabled="sltpAutoSet"><div>{{::translation.takeProfit}}</div></ion-checkbox></div></div><div class="row equal-height pr-0"><div class="col"><div type="{{profit.pips.keyboard}}" class="invest-input" ng-class="profit.pips.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'pips\'); inputFocus(profit.pips,\'profit.pips.value\',0,10000000,0,\'Profit Pips\')">{{profit.pips.value}}</div></div></div></div><div class="row equal-height pr-0"><div class="col"><div type="{{profit.rate.keyboard}}" class="invest-input" ng-class="profit.rate.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'rate\'); inputFocus(profit.rate,\'profit.rate.value\',0,100000000,trade.asset.digits,\'Profit Price\')">{{profit.rate.value | number: trade.asset.digits}}</div></div></div></div><div class="row equal-height pr-0"><div class="col"><div class="invest-money"><span ng-if="profit.checked">{{ calcProfitValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div></div></div><modal data="modal" template="templates/directives/popup-order.html"></modal><div ng-if="isKeyboardShow"><keyboard data="keyboardModelName" on-load-callback="myCallback(arg1)"></keyboard></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons" ng-show="isFooter"><div class="row p-0 mt-0"><div class="col"><button class="button button-transparent button-full" on-tap="openPartialClose()">{{::translation.closeTrade}}</button></div><div class="col"><button class="button invest-buy-button button-full button-blue" on-tap="modifyTrade()" ng-disabled="!validate() || !isModified()">{{::translation.modifyTrade}}</button></div></div><div class="closeTradeOptions" ng-show="showPartialClose"><div class="closeTradeTitle row"><span>{{::translation.closeTrade}}</span></div><div class="row partialOption"><div class="row"><div class="col p-0"><div class="row invest-amount inc-dec p-0" inc-dec><div class="col amount-area"><button ng-click="upDown({ model: investAmount, digits: trade.asset.lotDigits, step: trade.asset.stepLot * pow(10, trade.asset.lotDigits), direction: \'decrease\', min: trade.asset.stepLot, max: trade.lots })" on-touch="upDownRepeat({ model: investAmount, digits: trade.asset.lotDigits, step: trade.asset.stepLot * pow(10, trade.asset.lotDigits), direction: \'decrease\', min: trade.asset.stepLot, max: trade.lots })" on-release="upDownStop()" class="button button-down"><i class="ion-android-remove"></i></button><div class="wrapper-amount" on-tap="inputFocus(investAmount, \'investAmount.value\', trade.asset.stepLot, trade.lots, trade.asset.lotDigits, \'Volume\')"><div class="font-15 text-center amountTitle">{{::translation.volume}}</div><div type="text" ng-model="investAmount.value" class="divTxt amount" input-mask-min="{{trade.asset.stepLot}}" input-mask-max="{{trade.lots}}">{{investAmount.value}}</div></div><button ng-click="upDown({ model: investAmount, digits: trade.asset.lotDigits, step: trade.asset.stepLot * pow(10, trade.asset.lotDigits), direction: \'increase\', min: trade.asset.stepLot, max: trade.lots })" on-touch="upDownRepeat({ model: investAmount, digits: trade.asset.lotDigits, step: trade.asset.stepLot * pow(10, trade.asset.lotDigits), direction: \'increase\', min: trade.asset.stepLot, max: trade.lots })" on-release="upDownStop()" class="button button-up"><i class="ion-android-add"></i></button></div></div></div></div></div><div class="row actions"><div class="col"><button class="button button-transparent button-full" on-tap="cencelPartialClose()">{{::translation.no}}</button></div><div class="col"><button class="button button-default button-full" on-tap="closeTrade()" ng-disabled="!closeTradeValidate()"><span ng-if="investAmount.value == trade.lots || investAmount.value == 0">{{::translation.yes}}</span> <span ng-if="investAmount.value != trade.lots && investAmount.value > 0">{{::translation.close}} {{investAmount.value}}</span></button></div></div></div></ion-footer-bar></ion-view>',controller:"ModifyTradeController"}},resolve:{location:["LocationService",d("Modify Trade - Webmobile")]},data:{footer:!1}}).state("root.app.chart",{url:"/assets/:category/:assetId/chart",cache:!1,views:{"tab-assets":{template:'<ion-view><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.assets\',{direction: \'right\', category: category})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"><button class="fake-button buttons-right" on-tap="app.navigate(\'root.app.assetInfo\',{direction:\'left\', assetId: asset.id})"><i class="icon ion-ios-information-outline align-self"></i></button></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::asset.outputName}}</span></ion-nav-title><ion-content scrollbar-y="true" overflow-scroll="true" class="chart-section"><div class="chart-graph-wrapper"><div class="chart-toolbar"><div class="dropdown range" on-tap="dropdown.chartRange = ! dropdown.chartRange"><div class="selectItem"><span>{{translation[chart.range.title] || chart.range.title}}</span> <i class="icon icon-expand_more"></i></div><ul class="wrapper-dropdown-list" ng-show="dropdown.chartRange"><li ng-repeat="chartRange in chartRangeParams" ng-class="chart.range.id == chartRange.id && \'selected\'"><span on-tap="changeTimeRange(chartRange)">{{translation[chartRange.title] || chartRange.title}}</span></li></ul></div><div class="dropdown type" on-tap="dropdown.chartType = ! dropdown.chartType"><span class="selectItem"><span><i ng-class="\'icon-\' + chart.type.type" class="icon icon-item"></i></span> <i class="icon icon-expand_more"></i></span><ul class="wrapper-dropdown-list" ng-show="dropdown.chartType"><li ng-repeat="chartType in chartTypes" ng-class="chart.type.type == chartType.type && \'selected\'"><span><i ng-class="\'icon-\' + chartType.type" on-tap="chart.type = chartType" class="icon icon-item"></i></span></li></ul></div></div><pro-chart asset="asset" chart="chart"></pro-chart></div></ion-content><ion-footer-bar class="chart-footer"><div class="row chart-buttons"><div class="col col-50 pr-7"><button class="button chart-sell-button width-100" on-tap="app.navigate(\'root.app.invest\', {assetId:asset.id, action:\'sell\', category: category})" ng-if="user.activeTradingAccount"><span class="chart-button-wrapper"><span class="name-button white roboto-light">{{::translation.sell}}</span> <i class="icon ion-android-arrow-down white"></i> <span class="value-button white">{{asset.markupBid() | number:asset.digits }}</span></span></button> <button class="button chart-sell-button width-100" on-tap="app.navigate(\'signupPersonalProfile\')" ng-if="!user.activeTradingAccount"><span class="chart-button-wrapper"><span class="name-button white roboto-light">{{::translation.sell}}</span> <i class="icon ion-android-arrow-down white"></i> <span class="value-button white">{{asset.markupBid() | number:asset.digits }}</span></span></button></div><div class="col col-50 pl-7"><button class="button chart-buy-button width-100" on-tap="app.navigate(\'root.app.invest\', {assetId:asset.id, action:\'buy\', category: category})" ng-if="user.activeTradingAccount"><span class="chart-button-wrapper"><span class="name-button white roboto-light">{{::translation.buy}}</span> <i class="icon ion-android-arrow-up white"></i> <span class="value-button white">{{asset.markupAsk() | number:asset.digits }}</span></span></button> <button class="button chart-buy-button width-100" on-tap="app.navigate(\'signupPersonalProfile\')" ng-if="!user.activeTradingAccount"><span class="chart-button-wrapper"><span class="name-button white roboto-light">{{::translation.buy}}</span> <i class="icon ion-android-arrow-up white"></i> <span class="value-button white">{{asset.markupAsk() | number:asset.digits }}</span></span></button></div></div></ion-footer-bar><modal data="modal"></modal></ion-view>',controller:"ChartController"}},resolve:{location:["LocationService",d("Chart - Webmobile")]},data:{footer:!1}}).state("root.app.favorites",{url:"/assets/favorites",cache:!1,views:{"tab-assets":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.assets\',{category: \'FAVORITES\', direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.add_to_favorites}}</span></ion-nav-title><div class="bar bar-subheader text-center subheader-color"><ion-scroll class="menuWrap font-14" scrollbar-x="false" direction="x" has-bouncing="false"><div class="titleHolder" ng-repeat="category in categories" on-tap="toggleCategory(category.id)"><span class="titleItem" ng-class="{ \'active-category\': selectedIndex == category.id }">{{::translation[category.name] || category.id}}</span></div></ion-scroll></div><div class="item-input-favorites"><i class="icon ion-search placeholder-icon"></i> <input type="text" ng-model="search.outputName" placeholder="{{::translation.search_placeholder}}"></div></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="assets-search-offset view-area-favorites"><ion-list><ion-item collection-repeat="asset in assets | filter:search | orderBy: \'-isTradeable\' track by asset.id" class="quote-item favorites-item" item-height="60px"><div class="asset-item name-item align-self roboto width-100"><div class="row p-0"><div class="favorite-name col p-0 black font-18 roboto-light">{{asset.outputName}}</div><div class="icon-right-item" on-tap="toggle(asset.id)"><i ng-class="asset.isFavorite ? \'ion-checkmark-circled\' : \'ion-android-add\'"></i></div></div></div></ion-item></ion-list></ion-content></ion-view>',controller:"FavoritesController"}},resolve:{location:["LocationService",d("Favorites - Webmobile")]},data:{footer:!1}}).state("root.app.favorites-edit",{url:"/assets/favorites-edit",cache:!1,views:{"tab-assets":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.assets\',{category: \'FAVORITES\',direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.edit_favorites}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><ion-list show-delete="true" show-reorder="true"><ion-item ng-repeat="asset in favorites" class="quote-item edit-favorites-item"><ion-reorder-button class="ion-navicon" on-reorder="moveItem(asset, $fromIndex, $toIndex)"></ion-reorder-button><div class="roboto-light font-18 title-favorites black">{{::asset.name}}</div><ion-delete-button class="ion-android-close" on-tap="removeItem(asset)"></ion-delete-button></ion-item></ion-list><div ng-if="favorites.length == 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.no_favorites}}</div></div></div></ion-content></ion-view>',controller:"FavoritesEditController"}},resolve:{location:["LocationService",d("Edit Favorites - Webmobile")]},data:{footer:!1}}).state("root.app.openTrades",{url:"/trades/open",cache:!1,views:{"tab-opentrades":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.openPositions}}</span></ion-nav-title><div class="height-auto open-trades-subheader bar bar-subheader pt-0 pb-0"><div class="row pt-0"><div class="col" ng-if="!constants[\'marginUtilization\']"><div class="info-details white font-13"><span>{{::translation.marginLevel}}</span> <span>{{ calcMarginPercents() | number:2 }}%</span></div><div class="state"><div class="progress-line" ng-style="marginLevel()"></div><div class="progress-line-bg"></div></div></div><div class="col" ng-if="constants[\'marginUtilization\']"><div class="info-details white font-13"><span>{{::translation.marginUtilization}}</span> <span>{{ calcMarginUtilization() | number:2 }}%</span></div><div class="state"><div class="progress-line" ng-style="{\'width\': getMarginUtilizationBarWidth() }"></div><div class="progress-line-bg"></div></div></div></div><div class="row accountData"><div class="pl-7 font-13 text-transform-uppercase"><div class="color-title label text-transform-capitalize">{{::translation.freeMargin}}</div><div class="white val">{{ pnl.data.freeMargin | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div><div class="font-12 convertusd" ng-if="showConvertToUsd">({{freeMarginToUsd() | cryptoCurrency:\'USD\':2}})</div></div><div class="color-title font-13 text-transform-uppercase"><div class="color-title label">{{::translation.usedFunds}}</div><div class="white val"><span ng-if="user.activeTradingAccount">{{ user.activeTradingAccount.margin | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div><div class="font-12 convertusd" ng-if="showConvertToUsd">({{usedFundsToUsd() | cryptoCurrency:\'USD\':2}})</div></div><div class="color-title font-13 text-transform-uppercase"><div class="color-title label">{{::translation.accountValue}}</div><div class="white val">{{ pnl.data.equity | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div><div class="font-12 convertusd" ng-if="showConvertToUsd">({{equityToUsd() | cryptoCurrency:\'USD\':2}})</div></div></div></div><ion-content class="order-content order-content-subheader has-subfooter" ng-class="showConvertToUsd ? \'convertUsd\':\'\'"><ion-list><ion-item class="item trade-item order-items" height="95px" item-height="95" item-width="100%" collection-repeat="trade in trades | orderBy: \'openTime\':true" track by trade.orderId on-tap="app.navigate(\'root.app.modifyTrade\', {orderId: trade.orderId, direction:\'left\'})"><open-trade-item></open-trade-item></ion-item></ion-list><div ng-if="trades.length === 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.no_opentrades}}</div></div></div></ion-content><div class="bar bar-subfooter total-profit"><div class="row p-0 roboto"><div class="col-60 profit-title">{{::translation.totalPL}}:</div><div class="col-40 profit-value roboto-medium" ng-class="pnl.data.totalProfit >= 0 ? \'up\':\'down\'"><div>{{pnl.data.totalProfit | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div><div class="profit-value-usd font-13" ng-if="showConvertToUsd">({{totalProfitUsd() | cryptoCurrency:\'USD\':2}})</div></div></div></div></ion-view>',controller:"OpenTradeController"}},resolve:{location:["LocationService",d("Open Trades - Webmobile")]},data:{footer:!0}}).state("root.app.pendingTrades",{url:"/trades/pending",cache:!1,views:{"tab-pending":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.pendingOrders}}</span></ion-nav-title><ion-content overflow-scroll="true" class="pending-content"><ion-list ng-if="trades.length > 0"><ion-item class="item trade-item pending-items" height="95px" item-height="95" item-width="100%" collection-repeat="trade in trades | orderBy: \'openTime\':true" on-tap="app.navigate(\'root.app.modifyPendingTrade\', {orderId: trade.orderId, direction:\'left\'})"><pending-trade-item></pending-trade-item></ion-item></ion-list><div ng-if="trades.length == 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.no_pending}}</div></div></div></ion-content></ion-view>',controller:"OpenTradeController"}},resolve:{location:["LocationService",d("Pending Trades - Webmobile")]},data:{orderFilter:"pending",footer:!0}}).state("root.app.modifyPendingTrade",{url:"/trades/pending/modify/:orderId",cache:!1,views:{"tab-pending":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.pendingTrades\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation[trade.action.replace(\'_limit\',\'\').replace(\'_stop\',\'\')]}} {{::trade.asset.outputName }}</span></ion-nav-title><ion-content scrollbar-y="true" overflow-scroll="true"><div class="invest-top"><div><div class="row pt-0"><div class="col rate pt-0"><div ng-if="trade.action === \'buy\' || trade.action === \'buy_stop\' || trade.action === \'buy_limit\'"><h1 class="mb-3 invest-value-color roboto-bold">{{ trade.asset.markupAsk() | number:trade.asset.digits}}</h1></div><div ng-if="trade.action === \'sell\' || trade.action === \'sell_stop\' || trade.action === \'sell_limit\'"><h1 class="mb-3 invest-value-color roboto-bold">{{ trade.asset.markupBid() | number:trade.asset.digits}}</h1></div><div class="roboto-light font-14 pb-10">{{::translation.currentRate}}</div></div></div><div class="row invest-amount inc-dec pb-0" inc-dec><div class="col amount-area"><button ng-click="upDown({ model: reach, digits: trade.asset.digits, step: 1, direction: \'decrease\' })" on-touch="upDownRepeat({ model: reach, digits: trade.asset.digits, step: 1, direction: \'decrease\' })" on-release="upDownStop()" class="button button-down"><i class="ion-android-remove"></i></button><div class="wrapper-amount" on-tap="inputFocus(reach,\'reach.value\',0,100000000,trade.asset.digits,\'Rate\')"><span class="font-15 text-center" style="display: block;">{{::translation[trade.action.replace(\'_limit\',\'\').replace(\'_stop\',\'\')] + \' \' + translation.rateWhen }}</span><div type="text" ng-model="reach.value" class="divTxt amount">{{reach.value}}</div></div><button ng-click="upDown({ model: reach, digits: trade.asset.digits, step: 1, direction: \'increase\' })" on-touch="upDownRepeat({ model: reach, digits: trade.asset.digits, step: 1, direction: \'increase\' })" on-release="upDownStop()" class="button button-up"><i class="ion-android-add"></i></button></div></div><div class="row p-0 pb-7 text-center"><div class="col p-0"><span class="pip-value roboto-light font-14">{{::translation.distanceInPips}} = <span>{{ pendingDistance() | number:2}}</span></span></div></div></div><div class="row pb-5 pt-0"><div class="col text-center pr-0"><div class="roboto-light margin-value pb-5 font-13 border-right">{{::translation.availableFunds}}</div><div class="font-13 border-right">{{pnlData.freeMargin | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="col text-center pl-0"><div class="roboto-light margin-value pb-5 font-13 border-left">{{::translation.requiredMargin}}</div><div class="font-13 border-left">{{requiredMargin() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div></div></div><div class="invest-profitloss height-17-em"><div class="row pt-0"><div class="col-40"><div class="row equal-height"><div class="col pl-1"><ion-checkbox class="checkbox-square checkbox-label transparent-checkbox" ng-class="{\'checked\': loss.checked}" ng-model="loss.checked" ng-disabled="sltpAutoSet"><div>{{::translation.stopLoss}}</div></ion-checkbox></div></div><div class="row equal-height"><div class="col"><div type="{{loss.pips.keyboard}}" class="invest-input" ng-class="loss.pips.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'pips\'); inputFocus(loss.pips,\'loss.pips.value\',0,1000000,0,\'Loss Pips\')">{{loss.pips.value}}</div></div></div></div><div class="row equal-height"><div class="col"><div type="{{loss.rate.keyboard}}" class="invest-input" ng-class="loss.rate.lock && \'locked\'" ng-disabled="!loss.checked"><div ng-if="loss.checked" on-tap="lock(\'loss\',\'rate\'); inputFocus(loss.rate,\'loss.rate.value\',0,100000000,trade.asset.digits,\'Loss Price\')">{{loss.rate.value | number: trade.asset.digits}}</div></div></div></div><div class="row equal-height"><div class="col"><div class="invest-money"><span ng-if="loss.checked">{{ calcLossValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div><div class="col-20 center-text"><div class="row equal-height"><div class="col"></div></div><div class="row equal-height"><div class="col">{{::translation.pips}}</div></div><div class="row equal-height"><div class="col">{{::translation.price}}</div></div><div class="row equal-height"><div class="col center-transform">{{::translation.value}}</div></div></div><div class="col-40"><div class="row equal-height"><div class="col pl-1"><ion-checkbox class="checkbox-square checkbox-label transparent-checkbox" ng-class="{\'checked\': profit.checked}" ng-model="profit.checked" ng-disabled="sltpAutoSet"><div>{{::translation.takeProfit}}</div></ion-checkbox></div></div><div class="row equal-height"><div class="col"><div type="{{profit.pips.keyboard}}" class="invest-input" ng-class="profit.pips.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'pips\'); inputFocus(profit.pips,\'profit.pips.value\',0,100000000,0,\'Profit Pips\')">{{profit.pips.value}}</div></div></div></div><div class="row equal-height"><div class="col"><div type="{{profit.rate.keyboard}}" class="invest-input" ng-class="profit.rate.lock && \'locked\'" ng-disabled="!profit.checked"><div ng-if="profit.checked" on-tap="lock(\'profit\',\'rate\'); inputFocus(profit.rate,\'profit.rate.value\',0,100000000,trade.asset.digits,\'Profit Price\')">{{profit.rate.value | number: trade.asset.digits}}</div></div></div></div><div class="row equal-height"><div class="col"><div class="invest-money"><span ng-if="profit.checked">{{ calcProfitValue() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span></div></div></div></div></div></div><modal data="modal" template="templates/directives/popup-order.html"></modal><div class="row"><div class="row" ng-if="isKeyboardShow"><div class="col"><keyboard data="keyboardModelName" on-load-callback="myCallback(arg1)"></keyboard></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons" ng-show="isFooter"><div class="row p-0"><div class="col"><button class="button button-transparent button-full" on-tap="deleteTrade()">{{::translation.deleteOrder}}</button></div><div class="col"><button class="button invest-buy-button button-full button-blue" on-tap="modifyTrade()" ng-disabled="!validate() || !isModified()">{{ translation.modifyOrder }}</button></div></div></ion-footer-bar></ion-view>',controller:"ModifyPendingTradeController"}},resolve:{location:["LocationService",d("Modify Pending Trade - Webmobile")]},data:{footer:!1}}).state("root.app.closedTrades",{url:"/trades/closed",cache:!1,views:{"tab-closedtrades":{template:'<ion-view id="closedTrades" hide-back-button="true" enable-menu-with-back-views="false"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-buttons side="right"><div class="display-flex pt-10 padding-right" on-tap="showFilter()"><i class="icon ion-funnel font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.closedPositions}}</span></ion-nav-title></ion-nav-bar><div class="bar bar-subheader text-center subheader-color"><ion-scroll class="menuWrap font-14" scrollbar-x="false" direction="x" has-bouncing="false"><div class="titleHolder" on-tap="toggleCategory(key)" ng-repeat="(key,value) in constants.dateRange"><span class="titleItem" ng-if="key!==\'range\'" ng-class="{ \'active-category\': selectedRange == key }">{{ translation.dateRange[key] }}</span></div></ion-scroll></div><ion-content overflow-scroll="true" class="order-content has-subheader"><ion-list ng-if="trades.length > 0"><ion-item class="item trade-item order-items" height="135px" collection-repeat="trade in trades | orderBy: \'closeTime\':true"><closed-trade-item trade="trade"></closed-trade-item></ion-item></ion-list><div ng-if="trades.length == 0" class="vertical-align"><div class="vertical-align-item fullwidth"><div class="roboto-light font-36 text-center">{{::translation.no_closetrades}}</div></div></div></ion-content></ion-view>',controller:"ClosedTradeController"}},resolve:{location:["LocationService",d("Closed Trades - Webmobile")]},data:{footer:!0}}).state("root.app.menu",{url:"/menu",cache:!0,views:{"tab-menu":{template:'<ion-view hide-back-button="true" enable-menu-with-back-views="false"><div class="more-menu-header bar bar-subheader pt-0 pb-15"><div class="row pt-0"><div class="col-25 account-logo"><div><i class="ion-person"></i></div></div><div class="col-75 account-details pl-10"><h1 class="roboto-light">{{ user.firstName }} {{ user.lastName }}</h1><div class="roboto-light white font-16"><span ng-if="!user.activeTradingAccount.live">{{::translation.demo_account}}:</span> <span ng-if="user.activeTradingAccount.live">{{::translation.live_account}}:</span> <span>{{ user.activeTradingAccount.login }}&zwj;</span></div></div></div></div><ion-content overflow-scroll="true" class="more-menu-content"><ion-list class="menu-list" ng-if="authType===\'newforex\'"><ion-item ng-repeat="menuItem in menuItems | orderBy: \'displayOrder\'" on-tap="menuItem.onTap(this)" ng-if="menuItem.displayCondition" ng-class="menuItem.customClass ? menuItem.customClass : \'\'" class="item-complex"><a class="item-content" ng-if="!menuItem.specialType || menuItem.specialType === \'tradingCentral\'"><i ng-class="menuItem.iconClass"></i> <span class="font-16 roboto-light text-transform-capitalize">{{::translation[menuItem.translationKey] || menuItem.name}}</span></a> <a ng-if="menuItem.specialType === \'verification-v2\'" class="item-content"><i class="icon-AccountVerification"></i><div class="verification-v2"><div class="font-16 roboto-light v2-title">{{::translation.accountVerification}}</div><div ng-class="verificationRequired ? \'verificationRequired\' : \'\'"></div></div></a> <a class="item-content" ng-if="menuItem.specialType === \'img-link\'" on-tap="openCustomLinkByLang(menuItem)"><i class="icon-customLink" ng-if="menuItem.img"><img ng-src="{{menuItem.img}}"></i> <i ng-if="menuItem.icon" ng-class="menuItem.icon"></i> <span class="font-16 roboto-light">{{ menuItem[lang] ? menuItem[lang].title : menuItem.en.title }}</span></a></ion-item></ion-list><ion-list class="menu-list" ng-if="authType===\'webtrader\'"><ion-item on-tap="logout()" class="log-out-item"><i class="icon-Logout"></i> <span class="font-16 roboto-light">{{::translation.logout}}</span></ion-item></ion-list><div class="row p-0 pt-15"><div class="col" ng-if="constants.externalLinks[\'contactUs\']"><button type="button" ng-click="openLink(\'contactUs\')" class="button button-stable button-full">{{::translation.contact_us}}</button></div><div class="col" ng-if="constants.externalLinks[\'legal\']"><button type="button" ng-click="openLink(\'legal\')" class="button button-stable button-full">{{::translation.legal}}</button></div></div></ion-content><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"MenuController"}},resolve:{location:["LocationService",d("Menu - Webmobilex")],tradingCentralValidator:["API","Storage","config","$ionicLoading",function(e,t,n,a){return a.show({noBackdrop:!0}),e.validateTCFeatures().then((function(e){return a.hide(),t.set("validateTCFeatures",e.result),!0})).catch((function(e){return console.log({validateTCFeaturesError:e}),!0}))}]},data:{footer:!0}}).state("root.app.manageAccounts",{url:"/menu/manageaccounts",cache:!1,views:{"tab-menu":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="manage-accounts"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})" ng-if="user.activeTradingAccount"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"><div class="button-bar" ng-if="user.activeTradingAccount && !(constants.hideTransferBetweenAccounts && constants[\'hideAddAccount\'])"><button class="display-flex pl-15 padding-right fake-button" on-tap="openPopover($event)"><i class="icon ion-android-more-vertical align-self font-17"></i></button></div></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.manage_accounts}}</span> <i class="icon"></i></ion-nav-title><div class="height-auto active-account-subheader bar bar-subheader" ng-if="user.activeTradingAccount"><div class="card active"><div class="item item-text-wrap"><h3 class="name">{{user.firstName}} {{user.lastName}}</h3><div class="content"><span ng-if="constants[\'customerTypeForTA\']" class="font-bold">{{user.activeTradingAccount.customerType}}</span> <span ng-if="constants[\'platformSelect\']" class="font-bold">{{translation[user.activeTradingAccount.tradingPlatform] || user.activeTradingAccount.tradingPlatform}}</span> {{user.activeTradingAccount.login}}&zwj;</div><div class="info pb-7 pt-5"><div class="layout-row just-space"><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.balance}}</div><div class="layout-row infoValues pb-7">{{ user.activeTradingAccount.balance | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="layout-col width-100" ng-if="showCredit"><div class="layout-row infoTitle">{{::translation.credit}}</div><div class="layout-row infoValues pb-7">{{ user.activeTradingAccount.credit | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.equity}}</div><div class="layout-row infoValues pb-7">{{ pnl.equity() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.available}}</div><div class="layout-row infoValues pb-7">{{ pnl.data.freeMargin | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div></div></div><div class="accountType" ng-if="!user.activeTradingAccount.live"><span class="demo">{{::translation.demo}}</span></div><div class="accountType" ng-if="user.activeTradingAccount.live"><span class="live">{{::translation.live}}</span></div></div></div></div><div class="row accounts-title bar" ng-class="{hasActive: user.activeTradingAccount}"><div class="col">{{user.activeTradingAccount ? translation.switchAccount : translation.chooseAccount}}</div></div><ion-content overflow-scroll="true" class="view-area accounts-content" ng-class="{hasActive: user.activeTradingAccount}"><div class="realAccounts"><div class="card inactive" ng-repeat="account in realAccounts"><div class="item item-text-wrap" on-tap="switchAccount(account.login, account.live)"><h3 class="name">{{account.name}}</h3><div class="content"><span ng-if="constants[\'customerTypeForTA\']" class="font-bold">{{account.customerType}}</span> <span ng-if="constants[\'platformSelect\']" class="font-bold">{{translation[account.tradingPlatform] || account.tradingPlatform}}</span> {{account.login}}&zwj;</div><div class="info pb-7 pt-5"><div class="layout-row just-space"><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.balance}}</div><div class="layout-row infoValues">{{account.balance | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100" ng-if="showCredit"><div class="layout-row infoTitle">{{::translation.credit}}</div><div class="layout-row infoValues">{{account.credit | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.equity}}</div><div class="layout-row infoValues">{{account.equity | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.available}}</div><div class="layout-row infoValues">{{account.freeMargin | cryptoCurrency :account.currency :user.currencyDigits}}</div></div></div></div><div class="accountType"><span>Live</span></div></div></div></div><div class="demoAccounts"><div class="card inactive" ng-repeat="account in demoAccounts"><div class="item item-text-wrap" on-tap="switchAccount(account.login, account.live)"><h3 class="name">{{account.name}}</h3><div class="content"><span ng-if="constants[\'customerTypeForTA\']" class="font-bold">{{account.customerType}}</span> <span ng-if="constants[\'platformSelect\']" class="font-bold">{{translation[account.tradingPlatform] || account.tradingPlatform}}</span> {{account.login}}&zwj;</div><div class="info pb-7 pt-5"><div class="layout-row just-space"><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.balance}}</div><div class="layout-row infoValues">{{account.balance | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100" ng-if="showCredit"><div class="layout-row infoTitle">{{::translation.credit}}</div><div class="layout-row infoValues">{{account.credit | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.equity}}</div><div class="layout-row infoValues">{{account.equity | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle">{{::translation.available}}</div><div class="layout-row infoValues">{{account.freeMargin | cryptoCurrency :account.currency :user.currencyDigits}}</div></div></div></div><div class="accountType"><span>{{::translation.demo}}</span></div></div></div></div><modal data="modal" template="templates/directives/popup.html"></modal></ion-content></ion-view>',controller:"ManageAccountsController"}},resolve:{location:["LocationService",d("Manage Accounts - Webmobile")]},data:{footer:!1}}).state("root.app.manageAccountsAdd",{url:"/menu/manageaccounts/add",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.manageAccounts\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.addNewAccount}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form name="addAccountForm" class="pt-20 pr-16 pl-16" novalidate ng-submit="sendAccount(addAccountForm)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="row p-0"><div class="col pl-0 pr-0">{{::translation.accountType}}</div></div><div class="row p-0"><div class="col pt-0 pr-2 pb-0 pl-0"><button type="button" ng-click="toggleAccount(true)" class="button text-transform-uppercase button-full" ng-class="{\'button-transparent\': !liveAccont}">{{::translation.live}}</button></div><div class="col pt-0 pr-0 pb-0 pl-2" ng-if="useDemoAccounts"><button type="button" ng-click="toggleAccount(false)" class="button text-transform-uppercase button-full" ng-class="{\'button-transparent\': liveAccont}">{{::translation.demo}}</button></div></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-if="constants[\'platformSelect\']" id="platform" ng-class="{ \'has-error\' : (addAccountForm.platform.$invalid && !addAccountForm.platform.$untouched) || (addAccountForm.platform.$invalid && addAccountForm.$submitted)}"><select name="platform" class="no-appearance" ng-model="addAccount.platform" ng-options="platform.label for platform in platforms" required></select><span>{{::translation.platform}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="addAccountForm.platform.$error" ng-if="addAccountForm.platform.$dirty || addAccountForm.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" id="currency" ng-class="{ \'has-error\' : (addAccountForm.addAccountCurrency.$invalid && !addAccountForm.addAccountCurrency.$pristine) || (addAccountForm.addAccountCurrency.$invalid && addAccountForm.$submitted) }"><select name="addAccountCurrency" class="no-appearance" ng-model="addAccount.currency" ng-options="item.currency for item in currencies" required></select><span>{{::translation.accountCurrency}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="addAccountForm.addAccountCurrency.$error" ng-if="addAccountForm.addAccountCurrency.$dirty || addAccountForm.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-if="showLeverage" id="leverage" ng-class="{ \'has-error\' : (addAccountForm.addAccountLeverage.$invalid && !addAccountForm.addAccountLeverage.$untouched) || (addAccountForm.addAccountLeverage.$invalid && addAccountForm.$submitted)}"><select name="addAccountLeverage" class="no-appearance" ng-model="addAccount.leverage" ng-options="leverage for leverage in leverages" required></select><span>{{::translation.leverage}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="addAccountForm.addAccountLeverage.$error" ng-if="addAccountForm.addAccountLeverage.$dirty || addAccountForm.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-if="constants[\'customerTypeForTA\']" id="customerType" ng-class="{ \'has-error\' : (addAccountForm.addAccountCustomerType.$invalid && !addAccountForm.addAccountCustomerType.$untouched) || (addAccountForm.addAccountCustomerType.$invalid && addAccountForm.$submitted)}"><select name="addAccountCustomerType" class="no-appearance" ng-model="addAccount.customerType" ng-options="customerType.name for customerType in customerTypes" required></select><span>{{::translation.customerType}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="addAccountForm.addAccountCustomerType.$error" ng-if="addAccountForm.addAccountCustomerType.$dirty || addAccountForm.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div><div ng-if="!liveAccont"><div class="form-group item-input input-currency-symbol item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="initialDeposit" ng-class="{ \'has-error\' : (addAccountForm.addAccountInitialDeposit.$invalid && !addAccountForm.addAccountInitialDeposit.$pristine ) || (addAccountForm.addAccountInitialDeposit.$invalid && addAccountForm.$submitted) }"><input type="number" name="addAccountInitialDeposit" ng-model="addAccountDefaults.value" ng-min="addAccountDefaults.min" ng-max="addAccountDefaults.max" keyboard-watcher required> <span>{{::translation.demoBalance}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="addAccountForm.addAccountInitialDeposit.$error" ng-if="addAccountForm.addAccountInitialDeposit.$dirty || addAccountForm.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="min">{{::translation.messages.initialDepositMin}}</div><div class="help-block" ng-message="max">{{::translation.messages.initialDepositMax}}</div></div></div></form><modal data="modal" template="templates/directives/popup.html"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full text-transform-uppercase">{{::translation.addTradingAccount}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"AddNewAccountController"}},resolve:{demoDepositValues:["Storage","constants","$ionicLoading","$q","rootResolver",function(e,t,n,a,o){var i=e.get("demoDepositValues");return i&&i.length?a.resolve():(n.show({noBackdrop:!0}),e.load("demoDepositValues").then(n.hide).catch((function(t){e.set("demoDepositValues",[]),n.hide()})))}],location:["LocationService",d("New Trading Account - Webmobile")]},data:{footer:!1}}).state("root.app.manageAccountsTransfer",{url:"/menu/manageaccounts/transfer",cache:!1,views:{"tab-menu":{template:'<ion-view class="account-transfer"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.manageAccounts\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.transferFunds}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="height-auto pt-0 pb-0"><div class="row padding pt-0"><div class="col"><div class="font-14">{{::translation.transferFrom}}:</div><account-select accounts="accountsFrom" current="transfer.accountFrom" user="user" config="accountFromConfig"></account-select></div></div><div class="row padding pt-0"><div class="col"><div class="font-14">{{::translation.transferTo}}:</div><account-select accounts="accountsTo" current="transfer.accountTo" user="user" config="accountToConfig"></account-select></div></div></div><div class="row incdec-amount inc-dec pb-0" inc-dec><div class="col amount-area"><button type="button" ng-click="upDown({ model: transfer, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: transfer.accountFrom.balance, speedStep: changeStep })" on-touch="upDownRepeat({ model: transfer, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: transfer.accountFrom.balance, speedStep: changeStep })" on-release="upDownStop()" class="button button-down width-100"><i class="ion-android-remove"></i></button><div class="wrapper-amount amount-input"><div class="font-36 amount-input-currency">{{constants.currencySymbols[transfer.accountFrom.currency]}}</div><input type="number" ng-model="transfer.value" keyboard-watcher name="amount" min="{{config.min}}" max="{{transfer.accountFrom.fundsToWithdraw}}" tabindex="1" required></div><button type="button" ng-click="upDown({ model: transfer, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: transfer.accountFrom.balance, speedStep: changeStep })" on-touch="upDownRepeat({ model: transfer, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: transfer.accountFrom.balance, speedStep: changeStep})" on-release="upDownStop()" class="button button-up width-100"><i class="ion-android-add"></i></button></div><div class="messages pb-55" ng-messages="form.amount.$error"><div ng-if="form.amount.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="min">Minimum amount is {{config.min}}</div><div class="help-block" ng-message="max">Maximum amount is {{transfer.accountFrom.fundsToWithdraw}}</div></div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button type="button" class="button button-block button-full text-transform-uppercase">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"AccountsTransferController",resolve:{transferEnabled:["$q","constants",function(e,t){return t.hideTransferBetweenAccounts?e.reject():e.resolve()}],location:["LocationService",d("Transfer Between Accounts - Webmobile")]}}},data:{footer:!1}}).state("root.app.mangeAccountsChangePassword",{url:"/menu/manageaccounts/changepassword",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.manageAccounts\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.updatePassword}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form class="padding" name="form" id="form" novalidate ng-submit="changeAccountPassword(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="col account-select-wrapper as-select"><div class="font-14"><b>{{::translation.account}}</b>:</div><select name="selectedTradingAccount" ng-model="auth.tradingAccount" ng-options="account.currency+\' - \'+account.login for account in tradingAccounts"></select></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 bottom-border" ng-class="{ \'has-error\' : (form.newPassword.$invalid && !form.newPassword.$pristine) || (form.$submitted && form.newPassword.$invalid) }"><input type="password" name="newPassword" ng-model="auth.password" ng-minlength="6" ng-maxlength="12" ng-pattern="validator(\'password\')" keyboard-watcher required passwordmix> <span>{{::translation.enterNewPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.newPassword.$error" ng-if="form.newPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div><div class="form-group item-input item-stacked-label bottom-border mb-15 mt-10 pl-0" ng-class="{ \'has-error\' : (form.confirmPassword.$invalid && !form.confirmPassword.$pristine) || (form.$submitted && form.confirmPassword.$invalid) }"><input type="password" name="confirmPassword" ng-model="auth.confirmPassword" compare-to="auth.password" keyboard-watcher required> <span>{{::translation.reEnterPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.confirmPassword.$error" ng-if="form.confirmPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="compareTo">{{::translation.messages.password_not_matched}}</div></div></form><div class="content"><div class="row"><div class="col"><div class="roboto-bold font-20">{{::translation.securePassword}}</div></div></div><div class="row"><div class="col"><ul class="custom-list font-14 padding pt-0"><li>{{::translation.useCharacters}}</li><li>{{::translation.samePassword}}</li><li>{{::translation.usePersonalDetails}}</li></ul></div></div></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button type="button" class="button button-block button-full text-transform-uppercase">{{::translation.updatePassword}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"AccountsChangePasswordController",resolve:{location:["LocationService",d("Accounts Change Password - Webmobile")]}}},data:{footer:!1}}).state("root.app.transactionHistory",{url:"/transactionhistory",cache:!1,views:{"tab-menu":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="transaction-history"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.menu\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"><div class="display-flex pt-10 padding-right" on-tap="showFilter()"><i class="icon ion-funnel font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title font-14 roboto-light">{{::translation.transaction}}</span></ion-nav-title></ion-nav-bar><ion-content overflow-scroll="true" has-bouncing="false"><div class="transactions-list"><ion-list><ion-item class="p-0 font-13 roboto" collection-repeat="transaction in transactions | orderBy: \'-requestDate\'"><div class="card"><div class="row p-0 top"><div><span>{{::translation.type}}</span> <span class="value" ng-class="transaction.type">{{translation[transaction.type]}}</span></div><div><span>{{::translation.date}}</span> <span class="value">{{transaction.requestDate | date:\'dd/MM/yyyy HH:mm\':clientTimeZone}}</span></div></div><div class="row p-0 bottom"><div><div>{{::translation.account}}</div><div class="value">#{{transaction.login}}</div></div><div><div>{{::translation.payment}}</div><div class="value" ng-if="transaction.method === \'creditCard\'">{{translation.ending_with}} *{{transaction.creditCardLast4Digits}}</div><div class="value" ng-if="transaction.method !== \'creditCard\'">{{transaction.bankAcccountNumberLast4Digits}}</div><div class="value" ng-if="transaction.method !== \'creditCard\' && !transaction.bankAcccountNumberLast4Digits">{{translation[transaction.method]|| transaction.method}}</div><div class="value" ng-if="transaction.method===\'transfer\' && transaction.type===\'deposit\'">{{translation.transfer_fr}} #{{transaction.fromTradingAccount}}</div><div class="value" ng-if="transaction.method===\'transfer\' && transaction.type===\'withdrawal\'">{{translation.transfer_t}} #{{transaction.toTradingAccount}}</div></div><div><div>{{::translation.amount}}</div><div class="value">{{transaction.amount | cryptoCurrency :transaction.currency :user.currencyDigits}}</div></div></div></div></ion-item></ion-list></div><div ng-if="transactions.length == 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.no_transactions}}</div><div class="roboto font-18 text-center mt-08 muted">{{::translation.check_filter}}</div></div></div></ion-content></ion-view>',controller:"TransactionHistoryController"}},resolve:{location:["LocationService",d("Transactions History - Webmobile")]},data:{footer:!1}}).state("root.app.wallet",{url:"/wallet",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="wallet"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-title class="wallet-title"><span class="nav-title white font-14 roboto-light">{{::translation.deposit}}</span></ion-nav-title><ion-nav-buttons side="right"></ion-nav-buttons><ion-content scroll="true" overflow-scroll="true" ng-show="paymentMethods.length > 1" style="overflow:auto;-webkit-overflow-scrolling:touch"><div class="wallet accounts-title">{{::translation.choosePaymentMethod}}</div><div class="wallet-list"><ion-list><ion-item class="item-complex" ng-repeat="method in paymentMethods" ng-click="openDepositPage(method)"><a class="item-content"><img ng-src="img/{{method.name}}.svg" class="payment-method"> <i class="icon ion-chevron-right font-14"></i></a></ion-item></ion-list></div><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-content></ion-view>',controller:"WalletController"}},resolve:{depositPaymentMethods:["Storage","constants","$ionicLoading","rootResolver",function(e,t,n,a){return n.show({noBackdrop:!0}),e.load("paymentMethods").then(n.hide).catch((function(e){n.hide()}))}],location:["LocationService",d("Wallet - Webmobile")]},data:{footer:!0}}).state("root.app.withdraw",{url:"/withdraw/account",cache:!1,views:{"tab-menu":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="withdraw-page"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"><div class="button-bar"><button class="display-flex pl-15 padding-right fake-button" on-tap="openPopover($event)"><i class="icon ion-android-more-vertical align-self font-17"></i></button></div></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="invest-top"><div class="row padding pt-0"><div class="col"><div><div class="white font-14">{{::translation.withdrawFrom}}:</div></div><account-select accounts="accounts" current="withdraw.account" user="user" config="accountConfig"></account-select><div class="white font-14">{{::translation.selectPaymentMethod}}</div><div class="col account-select-wrapper mt-10 mb-10"><div class="form-group as-select"><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="select-method" ng-model="selectedModel.selectedPaymentMethod" ng-options="item as item.label for item in paymentTypes track by item.id"></select></div></div></div></div></div><form name="form" novalidate ng-submit="submit(form)" class="padding"><input type="submit" id="submit" value="Submit" style="display:none"><div class="row incdec-amount inc-dec pb-0" inc-dec><div class="col amount-area"><button type="button" ng-click="upDown({ model: withdraw, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: withdraw.account.freeMargin, speedStep: changeStep })" on-touch="upDownRepeat({ model: withdraw, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: withdraw.account.freeMargin, speedStep: changeStep })" on-release="upDownStop()" class="button button-down width-100"><i class="ion-android-remove"></i></button><div class="wrapper-amount amount-input"><div class="font-36 amount-input-currency">{{constants.currencySymbols[withdraw.account.currency]}}</div><input type="number" ng-model="withdraw.value" name="amount" keyboard-watcher ng-min="config.min" ng-max="withdraw.account.fundsToWithdraw" tabindex="1" required></div><button type="button" ng-click="upDown({ model: withdraw, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: withdraw.account.freeMargin, speedStep: changeStep })" on-touch="upDownRepeat({ model: withdraw, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: withdraw.account.freeMargin, speedStep: changeStep})" on-release="upDownStop()" class="button button-up width-100"><i class="ion-android-add"></i></button></div><div class="messages" ng-messages="form.amount.$error"><div ng-if="form.amount.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="min">{{::translation.minimumAmount}} {{config.min}}</div><div class="help-block" ng-message="max">{{::translation.maximumAmount}} {{withdraw.account.fundsToWithdraw|currency:constants.currencySymbols[withdraw.account.currency]:user.currencyDigits}}</div></div></div></div></form><div ng-if="withdrawAditionalText" class="font-12 pr-16 pl-16"><span ng-bind-html="withdrawAditionalText"></span></div></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit" class="for"><button class="button button-block button-full" ng-disabled="!formValidator">{{::translation.next}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"WithdrawController"}},resolve:{location:["LocationService",d("Withdrawal - Webmobile")]},data:{footer:!1}}).state("root.app.withdrawCompliance",{url:"/withdraw/compliance",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdrawal-compliance"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdrawalCompliance}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div ng-if="formTemplate && formTemplate.length"><div class="padding">{{::translation.withdrawComplianceText}}</div><dynamic-form class="padding" name="assessment" template="formTemplate" ng-model="formData"></dynamic-form></div><modal data="modal" template="templates/directives/popup.html"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0" ng-if="formTemplate && formTemplate.length"><div class="col"><button class="button button-block button-full" ng-disabled="!validateForm()" on-tap="processForm()">{{::translation.submit}}</button></div></div></ion-footer-bar></ion-view>',controller:"WithdrawalComplianceController"}},resolve:{location:["LocationService",d("Withdrawal Compliance - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-cryptoWallet",{url:"/withdraw/cryptoWallet/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-cryptoWallet-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.accountDetails}}</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.account.$invalid && !form.account.$pristine) || (form.$submitted && form.account.$invalid) }"><input type="text" keyboard-watcher name="account" ng-model="walletAddressModel.walletAddress" ng-minlength="2" ng-maxlength="100" class="wallet-address has-context-menu" required> <span class="input-label">{{::translation.insertCryptoWalletID}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.account.$error" ng-if="form.account.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div><div class="row p-0" ng-if="walletTypes.length > 1"><div class="col p-0"><div class="white font-14">{{::translation.typeOfCryptoCurrency}}</div><div class="form-group as-select"><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="wallet-type" ng-model="selectedModel.selectedWalletType" ng-options="item as item.label for item in walletTypes track by item.id"></select></div></div></div></div><div class="padding"><div class="col center-text pb-5 font-weight-bold text-transform-uppercase">{{::translation.withdrawReason}}</div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required tabindex="5"> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"WithdrawCryptoWalletController"}},resolve:{location:["LocationService",d("Withdrawal via CryptoWallet - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-papara",{url:"/withdraw/papara/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-papara-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.accountDetails}}</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.account.$invalid && !form.account.$pristine) || (form.$submitted && form.account.$invalid) }"><input type="text" keyboard-watcher name="account" ng-model="walletAddressModel.walletAddress" ng-minlength="10" ng-maxlength="10" ng-pattern="validator(\'number\')" class="wallet-address has-context-menu" required> <span class="input-label">{{::translation.paparaWalletId || \'Papara Wallet ID\'}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.account.$error" ng-if="form.account.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div><div class="padding"><div class="col center-text pb-5 font-weight-bold text-transform-uppercase">{{::translation.withdrawReason}}</div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required tabindex="5"> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"WithdrawPaparaController"}},resolve:{location:["LocationService",d("Withdrawal via Papara - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-mefete",{url:"/withdraw/mefete/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-mefete-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.accountDetails}}</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.account.$invalid && !form.account.$pristine) || (form.$submitted && form.account.$invalid) }"><input type="text" keyboard-watcher name="account" ng-model="walletAddressModel.walletAddress" ng-minlength="10" ng-maxlength="10" ng-pattern="validator(\'number\')" class="wallet-address has-context-menu" required> <span class="input-label">{{::translation.mefeteWalletId || \'Papara Wallet ID\'}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.account.$error" ng-if="form.account.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div><div class="padding"><div class="col center-text pb-5 font-weight-bold text-transform-uppercase">{{::translation.withdrawReason}}</div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required tabindex="5"> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"WithdrawMefeteController"}},resolve:{location:["LocationService",d("Withdrawal via Mefete - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-wireTransfer",{url:"/withdraw/wireTransfer/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-wiretransfer-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><div class="padding"><div class="row p-0"><div class="col pb-5 font-weight-bold">{{::translation.bankAccountInfo}}</div></div><div class="row p-0"><div class="col pt-2">{{::translation.bankAccountInfoText}}</div></div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="row p-0"><div class="col text-transform-uppercase bg-l-grey font-14 font-weight-bold center-text pt-15 pb-15">{{::translation.bankDetails}}</div></div><div class="padding"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankName" ng-class="{ \'has-error\' : (form.bankName.$invalid && !form.bankName.$pristine) || (form.$submitted && form.bankName.$invalid) }"><input type="text" name="bankName" ng-model="withdraw.bankName" ng-minlength="2" ng-maxlength="30" ng-pattern="validator(\'name\')" keyboard-watcher required> <span>{{::translation.bankName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankName.$error" ng-if="form.bankName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="accountHolder" ng-class="{ \'has-error\' : (form.accountHolder.$invalid && !form.accountHolder.$pristine) || (form.$submitted && form.accountHolder.$invalid) }"><input type="text" name="accountHolder" ng-model="withdraw.accountHolder" ng-minlength="1" ng-maxlength="30" ng-pattern="validator(\'name\')" keyboard-watcher required> <span>{{::translation.bankAccountHolder}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.accountHolder.$error" ng-if="form.accountHolder.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankNumber" ng-class="{ \'has-error\' : (form.bankNumber.$invalid && !form.bankNumber.$pristine) || (form.$submitted && form.bankNumber.$invalid) }"><input type="text" name="bankNumber" ng-model="withdraw.bankNumber" ng-minlength="3" ng-maxlength="30" ng-pattern="validator(\'freetext\')" keyboard-watcher required> <span>{{::translation.bankAccountNumber}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankNumber.$error" ng-if="form.bankNumber.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="code" ng-class="{ \'has-error\' : (form.code.$invalid && !form.code.$pristine) || (form.$submitted && form.code.$invalid) }"><input type="text" name="code" ng-model="withdraw.code" ng-minlength="3" ng-maxlength="30" ng-pattern="validator(\'freetext\')" keyboard-watcher required> <span>{{::translation.bankSwift}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.code.$error" ng-if="form.code.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="row p-0"><div class="col text-transform-uppercase bg-l-grey font-14 font-weight-bold center-text pt-15 pb-15">{{::translation.bankAddress}}</div></div><div class="padding"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankCountry" ng-class="{ \'has-error\' : form.bankCountry.$invalid && !form.bankCountry.$pristine }"><input type="text" class="custom-select custom-input" name="bankCountry" ng-model="countryName" ng-minlength="3" ng-maxlength="30" on-tap="countriesModal(\'country\', form)" readonly keyboard-watcher required> <span>{{::translation.bankCountry}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankCountry.$error" ng-if="form.bankCountry.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankCity" ng-class="{ \'has-error\' : (form.bankCity.$invalid && !form.bankCity.$pristine) || (form.$submitted && form.bankCity.$invalid) }"><input type="text" name="bankCity" ng-model="withdraw.bankCity" ng-minlength="3" ng-maxlength="30" keyboard-watcher required ng-pattern="validator(\'name\')"> <span>{{::translation.bankCity}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankCity.$error" ng-if="form.bankCity.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div ng-if="constants[\'wireTransferShowBankStateField\']" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankState" ng-class="{ \'has-error\' : (form.bankState.$invalid && !form.bankState.$pristine) || (form.$submitted && form.bankState.$invalid) }"><input type="text" name="bankState" ng-model="withdraw.bankState" ng-minlength="3" ng-maxlength="30" keyboard-watcher ng-required="!withdrawWireTransferBankStateNotRequired" ng-pattern="validator(\'name\')"> <span>{{::translation.bankState}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="constants[\'wireTransferShowBankStateField\']" class="messages font-12" ng-messages="form.bankState.$error"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div ng-if="constants[\'wireTransferShowBankBranchField\']" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankBranch" ng-class="{ \'has-error\' : (form.bankBranch.$invalid && !form.bankBranch.$pristine) || (form.$submitted && form.bankBranch.$invalid) }"><input type="text" name="bankBranch" ng-model="withdraw.bankBranch" ng-minlength="3" ng-maxlength="30" keyboard-watcher ng-pattern="validator(\'freetext\')"> <span>{{::translation.bank_branch}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="constants[\'wireTransferShowBankBranchField\']" class="messages font-12" ng-messages="form.bankBranch.$error"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankStreet" ng-class="{ \'has-error\' : (form.bankStreet.$invalid && !form.bankStreet.$pristine) || (form.$submitted && form.bankStreet.$invalid) }"><input type="text" name="bankStreet" ng-model="withdraw.bankStreet" ng-minlength="3" ng-maxlength="30" required keyboard-watcher ng-pattern="validator(\'name\')"> <span>{{::translation.bankStreetAddress}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankStreet.$error" ng-if="form.bankStreet.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div ng-if="constants[\'wireTransferShowIbanField\']" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="iban" ng-class="{ \'has-error\' : (form.iban.$invalid && !form.iban.$pristine) || (form.iban && form.iban.$invalid) }"><input type="text" name="iban" ng-model="withdraw.iban" ng-minlength="3" ng-maxlength="30" keyboard-watcher ng-pattern="validator(\'freetext\')"> <span>{{::translation.iban || \'IBAN\'}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="constants[\'wireTransferShowIbanField\']" class="messages font-12" ng-messages="form.iban.$error"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="row"><div class="col muted font-12 pb-0 withdraw-comment">{{::translation.withdrawCommentsText}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="comment" ng-class="{ \'has-error\' : (form.comment.$invalid && !form.comment.$pristine) || (form.$submitted && form.comment.$invalid) }"><input type="text" name="comment" ng-model="withdraw.comment" ng-minlength="3" ng-maxlength="150" keyboard-watcher ng-pattern="validator(\'name\')"> <span>{{::translation.withdrawComments}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawWireTransferController"}},resolve:{location:["LocationService",d("Withdrawal via WireTransfer - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-localWireTransfer",{url:"/withdraw/localWireTransfer/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-localwiretransfer-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.localWireTransfer}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><div class="padding"><div class="row p-0"><div class="col pb-5 font-weight-bold">{{::translation.bankAccountInfo}}</div></div><div class="row p-0"><div class="col pt-2">{{::translation.bankAccountInfoText}}</div></div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="row p-0"><div class="col text-transform-uppercase bg-l-grey font-14 font-weight-bold center-text pt-15 pb-15">{{::translation.bankDetails}}</div></div><div class="padding"><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.bankName.$invalid && !form.bankName.$pristine) || (form.$submitted && form.bankName.$invalid) }"><select name="bankName" class="no-appearance" ng-model="withdraw.bankName" ng-options="item as item.label for item in localBanks track by item.id" required><option ng-if="false"></option></select><span>{{::translation.bankName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="accountHolder" ng-class="{ \'has-error\' : (form.accountHolder.$invalid && !form.accountHolder.$pristine) || (form.$submitted && form.accountHolder.$invalid) }"><input type="text" name="accountHolder" ng-model="withdraw.accountHolder" ng-minlength="1" ng-maxlength="30" ng-pattern="validator(\'name\')" keyboard-watcher required> <span>{{::translation.bankAccountHolder}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.accountHolder.$error" ng-if="form.accountHolder.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankNumber" ng-class="{ \'has-error\' : (form.bankNumber.$invalid && !form.bankNumber.$pristine) || (form.$submitted && form.bankNumber.$invalid) }"><input type="text" name="bankNumber" ng-model="withdraw.bankNumber" ng-minlength="3" ng-maxlength="30" ng-pattern="validator(\'alphanum\')" keyboard-watcher required> <span>{{::translation.bankAccountNumber}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankNumber.$error" ng-if="form.bankNumber.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="row p-0"><div class="col text-transform-uppercase bg-l-grey font-14 font-weight-bold center-text pt-15 pb-15">{{::translation.bankAddress}}</div></div><div class="padding"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankCountry"><input type="text" name="bankCountry" ng-model="countryName" ng-readonly="true" keyboard-watcher required> <span>{{::translation.bankCountry}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankCity" ng-class="{ \'has-error\' : (form.bankCity.$invalid && !form.bankCity.$pristine) || (form.$submitted && form.bankCity.$invalid) }"><input type="text" name="bankCity" ng-model="withdraw.bankCity" ng-minlength="3" ng-maxlength="30" keyboard-watcher required ng-pattern="validator(\'name\')"> <span>{{::translation.bankCity}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankCity.$error" ng-if="form.bankCity.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankState" ng-class="{ \'has-error\' : (form.bankState.$invalid && !form.bankState.$pristine) || (form.$submitted && form.bankState.$invalid) }"><input type="text" name="bankState" ng-model="withdraw.bankState" ng-minlength="3" ng-maxlength="30" keyboard-watcher required ng-pattern="validator(\'name\')"> <span>{{::translation.bankState}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankState.$error" ng-if="form.bankState.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankStreet" ng-class="{ \'has-error\' : (form.bankStreet.$invalid && !form.bankStreet.$pristine) || (form.$submitted && form.bankStreet.$invalid) }"><input type="text" name="bankStreet" ng-model="withdraw.bankStreet" ng-minlength="3" ng-maxlength="30" required keyboard-watcher ng-pattern="validator(\'freetext\')"> <span>{{::translation.bankStreetAddress}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankStreet.$error" ng-if="form.bankStreet.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div class="row"><div class="col muted font-12 pb-0 withdraw-comment">{{::translation.withdrawCommentsText}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="comment" ng-class="{ \'has-error\' : (form.comment.$invalid && !form.comment.$pristine) || (form.$submitted && form.comment.$invalid) }"><input type="text" name="comment" ng-model="withdraw.comment" ng-minlength="3" ng-maxlength="150" keyboard-watcher ng-pattern="validator(\'name\')"> <span>{{::translation.withdrawComments}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawLocalWireTransferController"}},resolve:{location:["LocationService",d("Withdrawal via LocalWireTransfer - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-creditCard",{url:"/withdraw/creditCard/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-creditCard-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><div class="col center-text pb-5 font-weight-bold text-transform-uppercase">{{::translation.cardDetails}}</div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding pt-0"><div ng-if="!constants[\'shortCreditCardWithdrawalEnabled\']" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="number" ng-class="{ \'has-error\' : (form.number.$invalid && !form.number.$pristine) || (form.$submitted && form.number.$invalid) }"><input type="tel" name="number" ng-model="creditCard.number" minLength="4" maxLength="4" ng-minlength="4" ng-maxlength="4" required tabindex="2" keyboard-watcher ng-pattern="validator(\'number\')"> <span>{{::translation.card_last_digits}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="!constants[\'shortCreditCardWithdrawalEnabled\']" class="messages font-12" ng-messages="form.number.$error"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div><div ng-if="!constants[\'shortCreditCardWithdrawalEnabled\']" class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border cc-expire-data" id="date" ng-class="{ \'has-error\' : form.date.$invalid && !form.date.$pristine }"><input class="expiryDate" type="month" name="date" ng-model="creditCard.date" min="{{ minDate | date: \'yyyy-MM\'}}" tabindex="3" required> <span>{{::translation.expiry_date}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.date.$error" ng-if="form.date.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="holder" ng-class="{ \'has-error\' : (form.holder.$invalid && !form.holder.$pristine) || (form.$submitted && form.holder.$invalid) }"><input type="text" keyboard-watcher name="holder" ng-model="creditCard.holder" ng-minlength="1" ng-maxlength="100" required tabindex="5" ng-pattern="validator(\'name\')"> <span>Name on Card</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.holder.$error" ng-if="form.holder.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div><div class="col center-text pb-5 font-weight-bold text-transform-uppercase">{{::translation.withdrawReason}}</div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required tabindex="5"> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawCreditCardController"}},resolve:{location:["LocationService",d("Withdrawal via Credit Card - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-skrill",{url:"/withdraw/skrill/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-skrill-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="center-text font-16 muted pb-5">{{::translation.openSkrillAccount}} <a href="https://www.skrill.com" target="_blank">{{translation.skrill}}</a> {{translation.website}}</div><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">Account Details</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.email.$invalid && !form.email.$pristine) || (form.$submitted && form.email.$invalid) }"><input type="email" keyboard-watcher name="email" ng-model="accountEmail" ng-minlength="4" ng-maxlength="80" required ng-pattern="validator.email"> <span class="input-label">{{::translation.skrill_account_email}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.email.$error" ng-if="form.email.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div></div><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.withdrawReason}}</div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required tabindex="5"> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawSkrillController"}},resolve:{location:["LocationService",d("Withdrawal via Skrill - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-neteller",{url:"/withdraw/neteller/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-neteller-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="center-text font-16 muted pb-5">{{::translation.openNetellerAccount}} <a href="https://www.neteller.com" target="_blank">{{translation.neteller}}</a> {{translation.website}}</div><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">Account Details</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.account.$invalid && !form.account.$pristine) || (form.$submitted && form.account.$invalid) }"><input type="text" keyboard-watcher name="account" ng-model="accountModel.accountNumber" ng-minlength="2" ng-maxlength="12" required ng-pattern="validator(\'number\')"> <span class="input-label">{{::translation.neteller_account_number}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.account.$error" ng-if="form.account.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.withdrawReason}}</div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required tabindex="5"> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawNetellerController"}},resolve:{location:["LocationService",d("Withdrawal via Neteller - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-fasapay",{url:"/withdraw/fasapay/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-fasapay-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">Account Details</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.account.$invalid && !form.account.$pristine) || (form.$submitted && form.account.$invalid) }"><input type="text" keyboard-watcher name="account" ng-model="accountModel.accountName" ng-minlength="2" ng-maxlength="12" ng-pattern="validator(\'name\')" required> <span class="input-label">{{::translation.fasapay_account_name}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.account.$error" ng-if="form.account.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.account.$invalid && !form.account.$pristine) || (form.$submitted && form.account.$invalid) }"><input type="text" keyboard-watcher name="account" ng-model="accountModel.accountNumber" ng-minlength="2" ng-maxlength="12" required> <span class="input-label">{{::translation.fasapay_wallet_account_number}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.account.$error" ng-if="form.account.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div></div><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.withdrawReason}}</div><div class="form-group item-input as-select item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-class="{ \'has-error\' : (form.selectReason.$invalid && !form.selectReason.$pristine) || (form.$submitted && form.selectReason.$invalid) }"><select name="selectReason" class="no-appearance" ng-model="reasonModel.selectedReason" ng-options="item as item.label for item in withdrawalReasonsTypes track by item.id" required><option ng-if="false"></option></select><span>{{::translation.withdraw_reason_select}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div ng-if="isOtherReason()" class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="reason" ng-class="{ \'has-error\' : (form.reason.$invalid && !form.reason.$pristine) || (form.$submitted && form.reason.$invalid) }"><input type="text" keyboard-watcher name="reason" ng-model="reasonModel.reasonDescription" ng-minlength="4" ng-maxlength="300" required tabindex="5"> <span>{{::translation.withdraw_reason_enter}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.reason.$error" ng-if="form.reason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawFasapayController"}},resolve:{location:["LocationService",d("Withdrawal via FasaPay - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-unionpay",{url:"/withdraw/unionpay/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-unionpay-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true" class="unionPay"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.unionpay}} - {{::translation.cardDetails}}</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.unionpayCardholderName.$invalid && !form.unionpayCardholderName.$pristine) || (form.$submitted && form.unionpayCardholderName.$invalid) }"><input type="text" keyboard-watcher name="unionpayCardholderName" ng-model="unionPayModel.unionpayCardholderName" ng-minlength="1" ng-maxlength="30" ng-pattern="validator(\'name\')" required> <span class="input-label">{{::translation.unionpay_cardholder_name}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.unionpayCardholderName.$error" ng-if="form.unionpayCardholderName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.unionpayBankCardNumber.$invalid && !form.unionpayBankCardNumber.$pristine) || (form.$submitted && form.unionpayBankCardNumber.$invalid) }"><input type="text" keyboard-watcher name="unionpayBankCardNumber" ng-model="unionPayModel.unionpayBankCardNumber" ng-minlength="4" ng-maxlength="30" ng-pattern="validator(\'number\')" required> <span class="input-label">{{::translation.unionpay_bank_card_number}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.unionpayBankCardNumber.$error" ng-if="form.unionpayBankCardNumber.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.unionpayNationalIdCard.$invalid && !form.unionpayNationalIdCard.$pristine) || (form.$submitted && form.unionpayNationalIdCard.$invalid) }"><input type="text" keyboard-watcher name="unionpayNationalIdCard" ng-model="unionPayModel.unionpayNationalIdCard" ng-minlength="4" ng-maxlength="30" ng-pattern="validator(\'number\')" required> <span class="input-label">{{::translation.unionpay_national_id_card}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.unionpayNationalIdCard.$error" ng-if="form.unionpayNationalIdCard.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.unionpay}} - {{::translation.bankDetails}}</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.bankName.$invalid && !form.bankName.$pristine) || (form.$submitted && form.bankName.$invalid) }"><input type="text" keyboard-watcher name="bankName" ng-model="unionPayModel.bankName" ng-minlength="2" ng-maxlength="30" ng-pattern="validator(\'name\')" required> <span class="input-label">{{::translation.bankName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankName.$error" ng-if="form.bankName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="bankCountry" ng-class="{ \'has-error\' : form.bankCountry.$invalid && !form.bankCountry.$pristine }"><input type="text" class="custom-select custom-input" name="bankCountry" ng-model="unionPayModel.bankCountryName" ng-minlength="2" ng-maxlength="30" on-tap="countriesModal(\'country\', form)" readonly keyboard-watcher required> <span>{{::translation.bankCountry}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankCountry.$error" ng-if="form.bankCountry.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.bankCity.$invalid && !form.bankCity.$pristine) || (form.$submitted && form.bankCity.$invalid) }"><input type="text" keyboard-watcher name="bankCity" ng-model="unionPayModel.bankCity" ng-minlength="2" ng-maxlength="30" ng-pattern="validator(\'name\')" required> <span class="input-label">{{::translation.bankCity}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankCity.$error" ng-if="form.bankCity.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.bankBranch.$invalid && !form.bankBranch.$pristine) || (form.$submitted && form.bankBranch.$invalid) }"><input type="text" keyboard-watcher name="bankBranch" ng-model="unionPayModel.bankBranch" ng-minlength="2" ng-maxlength="30" ng-pattern="validator(\'name\')" required> <span class="input-label">{{::translation.bank_branch}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.bankBranch.$error" ng-if="form.bankBranch.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawUnionpayController"}},resolve:{location:["LocationService",d("Withdrawal via UnionPay - Webmobile")]},data:{footer:!1}}).state("root.app.withdraw-other",{url:"/withdraw/other/:login/:amount",cache:!1,views:{"tab-menu":{template:'<ion-view class="withdraw-other-details"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.withdraw\',{direction: \'left\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.withdraw}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row p-0"><div class="pt-15 col pb-5 font-weight-bold center-text">{{::translation.withdrawFrom}} #{{withdraw.login}} ({{user.activeTradingAccount.currency}}) / {{withdraw.amount|number:user.currencyDigits:currency:constants.currencySymbols[user.activeTradingAccount.currency]:true}}</div></div><form name="form" novalidate ng-submit="submit(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="padding"><div class="col center-text pb-5 font-14 font-weight-bold text-transform-uppercase">{{::translation.paymentDetails}}</div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.details.$invalid && !form.details.$pristine) || (form.$submitted && form.details.$invalid) }"><input type="text" keyboard-watcher name="details" ng-model="detailsModel.details" ng-minlength="10" ng-maxlength="250" required> <span class="input-label">{{::translation.withdraw_other_label}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.details.$error" ng-if="form.details.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-view>',controller:"WithdrawOtherController"}},resolve:{location:["LocationService",d("Withdrawal via other method - Webmobile")]},data:{footer:!1}}).state("root.app.withdrawHistory",{url:"/withdraw/history",cache:!1,views:{"tab-menu":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="transaction-history"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.withdraw\')"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"><div class="display-flex pt-10 padding-right" on-tap="showFilter()"><i class="icon ion-funnel font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title font-14 roboto-light">{{::translation.withdraw_history}}</span></ion-nav-title></ion-nav-bar><ion-content overflow-scroll="true" has-bouncing="false"><div class="transactions-list"><ion-list><ion-item class="p-0 font-13 roboto" item-height="transaction.status === \'pending\' ? 148 : 96" collection-repeat="transaction in transactions | orderBy: \'-requestDate\'"><div class="card"><div class="row p-0 top"><div><span>{{::translation.status}}</span> <span class="value">{{translation[transaction.status]}}</span></div><div><span>{{::translation.date}}</span> <span class="value">{{transaction.requestDate | date:\'dd/MM/yyyy HH:mm\':clientTimeZone}}</span></div></div><div class="row p-0" ng-class="transaction.status === \'pending\' ? \'top\' : \'bottom\'"><div><div>{{::translation.account}}</div><div class="value">#{{transaction.login}}</div></div><div><div>{{::translation.method_menu}}</div><div class="value">{{translation[transaction.method] || transaction.method }}</div></div><div><div>{{::translation.amount}}</div><div class="value">{{transaction.amount | cryptoCurrency :transaction.currency :user.currencyDigits}}</div></div></div><div ng-if="transaction.status === \'pending\'" class="row p-0 bottom"><button on-tap="cancelRequest(transaction)" class="button text-transform-uppercase button-blue white button-full button-shadow">{{::translation.cancel}}</button></div></div></ion-item></ion-list></div><div ng-if="transactions.length == 0" class="vertical-align"><div class="vertical-align-item"><div class="roboto-light font-36 text-center">{{::translation.noHistory}}</div><div class="roboto font-18 text-center mt-08 muted">{{::translation.check_filter}}</div></div></div><modal data="modal"></modal></ion-content></ion-view>',controller:"WithdrawHistoryController"}},resolve:{location:["LocationService",d("Withdrawals History - Webmobile")]},data:{footer:!1}}).state("root.app.wiretransfer",{url:"/wallet/wiretransfer",cache:!1,views:{"tab-wallet":{template:'<ion-view class="bank-transfer"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.wireTransfer}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="bank-info"><div class="row info-description"><div class="col"><div class="info-title row"><span>{{::translation.bank_information}}</span></div><div class="info-value muted row">{{::translation.banktransfer_instructions}}</div></div></div><ion-list><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_name}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_name}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_address}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_address}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_bank}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_bank}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_account_number}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_account_number}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_iban}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_iban}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.swift}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.swift}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.comments}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.comments}}</div></div></ion-item></ion-list></div></ion-content></ion-view>',controller:"WireTransferController"}},resolve:{location:["LocationService",d("Deposit via Wire Transfer - Webmobile")]},data:{footer:!0}}).state("root.app.credit-card",{url:"/wallet/creditCard",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation["credit-card"]}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><form name="form" novalidate ng-submit="confirm(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="invest-top"><div class="row incdec-amount inc-dec pb-0" inc-dec><div class="col pt-35 amount-area"><button type="button" ng-click="upDown({ model: creditCard, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: config.max, speedStep: changeStep })" on-touch="upDownRepeat({ model: creditCard, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: config.max, speedStep: changeStep })" on-release="upDownStop()" class="button button-down"><i class="ion-android-remove"></i></button><div class="wrapper-amount amount-input"><div class="font-36 amount-input-currency">{{constants.currencySymbols[user.activeTradingAccount.currency]}}</div><input type="number" ng-model="creditCard.value" name="amount" min="{{config.min}}" max="{{config.max}}" tabindex="1" keyboard-watcher required></div><button type="button" ng-click="upDown({ model: creditCard, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: config.max, speedStep: changeStep })" on-touch="upDownRepeat({ model: creditCard, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: config.max, speedStep: changeStep})" on-release="upDownStop()" class="button button-up"><i class="ion-android-add"></i></button></div><div class="messages pb-55" ng-messages="form.amount.$error"><div ng-if="form.amount.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="min">Minimum amount is {{config.min}}</div><div class="help-block" ng-message="max">Maximum amount is {{config.max}}</div></div></div></div></div><div class="row p-0"><div class="radio-toolbar"><label ng-repeat="amount in listAmounts"><input type="radio" ng-model="creditCard.value" ng-value="amount"> <span class="font-18">{{amount}}</span></label></div></div><div class="padding pt-0"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="number" ng-class="{ \'has-error\' : (form.number.$invalid && !form.number.$pristine) || (form.$submitted && form.number.$invalid) }"><input type="tel" name="number" ng-model="creditCard.number" minLength="12" maxLength="19" ng-minlength="12" ng-maxlength="19" required tabindex="2" keyboard-watcher ng-pattern="validator(\'number\')"> <span>{{::translation.card_name}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.number.$error" ng-if="form.number.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div><div class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="date" ng-class="{ \'has-error\' : form.date.$invalid && !form.date.$pristine }"><input class="expiryDate" type="month" name="date" ng-model="creditCard.date" min="{{ minDate | date: \'yyyy-MM\'}}" tabindex="3" required> <span>{{::translation.expiry_date}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.date.$error" ng-if="form.date.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div class="col pr-0 pb-0 pt-0 pl-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="cvv" ng-class="{ \'has-error\' : (form.cvv.$invalid && !form.cvv.$pristine) || (form.$submitted && form.cvv.$invalid) }"><input type="tel" name="cvv" ng-model="creditCard.cvv" minLength="3" maxLength="4" ng-minlength="3" ng-maxlength="4" required input-mask tabindex="4" ng-pattern="validator(\'number\')" keyboard-watcher> <span>CVV</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.cvv.$error" ng-if="form.cvv.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="holder" ng-class="{ \'has-error\' : (form.holder.$invalid && !form.holder.$pristine) || (form.$submitted && form.holder.$invalid) }"><input type="text" keyboard-watcher name="holder" ng-model="creditCard.holder" ng-minlength="2" ng-maxlength="100" required tabindex="5" ng-pattern="validator(\'alpha\')"> <span>Name on Card</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.holder.$error" ng-if="form.holder.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"CreditCardController"}},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",d("Deposit via Credit Card - Webmobile")]},data:{footer:!1}}).state("root.app.credit-card-secured",{url:"/wallet/creditCardSecured",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation["credit-card-secured"]}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><form name="form" novalidate ng-submit="confirm(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div class="invest-top"><div class="row incdec-amount inc-dec pb-0" inc-dec><div class="col pt-35 amount-area"><button type="button" ng-click="upDown({ model: creditCard, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: config.max, speedStep: changeStep })" on-touch="upDownRepeat({ model: creditCard, digits: config.digits, step: config.step, direction: \'decrease\', min: config.min, max: config.max, speedStep: changeStep })" on-release="upDownStop()" class="button button-down"><i class="ion-android-remove"></i></button><div class="wrapper-amount amount-input"><div class="font-36 amount-input-currency">{{constants.currencySymbols[user.activeTradingAccount.currency]}}</div><input type="number" ng-model="creditCard.value" name="amount" min="{{config.min}}" max="{{config.max}}" tabindex="1" keyboard-watcher required></div><button type="button" ng-click="upDown({ model: creditCard, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: config.max, speedStep: changeStep })" on-touch="upDownRepeat({ model: creditCard, digits: config.digits, step: config.step, direction: \'increase\', min: config.min, max: config.max, speedStep: changeStep})" on-release="upDownStop()" class="button button-up"><i class="ion-android-add"></i></button></div><div class="messages pb-55" ng-messages="form.amount.$error"><div ng-if="form.amount.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="min">Minimum amount is {{config.min}}</div><div class="help-block" ng-message="max">Maximum amount is {{config.max}}</div></div></div></div></div><div class="row p-0"><div class="radio-toolbar"><label ng-repeat="amount in listAmounts"><input type="radio" ng-model="creditCard.value" ng-value="amount"> <span class="font-18">{{amount}}</span></label></div></div><div class="padding pt-0"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="number" ng-class="{ \'has-error\' : (form.number.$invalid && !form.number.$pristine) || (form.$submitted && form.number.$invalid) }"><input type="tel" name="number" ng-model="creditCard.number" minLength="12" maxLength="19" ng-minlength="12" ng-maxlength="19" required tabindex="2" keyboard-watcher ng-pattern="validator(\'number\')"> <span>{{::translation.card_name}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.number.$error" ng-if="form.number.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div><div class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="date" ng-class="{ \'has-error\' : form.date.$invalid && !form.date.$pristine }"><input class="expiryDate" type="month" name="date" ng-model="creditCard.date" min="{{ minDate | date: \'yyyy-MM\'}}" tabindex="3" required> <span>{{::translation.expiry_date}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.date.$error" ng-if="form.date.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div class="col pr-0 pb-0 pt-0 pl-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="cvv" ng-class="{ \'has-error\' : (form.cvv.$invalid && !form.cvv.$pristine) || (form.$submitted && form.cvv.$invalid) }"><input type="tel" name="cvv" ng-model="creditCard.cvv" minLength="3" maxLength="4" ng-minlength="3" ng-maxlength="4" required input-mask tabindex="4" ng-pattern="validator(\'number\')" keyboard-watcher> <span>CVV</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.cvv.$error" ng-if="form.cvv.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="holder" ng-class="{ \'has-error\' : (form.holder.$invalid && !form.holder.$pristine) || (form.$submitted && form.holder.$invalid) }"><input type="text" keyboard-watcher name="holder" ng-model="creditCard.holder" ng-minlength="2" ng-maxlength="100" required tabindex="5" ng-pattern="validator(\'alpha\')"> <span>Name on Card</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.holder.$error" ng-if="form.holder.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.characters}}</div></div></div></form></ion-content><ion-footer-bar align-title="left" class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-full">{{::translation.submit}}</button></label></div></div></ion-footer-bar><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"CreditCardSecuredController"}},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",d("Deposit via Credit Card Secured - Webmobile")]},data:{footer:!1}}).state("root.app.orangepay-btc",{url:"/wallet/orangepay-btc",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.orangePayBtc}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><iframe data-tap-disabled="true" ng-src="{{iframeUrl}}" style="height: 100%; width: 100%;" ng-if="urlReady" element-ready element-ready-success="iframeLoad()" element-ready-fail="iframeLoadFail()" ng-show="iframeReady"></iframe></ion-content><amount-select amount="amount" config="config" next="getUrl()"></amount-select><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"OrangepayBtcController"}},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",d("Deposit via OrangePay - Webmobile")]},data:{footer:!1}}).state("root.app.praxis",{url:"/wallet/praxis",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.praxis}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><iframe data-tap-disabled="true" ng-src="{{iframeUrl}}" style="height: 100%; width: 100%;" element-ready element-ready-success="iframeLoad()" element-ready-fail="iframeLoadFail()" ng-show="iframeReady"></iframe></ion-content><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"PraxisController"}},resolve:{location:["LocationService",d("Deposit via Praxis - Webmobile")]},data:{footer:!1}}).state("root.app.bitgo",{url:"/wallet/bitgo",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.bitgo}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" class="bitgo-content" style="overflow:auto;-webkit-overflow-scrolling:touch"><div class="layout-column"><div class="layout-row info"><div class="layout-col col-50 muted">{{user.currency}} {{::translation.accountNumber}}:</div><div class="layout-col col-50">{{user.activeTradingAccount.login}}</div></div><div class="layout-row info border-bottom"><div class="layout-col col-50 muted">{{::translation.accountBalance}}:</div><div class="layout-col col-50 info-value">{{user.activeTradingAccount.balance | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="layout-row body-pandats"><div class="layout-column"><div class="layout-row">{{displayCurrency}} {{::translation.depositAddress}}:</div><div class="layout-row just-center depAddr-wrapper"><input name="depositAddress" class="depositAddress" ng-value="cryptoWallet.address" readonly><div class="copyToCB" ng-click="copyToClipBoard()"><i class="icon ion-ios-copy-outline"></i></div></div><div class="layout-row">{{::translation.scanQRCode}}</div><div class="layout-row qrcode-pandats just-center"><div class="qrcode-wrapper" ng-if="cryptoWallet.qrCode"><img ng-src="{{cryptoWallet.qrCode}}"></div></div><div class="layout-row"><div class="layout-column"><div class="info-title">{{::translation.important}}</div><div class="info-value muted">{{::translation.sendOnly}} <span class="font-bold">{{displayCurrency}}</span> {{::translation.toThisDepositAddress}}.</div><div class="info-value muted" ng-if="translation.itIsRecommended">{{::translation.itIsRecommended}}</div></div></div></div></div></div></ion-content><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"BitgoController"}},resolve:{location:["LocationService",d("Deposit via BitGo - Webmobile")]},data:{footer:!1}}).state("root.app.qrcode",{url:"/wallet/qrcode",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.qrcode}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" class="qrcode-content" style="overflow:auto;-webkit-overflow-scrolling:touch"><div class="layout-column"><div class="layout-row info"><div class="layout-col col-50 muted">{{user.currency}} {{::translation.accountNumber}}:</div><div class="layout-col col-50">{{user.activeTradingAccount.login}}</div></div><div class="layout-row info border-bottom"><div class="layout-col col-50 muted">{{::translation.accountBalance}}:</div><div class="layout-col col-50 info-value">{{user.activeTradingAccount.balance | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</div></div><div class="layout-row body-pandats"><div class="layout-column width-100"><div class="layout-row just-center"><img ng-src="img/flags/{{flagIcon}}.svg" class="currency-flag"> {{displayCurrency}} {{::translation.depositAddress}}:</div><div class="layout-row qrcode-pandats just-center"><div class="qrcode-wrapper" ng-if="cryptoWallet.qrCode"><img ng-src="{{cryptoWallet.qrCode}}"></div></div><div class="layout-row"><div class="layout-column width-100"><div class="layout-row justify-center width-100">{{::translation.scanQRCode}}</div></div></div><div class="layout-row"><div class="layout-column pix-code"><label class="pix-code-label">{{translation.pixCode || \'Pix Code\'}}:</label><div class="pix-code-container"><input id="pix-code" ng-value="cryptoWallet.emv" readonly> <button ng-click="copyPixCode()"><i class="icon ion-ios-copy-outline"></i></button></div></div></div><div class="layout-row"><div class="layout-column"><div class="info-description">{{::translation.qrcodeInfo}}</div></div></div></div></div></div></ion-content><amount-select amount="amount" config="config" next="getUrl()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"QrcodeController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",d("Deposit via QrCode - Webmobile")]},data:{footer:!1}}).state("root.app.pendingdeposit",{url:"/wallet/pendingdeposit",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation.paymentDetails}}</span></ion-nav-title><amount-select amount="amount" config="config" next="onDeposit()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"PendingDepositController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",d("Pending Deposit Page - Webmobile")]},data:{footer:!1}}).state("root.app.peachpayments",{url:"/wallet/peachpayments",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">PeachPayments</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><iframe data-tap-disabled="true" ng-src="{{iframeUrl}}" style="height: 100%; width: 100%;" ng-if="urlReady" element-ready element-ready-success="iframeLoad()" element-ready-fail="iframeLoadFail()" ng-show="iframeReady"></iframe></ion-content><amount-select amount="amount" config="config" next="getUrl()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"PeachPaymentsController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",d("Deposit via PeachPayments - Webmobile")]},data:{footer:!1}}).state("root.app.external",{url:"/wallet/external",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{methodName}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><iframe data-tap-disabled="true" ng-src="{{iframeUrl}}" style="height: 100%; width: 100%;" element-ready element-ready-success="iframeLoad()" element-ready-fail="iframeLoadFail()" ng-show="iframeReady"></iframe></ion-content><modal data="modal" template="templates/directives/popup-message.html"></modal></ion-view>',controller:"ExternalController"}},resolve:{location:["LocationService",d("Deposit via external payment service - Webmobile")]},params:{method:null},data:{footer:!1}}).state("root.app.banktransfer",{url:"/wallet/banktransfer",cache:!1,views:{"tab-wallet":{template:'<ion-view class="bank-transfer"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.transfer}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="bank-info"><div class="row info-description"><div class="col"><div class="info-title row"><span>{{::translation.bank_information}}</span></div><div class="info-value muted row">{{::translation.banktransfer_instructions}}</div></div></div><ion-list ng-if="!customBankDetails"><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_name}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_name}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_address}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_address}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_bank}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_bank}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_account_number}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_account_number}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.beneficiary_iban}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.beneficiary_iban}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.swift}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.swift}}</div></div></ion-item><ion-item><div class="row info"><div class="col-50 muted"><span>{{::translation.comments}}</span></div><div class="col-50 info-value">{{::defaultBankDetails.comments}}</div></div></ion-item></ion-list><ion-list ng-if="customBankDetails"><ion-item ng-repeat="item in customBankDetails"><div class="row info"><div class="col-50 muted"><span>{{item.title}}</span></div><div class="col-50 info-value" ng-if="!item.userData">{{item.value}}</div><div class="col-50 info-value" ng-if="item.userData === \'activeTradingAccountLogin\'">{{user.activeTradingAccount.login}}</div></div></ion-item></ion-list></div></ion-content><modal data="modal" template="templates/directives/popup-message.html"></modal><amount-select amount="amount" config="config" next="createPendingDeposit()" ng-if="showAmountSelect"></amount-select></ion-view>',controller:"BankTransferController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",d("Deposit via Bank Transfer - Webmobile")]},data:{footer:!1}}).state("root.app.hostedpage",{url:"/wallet/hostedpage",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation[methodName]}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"><iframe data-tap-disabled="true" ng-src="{{iframeUrl}}" style="height: 100%; width: 100%;" ng-if="urlReady" element-ready element-ready-success="iframeLoad()" element-ready-fail="iframeLoadFail()" ng-show="iframeReady"></iframe></ion-content><amount-select amount="amount" config="config" next="getUrl()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"HostedPageController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",d("Deposit - Webmobile")]},data:{footer:!1}}).state("root.app.hostedpage-popup",{url:"/wallet/hostedpage-popup",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation[methodName]}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"></ion-content><amount-select amount="amount" config="config" next="getUrl()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"HostedPagePopupController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",d("Deposit - Webmobile")]},data:{footer:!1}}).state("root.app.hostedpage-window",{url:"/wallet/hostedpage-window",cache:!1,views:{"tab-wallet":{template:'<ion-view hide-back-button="false" can-swipe-back="false" class="credit-card"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(paymentMethods.length > 1 ? \'root.app.wallet\' : \'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title">{{::translation[methodName]}}</span></ion-nav-title><ion-content scroll="true" overflow-scroll="true" style="overflow:auto;-webkit-overflow-scrolling:touch"></ion-content><amount-select amount="amount" config="config" next="getUrl()" ng-if="showAmountSelect"></amount-select><modal data="modal" template="templates/directives/popup-deposit.html"></modal></ion-view>',controller:"HostedPageWindowController"}},params:{method:null},resolve:{depositValue:["Storage","constants","$ionicLoading","rootResolver",c],location:["LocationService",d("Deposit - Webmobile")]},data:{footer:!1}}).state("root.app.personalDetails",{url:"/menu/personalDetails",cache:!1,views:{"tab-menu":{template:'<ion-view><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="app.navigate(\'root.app.menu\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-buttons side="right"></ion-nav-buttons><ion-nav-title><span class="nav-title roboto-light font-14">{{::translation.personalDetails}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><form class="padding" name="form" novalidate ng-submit="updatePersonalDetails(form)"><input type="submit" id="submit" value="Submit" style="display:none"><div ng-if="!profileRulesHelper.isHidden(\'firstName\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="firstName" ng-class="{ \'has-error\' : (form.firstName.$invalid && !form.firstName.$pristine) || (form.$submitted && form.firstName.$invalid) }"><input type="text" name="firstName" ng-model="personalProfileForm.firstName" ng-minlength="1" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'name\')" ng-required="profileRulesHelper.isRequired(\'firstName\')" ng-readonly="profileRulesHelper.isReadonly(\'firstName\', user.firstName)"> <span>{{::translation.firstName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.firstName.$error" ng-if="form.firstName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Firtsname}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'lastName\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="lastName" ng-class="{ \'has-error\' : (form.lastName.$invalid && !form.lastName.$pristine) || (form.$submitted && form.lastName.$invalid) }"><input type="text" name="lastName" ng-model="personalProfileForm.lastName" ng-minlength="1" ng-maxlength="32" ng-pattern="validator(\'name\')" keyboard-watcher ng-required="profileRulesHelper.isRequired(\'lastName\')" ng-readonly="profileRulesHelper.isReadonly(\'lastName\', user.lastName)"> <span>{{::translation.lastName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.lastName.$error" ng-if="form.lastName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Lastname}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'birthday\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="birthday" ng-class="{ \'has-error\' : form.birthday.$invalid && !form.birthday.$pristine }"><input type="date" name="birthday" ng-model="personalProfileForm.birthday" max="{{ minBirth }}" ng-required="profileRulesHelper.isRequired(\'birthday\')" ng-disabled="profileRulesHelper.isReadonly(\'birthday\', user.birthday)"> <span>{{::translation.dateBirth}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.birthday.$error" ng-if="form.dateBirth.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.datepickerFormat}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'phone\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="phone" ng-class="{ \'has-error\' : (form.phone.$invalid && !form.phone.$pristine) || (form.$submitted && form.phone.$invalid) }"><input type="tel" name="phone" ng-model="personalProfileForm.phone" minLength="5" maxLength="17" ng-minlength="5" ng-maxlength="17" keyboard-watcher ng-pattern="validator(\'phone\')" ng-required="profileRulesHelper.isRequired(\'phone\')" ng-readonly="profileRulesHelper.isReadonly(\'phone\', user.phone)"> <span>{{::translation.phoneFull}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.phone.$error" ng-if="form.phone.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'country\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="country" ng-class="{ \'has-error\' : (form.country.$invalid && !form.country.$pristine) || (form.$submitted && form.country.$invalid) }"><input type="text" class="custom-select custom-input" name="country" ng-model="personalProfileForm.country.country" on-tap="!profileRulesHelper.isReadonly(\'country\', user.country) && openCountryModal()" readonly ng-required="profileRulesHelper.isRequired(\'country\')"> <span>{{::translation.country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="countryModal" items="countries" config="countryModalConfig" on-submit="setCountry(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.country.$error" ng-if="form.country.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-hide="personalProfileForm.country.states.length === 0"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="state" ng-class="{ \'has-error\' : (form.state.$invalid && !form.state.$pristine) || (form.$submitted && form.state.$invalid) }"><input type="text" class="custom-select custom-input" name="state" ng-model="personalProfileForm.state.stateName" on-tap="!profileRulesHelper.isReadonly(\'state\', user.state) && openCountryStateModal()" readonly> <span>{{::translation.state}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="countryStateModal" items="countryStates" config="countryStateModalConfig" on-submit="setCountryState(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.state.$error" ng-if="form.state.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'citizenship\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="citizenship" ng-class="{ \'has-error\' : (form.citizenship.$invalid && !form.citizenship.$pristine) || (form.$submitted && form.citizenship.$invalid) }"><input type="text" class="custom-select custom-input" name="citizenship" ng-model="personalProfileForm.citizenship.citizenship" on-tap="!profileRulesHelper.isReadonly(\'citizenship\', user.citizenship) && openCitizenshipModal()" readonly ng-required="profileRulesHelper.isRequired(\'citizenship\')"> <span>{{::translation.citizenship}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="citizenshipModal" items="citizenships" config="citizenshipModalConfig" on-submit="setCitizenship(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.citizenship.$error" ng-if="form.citizenship.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'address\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="address" ng-class="{ \'has-error\' : (form.address.$invalid && !form.address.$pristine) || (form.$submitted && form.address.$invalid) }"><input type="text" name="address" ng-model="personalProfileForm.address" ng-minlength="2" ng-maxlength="100" keyboard-watcher ng-pattern="validator(\'address\')" ng-required="profileRulesHelper.isRequired(\'address\')" ng-readonly="profileRulesHelper.isReadonly(\'address\', user.address)"> <span>{{::translation.address}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.address.$error" ng-if="form.address.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_address}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'city\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="city" ng-class="{ \'has-error\' : (form.city.$invalid && !form.city.$pristine) || (form.$submitted && form.city.$invalid) }"><input type="text" name="city" ng-model="personalProfileForm.city" ng-minlength="2" ng-maxlength="100" ng-required="profileRulesHelper.isRequired(\'city\')" ng-readonly="profileRulesHelper.isReadonly(\'city\', user.city)" keyboard-watcher ng-pattern="validator(\'name\')" style="user-select: text !important;"> <span>{{::translation.city}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.city.$error" ng-if="form.city.$dirty || from.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_city}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'postCode\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="postCode" ng-class="{ \'has-error\' : (form.postCode.$invalid && !form.postCode.$pristine) || (form.$submitted && form.postCode.$invalid) }"><input type="text" name="postCode" ng-model="personalProfileForm.postCode" ng-minlength="3" ng-maxlength="15" keyboard-watcher ng-pattern="validator(\'alphanum\')" ng-required="profileRulesHelper.isRequired(\'postCode\')" ng-readonly="profileRulesHelper.isReadonly(\'postCode\', user.postCode)"> <span>{{::translation.zipCode}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.postCode.$error" ng-if="form.postCode.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="row padding-bottom"><div class="col"></div></div></form><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar align-title="left" class="invest-buttons" ng-hide="constants[\'disableEditPersonalDetails\']"><div class="row p-0"><div class="col"><label for="submit"><button class="button text-transform-uppercase button-blue button-full button-shadow">{{::translation.update}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"PersonalDetailsController"}},resolve:{location:["LocationService",d("Personal Details - Webmobile")]},data:{footer:!1}}).state("kycCheck",{url:"/kycCheck",cache:!1,template:'<ion-view id="createFirstAccount"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light"></span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col"><div class="title roboto font-24"></div></div></div><div class="row"><div class="col"><div class="content roboto font-18">{{message}}</div></div></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar class="invest-buttons"><div class="row p-0"><div class="col"><button class="button button-block button-blue" on-tap="onCancel()">{{translation.back}}</button></div><div class="col"><button class="button button-block button-blue" on-tap="onNext()">{{translation.continue}}</button></div></div></ion-footer-bar></ion-view>',controller:"KycCheckController",resolve:{},data:{footer:!1}}).state("tnc",{url:"/tnc",cache:!1,template:'<ion-view id="createFirstAccount"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-title><span class="nav-title white font-14 roboto-light">{{::translation.terms}}</span></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col"><div class="title roboto font-24"></div></div></div><div class="row"><div class="col"><div class="content roboto font-18" ng-if="!translation.tncPoptpDisclamer">{{::translation.tnc1}} <a ng-href="{{constants.externalLinks.termsAndConditions + \'?lang=\' + lang}}" target="_blank">{{::translation.terms}}</a> {{::translation.tnc2}}</div><div class="content roboto font-16" ng-if="translation.tncPoptpDisclamer"><span ng-bind-html="translation.tncPoptpDisclamer"></span></div></div></div><div class="row"><div class="col"><form name="form" novalidate ng-submit="onNext(form)"><input type="submit" id="submit" value="Submit" style="display:none"><ion-checkbox class="mt-10 border-0 modern-checkbox" ng-class="{\'error-checkbox\': (form.tnc.$invalid && !form.tnc.$pristine) || (form.$submitted && form.tnc.$invalid) }" name="tnc" ng-model="tnc" ng-required="true">{{::translation.tncAccept}}</ion-checkbox></form></div></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar class="invest-buttons"><div class="row p-0"><div class="col"><label for="submit"><button class="button button-block button-blue" type="submit">{{translation.continue}}</button></label></div></div></ion-footer-bar></ion-view>',controller:"TncController",resolve:{},data:{footer:!1}}).state("questionnaireMessage",{url:"/questionnaireMessage",cache:!1,template:'<ion-view id="createFirstAccount"><ion-nav-bar class="bar-stable"><ion-nav-buttons side="left"><div class="display-flex back-button" on-tap="navigate(\'root.app.assets\',{direction: \'right\'})"><i class="icon ion-android-arrow-back align-self padding-left font-22"></i></div></ion-nav-buttons><ion-nav-title></ion-nav-title></ion-nav-bar><ion-content scrollbar-y="true" overflow-scroll="true"><div class="row"><div class="col"><div class="title roboto font-24"></div></div></div><div class="row"><div class="col"><div class="content roboto font-22">{{::translation.questionnaireFill}}</div></div></div><modal data="modal" template="templates/directives/popup-message.html" close="8"></modal></ion-content><ion-footer-bar class="invest-buttons"><div class="row p-0"><div class="col"><button class="button button-block button-cancel" type="button" on-tap="navigate(\'root.app.assets\',{direction: \'right\'})">{{translation.close}}</button></div><div class="col"><button class="button button-block button-blue" type="button" on-tap="navigate(\'signupQuestionnaire\',{})">{{translation.continue}}</button></div></div></ion-footer-bar></ion-view>',controller:"QuestionnaireMessageController",resolve:{},data:{footer:!1}}),n.views.maxCache(0),n.views.forwardCache(!1),n.views.transition("platform"),n.navBar.alignTitle("left"),n.backButton.text(""),n.spinner.icon("ios"),n.tabs.position("bottom"),r.devKey="",r.appId="",r.options={isDebug:!0,onInstallConversionDataListener:!0},s.debugInfoEnabled(!1)}]),collections.service("AssetCollection",[function(){return function(e){var t=e||[],n={},a={},o={},i=!1;this.add=function(e){t.push(e)},this.get=function(e){if(e&&e.hasOwnProperty("id")&&o.hasOwnProperty(e.id))return o[e.id];var s=JSON.stringify(e);if(e&&e.hasOwnProperty("s")&&o.hasOwnProperty(s))return o[s];if(e&&e.hasOwnProperty("id")&&n.hasOwnProperty(e.id))return n[e.id];if(e&&e.hasOwnProperty("s")&&a.hasOwnProperty(s))return a[s];var r=_.find(t,e);if(r&&!i)return e.hasOwnProperty("id")&&(n[e.id]=r),e.hasOwnProperty("s")&&(a[s]=r),r;e.hasOwnProperty("id")&&(o[e.id]=null),e.hasOwnProperty("s")&&(o[s]=null)},this.find=function(e){return _.filter(t,e)},this.findBy=function(e,n,a){var o=_.chain(t).filter(e).filter(n);return(a?o.orderBy(a.field,a.dir):o).value()},this.sort=function(e){return _.orderBy(t,e)},this.remove=function(e){return _.remove(t,e)},this.getAll=function(){return t},this.length=function(){return t.length},this.fill=function(e){t=e},this.clear=function(){i=!0,t.forEach((function(e){"function"===e.clear()&&e.clear()})),t=[],n={},a={},o={}}}}]),collections.service("BaseCollection",[function(){return function(e){var t=e||[];this.add=function(e){t.push(e)},this.get=function(e){return _.find(t,e)},this.find=function(e){return _.filter(t,e)},this.findBy=function(e,n,a){const o=_.chain(t).filter(e).filter(n);return(a?o.orderBy(a.field,a.dir):o).value()},this.sort=function(e){return _.orderBy(t,e)},this.remove=function(e){return _.remove(t,e)},this.getAll=function(){return t},this.length=function(){return t.length},this.fill=function(e){t=e},this.clear=function(){t=[]}}}]),collections.service("ClosedTradeCollection",[function(){return function(e){var t=e||[];this.add=function(e){t.push(e)},this.get=function(e){return _.find(t,e)},this.find=function(e){return _.filter(t,e)},this.sort=function(e){return _.orderBy(t,e)},this.remove=function(e){return _.remove(t,e)},this.getAllTrades=function(){return _(t).value()},this.getAll=function(){return t},this.length=function(){return t.length},this.clear=function(){t.forEach((function(e){"function"===e.clear()&&e.clear()})),t=[]}}}]),collections.service("OpenTradeCollection",[function(){return function(e){var t=e||[];this.add=function(e){t.push(e)},this.get=function(e){return _.find(t,e)},this.find=function(e){return _.filter(t,e)},this.getTrades=function(){return _.filter(t,(function(e){return"buy"===e.action||"sell"===e.action}))},this.getPendingTrades=function(){return _.filter(t,(function(e){return e.actionCode>1&&e.actionCode<6}))},this.sort=function(e){return _.orderBy(t,e)},this.remove=function(e){return _.remove(t,e)},this.getAll=function(){return t},this.length=function(){return t.length},this.clear=function(){t.forEach((function(e){"function"===e.clear()&&e.clear()})),t=[]}}}]),collections.service("TransactionHistoryCollection",[function(){return function(e){var t=e||[];this.add=function(e){t.push(e)},this.get=function(e){return _.find(t,e)},this.find=function(e){return _.filter(t,e)},this.sort=function(e){return _.orderBy(t,e)},this.remove=function(e){return _.remove(t,e)},this.getAll=function(){return t},this.length=function(){return t.length},this.clear=function(){t.forEach((function(e){"function"===e.clear()&&e.clear()})),t=[]}}}]),services.service("BlueprintRegistration",(function(){function e(e){return{firstName:e.firstName||"",middleName:e.middleName||"",surname:e.surname||"",nationalID:e.nationalId||"",gender:"male"===e.gender?0:1,dob:moment(e.dateBirth).format("DD.MM.YYYY")||"",phone:e.phone||"",isMobilePhone:e.isMobilePhone?1:0,country:e.country||"",nationality:e.nationality||"",birthCountry:e.birthCountry||"",address:e.street||"",city:e.city||"",postalCode:e.zipCode||"",isUSCitizen:e.isUSCitizen?1:0,usTaxID:e.usTaxId||""}}function t(e){return{tradingFrequency:e.freq,OTCDFrequency:e.deriv,ETDFrequency:e.exch,approveCFDTrading:e.permit?1:0,atv:e.total,investmentKnowledge:e.investm,employmentStatus:e.employ,annualIncome:e.finance,savingsInvestment:e.value}}function n(e){var t;try{t=JSON.parse(e)}catch(e){return""}var n=t.hasOwnProperty("data")&&t.data,a={c:n.campaign||"",pid:n.media_source||"",af_siteID:n.af_siteid||"",af_sub1:n.af_sub1||"",af_sub2:n.af_sub2||"",af_sub3:n.af_sub3||"",af_sub4:n.af_sub4||"",af_sub5:n.af_sub5||"",clickID:""};return Object.keys(a).reduce((function(e,t){return e.concat(t+"="+("null"===a[t]?"":a[t]))}),[]).join("|")}return this.create=function(a){switch(a){case"long":return e;case"questions":return t;case"affiliate":return n}},this})),app.service("chartThemes",[function(){return{dark:{background:"#111216",label:"#EEEEEE",stroke:"#989898",trendline:"#AAAAAA",gridlines:"#555555",macdhist:"#AAAAAA",crosshair:"#f1f1f1",currentvalueindicator:"#FF0000",currentPriceLine:"#0090ff",currentPriceBackground:"#0090ff",overlays:["#CB2BC6","#5217DB","#18E197","#DED71F","#DE521F","#10F5B8","#A6ACE2","#DF9FB0"],bbands:["#aabbcc","#aabbcc","#aabbcc"],macd:["#0000FF","#FF0000","#aabbcc"],psar:"#CCFFFF",rcandle:"#e14928",gcandle:"#21ad38",lineplot:"#CCCCCC",idcss:'position:absolute; border: 2px solid #0066CC; background: #FFFFCC;font-size:10px;font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;text-align:center;width:80px;height:100px; padding:2px;',oloffset:0,font:"11px Helvetica Neue, Helvetica, Arial",extremeFont:"Bold 11px Helvetica Neue, Helvetica, Arial",extremeDash:[5],extremeRangeTransparency:.1,extremeRangeColor:"#fff",indicatorTitleColor:"#fff",maxYlines:10,maxIndicators:10},light:{background:"#FBFBFB",label:"#bababa",stroke:"#d3d3d3",gridlines:"#d3d3d3",crosshair:"#7777FF",trendline:"#0B0B0B",macdhist:"#0B0B0B",currentvalueindicator:"#FF0000",currentPriceLine:"#152d4f",currentPriceValue:"#ffffff",currentPriceBackground:"#152d4f",overlays:["#CB2BC6","#5217DB","#18E197","#DED71F","#DE521F","#10F5B8","#A6ACE2","#DF9FB0"],bbands:["#001122","#001122","#001122"],macd:["#000088","#880000","#aabbcc"],psar:"#000099",rcandle:"#fc5440",gcandle:"#21c8a3",lineplot:"#333333",idcss:'position:absolute; border: 2px solid #0066CC; background: #FFFFCC;font-size:10px;font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;text-align:center;width:80px;height:100px; padding:2px;',font:"11px Helvetica Neue, Helvetica, Arial",extremeFont:"Bold 11px Helvetica Neue, Helvetica, Arial",extremeDash:[5],extremeRangeTransparency:.1,extremeRangeColor:"#fff",indicatorTitleColor:"#fff",maxYlines:6,maxIndicators:10}}}]),app.service("config",["constants","$http",function(e,t){var n={load:function(){console.log("loading config from remote ...");var e=this,a={method:"GET",url:n.configPath+"config.json?"+Date.now(),timeout:1e4};return t(a).then((function(t){var n=t.data;Object.keys(n).forEach((function(t){e.hasOwnProperty(t)&&"function"!=typeof e[t]&&(e[t]=n[t])})),log("config is loaded successfully")}))},socket:{serverAddress:"wss://mena-evest.pandats-client.io",path:"/socket.io",autoConnect:!1,connectTimeout:5e3,reconnection:!0,transports:["websocket"],reconnect:!0,reconnectionDelay:5e3,reconnectionLimit:5e3,maxReconnectionAttempts:1e3},traderName:"Evest",defaultCurrencySymbols:e.currencySymbols.USD,languages:[{id:"en",name:"English"},{id:"ar",name:"العربية"}],autoLogin:!1,defaultLanguage:"en",languagesPriority:["en"],languageChooseOption:!0,localizationPath:"locales/",localizationLoadTimeout:1e4,requestTimeout:25e3,currencyList:[],validations:{asset:{OutputName:{presence:{allowEmpty:!1}},IsTradeable:{presence:{allowEmpty:!1},numericality:{greaterThanOrEqualTo:0,lessThanOrEqualTo:2}},IsShow:{presence:{allowEmpty:!1}},Digits:{presence:{allowEmpty:!1},numericality:{greaterThanOrEqualTo:0,lessThanOrEqualTo:10}},Type:{presence:{allowEmpty:!1},numericality:!0},Description:{presence:{allowEmpty:!0}},ContractSize:{presence:{allowEmpty:!1},numericality:!0},ProfitMode:{presence:{allowEmpty:!1},numericality:!0},MarginMode:{presence:{allowEmpty:!1},numericality:!0},Spread:{presence:{allowEmpty:!1},numericality:!0},Category:{presence:{allowEmpty:!0}},Currency:{presence:{allowEmpty:!1}},Markup:{presence:{allowEmpty:!1},numericality:!0},Percentage:{presence:{allowEmpty:!1},numericality:!0},InitialMargin:{presence:{allowEmpty:!1},numericality:!0},TickSize:{presence:{allowEmpty:!1},numericality:!0},TickValue:{presence:{allowEmpty:!1},numericality:!0},MinLot:{presence:{allowEmpty:!1},numericality:!0},StepLot:{presence:{allowEmpty:!1},numericality:!0},MaxLot:{presence:{allowEmpty:!1},numericality:!0},IsCurrentSessionValid:{presence:{allowEmpty:!1},numericality:!0},Unit:{presence:!1},SwapsLong:{presence:{allowEmpty:!1},numericality:!0},SwapsShort:{presence:{allowEmpty:!1},numericality:!0},TradingTimes:{presence:!0,isTradingTimes:!0},id:{presence:{allowEmpty:!1},numericality:!0},Bid:{presence:{allowEmpty:!1},numericality:!0},Ask:{presence:{allowEmpty:!1},numericality:!0},High:{presence:{allowEmpty:!1},numericality:!0},Low:{presence:{allowEmpty:!1},numericality:!0},TickTime:{presence:{allowEmpty:!1},numericality:!0},LastPrice:{presence:{allowEmpty:!1},numericality:!0}},openTrade:{id:{presence:{allowEmpty:!1},numericality:!0},OrderID:{presence:{allowEmpty:!1},numericality:!0},Cmd:{presence:{allowEmpty:!1},numericality:!0},Comment:{presence:{allowEmpty:!0}},OpenTime:{presence:{allowEmpty:!1},numericality:!0},CloseTime:{presence:{allowEmpty:!1},numericality:!0},OpenPrice:{presence:{allowEmpty:!1},numericality:!0},ClosePrice:{presence:{allowEmpty:!1},numericality:!0},Digits:{presence:{allowEmpty:!1},numericality:{greaterThanOrEqualTo:0,lessThanOrEqualTo:10}},Profit:{presence:{allowEmpty:!1},numericality:!0},Commission:{presence:{allowEmpty:!1},numericality:!0},Expiration:{presence:{allowEmpty:!1},numericality:!0},sl:{presence:{allowEmpty:!1},numericality:!0},tp:{presence:{allowEmpty:!1},numericality:!0},Taxes:{presence:{allowEmpty:!1},numericality:!0},Storage:{presence:{allowEmpty:!1},numericality:!0},Volume:{presence:{allowEmpty:!1},numericality:!0},Login:{presence:{allowEmpty:!1},numericality:!0},OutputName:{presence:{allowEmpty:!1}},ContractSize:{presence:{allowEmpty:!1},numericality:!0}}},stepChange:{20:5,100:10},defaultLeverage:100,leverages:[100],chartUrl:"https://nfp.pandats.com/prochart-6.9.2",firebase:{},googleProviderId:"",facebookProviderId:""};return n}]),app.constant("constants",{lsTraderName:"__eves_",errorCodes:{invalidLogin:"-1"},currencySeparator:"",assetsTypes:[{id:"PORTFOLIO ASSETS",name:"portfolioassets",selected:!1},{id:"SHARES",name:"stocks",selected:!1},{id:"FOREX",name:"currencies",selected:!0},{id:"COMMODITIES",name:"commodities",selected:!1},{id:"SPOT",name:"spot",selected:!1},{id:"INDICES",name:"indices",selected:!1},{id:"CRYPTO",name:"crypto",selected:!1}],actions:{buy:0,sell:1,buy_limit:2,sell_limit:3,buy_stop:4,sell_stop:5,balance:6,credit:7,pamm:8,correction:9,charge:10,commission:11,commission_daily:12,commission_monthly:13,agent_daily:14,agent_monthly:15,interestrate:16,buy_canceled:17,sell_canceled:18,dividend:19,dividend_franked:20,tax:21,agent:22,so_compensation:23,bonus:24},actionsId:{0:"buy",1:"sell",2:"buy_limit",3:"sell_limit",4:"buy_stop",5:"sell_stop",6:"balance",7:"credit",8:"pamm",9:"correction",10:"charge",11:"commission",12:"commission_daily",13:"commission_monthly",14:"agent_daily",15:"agent_monthly",16:"interestrate",17:"buy_canceled",18:"sell_canceled",19:"dividend",20:"dividend_franked",21:"tax",22:"agent",23:"so_compensation",24:"bonus"},ls_state:{sell:{limit:"sell_limit",stop:"sell_stop"},buy:{limit:"buy_limit",stop:"buy_stop"}},dateRange:{day:0,threedays:1,week:2,month:3,threemonths:4,all:5,range:6},defaultInvestAmount:1,system:{loginSources:[{id:3,name:"Demo"},{id:4,name:"Live"}],defaultLoginSource:3},openPositionsPanel:{tabId:0,templates:{full:"openPositions",collapsed:"collapsedOpenPositions"}},ordersPanel:{tabId:1,templates:{full:"openPositions",collapsed:"collapsedOpenPositions"}},closedPositionsPanel:{tabId:2,templates:{full:"closePositions",collapsed:"collapsedClosePositions"}},tradingAlerts:{tabId:3,templates:{full:"tradingAlerts",collapsed:"tradingAlerts"}},economicCalendar:{tabId:4,templates:{full:"economicCalendar",collapsed:"economicCalendar"}},dailyMarketUpdate:{tabId:5,templates:{full:"dailyMarketUpdate",collapsed:"dailyMarketUpdate"}},chartRangeParams:[{title:"1min",id:1,timeFrame:1},{title:"5min",id:2,timeFrame:5},{title:"15min",id:3,timeFrame:15},{title:"30min",id:4,timeFrame:30},{title:"1hour",id:5,timeFrame:60},{title:"4hours",id:6,timeFrame:240},{title:"1day",id:7,timeFrame:1440},{title:"1week",id:8,timeFrame:10080},{title:"1month",id:9,timeFrame:43200}],chartTypes:[{type:"candlestick"},{type:"areaspline"},{type:"ohlc"}],notification:{error:0,success:1},validatorType:{notEmpty:0,regex:1,valueMatch:2},regex:{onlyLatinCharacters:"^[a-zA-Z]+$",onlyLatinCharactersAndWhitespaces:"^[a-zA-Z\\s]+$",latinCharactersDigitsWhitespace:"^[a-zA-Z\\s0-9]+$",email:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",onlyDigits:"^[0-9]+$"},classes:{inputErrorClass:"error"},inputTypes:{text:"text",password:"password"},timeout:{noResponse:1e4},defaultCurrency:"USD",currencySymbols:{USD:"$",EUR:"€",GBP:"£",AUD:"A$",CAD:"C$",NZD:"NZ$",SGD:"$",JPY:"¥",RUB:"₽",TRY:"₺",CNY:"¥",BRL:"R$",ZAR:"R",CHF:"CHF",KWD:"ك",SAR:"SR",BTC:"Ƀ",LTC:"Ł",XRP:"XRP",BCH:"BCH",ETH:"ETH",UST:"₮",CZK:"Kč",HUF:"Ft",TTR:"₮",SEK:"SEK"},investAmountRangeParams:[{value:1,name:"1"},{value:5,name:"5"},{value:10,name:"10"},{value:50,name:"50"},{value:100,name:"100"}],startOfDay:{hours:6,minutes:55,seconds:1},profitLossOptions:[{id:1,title:"Points"},{id:2,title:"Rate"}],defaultProfit:50,defaultLoss:50,error:{type:{VALIDATION:0,SYSTEM:1,NETWORK:2},typeById:{0:"validation",1:"system",2:"network"}},daysOfWeek:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},loginStatus:{noActiveAccount:0,failedActiveAccount:1,noTradingAccounts:2},userState:{initial:1,personal:2,questionnaire:3},depositMultipliers:[1,2.5,2,2,2.5,2],defaultDeposit:{minimum:100,maximum:5e3,visual:250},platforms:["Web","API","CRM","Mobile"],platformById:{web:"Web",mobile:"Mobile",webMobile:"Web Mobile"},initialDeposit:25e3,documentCategories:[{name:"proof_of_identity"},{name:"proof_of_residence"},{name:"document_other"}],documentBaseCategories:["photo_id","passport","driving_license","utility_bill","bank_statement","residence_certificate","credit_card_copy"],documentTypes:[{id:"photo_id_front",baseCategory:"photo_id",category:"proof_of_identity"},{id:"photo_id_back",baseCategory:"photo_id",category:"proof_of_identity"},{id:"passport",baseCategory:"passport",category:"proof_of_identity"},{id:"driving_license_front",baseCategory:"driving_license",category:"proof_of_identity"},{id:"driving_license_back",baseCategory:"driving_license",category:"proof_of_identity"},{id:"utility_bill",baseCategory:"utility_bill",category:"proof_of_residence"},{id:"bank_statement",baseCategory:"bank_statement",category:"proof_of_residence"},{id:"residence_certificate",baseCategory:"residence_certificate",category:"proof_of_residence"},{id:"credit_card_copy_front",baseCategory:"credit_card_copy",category:"proof_of_payment"},{id:"credit_card_copy_back",baseCategory:"credit_card_copy",category:"proof_of_payment"}],documentStatuses:{new:"New",pending:"Pending",approved:"Approved",rejected:"Rejected"},documentToStatuses:{Pending:"pending",Approved:"approved",Rejected:"rejected"},documentFromTypes:{photo_id_front:"Photo ID front",photo_id_back:"Photo ID back",passport:"Passport",driving_license_front:"Driving license front",driving_license_back:"Driver license back",utility_bill:"Utility bill",bank_statement:"Bank statement",residence_certificate:"Residence certificate",credit_card_copy_front:"Credit card copy front",credit_card_copy_back:"Credit card copy back",other:"Other"},documentToTypes:{"Photo ID front":"photo_id_front","Photo ID back":"photo_id_back",Passport:"passport","Driving license front":"driving_license_front","Driver license back":"driving_license_back","Utility bill":"utility_bill","Bank statement":"bank_statement","Residence certificate":"residence_certificate","Credit card copy front":"credit_card_copy_front","Credit card copy back":"credit_card_copy_back"},fileTypes:["image/png","image/gif","image/jpeg","image/bmp","image/TIFF","application/pdf"],maxFileSize:10485760,minFileSize:1e4,ticketStatuses:{open:"Open",inprogress:"In Progress",closed:"Closed",closedByClient:"Closed By Client",awaitingAgent:"Awaiting Agent",awaitingClient:"Awaiting Client"},ticketToStatuses:{Open:"open","In Progress":"inprogress",Closed:"closed","Closed By Client":"closedByClient","Awaiting Agent":"awaitingAgent","Awaiting Client":"awaitingClient"},ticketTypes:{generalQuestion:"General Question",loginProblem:"Login Problem",financeDepartment:"Finance Department",partnership:"Partnership",mobileClient:"Mobile Client",depositWithdrawal:"Deposit or Withdrawal"},ticketToTypes:{"General Question":"generalQuestion","Login Problem":"loginProblem","Finance Department":"financeDepartment",Partnership:"partnership","Mobile Client":"mobileClient","Deposit or Withdrawal":"depositWithdrawal"},paymentMethodsToTypes:{"Credit card":"creditCard","Wire transfer":"wireTransfer",Skrill:"skrill",Neteller:"neteller",CryptoWallet:"cryptoWallet",Other:"other"},withdrawalReasons:{withdrawingProfits:"Withdrawing profits",transferringFundsToAnotherBroker:"Transferring funds to another broker",unsatisfactoryService:"Unsatisfactory service",limitedFunds:"Limited funds",notEnoughTradingExperience:"Not enough trading experience",otherReason:"Other reason"},withdrawRequestStatusToType:{Pending:"pending",Approved:"approved",Rejected:"rejected","Cancelled by manager":"cancelledByManager","Cancelled by customer":"cancelledByCustomer"},showLeverageDropdown:!0,depositActionName:"forexDeposit",paymentMethodsBlueprint:{jeton:"Jeton",zotapay:"ZotapayHosted",bitcobrokers:"BitcoBrokers",solid:"SolidHosted",bestpaycard:"BestPayCard"},signupEnableCheckKYC:!1,externalLinks:{kycPolicy:"#"},hidePhoneNumber:!0,showCommission:!1,skipCreateFirstAccountPage:!0,autoUpdatePersonalDetails:!1,transactionTypes:["deposit","withdrawal","credit","all"],hideTransferBetweenAccounts:!1,enable2FA:!0,withdrawalComplianceRequired:!1,autoOpenLiveAccount:!0,defaultCurrencyConvertCategory:"FOREX",cryptoBaseCurrencies:["BTG","DSH","ETC","ETH","LTC","XMR","XRP","BTC","BAB","BCH","UST","OMG","STR","ZEC","NXT","XEM","TRY","TTR"],questionnaireAnswersOverrides:{30:{"-1":"yes"}},profileFieldRules:{firstName:{required:!0,rawName:"firstName",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!0,readonlyIfNotEmpty:!0}}},lastName:{required:!0,rawName:"lastName",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!0,readonlyIfNotEmpty:!0}}},birthday:{required:!0,rawName:"birthday",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!0,readonlyIfNotEmpty:!0}}},country:{required:!0,rawName:"country",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!0,readonlyIfNotEmpty:!0}}},state:{required:!0,rawName:"state",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},city:{required:!0,rawName:"city",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},address:{required:!0,rawName:"address",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},currency:{required:!0,rawName:"currency",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},customerType:{required:!1,rawName:"customerType",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},citizenship:{required:!0,rawName:"citizenship",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!0,readonlyIfNotEmpty:!0}}},postCode:{required:!0,rawName:"postCode",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},phone:{required:!0,rawName:"phone",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!0},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isUSCitizen:{required:!0,rawName:"usCitizen",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},tin:{required:!1,rawName:"tin",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},taxCountry:{required:!1,rawName:"taxCountry",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},nationalId:{required:!1,rawName:"nationalId",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},companyName:{required:!1,rawName:"companyName",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isMarried:{required:!1,rawName:"married",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isSpouse:{required:!1,rawName:"spouseAware",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},birthPlace:{required:!1,rawName:"birthPlace",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},tradingExperience:{required:!1,rawName:"tradingExperience",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}}},questionGroups:["finance"],viewQuestionnaireEnable:!0,showQuestionnaireInfo:!0,demoAccountCreateWithLive:!0,verificationProvider:"internal-v2",defaultRoute:"root.app.assets",wireTransferShowBankStateField:!0,assetIntoRules:{underlyingAssetName:!0,expiration:!0,spread:!0,digits:!0,tradingConditions:!1,lotValue:!0,minMaxVolume:!0,volumeStep:!0,leverage:!0,requiredMargin:!0,swaps:!0,tradingHours:!0,description:!0},wireTransferShowBankBranchField:!1,socialIntegration:!0}),app.constant("countries",{countryCode:[{country:"Afghanistan",nationality:"Afghan",code:"AF"},{country:"Åland Islands ",nationality:"of the Åland Islands",code:"AX"},{country:"Albania",nationality:"Albanian",code:"AL"},{country:"Algeria",nationality:"Algerian",code:"DZ"},{country:"American Samoa ",nationality:"American",code:"AS"},{country:"Andorra",nationality:"Andorran",code:"AD"},{country:"Angola",nationality:"Angolan",code:"AO"},{country:"Anguilla ",nationality:"Anguillan",code:"AI"},{country:"Antarctica",nationality:"Antarctic",code:"AQ"},{country:"Antigua and Barbuda",nationality:"of Antigua and Barbuda",code:"AG"},{country:"Argentina",nationality:"Argentine",code:"AR"},{country:"Armenia",nationality:"Armenian",code:"AM"},{country:"Aruba ",nationality:"Aruban",code:"AW"},{country:"Australia",nationality:"Australian",code:"AU"},{country:"Austria",nationality:"Austrian",code:"AT"},{country:"Azerbaijan",nationality:"Azerbaijani",code:"AZ"},{country:"Bahamas",nationality:"Bahamian",code:"BS"},{country:"Bahrain",nationality:"Bahraini",code:"BH"},{country:"Bangladesh",nationality:"Bangladeshi",code:"BD"},{country:"Barbados",nationality:"Barbadian",code:"BB"},{country:"Belarus",nationality:"Belarusian",code:"BY"},{country:"Belgium",nationality:"Belgian",code:"BE"},{country:"Belize",nationality:"Belizean",code:"BZ"},{country:"Benin",nationality:"Beninese",code:"BJ"},{country:"Bermuda ",nationality:"Bermudian",code:"BM"},{country:"Bhutan",nationality:"Bhutanese",code:"BT"},{country:"Bolivia",nationality:"Bolivian",code:"BO"},{country:"Bosnia and Herzegovina",nationality:"of Bosnia and Herzegovina",code:"BA"},{country:"Botswana",nationality:"Botswanan",code:"BW"},{country:"Bouvet Island ",nationality:"of Bouvet Island",code:"BV"},{country:"Brazil",nationality:"Brazilian",code:"BR"},{country:"Brunei",nationality:"Bruneian",code:"BN"},{country:"Bulgaria",nationality:"Bulgarian",code:"BG"},{country:"Burkina Faso",nationality:"Burkinabe",code:"BF"},{country:"Burundi",nationality:"Burundian",code:"BI"},{country:"Cambodia",nationality:"Cambodian",code:"KH"},{country:"Cameroon",nationality:"Cameroonian",code:"CM"},{country:"Canada",nationality:"Canadian",code:"CA"},{country:"Cape Verde",nationality:"Cape Verdean",code:"CV"},{country:"Cayman Islands ",nationality:"Caymanian",code:"KY"},{country:"Central African Republic",nationality:"Central African",code:"CF"},{country:"Chad",code:"CN",nationality:"Chadian"},{country:"Chile",nationality:"Chilean",code:"TD"},{country:"China",nationality:"Chinese",code:"CN"},{country:"Christmas Island ",nationality:"of Christmas Island",code:"CX"},{country:"Cocos ",nationality:"of the Cocos (Keeling) Islands",code:"CC"},{country:"Colombia",nationality:"Colombian",code:"CO"},{country:"Comoros",nationality:"Comorian",code:"KM"},{country:"Congo ",nationality:"Congolese",code:"CG"},{country:"Cook Islands ",nationality:"of the Cook Islands",code:"CK"},{country:"Costa Rica",nationality:"Costa Rican",code:"CR"},{country:"Côte d’Ivoire",nationality:"Ivorian",code:"CI"},{country:"Croatia",nationality:"Croatian",code:"HR"},{country:"Cuba",nationality:"Cuban",code:"CU"},{country:"Cyprus",nationality:"Cypriot",code:"CY"},{country:"Czech Republic",nationality:"Czech",code:"CZ"},{country:"Denmark",nationality:"Danish",code:"DK"},{country:"Djibouti",nationality:"of Djibouti",code:"DJ"},{country:"Dominica",nationality:"of Dominica",code:"DM"},{country:"Dominican Republic",nationality:"Dominican",code:"DO"},{country:"Ecuador",nationality:"Ecuadorian",code:"EC"},{country:"Egypt",nationality:"Egyptian",code:"EG"},{country:"El Salvador",nationality:"Salvadorian; Salvadoran",code:"SV"},{country:"Equatorial Guinea",nationality:"of Equatorial Guinea",code:"GQ"},{country:"Eritrea",nationality:"Eritrean",code:"ER"},{country:"Estonia",nationality:"Estonian",code:"EE"},{country:"Ethiopia",nationality:"Ethiopian",code:"ET"},{country:"Faeroe Islands ",nationality:"Faeroese",code:"FO"},{country:"Falkland Islands ",nationality:"of the Falkland Islands",code:"FK"},{country:"Fiji",nationality:"Fijian",code:"FJ"},{country:"Finland",nationality:"Finnish",code:"FI"},{country:"France",nationality:"French",code:"FR"},{country:"French Guiana ",nationality:"Guianese",code:"GF"},{country:"French Polynesia ",nationality:"Polynesian",code:"PF"},{country:"Gabon",nationality:"Gabonese",code:"GA"},{country:"Gambia, ",nationality:"Gambian",code:"GM"},{country:"Georgia",nationality:"Georgian",code:"GE"},{country:"Germany",nationality:"German",code:"DE"},{country:"Ghana",nationality:"Ghanaian",code:"GH"},{country:"Gibraltar ",nationality:"Gibraltarian",code:"GI"},{country:"Greece",nationality:"Greek",code:"GR"},{country:"Greenland ",nationality:"Greenlandic",code:"GL"},{country:"Grenada",nationality:"Grenadian",code:"GD"},{country:"Guadeloupe ",nationality:"Guadeloupean",code:"GP"},{country:"Guam ",nationality:"Guamanian",code:"GU"},{country:"Guatemala",nationality:"Guatemalan",code:"GT"},{country:"Guernsey ",nationality:"Guernsey",code:"GG"},{country:"Guinea",nationality:"Guinean",code:"GN"},{country:"Guinea-Bissau",nationality:"of Guinea-Bissau",code:"GW"},{country:"Guyana",nationality:"Guyanese",code:"GY"},{country:"Haiti",nationality:"Haitian",code:"HT"},{country:"Honduras",nationality:"Honduran",code:"HN"},{country:"Hong Kong ",nationality:"Hong Kong Chinese",code:"HK"},{country:"Hungary",nationality:"Hungarian",code:"HU"},{country:"Iceland",nationality:"Icelandic",code:"IS"},{country:"India",nationality:"Indian",code:"IN"},{country:"Indonesia",nationality:"Indonesian",code:"ID"},{country:"Iran",nationality:"Iranian",code:"IR"},{country:"Iraq",nationality:"Iraqi",code:"IQ"},{country:"Ireland",nationality:"Irish",code:"IE"},{country:"Isle of Man ",nationality:"Manx",code:"IM"},{country:"Israel",nationality:"Israeli",code:"IL"},{country:"Italy",nationality:"Italian",code:"IT"},{country:"Jamaica",nationality:"Jamaican",code:"JM"},{country:"Japan",nationality:"Japanese",code:"JP"},{country:"Jersey ",nationality:"Jersey",code:"JE"},{country:"Jordan",nationality:"Jordanian",code:"JO"},{country:"Kazakhstan",nationality:"Kazakh",code:"KZ"},{country:"Kenya",nationality:"Kenyan",code:"KE"},{country:"Kiribati",nationality:"Kiribatian",code:"KI"},{country:"Kuwait",nationality:"Kuwaiti",code:"KW"},{country:"Kyrgyzstan",nationality:"Kyrgyz",code:"KG"},{country:"Laos",nationality:"Lao; Laotian",code:"LA"},{country:"Latvia",nationality:"Latvian",code:"LV"},{country:"Lebanon",nationality:"Lebanese",code:"LB"},{country:"Lesotho",nationality:"of Lesotho",code:"LS"},{country:"Liberia",nationality:"Liberian",code:"LR"},{country:"Libya",nationality:"Libyan",code:"LY"},{country:"Liechtenstein",nationality:"of Liechtenstein",code:"LI"},{country:"Lithuania",nationality:"Lithuanian",code:"LT"},{country:"Luxembourg",nationality:"Luxembourgish",code:"LU"},{country:"Madagascar",nationality:"Malagasy",code:"MG"},{country:"Malawi",nationality:"Malawian",code:"MW"},{country:"Malaysia",nationality:"Malaysian",code:"MY"},{country:"Maldives",nationality:"Maldivian",code:"MV"},{country:"Mali",nationality:"Malian",code:"ML"},{country:"Malta",nationality:"Maltese",code:"MT"},{country:"Marshall Islands",nationality:"Marshallese",code:"MH"},{country:"Martinique ",nationality:"Martinican",code:"MQ"},{country:"Mauritania",nationality:"Mauritanian",code:"MR"},{country:"Mauritius",nationality:"Mauritian",code:"MU"},{country:"Mayotte ",nationality:"Mahoran",code:"YT"},{country:"Mexico",nationality:"Mexican",code:"MX"},{country:"Micronesia",nationality:"of Micronesia",code:"FM"},{country:"Moldova",nationality:"Moldovan",code:"MD"},{country:"Monaco",nationality:"Monegasque",code:"MC"},{country:"Mongolia",nationality:"Mongolian",code:"MN"},{country:"Montenegro",nationality:"Montenegrin",code:"ME"},{country:"Montserrat ",nationality:"Montserratian",code:"MS"},{country:"Morocco",nationality:"Moroccan",code:"MA"},{country:"Mozambique",nationality:"Mozambican",code:"MZ"},{country:"Namibia",nationality:"Namibian",code:"NA"},{country:"Nauru",nationality:"Nauruan",code:"NR"},{country:"Nepal",nationality:"Nepalese",code:"NP"},{country:"Netherlands ",nationality:"Dutch",code:"NL"},{country:"New Caledonia ",nationality:"New Caledonian",code:"NC"},{country:"New Zealand",nationality:"of New Zealand",code:"NZ"},{country:"Nicaragua",nationality:"Nicaraguan",code:"NI"},{country:"Niger",nationality:"Nigerien",code:"NE"},{country:"Nigeria",nationality:"Nigerian",code:"NG"},{country:"Niue ",nationality:"Niuean",code:"NU"},{country:"Norfolk Island ",nationality:"of Norfolk Island",code:"NF"},{country:"Norway",nationality:"Norwegian",code:"NO"},{country:"Oman",nationality:"Omani",code:"OM"},{country:"Pakistan",nationality:"Pakistani",code:"PK"},{country:"Palau",nationality:"Palauan",code:"PW"},{country:"Panama",nationality:"Panamanian",code:"PA"},{country:"Paraguay",nationality:"Paraguayan",code:"PY"},{country:"Peru",nationality:"Peruvian",code:"PE"},{country:"Philippines",nationality:"Philippine",code:"PH"},{country:"Pitcairn Islands ",nationality:"Pitcairner",code:"PN"},{country:"Poland",nationality:"Polish",code:"PL"},{country:"Portugal",nationality:"Portuguese",code:"PT"},{country:"Puerto Rico ",nationality:"Puerto Rican",code:"PR"},{country:"Qatar",nationality:"Qatari",code:"QA"},{country:"Réunion ",nationality:"Reunionese",code:"RE"},{country:"Romania",nationality:"Romanian",code:"RO"},{country:"Russia",nationality:"Russian",code:"RU"},{country:"Rwanda",nationality:"Rwandan; Rwandese",code:"RW"},{country:"Saint Barthélemy ",nationality:"of Saint Barthélemy",code:"BL"},{country:"Saint Lucia",nationality:"Saint Lucian",code:"LC"},{country:"Saint Martin ",nationality:"of Saint Martin",code:"MF"},{country:"Samoa",nationality:"Samoan",code:"WS"},{country:"San Marino",nationality:"of San Marino",code:"SM"},{country:"Saudi Arabia",nationality:"Saudi Arabian",code:"SA"},{country:"Senegal",nationality:"Senegalese",code:"SN"},{country:"Serbia",nationality:"Serbian",code:"RS"},{country:"Seychelles",nationality:"of Seychelles",code:"SC"},{country:"Sierra Leone",nationality:"Sierra Leonean",code:"SL"},{country:"Singapore",nationality:"Singaporean",code:"SG"},{country:"Slovakia",nationality:"Slovak; Slovakian",code:"SK"},{country:"Slovenia",nationality:"Slovenian",code:"SL"},{country:"Solomon Islands",nationality:"of the Solomon Islands",code:"SB"},{country:"Somalia",nationality:"Somali; Somalian",code:"SO"},{country:"South Africa",nationality:"South African",code:"ZA"},{country:"South Korea",nationality:"South Korean",code:"SK"},{country:"South Sudan",nationality:"South Sudanese",code:"SS"},{country:"Spain",nationality:"Spanish",code:"ES"},{country:"Sri Lanka",nationality:"Sri Lankan",code:"LK"},{country:"Sudan",nationality:"Sudanese",code:"SD"},{country:"Suriname",nationality:"Surinamese",code:"SR"},{country:"Swaziland",nationality:"Swazi",code:"CH"},{country:"Sweden",nationality:"Swedish",code:"SE"},{country:"Switzerland",nationality:"Swiss",code:"CH"},{country:"Syria",nationality:"Syrian",code:"SY"},{country:"Taiwan",nationality:"Taiwanese",code:"TW"},{country:"Tajikistan",nationality:"Tajik",code:"TJ"},{country:"Tanzania",nationality:"Tanzanian",code:"TZ"},{country:"Thailand",nationality:"Thai",code:"BI"},{country:"Timor-Leste",nationality:"East Timorese",code:"TL"},{country:"Togo",nationality:"Togolese",code:"TG"},{country:"Tokelau ",nationality:"Tokelauan",code:"TK"},{country:"Tonga",nationality:"Tongan",code:"TO"},{country:"Trinidad and Tobago",nationality:"of Trinidad and Tobago",code:"TT"},{country:"Tunisia",nationality:"Tunisian",code:"TN"},{country:"Turkey",nationality:"Turkish",code:"TR"},{country:"Turkmenistan",nationality:"Turkmen",code:"TM"},{country:"Tuvalu",nationality:"Tuvaluan",code:"TV"},{country:"Uganda",nationality:"Ugandan",code:"UG"},{country:"Ukraine",nationality:"Ukrainian",code:"UA"},{country:"United Arab Emirates",nationality:"Emirian",code:"AE"},{country:"United Kingdom",nationality:"British",code:"GB"},{country:"United States",nationality:"American",code:"US"},{country:"Uruguay",nationality:"Uruguayan",code:"UY"},{country:"Uzbekistan",nationality:"Uzbek",code:"UZ"},{country:"Vanuatu",nationality:"Vanuatuan",code:"VU"},{country:"Venezuela",nationality:"Venezuelan",code:"VE"},{country:"Vietnam",nationality:"Vietnamese",code:"VN"},{country:"Western Sahara ",nationality:"Sahrawi",code:"EH"},{country:"Yemen",nationality:"Yemeni",code:"YE"},{country:"Zambia",nationality:"Zambian",code:"ZM"},{country:"Zimbabwe",nationality:"Zimbabwean",code:"ZW"}]}),app.constant("messages",{_fallback:!0,login:"Login",logout:"Logout",password:"Password",loginPasswordEmpty:"Login and password fields can't be empty",selectServer:"Please select server",deposit:"Deposit",withdrawal:"Withdraw",creditin:"Credit In",creditout:"Credit Out",moneyTransfer:"Money transfer",cashback:"Loyalty cashback",demoBalance:"Initial Deposit",rememberme:"Remember me",userid:"User ID",server:"Server",close:"Close",closeTrade:"Close Trade",deleteTradeBtn:"Delete",deleteOrder:"Delete Order",orderDeleted:"Order is deleted",forgotPassword:"Forgot password",normal:"Normal",wide:"Wide",mrms:"",dateRange:{day:"Today",threedays:"Last 3 days",week:"Last Week",month:"Last Month",threemonths:"Last 3 months",all:"All"},today:"Today",last3days:"Last 3 days",lastweek:"Last Week",lastmonth:"Last month",last3months:"Last 3 months",all:"All",daterange:"Date range",day:"Day",month:"Month",year:"Year",print:"Print",openPositions:"Open Trades",orders:"Orders",openPosition:"Open position",openPending:"Open Pending order",updatePosition:"Update position",closedPositions:"Closed Trades",historyFor:"Trade History For",closePosition:"Close position",successupdated:"Successfully updated",notTradeble:"Asset in not tradable",execute:"Execute",trade:"Trade",volumeInLot:"Volume in lot",volume:"Volume",lots:"Lots",amount:"Amount",sell:"Sell",limit:"Limit",sell_limit:"Sell Limit",sell_stop:"Sell Stop",buy:"Buy",stop:"Stop",buy_limit:"Buy Limit",buy_stop:"Buy Stop",pamm:"Pamm",correction:"Correction",charge:"Charge",commission:"Commission",commission_daily:"Commission Daily",commission_monthly:"Commission Monthly",agent_daily:"Agent Daily",agent_monthly:"Agent Monthly",interestrate:"Interestrate",buy_canceled:"Buy Canceled",sell_canceled:"Sell Canceled",dividend:"Dividend",dividend_franked:"Dividend Franked",tax:"Tax",agent:"Agent",so_compensation:"SO Compensation",bonus:"Bonus",btnSell:"Sell",btnBuy:"Buy",closeSelected:"Close selected",credit:"Credit",balance:"Balance",netPL:"Net P/L",equity:"Equity",margin:"Margin",usedMargin:"Used margin",freeMargin:"Free margin",marginLevel:"Margin level",availableFunds:"Available funds",usedFunds:"Used Funds",accountValue:"Account Value",todayFixedPL:"Today's fixed P/L",orderID:"Trade Number",asset:"Symbol",openTime:"Opening time",predictionJP:"Prediction",prediction:"Prediction",openRate:"Open rate",closedRate:"Closed rate",currentRate:"Current rate",closedTime:"Closed time",profit:"Profit",takeProfit:"Take Profit",stopLoss:"Stop loss",loss:"Loss",rate:"Rate",action:"Type",type:"Type",openPrice:"Open Price",closePrice:"Close Price",stopLossTakeProfit:"Stop Loss / Take Profit",distance:"Distance",swap:"Swap",chart:"Chart",noChartData:"No chart data",profitLoss:"Profit/Loss",step1:"STEP 1 - Profit loss entry",step2:"STEP 2 - Select up down prediction",step3:"STEP 3 - Trade amount confirmation",reset:"Reset",selectall:"Select all",bytick:"By Tick","1min":"1 min","5min":"5 min","15min":"15 min","30min":"30 min","1hour":"1 hour","4hours":"4 hours","1day":"1 day","1week":"1 week","1month":"1 month",save:"Save",sounds:"Sounds",positionTable:"Position table",step1ToolTip:"step1ToolTip",soundSettings:"View conditions of sound",newOrderOpened:"New order opened",closedManualy:"Position closed manually",closedbyServer:"Position closed by T/P or S/L",defaultValueSetting:"Default value setting for Target profit entry",totalPL:"Total P/L",totalDepostit:"Total depostit",totalWithdrawal:"Total withdrawal",noHistory:"No history for selected conditions",pleaseLogin:"Please log in to show the record",notLoggedIn:"Please log in to start trading",connecting:"Connecting...",connectionLost:"Server connection lost",correctDateSelection:"Start date can't be greater than end date. <br/>Please specify correct date range.",closedAt:" Closed at ",at:" at ",amountIn:"Amount in",deleted:"deleted",maxAmountLimit:"Invest amount is greater then limit amount",resetZoom:"Reset zoom",accountNumber:"Account number",account:"Account",fullname:"Full name",startDate:"Start date",endDate:"End date",period:"Period",price:"Price",done:"Done",openOrderComplete:"",closeOrderComplete:"",assetName:"asset name",bid:"Bid",ask:"Ask",change:"Change",highLow:"High/Low",setYour:"set your",submit:"submit",closePositionNowFor:"close the position now for.",currentValue:"current value",requiredMargin:"Required Margin",pipValue:"Pips value",pointValue:"Point value",pipPopup:"the affect of one pip change of your profit",pointPopup:"the affect of one point change of your profit",yes:"yes",no:"no",cancelOrder:"cancel order",areYouSureCancelOrder:"are you sure you want to cancel this order?",ok:"ok",successful:"successful",closeLoss:" Close at loss",closeProfit:" Close at profit",rateReach:" Open trade when rate reach",rateWhen:"when rate",allassets:"All assets",forex:"Forex",commodities:"Commodities",stocks:"Stocks",shares:"Stocks",indices:"Indices",crypto:"Crypto",invalidAmount:"Invalid volume",enterAmount:"Please enter a valid volume",filter:"Filter",tradingAlerts:"trading alerts",economicCalendar:"economic calendar",dailyMarketUpdate:"daily market update",marginCall:"Margin Call",marginCallText:"Attention! some text goes here",candlestick:"Candlestick",areaspline:"Line",ohlc:"Ohlc",correctAmount:"Enter correct amount",payment:"Payment",ending_with:"Ending with",transfer_fr:"transfer from",transfer_t:"transfer to",availableTransfer:"Available to transfer",actions:{0:"Buy",1:"Sell",6:"Balance",7:"Credit"},actionsExt:{0:"Buy",1:"Sell",6:"Balance",7:"Credit"},serverDateFormat:"DD/MM/YYYY  HH:mm:ss",openDateFormat:"HH:mm:ss",closeDateFormat:"DD/MM/YYYY HH:mm:ss",chartToolTipFormat:"%b %e, %H:%M:%S",datepickerFormat:"DD-MM-YYYY",continueTrading:"Continue trading",tryAgain:"Try Again",addFunds:"Add funds",messages:{authFailed:"Invalid login or password",datepickerFormat:"DD/MM/YYYY",tokenFailed:"Invalid token",cancelRequest:"Request canceled",characters:"Only characters",mixWordsNumbers:"characters or numbers",authTimeout:"Authentication timeout",orderProcessing:"Order is Processing",orderSuccess:"Order Successfull",dontSpace:"Don't use space",wrongPassword:"The password does not match",orderFailed:"Order execution failed",loginRequired:"You login is required",passwordRequired:"Enter a password",registrationFailed:"Registration failed",registrationSuccess:"Registration successful",mt4AuthFailed:"Failed to login into trading account",inappFailed:"Failed to open wallet",depositFailed:"Deposit failed",depositFailedText:"We could not process your deposit request. please try again",depositSuccess:"Deposit success",deleteOrderFailed:"Failed to delete order",required:"Required",too_short:"Too Short",too_long:"Too Long",invalid_email:"Invalid email address",invalid_Firtsname:"First name is invalid",invalid_Lastname:"Last Name is invalid",invalid_address:"Address is invalid",invalid_city:"City is invalid",password_not_matched:"Passwords are not matched",alphanumeric:"Please use only alphanumeric characters",numbers:"Please use only digits",accountNotExists:"Account with this email does not exist",password_changed:"Password changed successfully",email_sent:"Email sent succesfully",err_password_changed:"Error change password",general_error:"Problem in operation",general_error_text:"We are sorry, but but your request can not be processed at this time. Please try again or contact our support team",noAccounts:"No trading accounts",contactSupport:"Please contact support for more information",modifyTrade:"Trade was updated",numbers_chars:"Numbers and characters only",updateCustomerFailed:"Failed to update personal profile",updateCustomerSuccess:"Personal profile successfully updated",createAccountSuccess:"Account has been created successfully",createAccountFailed:"Failed to create trading account",initialDepositMin:"Initial deposit is too small",initialDepositMax:"Initial deposit is too large",transferFailed:"Failed to transfer funds between accounts",transferSuccess:"Transfer funds successfully",smsPhoneFailed:"Failed to send phone number",smsVerificationFailed:"Invalid verification code",withdrawSuccess:"Withdrawal request successful",withdrawalFailed:"Failed to request withdrawal",Err600:"Problem in operation",Err601:"Problem in operation",Err602:"Problem in operation",Err603:"Problem in operation",Err606:"Problem in operation",Err666:"You are not logged in","Err0:":"Wrong username or password",Err1:"Failed to open position, try again or contact our support",Err2:"Username is mandatory",Err3:"Username and Password fields are mandatory",Err4:"We cannot process your request, try later or contact support",Err5:"An option having related trades cannot be deleted",Err6:"An option having related trades cannot be deleted",Err7:"Not enough funds in your balance to process withdrawal request",Err8:"An error prevent completing your transaction, try later or contact support",Err9:"Please enter a valid deposit amount",Err10:"Deposit amount is invalid",Err11:"Deposit amount must be a positive value",Err12:"Your transaction has been declined. Try later or contact support",Err13:"Not enough funds in your account to process your withdraw request",Err14:"Your deposit request means of payment is invalid",Err15:"Please enter a valid withdrawal amount",Err16:"Please enter a valid withdrawal amount",Err17:"Please enter a valid withdrawal amount",Err18:"Your withdraw request was declined.  Try later or contact support",Err19:"The system is busy, please try again later",Err20:"We cannot process your request, try later or contact support",Err21:"The required email already exists.",Err22:"We cannot process your request, try later or contact support",Err23:"Not enough funds",Err24:"Cannot open trade when the market is closed",Err25:"We cannot process your request, try later or contact support",Err26:"Your account is prohibited to perform this action. Contact support",Err29:"The invest amount is too high. Please lower your investment amount",Err30:"We cannot process your request, try later or contact support",Err32:"Reset password failed",Err33:"General Exception",Err34:"User not  exist",Err35:"Trade disable due forex event",Err36:"Trade disable due no quotes",Err37:"Invalid deposit parameters",Err49:"Only for active accounts. Would you like to deposit and start trading?",Err50:"leaderID follow followerID Exists",Err51:"leaderID or followerID not correct",Err54:"Due to regulatory reasons, we cannot register customers from your region",Err55:"Price is invalid, Would you like to reinvest on the current price?",Err56:"You have tried registering with an invalid email",Err57:"Payment operation was terminated, try later or contact support",Err59:"Due to regulatory reasons, we cannot register customers from your region",Err60:"You can't login at this time",0:"",1:"No change defined",2:"General Error",3:"Invalid Parameters",4:"Technical Problem",5:"",6:"No Connection",7:"Not Enough Rights",8:"Too Many Requests",9:"Malfunction Occured",10:"",111:"Wrong Security Session",64:"Account Disabled",65:"Wrong Login/password",66:"",128:"Trade transaction timeout expired",129:"Order has wrong prices",130:"Wrong stops level",131:"Wrong lot size",132:"Market closed",133:"Trade disabled",134:"There is not sufficient funds in your account for order execution. Please lower the amount or add additional funds",135:"Price changed",136:"No quotes",137:"Broker is busy",138:"Requote",139:"Order is proceed by dealer and cannot be",140:"Allowed only BUY orders",141:"Too many requests from one client",142:"Trade request accepted by server and placed in request queue",143:"Trade request accepted by dealerd",144:"Trade request canceled by client",145:"Trade modification denied",146:"Trade context is busy (used in client terminal)",147:"Using expiration date denied",148:"Too many orders",149:"Hedge is prohibited",150:"Prohibited by fifo rule",1e3:"",1001:"No change defined",1002:"General Error",1003:"Invalid Parameters",1004:"Technical Problem",1005:"",1006:"No Connection",1007:"Not Enough Rights",1008:"Too Many Requests",1009:"Malfunction Occured",1010:"",1111:"Wrong Security Session",1064:"Account Disabled",1065:"Wrong Login/password",1066:"",1128:"Trade transaction timeout expired",1129:"Order has wrong prices",1130:"Wrong stops level",1131:"Wrong lot size",1132:"Market closed",1133:"Trade disabled",1134:"There is not sufficient funds in your account for order execution. Please lower the amount or add additional funds",1135:"Price changed",1136:"No quotes",1137:"Broker is busy",1138:"Requote",1139:"Order is proceed by dealer and cannot be",1140:"Allowed only BUY orders",1141:"Too many requests from one client",1142:"Trade request accepted by server and placed in request queue",1143:"Trade request accepted by dealerd",1144:"Trade request canceled by client",1145:"Trade modification denied",1146:"Trade context is busy (used in client terminal)",1147:"Using expiration date denied",1148:"Too many orders",1149:"Hedge is prohibited",1150:"Prohibited by fifo rule",2e3:"Document already approved",2001:"Ticket is not assigned to customer",2002:"Email already exists",3006:"Invalid login or password",3008:"Transaction failed",3009:"Transaction failed",3016:"Customer doesn't exist",3021:"Customer doesn't exist",3024:"Invalid amount",3025:"Send SMS Failed",3026:"Incorrect validation code",3027:"Invalid promocode value",3028:"Invalid phone number",3031:"Please note you already have a pending withdrawal request.",3071:"Invalid verification code",3072:"Problem with sending verification email",2007:"User already exists",4e3:"Please try again",4001:"Operation failed, please try again",4002:"Login failed. Try again",4003:"Response timeout",4004:"You must login first",4005:"Fail to login account, try again in a few minutes",4006:"Account not found, contact support",4007:"Operation failed, please try again",4008:"Operation failed, please try again",4009:"General error",4010:"Upload failed, please try again"},current_rate:"Current Rate",welcome:"Welcome",get_started:"Get started",already_member:"Already a member?",log_in:"Log in",forgot_password:"Forgot Password ?",show_password:"Show password",new_bdbfx:"New to ${brandName}?",new_account:"Create a New Account",login_bottom_text:"Trading FX & CFD involves substantial risk and may lead to loss of all invested capital",acceptPromotions:"Accept Promotions",try_again:"Try again",instruments:"Instruments",favorites:"Favorites",add_to_favorites:"Add to favorites",edit_favorites:"Edit favorites",traders_trend:"Traders Trend",manage_accounts:"Manage Accounts",transactions:"Transactions",notifications:"Notifications",updatePassword:"Change Password",enterCurrentPassword:"Enter current password",enterNewPassword:"Enter new password",reEnterPassword:"Re-enter new password",price_alerts:"Price Alerts",chat_withus:"Chat with Us",help:"Help",settings:"Settings",search_placeholder:"Search...",open_price:"Open",market_price:"Market",total_profit:"Total Profit",available:"Available",pending:"Pending",current:"Current",target:"Target",pendingOrders:"Pending Orders",modifyTrade:"Modify Trade",modify:"Modify",modifyOrder:"Modify Order",difference:"Difference",tradeno:"Trade No.",datetime:"Date Time",swap_commission:"Swap Commission",market_rate:"Market Rate",open_rate:"Open Rate",cancel:"Cancel",info:"Info",underlying_asset_name:"Underlying asset name",contract_expiration:"Contract_expiration",spread:"Spread",digits:"Digits",lot_value:"Lot value",min_max_volume:"Min-Max volume",volume_step:"Volume step",leverage:"Leverage",long:"Long",short:"Short",trading_hours:"Trading Hours",lot:"lot",create_new_account:"Create a New Account",account_registration:"Account Registration",continue:"Continue",have_account:"Already have an account?",password_assistance:"Password Assistance",password_assistance_text:"Enter the email address associated with your ${brandName} account",email:"Your Email",email_changed:"Has your email changed?",email_changed_text:"If you have no longer use the e-mail address associated with your ${brandName} account, you may contact Customer Service for help restoring access to your account",password_changed_text:"Please check your email",password_err_changed_text:"Your new password is not correct",logging_in:"Logging in...",logging_out:"Logging out...",starting:"Starting services...",connection:"Connection problem. Attempting to reconnect. Please wait...",usCitizen_text:"Are you a citizen of the United States or a resident of the U.S. Gibraltar, Guernsey, Isle of Man Jersey for tax purposes",updateCustomer:"Updating customer information",assesment:"Financial Suitability Questionnaire",assesment_text_top:"To satisfy existing legal and regulatory requirements, we need to know a little about your relevant experience and your knowledge of investment products.",trading_expirience:"Trading Experience",trading_freq:"How frequently do you trade?",transaction:"Transaction History",date_menu:"Date",action_menu:"Action",method_menu:"Method",withdraw:"Withdraw",transfer:"Bank Transfer",bank_information:"Bank Information",banktransfer_instructions:"Please see below detailed wiring instructions.For you convenience, you can print these out and present to your bank, in order for them to initiate the transfer",beneficiary_name:"Beneficiary Name",beneficiary_address:"Beneficiary Address",beneficiary_bank:"Beneficiary Bank",bank_address:"Bank Address",beneficiary_account_number:"Beneficiary Account Number",beneficiary_iban:"Beneficiary Iban",swift:"BIC / SWIFT",comments:"Reference / Comments",demo:"Demo",live:"Live",demo_account:"Demo account",live_account:"Live account",test:"Test",click_me:"click me",test_page:"Test page",points:"Points",pips:"Pips",value:"Value",amount_lots:"Amount of Lots",only:"Only",when_reach:"when rate reach",sign_in:"Sign In",emailRegistration:"Email",confirmPassword:"Confirm Password",firstName:"First Name",middleName:"Middle Name",surname:"Surname",lastName:"Last Name",nationalId:"National ID",dateBirth:"Date of Birth",iAtLeastYearsOld:"I am at least 18 years of age",phone:"Phone (Without country code)",phoneFull:"Phone",isMobilePhone:"This is a mobile phone number",country:"Country",nationality:"Nationality",isBirthCountry:"Place of birth is same as my nationality",address:"Street Address",city:"City",zipCode:"Zip/Postal code",usTaxId:"U.S. Tax Identification number",next:"Next",sharesBondsComm:"Shares, Bonds, Commodities",frequently:"Frequently",sometimes:"Sometimes",rarely:"Rarely",never:"Never",have_prior_education:"Do you have prior education/experience?",OTCDerivateives:"OTC Derivateives",CFDForexSpreadBetting:"(CFD's, Forex, Spread Betting)",exchangeTradedDerivatives:"Exchange Traded Derivatives",warrantsFuturesOptions:"(Warrants, Futures Options, ETF's)",iUnderstandPart1:"I understand that I will be trading only",iUnderstandPart2:"CFD products with ${brandName}",totalVolume:"Please indicate the total volume of deals in the above products previously undertaken per month (on averge):",investKnowledge:"Investment Knowledge",professionalExperience:"Do you have the experience or qualifications that assist your in understanding the risk of CFD?",annualIncome:"Annual Income",employmentStatus:"Employment Status",employerRefrences:"We shall not contact your employer for refrences",yourEmploymentStatus:"What is your employment status?",atv:"What is the monthly average trade volume you intend to reach?",employed:"Employed",selfEmployed:"Self Employed",retired:"Retired",unemployedOfStudent:"Unemployed of Student",financialDetails:"Financial Details",anualIncome:"Anual Income",valueOfSavingInvestments:"Value of Saving and Investments",us_citizen:"Are you a US reportable Citizen?",saveChanges:"Save Changes",securePassword:"Secure password tips:",useCharacters:"Use at least 6 characters, a combination of numbers and letters is best",samePassword:"Do not use the same password you have used with us previously",usePersonalDetails:"Do not use dictionary words, your name, e-mail address, mobile phone number or other personal information that can be easily obtained",loading_deposit:"Loading wallet...",wallet:"Wallet",menu:"Menu",back:"Back",loading_closed_trades:"Loading closed trades...",loading_transactions:"Loading transactions...",select_country:"Select country",select_nationality:"Select nationality",select_citizenship:"Select citizenship",select_language:"Select language",no_favorites:"You don't have any favorites yet",add_favorites:"Add favorites from the menu in the top bar",no_pending:"You don't have any pending trades",no_opentrades:"You don't have any open trades",no_closetrades:"You don't have any closed trades",signup:"Sign Up",promo:"Promo Code",continue_demo:"Continue with demo account","credit-card":"Credit Card",wiretransfer:"WireTransfer",card_name:"Card Number",card_last_digits:"Credit Card last 4 digits",expiry_date:"Expiry date",date:"Date",transactionId:"Transaction ID",depositMethod:"Deposit Method",startTrading:"Start trading",choosePaymentMethod:"Choose your Payment Method",addTradingAccount:"Create account",accountCurrency:"Currency",personalDetails:"Personal Details",uploadDocuments:"Upload documents",helpdesk:"Help Desk",transferFrom:"Transfer From",transferTo:"Transfer To",transferFunds:"Transfer Funds",smsVerification:"SMS Verification",smsCode:"Enter Code",smsResend:"Resend Code",withdrawFrom:"Withdraw From",fundsWithdraw:"Funds to withdraw",minimumAmount:"Minimum amount is",maximumAmount:"Maximum amount is",bankAccountInfo:"Bank Account Information",bankAccountInfoText:"Please provide the bank information below",bankDetails:"Bank Details",bankName:"Bank Name",bankAccountHolder:"Name of Account Holder",bankAccountNumber:"Bank Account Number",bankSwift:"ABA or SWIFT Code",bankAddress:"Bank Address",bankCountry:"Bank Country",bankCity:"Bank City",bankState:"Bank State",bankStreetAddress:"Bank Street Address",withdrawComments:"Enter your comments here",withdrawCommentsText:"Comments (if your bank provides intermediary bank details or requires Branch Name and Branch Number for internationaly fund transfers, please provide these details below).",verificationAuthenticate:"Authenticate your account by verifying your identity, payment method and address",verificationCamera:"To proceed, simply upload or use your phone camera to take photos of the required documents",verificationProtected:"Your details are protected and secured with us. They are kept private for the sole purpose to confirm your identity",selectOne:"Select ONE of the following documents to upload",photo_id:"Photo ID",proof_of_identity:"Proof of Identity",proof_of_residence:"Proof of Residence",proof_of_payment:"Proof of Payment",photo_id_front:"Photo ID Front",photo_id_back:"Photo ID Back",passport:"Passport",driving_license:"Driving License",driving_license_front:"Driving License Front",driving_license_back:"Driving License Back",utility_bill:"Utility Bill",choose_document:"Choose a document type and upload accordingly",bank_statement:"Bank Statement",residence_certificate:"Residence Certificate",credit_card_copy_front:"Credit Card Copy Front",credit_card_copy_back:"Credit Card Copy Back",credit_card_copy:"Credit Card",rejected:"Rejected",approved:"Approved",new:"Take a photo or upload",accountVerification:"Account Verification",uploadInfoPicture:"Upload information and picture page",file_is_big_or_small:"File is too big or too small. Please select file less than 10Mb and greater than 10Kb",file_incorrect_type:"Incorrect file type. Please select one of: JPG, JPEG, PNG, Gif, PDF",frozenAccount:"Frozen Account",frozenAccountTitle:"Dear account holder",frozenAccountText:"Your account has been frozen due to recent activity that triggered some security alert. Your account Manager will contact you shortly to reactivate your account. We apologize for the inconvenience",openTradingAccount:"Open Trading Account",openTradingAccountTitle:"You are one step away from start trading",openTradingAccountText:"Just click below to open your first trading account",all_types:"All Types",all_accounts:"All Accounts",filterBy:"Filter transactions by",no_transactions:"You don't have any transactions",check_filter:"Check transactions filter from the menu in the top bar",accountType:"Account Type",addNewAccount:"Add New Account",switchAccount:"Switch account to:",chooseAccount:"Choose the account you wish to trade",distanceInPips:"Distance in pips",selectAmount:"Select amount",orangePayBtc:"OrangePay BTC",praxis:"Deposit Funds",zotapay:"Zotapay",bestpaycard:"Best Pay Card",solidpay:"Solid Payments",completeRegistration:"Please complete the registration before you continue",loading_chart:"Loading chart...",smsVerificationText:"For short verification process, please enter your phone number (including country code) below to receive a sms message with PIN code",jeton:"Jeton",depositDemoTitle:"You are currently trading on a Demo account.",depositDemoContent:"In order to make a Deposit please switch to a Live account.",switchAccountButton:"Switch account",creditCard:"Credit Card",wireTransfer:"Wire Transfer",skrill:"Skrill",neteller:"NETeller",other:"Other",cardDetails:"Card Details",website:"Website",skrill_account_email:"Skrill account E-mail address",neteller_account_number:"NETeller Account Number",openNetellerAccount:"To open a NETeller account visit",openSkrillAccount:"To open a Skrill account visit",withdraw_other_label:"Please enter a payment method and details.",paymentDetails:"Payment details",selectPaymentMethod:"Please select your preferred payment method",withdrawReason:"Withdrawal reason",withdraw_reason_select:"Please select your withdrawal reason",withdraw_reason_enter:"Please enter your reason",withdraw_reason_300_chars:"300 characters or less",withdrawalReason:{withdrawingProfits:"Withdrawing profits",transferringFundsToAnotherBroker:"Transferring funds to another broker",unsatisfactoryService:"Unsatisfactory service",limitedFunds:"Limited funds",notEnoughTradingExperience:"Not enough trading experience",otherReason:"Other reason"},withdraw_history:"Withdraw History",cancelledByManager:"Canceled by manager.",cancelledByCustomer:"Canceled by customer",status:"Status",withdrawCancelSuccess:"Operation success. Request is canceled.",withdrawCancelFailed:"Failed to cancel the request.",withdrawRequest:"Withdraw Request",cancelWithdrawal:"Are you sure you want to cancel your withdrawal request?",document_other:"Other",document_remove:"Remove document",document_confirm_remove:"Are you sure you want to remove this document?",select_account_type:"Please select one of the account types",readAndAgree:"I have read and agree to",kyc:"Know Your Customer Policy",select:"Select",state:"State",citizenship:"Citizenship",selectPspCurrency:"Please select deposit currency.",depositUnavailableTitle:"Deposit is currently unavailable",depositUnavailableContent:"Your account manager will contact you shortly",front_upload:"Front Upload",front_uploaded:"Front Uploaded",back_upload:"Back Upload",back_uploaded:"Back Uploaded",side_uploaded:"Side Uploaded",doc_uploaded:"Uploaded",replace_image:"Replace image",proof_of_identity_text:"Select Document Type",proof_of_residence_text:"Select Document Type",proof_of_payment_text:"Select Document Type",verification_text:"To comply with trading regulatory requirements and to protect you and us from acts of fraud, we need to verify your identity with relevant documents. <br><br> Once uploaded, the docs are in pending status and reviewed by one of our representatives. We make every effort to verify your account as quickly as possible.",all_set:"No action is required at this point",account_approved1:"We will let you know if we'll need any additional documents",account_approved2:"No further action is required",requirement_description:"Please select one of the topics below and upload accordingly",pending_text:"Thanks for uploading the doc. Our team will review it soon",two_sided:"Is the document two-sided?",birthPlace:"Place of birth",birthPlace_required:"Place of birth is required",companyName_required:"Company name is required",nationalId_required:"National ID is required",trading_experience:"Do you have experience with investments?",trades:"Trades",filterClosedTrades:"Filter trades history by",allTypes:"All",fasapay:"FasaPay",fasapay_account_name:"FasaPay Account Name",fasapay_wallet_account_number:"FasaPay Wallet Account Number",emailVerificationPart1:"We`ve sent a verification code to - ","emailVerificationPart1.1":"Enter the verification code to complete your registration.",emailVerificationPart2:"If you haven’t received the email, please check your spam folder or try resending the email.",emailVerificationPart3:"If the email is incorrect, please",emailVerificationSupport:"contact support",emailVerificationPart4:"We will contact you within 24hrs",insertCode:"Insert code",resendEmail:"Resend email",verify:"Verify",requestSubmittedPart1:"Your information has been submitted.",requestSubmittedPart2:"Our support team will be in touch within the next 24hrs.",requestSubmittedPart3:"Thank you, %brandName% Team",resendText:"Verification code has been resent",pep:"Politically exposed person (P.E.P.)",isMarried:"Are you married?",isSpouse:"Is the spouse aware of this financial relationship?",gender:"Gender",male:"Male",female:"Female"}),app.constant("$ionicLoadingConfig",{template:"<ion-spinner></ion-spinner>"}),app.filter("camelize",(function(){return function(e){if(e)return e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,(function(e,t){return 0==+e?"":0===t?e.toLowerCase():e.toUpperCase()}))}})),app.filter("cryptoCurrency",["Utils","Storage","constants","$filter",function(e,t,n,a){return function(o,i,s){var r=n.currencySymbols[i]||i||"";if(i&&function(e){return(t.get("currencies")||[]).find((function(t){return t.currency.toLowerCase()===e.toLowerCase()&&"1"===t.crypto}))}(i)){var l=e.decimalRound(o,s||2);return a("currency")(l,r,s||2)}if(n.cryptoBaseCurrencies&&n.cryptoBaseCurrencies.indexOf(i)>-1)return a("currency")(o,r,5);l=e.decimalRound(o,s||2);return a("currency")(l,r,s||2)}}]),app.filter("replace",(function(){return function(e,t){if(e)return(t||[]).reduce((function(t,n){const a=new RegExp("%"+n.key+"%","g");return(t||e).replace(a,n.value)}),"")}})),app.directive("accountSelect",["LocaleService","constants","Storage",function(e,t,n){return{scope:{accounts:"=",current:"=",user:"<",config:"<"},restrict:"E",template:'<div class="row p-0"><div class="col account-select-wrapper mt-10 mb-10"><div class="form-group as-select"><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="transfer-from" id="transfer-from" ng-model="current" ng-options="account.description for account in accounts"></select></div><div ng-if="config.type === \'withdraw\'"><div class="row mt-10 pl-0 account-select-title"><div class="col account-withdraw roboto-medium"><span>{{::translation.fundsWithdraw}}</span> <span>{{current.fundsToWithdraw | cryptoCurrency :current.currency: user.currencyDigits}}</span></div></div></div><div ng-if="config.type === \'transferFrom\'"><div class="row mt-10 pl-0 account-select-title"><div class="col account-withdraw roboto-medium"><span>{{::translation.availableTransfer}}</span> <span>{{current.fundsToWithdraw | cryptoCurrency :current.currency: user.currencyDigits}}</span></div></div></div><div ng-if="config.type === \'balance\'"><div class="layout-row just-space account-select-title mt-10 pl-7 pr-7"><div class="layout-col width-100"><div class="layout-row infoTitle font-13">{{::translation.balance}}</div><div class="layout-row infoValues roboto-medium">{{current.balance | cryptoCurrency :current.currency :user.currencyDigits}}</div></div><div class="layout-col width-100" ng-if="showCredit"><div class="layout-row infoTitle font-13">{{::translation.credit}}</div><div class="layout-row infoValues roboto-medium">{{current.credit | cryptoCurrency :account.currency :user.currencyDigits}}</div></div><div class="layout-col width-100"><div class="layout-row infoTitle font-13">{{::translation.equity}}</div><div class="layout-row infoValues roboto-medium">{{current.equity | cryptoCurrency :current.currency :user.currencyDigits}}</div></div></div></div></div></div>',link:function(a){e.wait().then((function(e){a.translation=e})),a.constants=t,a.showCredit=n.get("allowCredit")}}}]),app.directive("amountSelect",["$state","$ionicHistory","$ionicModal","$timeout","LocaleService","UserService","constants","Storage",function(e,t,n,a,o,i,s,r){return{scope:{amount:"=",config:"<",next:"&"},link:function(a,l){o.wait().then((function(e){a.translation=e})),a.paymentMethods=r.get("paymentMethods")||[],a.user=i.get(),a.constants=s,a.changeStep=50,a.navigate=function(t,n){return e.go(t,n)},a.close=function(){t&&t.clearHistory(),a.modal.hide(),a.paymentMethods.length>1?a.navigate("root.app.wallet",{direction:"right"}):a.navigate("root.app.assets",{direction:"right"})},a.continue=function(e){if(e.$valid)return t&&t.clearHistory(),a.modal.hide(),a.next()},n.fromTemplateUrl("templates/directives/amountSelect.html",{scope:a,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then((function(e){a.modal=e,a.modal.show()})),l.on("$destroy",(function(){t&&t.clearHistory(),a.modal&&a.modal.remove&&a.modal.remove(),a.modal=null}))}}}]),app.directive("appFooter",["$state","$ionicSideMenuDelegate","$document","$timeout",function(e,t,n,a){var o,i;return{link:function(s,r){function l(){i=o.getElementsByClassName("tab")[0],s.activeIndicator={width:i.offsetWidth+"px",left:0},console.info(s.activeIndicator,3)}s.activeIndicator={},n.ready((function(){o=r[0],i=o.getElementsByClassName("tab")[0],a(l,0)})),s.state=!0,s.active=e.current.name;var c=s.$watch((function(){return e.$current.name}),(function(){s.state=e.current.data&&e.current.data.footer,s.active=e.current.name}));s.switchIndicator=function(t){var n=o.getElementsByClassName(t)[0];s.activeIndicator={width:i.offsetWidth+"px",left:n.offsetLeft+"px",right:n.offsetLeft+i.offsetWidth+"px"},e.go("root.app."+t)},s.openSideMenu=function(){t.toggleRight()},s.$on("clear",(function(){console.log("reset active element on clear"),s.activeIndicator={width:i.offsetWidth+"px",left:0}})),r.on("$destroy",(function(){c()}))},template:'<ion-footer-bar align-title="left" class="footer footer-bg p-0" ng-style="{visibility: state ? \'visible\' : \'hidden\'}"><div class="row app-footer p-0"><div class="col tab align-self font-22 text-center assets" ng-class="{\'active-tab\': active === \'app.assets\' && \'active-footer\'}" on-tap="switchIndicator(\'assets\')"><div><i class="icon icon-Instruments"></i> <span>Instruments</span></div></div><div class="col tab align-self font-22 text-center openTrades" ng-class="{\'active-tab\': active == \'app.openTrades\' && \'active-footer\' }" on-tap="switchIndicator(\'openTrades\')"><div><i class="icon icon-OpenTrades"></i> <span>Open Trades</span></div></div><div class="col tab align-self font-22 text-center test" ng-class="{\'active-tab\': active == \'app.test\' && \'active-footer\' }" on-tap="switchIndicator(\'test\')"><div><i class="icon icon-PendingTrades"></i> <span>Schedule</span></div></div><div class="col tab align-self font-22 text-center"><div><i class="icon icon-Wallet"></i> <span>Wallet</span></div></div><div class="col tab main-menu align-self text-center" on-tap="openSideMenu()"><div><i class="icon icon-Menu font-22"></i> <span>Menu</span></div></div><div class="indicator" ng-style="activeIndicator"></div></div></ion-footer-bar>'}}]),app.directive("assetItem",[function(){return{restrict:"E",template:'<div class="asset-item"><div class="row p-0"><div class="col-50 symbol" on-tap="app.navigate(\'root.app.chart\', {direction:\'left\',assetId: asset.id, category: selectedIndex})"><div class="chart-icon-wrapper"><div class="chart-icon"><i class="icon icon-candle font-24"></i></div><div class="assets-name-wrapper"><div class="name roboto-light asset-name">{{asset.outputName}}</div><span class="font-12 open-sans" ng-class="asset.dailyChangeRender()">{{ asset.dailyChange() }}%</span></div></div></div><div class="col-50 price text-right"><div class="row p-0"><div class="col-50 pr-2"><button on-tap="app.navigate(\'root.app.invest\', {action:\'sell\',direction:\'left\',assetId: asset.id, category: selectedIndex})" class="sell-button font-12 width-95 mr-3 open-sans" ng-if="!state"><span>{{::translation.sell}}</span></button> <button on-tap="app.navigate(state, {direction:\'left\'})" class="sell-button font-12 width-95 mr-3 open-sans" ng-if="state"><span>{{::translation.sell}}</span></button><div class="font-12 open-sans black text-center asset-price" ng-class="asset.bidDirection" ng-if="!constants[\'isShowOnlyMidPrice\']">{{asset.markupBid() | number:asset.digits }}</div></div><div class="col-50 pl-2"><button on-tap="app.navigate(\'root.app.invest\', {action:\'buy\',direction:\'left\',assetId: asset.id, category: selectedIndex})" class="buy-button font-12 width-95 open-sans" ng-if="!state"><span>{{::translation.buy}}</span></button> <button on-tap="app.navigate(state, {direction:\'left\'})" class="buy-button font-12 width-95 open-sans" ng-if="state"><span>{{::translation.buy}}</span></button><div class="font-12 open-sans black text-center asset-price" ng-class="asset.askDirection" ng-if="!constants[\'isShowOnlyMidPrice\']">{{asset.markupAsk() | number:asset.digits }}</div></div></div><dvi class="row" ng-if="constants[\'isShowOnlyMidPrice\']"><div class="row text-center just-center asset-price open-sans black font-12" ng-class="asset.midDirection">{{asset.getMarkupMid() | number:asset.digits }}</div></dvi></div></div></div>'}}]),app.directive("closedTradeItem",[function(){return{restrict:"E",template:'<div class="closedtrade-item"><div class="card-ios p-0" ng-if="trade.actionCode < 6"><div class="font-14 row"><div class="col col-33 trade-name">{{ \'#\' + trade.orderId }}&zwj;</div><div class="col col-33 trade-name"><i class="icon icon-social" ng-if="trade.fromSocial()"></i> {{ trade.outputName }}</div><div class="col col-33"><div class="current-state font-12" ng-class="trade.action"><span class="title roboto-light">{{translation[trade.action]}}</span> <span class="value">{{ trade.lots }}</span></div></div></div><div class="row"><div class="tradeInfo col col-67 display-flex"><div class="col col-50 symbol"><div><span class="display-block font-11 status roboto-light">{{::translation.open_price}}</span> <span class="font-13 open-sans price-value">{{ trade.openPrice | number:trade.digits }}</span></div><div class="openDate font-10 open-sans"><span class="display-block">{{ trade.openTime | date:\'dd.MM.yyyy\':clientTimeZone }}</span> <span class="display-block">{{ trade.openTime | date:\'HH:mm:ss\':clientTimeZone }}</span></div></div><div class="col col-50 border-right-order"><div><span class="display-block font-11 status roboto-light">{{::translation.close}}</span> <span class="font-13 open-sans price-value">{{ trade.closePrice | number:trade.digits }}</span></div><div class="closeDate font-10 open-sans"><span class="display-block">{{ trade.closeTime | date:\'dd.MM.yyyy\':clientTimeZone }}</span> <span class="display-block">{{ trade.closeTime | date:\'HH:mm:ss\':clientTimeZone }}</span></div></div></div><div class="col col-33 display-flex results-section"><div><div class="col"><div class="display-block font-10 lh-1"><span>TP</span> <span>{{ trade.takeProfit | number:trade.digits }}</span></div><div class="display-block font-10 lh-1"><span>SL</span> <span>{{ trade.stopLoss | number:trade.digits }}</span></div></div></div><div><div class="text-right width-100"><span class="font-11 status roboto-light display-block">{{::translation.profit}}</span> <span class="font-11 roboto-medium" ng-class="[trade.profit > 0 ? \'up\' : \'down\', showConvertToUsd ? \'display-block\' : \'\']">{{ trade.profit | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span> <span class="font-10 roboto-medium profitValueUSD" ng-if="showConvertToUsd" ng-class="trade.profit > 0 ? \'up\' : \'down\'">({{trade.profitToUsd() | cryptoCurrency:\'USD\':2}})</span></div></div></div></div></div><div class="card-ios p-0" ng-if="trade.actionCode >= 6"><div class="font-14 row"><div class="col col-33 trade-name">{{ \'#\' + trade.orderId }}&zwj;</div><div class="col col-33 trade-name">{{ trade.outputName }}</div><div class="col col-33"><div class="current-state font-12 buy"><span class="title roboto-light">{{translation[trade.action]}}</span></div></div></div><div class="row"><div class="tradeInfo col col-67 display-flex"><div class="col col-50 symbol"><div><span class="display-block font-11 status roboto-light">{{::translation.open_price}}</span> <span class="font-13 open-sans price-value">{{ trade.openPrice | number:trade.digits }}</span></div><div class="openDate font-10 open-sans"><span class="display-block">{{ trade.openTime | date:\'dd.MM.yyyy\':clientTimeZone }}</span> <span class="display-block">{{ trade.openTime | date:\'HH:mm:ss\':clientTimeZone }}</span></div></div><div class="col col-50 border-right-order"><div><span class="display-block font-11 status roboto-light">{{::translation.close}}</span> <span class="font-13 open-sans price-value">{{ trade.closePrice | number:trade.digits }}</span></div></div></div><div class="col col-33 display-flex results-section"><div><div class="col"><div class="display-block font-10 lh-1"><span>TP</span> <span>{{ trade.takeProfit | number:trade.digits }}</span></div><div class="display-block font-10 lh-1"><span>SL</span> <span>{{ trade.stopLoss | number:trade.digits }}</span></div></div></div><div><div class="text-right width-100"><span class="font-11 status roboto-light display-block">{{::translation.profit}}</span> <span class="font-11 roboto-medium" ng-class="[trade.profit > 0 ? \'up\' : \'down\', showConvertToUsd ? \'display-block\' : \'\']">{{ trade.profit | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span> <span class="font-10 roboto-medium profitValueUSD" ng-if="showConvertToUsd" ng-class="trade.profit > 0 ? \'up\' : \'down\'">({{trade.profitToUsd() | cryptoCurrency:\'USD\':2}})</span></div></div></div></div></div></div>'}}]),app.directive("compareTo",(function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,n,a){a.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("otherModelValue",(function(){a.$validate()}))}}})),app.directive("countrySelect",["$ionicModal","LocaleService",function(e,t){return{scope:{items:"<",config:"<",submit:"&onSubmit",close:"&onClose"},restrict:"E",link:function(n,a){n.search={};n.config=angular.merge({label:"value",titleLabel:"select",id:"id"},n.config),t.wait().then((function(e){n.translation=e})),e.fromTemplateUrl("templates/directives/countrySelect.html",{scope:n,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then((function(e){n.modal=e,n.modal.show()})),n.setItem=function(e){n.modal.hide(),n.submit({message:e})},n.closeModal=function(){n.modal.hide(),n.close()},a.on("$destroy",(function(){n.closeModal()}))}}}]),app.directive("customFields",[function(){return{template:'<div ng-repeat="field in personalProfileForm.country.customFields"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form[field.field].$invalid && !form[field.field].$pristine) || (form.$submitted && form[field.field].$invalid) }"><input type="text" name="{{ field.field }}" ng-model="personalProfileForm.customFields[field.field]" ng-minlength="1" ng-maxlength="32" keyboard-watcher required> <span>{{translation[field.label]}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form[field.field].$error" ng-if="form[field.field].$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div>'}}]),app.directive("elementReady",["$parse","$timeout",function(e,t){return{restrict:"A",link:function(n,a,o){var i,s=e(o.elementReadySuccess),r=e(o.elementReadyFail);a.on("load",(function(){n.$apply((function(){return t.cancel(i),s(n)}))})),i=t((function(){a.off("load"),t.cancel(i),n.$apply((function(){return r(n)}))}),6e4)}}}]),app.directive("incDec",["$interval",function(e){return{link:function(t,n,a){var o,i,s=!!a.disableValidation;function r(e){var t,n,a=Math.pow(10,e.digits);if(n=e.step,t=e.model.value,e.hasOwnProperty("speedStep")){var o=e.speedStep;i++,o&&"object"==typeof o&&Object.keys(o).forEach((function(e){i>parseInt(e)&&(n=o[e])}))}var r=parseFloat(Math.max((t*a+("increase"===e.direction?n:-1*n))/a,0).toFixed(e.digits));if(!e.min||!e.max)return e.model.value=r;if(e.model.value||(e.model.value=e.min),s)e.model.value=r;else if(function(e,t,n){if(e>=parseFloat(t)&&e<=parseFloat(n))return e}(r,e.min,e.max))return e.model.value=r}t.upDown=function(t){return e.cancel(o),r(t)},t.upDownRepeat=function(t){e.cancel(o),i=0,o=e((function(){return r(t)}),150)},t.upDownStop=function(){e.cancel(o)}}}}]),app.directive("input",[function(){return{restrict:"E",compile:function(){return{post:function(e,t,n){var a=t.parent();a.hasClass("item-input")&&(t.bind("focus",(function(){a.addClass("is-focused")})),t.bind("keyup",(function(){""!==t.val()?a.addClass("is-changed"):a.removeClass("is-changed")})),t.bind("blur",(function(){a.removeClass("is-focused"),""!==t.val()?a.addClass("is-dirty"):a.removeClass("is-dirty")}))),n.hasOwnProperty("disabled")&&!0===n.disabled&&a.addClass("is-disabled")}}}}}]),app.directive("inputMask",["$filter",function(e){return{require:"?ngModel",link:function(e,t,n,a){a.$parsers.push((function(e){if(!e)return 0;var t=(e=e.toString()).replace(/[^0-9.]/g,"");return t.split(".").length>2&&(t=t.substring(0,t.length-1)),n.inputMaskMax&&parseFloat(t)>parseFloat(n.inputMaskMax)&&(t=a.$modelValue.toString()),t!==e&&(a.$setViewValue(t),a.$render()),parseFloat(t)}))}}}]),app.directive("keyboardWatcher",["$document","$timeout","$interval",function(e,t,n){return{restrict:"A",scope:!1,link:function(e,t,n,a,o){window.innerHeight}}}]),app.directive("keyboard",["$state","$filter","$ionicModal","Utils","LocaleService",function(e,t,n,a,o){return{scope:{data:"<",onLoadCallback:"&"},link:function(e,t){function i(){return!(e.dataModel.model.value.toString().length>0)}e.isShow=!0,e.dataModel=angular.copy(e.data),e.dataModel.model.value=a.decimalRound(e.dataModel.model.value,e.dataModel.digits||0),e.isDone=!0,n.fromTemplateUrl("templates/directives/keyboard.html",{scope:e,animation:"slide-in-up"}).then((function(t){e.modal=t,e.openModal()})),o.wait().then((function(t){e.translation=t})),e.openModal=function(){e.modal.show()},e.closeModal=function(){e.modal.hide()},e.isDone=i(),e.onClick=function(t){(function(t){var n=[e.dataModel.model.value,t].join(""),a=new RegExp("^\\d*(\\.\\d{0,"+e.dataModel.digits+"})?$");if(n.split(".").length>2||n>parseFloat(e.data.maxval)||!a.test(n))return!0;return!1})(t)||e.dataModel.model.value.toString().length<e.dataModel.maxval.toString().length+1+e.dataModel.digits&&(1===e.dataModel.model.value.toString().length&&0===e.dataModel.model.value&&(e.dataModel.model.value=""),e.dataModel.model.value=[e.dataModel.model.value,t].join(""),e.dataModel.model.value.startsWith(".")&&(e.dataModel.model.value=e.dataModel.model.value.toString().padStart(2,"0")),e.dataModel.model.value.includes(".")||(e.dataModel.model.value=parseFloat(e.dataModel.model.value))),e.isDone=i()},e.onCancel=function(){e.dataModel.model.value="",e.isDone=i()},e.onDone=function(){var t,n;e.isShow=!0,e.dataModel.model.value.toString().endsWith(".")&&(e.dataModel.model.value=(t=e.dataModel.model.value,(n=t.toString().split("."))[0]&&n[0].length>0?n[0].toString():e.dataModel.minval.toString())),e.isDone=i(),e.onLoadCallback({arg1:e.dataModel}),e.closeModal()},e.onDelete=function(){e.dataModel.model.value=e.dataModel.model.value.toString().substring(0,e.dataModel.model.value.toString().length-1),e.isDone=i()},e.onOpen=function(){e.isShow=!1},e.onClose=function(){e.isShow=!0,e.onLoadCallback({arg1:null}),e.closeModal()},t.on("$destroy",(function(){e.modal&&(e.closeModal(),e.modal.remove())}))}}}]),app.directive("languageSelect",["$ionicModal","LocaleService","LocalStorage",function(e,t,n){return{restrict:"E",replace:!0,scope:{languages:"=",onResult:"&callback"},link:function(a,o,i){a.selectedId=n.get("language"),a.selectedItem=a.languages.find((function(e){return a.selectedId===e.id})),t.wait().then((function(e){a.translation=e,a.selectedId=n.get("language"),a.selectedItem=a.languages.find((function(e){return a.selectedId===e.id}))})),a.languagesModal=function(){e.fromTemplateUrl("templates/directives/languagesSelect.html",{scope:a,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then((function(e){a.modal=e,t.wait().then((function(e){a.translation=e})),a.selectedId=n.get("language"),a.languagesList=a.languages,a.languageModal=e,a.languageModal.show()}))},a.setLanguage=function(e){a.selectedItem=a.languages.find((function(t){return t.id===e.id})),a.onResult({item:a.selectedItem}),a.languageModal&&a.languageModal.hide()},a.closeLanguageModal=function(){a.languageModal&&a.languageModal.hide(),a.languagesList=null},o.on("$destroy",(function(){a.modal&&a.modal.remove()}))},template:['<div class="languageSelect">','<div class="result row" on-tap="languagesModal()">',"<i class=\"icon flag-union\" ng-class=\"[{true:'flag-icon-'+selectedItem['id']}[true]]\"></i>","</div>","</div>"].join("\n")}}]),app.directive("logoTitle",(function(){return{template:'<div class="logo-title"><img src="img/logo.svg"></div>'}})),app.directive("modal",["$state","$ionicHistory","$ionicModal","$timeout","$interval","LocaleService","LocalStorage","constants",function(e,t,n,a,o,i,s,r){return{scope:{data:"<",template:"@",back:"<",close:"@"},link:function(o,l){i.wait().then((function(e){o.translation=e})),o.backCounter=o.close,o.constants=r,o.openClientPortal=function(){o.data.state=!1,o.modal.hide(),t.clearHistory();var e=o.constants.clientPortalUrl.replace(/\%lang\%/,s.get("language"));window.open(e,"_blank")},o.hide=function(n){return a.cancel(undefined),o.data.state=!1,o.modal.hide(),t.clearHistory(),function(n){var a=n||o.data.back||o.back;if(!a)return;if("object"==typeof a)return a.clearHistory&&t.clearHistory(),e.go(a.state,a.params);if("function"==typeof a)return a();return t.clearHistory(),e.go(a)}(n)},n.fromTemplateUrl(o.template||"templates/directives/popup.html",{scope:o,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then((function(e){o.modal=e}));var c=o.$watch("data.state",(function(e,t){e!==t&&e&&o.modal.show(),e===t||e||o.hide()}));l.on("$destroy",(function(){t&&t.clearHistory(),c(),o.data=null,o.modal&&o.modal.remove(),o.modal=null}))}}}]),app.directive("modalDialog",["$ionicModal","$ionicHistory","LocaleService",function(e,t,n){return{scope:{data:"<",onOk:"&onOk",onCancel:"&onCancel"},restrict:"E",link:function(a,o){e.fromTemplateUrl("templates/directives/modalDialog.html",{scope:a,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then((function(e){a.modal=e})),n.wait().then((function(e){a.translation=e}));var i=a.$watch("data.isOpened",(function(e,t){e!==t&&e&&a.modal.show()}));function s(){a.modal.hide(),a.data.isOpened=!1}o.on("$destroy",(function(){console.log("ELEMENET $destroy"),t&&t.clearHistory(),i(),a.data=null,a.modal&&a.modal.remove(),a.modal=null})),a.tapCancel=function(){s(),a.onCancel&&a.onCancel()},a.tapOk=function(){s(),a.onOk&&a.onOk()}}}}]),app.directive("openTradeItem",[function(){return{restrict:"E",template:'<div class="opentrade-item"><div class="row card-ios p-0"><div class="col col-67 display-flex"><div class="col col-50 symbol"><div class="name font-14 roboto"><i class="icon icon-social" ng-if="trade.fromSocial()"></i> {{ trade.outputName }}</div><div class="sub-name"><span class="display-block font-11 status roboto-light">{{::translation.open_price}}</span> <span class="font-13 roboto status-value">{{ trade.openPrice | number:trade.asset.digits }}</span></div></div><div class="col col-50 state border-right-order pt-2"><div class="current-state font-12 short"><span class="trade-state roboto-light" ng-class="trade.action === \'buy\' ? \'buy\' : \'short\'">{{translation[trade.action]}}</span> <span class="short-color">{{ trade.lots | number:trade.asset.lotDigits }}</span></div><div class="sub-name"><span class="display-block font-11 status roboto-light">{{::translation.market_price}}</span> <span class="font-13 roboto"><span class="direction-state" ng-class="trade.closePriceDirection === \'asset-up\' ? \'up\' : \'down\'"><i class="icon font-12" ng-class="trade.closePriceDirection === \'asset-up\' ? \'ion-android-arrow-up\' : \'ion-android-arrow-down\'"></i></span> <span ng-class="trade.closePriceDirection === \'asset-up\' ? \'up\' : \'down\'">{{ trade.closePrice() | number:trade.asset.digits }}</span></span></div></div></div><div class="col col-33 display-flex results-section"><div class="row"><div class="col p-0"><div class="display-block font-10 lh-1"><span class="trade-name">TP:</span> <span class="trade-value" ng-if="trade.takeProfit > 0">{{ trade.takeProfit | number:trade.asset.digits }}</span></div><div class="display-block font-10 lh-1"><span class="trade-name">SL:</span> <span class="trade-value" ng-if="trade.stopLoss > 0">{{ trade.stopLoss | number:trade.asset.digits }}</span></div></div></div><div class="row profit-section text-right"><div class="col p-0 duplicate" on-tap="$event.stopPropagation();executeTrade(trade)"><i class="ion-ios-copy-outline"></i></div><div class="col p-0 sub-name width-100"><span class="font-11 status roboto-light display-block">{{::translation.profit}}</span> <span class="font-11 roboto-medium profitValue" ng-class="[trade.profitDirection, showConvertToUsd ? \'display-block\' : \'\']">{{trade.profit() | cryptoCurrency :user.activeTradingAccount.currency :user.currencyDigits}}</span> <span class="font-10 roboto-medium profitValueUSD" ng-if="showConvertToUsd" ng-class="trade.profitDirection">({{trade.profitToUsd() | cryptoCurrency:\'USD\':2}})</span></div></div></div></div></div>'}}]),app.directive("passwordmix",[function(){return{require:"?ngModel",link:function(e,t,n,a){a.$validators.passwordmix=function(e,t){var n=0;return/[0-9]/.test(e)?n++:n--,/[a-z]/i.test(e)?n++:n--,2===n}}}}]),app.directive("pendingTradeItem",[function(){return{restrict:"E",template:'<div class="pending-item"><div class="card-ios p-0"><div class="row"><div class="col pb-5"><div class="font-14 output-name">{{trade.outputName}}</div></div><div class="col state"><div class="current-state font-11 text-right"><span class="trade-state roboto-light short" ng-class="(trade.action === \'buy_stop\' || trade.action === \'buy_limit\') ? \'buy\' : \'short\'">{{translation[trade.action]}}</span> <span>{{trade.lots | number: trade.asset.lotDigits}}</span> <span>{{::translation.lots}}</span></div></div></div><div class="row align-self"><div class="row pl-0 pt-0 pr-0"><div class="col-33 font-12 border-right-pending roboto pending-section"><div class="roboto-light muted">{{::translation.current}}</div><div class="roboto"><span class="direction-state" ng-class="trade.closePriceDirection === \'asset-up\' ? \'up\' : \'down\'"><i class="icon font-12" ng-class="trade.closePriceDirection === \'asset-up\' ? \'ion-android-arrow-up\' : \'ion-android-arrow-down\'"></i></span> <span ng-class="trade.closePriceDirection === \'asset-up\' ? \'up\' : \'down\'">{{ trade.pendingCurrentPrice() | number:trade.asset.digits }}</span></div></div><div class="col-33 font-12 border-right-pending roboto pending-section center-text"><div class="roboto-light muted">{{::translation.distance}}</div><div class="roboto">{{ trade.pendingDistance() | number:2}}</div></div><div class="col-33 font-12 roboto pending-section text-right"><div class="roboto-light muted">{{::translation.target}}</div><div class="roboto">{{ trade.openPrice | number:trade.asset.digits }}</div></div></div></div></div></div>'}}]),app.directive("personalDetails",[function(){return{template:'<div ng-if="!profileRulesHelper.isHidden(\'firstName\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="firstName" ng-class="{ \'has-error\' : (form.firstName.$invalid && !form.firstName.$pristine) || (form.$submitted && form.firstName.$invalid) }"><input type="text" name="firstName" ng-model="personalProfileForm.firstName" ng-minlength="1" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'name\')" ng-required="profileRulesHelper.isRequired(\'firstName\')" ng-readonly="profileRulesHelper.isReadonly(\'firstName\', user.firstName)"> <span>{{::translation.firstName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.firstName.$error" ng-if="form.firstName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Firtsname}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'lastName\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="lastName" ng-class="{ \'has-error\' : (form.lastName.$invalid && !form.lastName.$pristine) || (form.$submitted && form.lastName.$invalid) }"><input type="text" name="lastName" ng-model="personalProfileForm.lastName" ng-minlength="1" ng-maxlength="32" ng-pattern="validator(\'name\')" keyboard-watcher ng-required="profileRulesHelper.isRequired(\'lastName\')" ng-readonly="profileRulesHelper.isReadonly(\'lastName\', user.lastName)"> <span>{{::translation.lastName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.lastName.$error" ng-if="form.lastName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Lastname}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'birthday\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="birthday" ng-class="{ \'has-error\' : form.birthday.$invalid && !form.birthday.$pristine }"><input type="date" name="birthday" ng-model="personalProfileForm.birthday" max="{{ minBirth }}" ng-required="profileRulesHelper.isRequired(\'birthday\')" ng-readonly="profileRulesHelper.isReadonly(\'birthday\', user.birthday)"> <span>{{::translation.dateBirth}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.birthday.$error" ng-if="form.dateBirth.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.datepickerFormat}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'country\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="country" ng-class="{ \'has-error\' : (form.country.$invalid && !form.country.$pristine) || (form.$submitted && form.country.$invalid) }"><input type="text" class="custom-select custom-input" name="country" ng-model="personalProfileForm.country.country" on-tap="!profileRulesHelper.isReadonly(\'country\', user.country) && openCountryModal()" readonly ng-required="profileRulesHelper.isRequired(\'country\')"> <span>{{::translation.country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="countryModal" items="countries" config="countryModalConfig" on-submit="setCountry(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.country.$error" ng-if="form.country.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'city\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="city" ng-class="{ \'has-error\' : (form.city.$invalid && !form.city.$pristine) || (form.$submitted && form.city.$invalid) }"><input type="text" name="city" ng-model="personalProfileForm.city" ng-minlength="2" ng-maxlength="100" ng-required="profileRulesHelper.isRequired(\'city\')" ng-readonly="profileRulesHelper.isReadonly(\'city\', user.city)" keyboard-watcher ng-pattern="validator(\'name\')" style="user-select: text !important;"> <span>{{::translation.city}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.city.$error" ng-if="form.city.$dirty || from.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_city}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'address\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="address" ng-class="{ \'has-error\' : (form.address.$invalid && !form.address.$pristine) || (form.$submitted && form.address.$invalid) }"><input type="text" name="address" ng-model="personalProfileForm.address" ng-minlength="2" ng-maxlength="100" keyboard-watcher ng-pattern="validator(\'address\')" ng-required="profileRulesHelper.isRequired(\'address\')" ng-readonly="profileRulesHelper.isReadonly(\'address\', user.address)"> <span>{{::translation.address}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.address.$error" ng-if="form.address.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_address}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'postCode\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="postCode" ng-class="{ \'has-error\' : (form.postCode.$invalid && !form.postCode.$pristine) || (form.$submitted && form.postCode.$invalid) }"><input type="text" name="postCode" ng-model="personalProfileForm.postCode" ng-minlength="3" ng-maxlength="15" keyboard-watcher ng-pattern="validator(\'alphanum\')" ng-required="profileRulesHelper.isRequired(\'postCode\')" ng-readonly="profileRulesHelper.isReadonly(\'postCode\', user.postCode)"> <span>{{::translation.zipCode}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.postCode.$error" ng-if="form.postCode.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'phone\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="phone" ng-class="{ \'has-error\' : (form.phone.$invalid && !form.phone.$pristine) || (form.$submitted && form.phone.$invalid) }"><input type="tel" name="phone" ng-model="personalProfileForm.phone" minLength="5" maxLength="17" ng-minlength="5" ng-maxlength="17" keyboard-watcher ng-pattern="validator(\'phone\')" ng-required="profileRulesHelper.isRequired(\'phone\')" ng-readonly="profileRulesHelper.isReadonly(\'phone\', user.phone)"> <span>{{::translation.phoneFull}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.phone.$error" ng-if="form.phone.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div><div ng-hide="personalProfileForm.country.states.length === 0"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="state" ng-class="{ \'has-error\' : (form.state.$invalid && !form.state.$pristine) || (form.$submitted && form.state.$invalid) }"><input type="text" class="custom-select custom-input" name="state" ng-model="personalProfileForm.state.stateName" on-tap="!profileRulesHelper.isReadonly(\'state\', user.state) && openCountryStateModal()" readonly> <span>{{::translation.state}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="countryStateModal" items="countryStates" config="countryStateModalConfig" on-submit="setCountryState(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.state.$error" ng-if="form.state.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'citizenship\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="citizenship" ng-class="{ \'has-error\' : (form.citizenship.$invalid && !form.citizenship.$pristine) || (form.$submitted && form.citizenship.$invalid) }"><input type="text" class="custom-select custom-input" name="citizenship" ng-model="personalProfileForm.citizenship.citizenship" on-tap="!profileRulesHelper.isReadonly(\'citizenship\', user.citizenship) && openCitizenshipModal()" readonly ng-required="profileRulesHelper.isRequired(\'citizenship\')"> <span>{{::translation.citizenship}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="citizenshipModal" items="citizenships" config="citizenshipModalConfig" on-submit="setCitizenship(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.citizenship.$error" ng-if="form.citizenship.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'currency\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="currency" ng-class="{ \'has-error\' : (form.currency.$invalid && !form.currency.$pristine) || (form.$submitted && form.currency.$invalid) }"><select name="currency" class="form-select" ng-required="profileRulesHelper.isRequired(\'currency\')" ng-options="currency.currency for currency in currencyList" ng-model="personalProfileForm.currency"></select><span>{{::translation.currency}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.currency.$error" ng-if="form.currency.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'customerType\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="customerType" ng-class="{ \'has-error\' : (form.customerType.$invalid && !form.customerType.$pristine) || (form.$submitted && form.customerType.$invalid) }"><select name="customerType" class="form-select" ng-required="profileRulesHelper.isRequired(\'customerType\')" ng-options="customerType.label for customerType in customerTypes track by customerType.name" ng-model="personalProfileForm.customerType"></select><span>{{::translation.customerType}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.customerType.$error" ng-if="form.customerType.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.select_account_type}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'tradingExperience\')"><div class="padding pb-0 pl-0">{{::translation.trading_experience}}</div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" id="tradingExperience" ng-class="{ \'has-error\' : form.tradingExperience.$invalid && !form.tradingExperience.$pristine }"><ion-radio ng-value="false" name="tradingExperience" class="text-transform-capitalize" ng-model="personalProfileForm.tradingExperience" ng-required="profileRulesHelper.isRequired(\'tradingExperience\')">{{::translation.no}}</ion-radio><ion-radio ng-value="true" name="tradingExperience" class="text-transform-capitalize" ng-model="personalProfileForm.tradingExperience" ng-required="profileRulesHelper.isRequired(\'tradingExperience\')">{{::translation.yes}}</ion-radio></div><div class="messages font-12" ng-messages="form.tradingExperience.$error" ng-if="form.tradingExperience.$dirty"><div class="help-block" ng-message="required">Please select at least one option</div></div></div><custom-fields ng-if="personalProfileForm.country && personalProfileForm.country.customFields && constants[\'splitPersonalDetails\']"></custom-fields><div ng-if="!profileRulesHelper.isHidden(\'terms\')"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" ng-class="{\'error-checkbox\': (form.terms.$invalid && !form.terms.$pristine) || (form.$submitted && form.terms.$invalid) }" name="terms" ng-model="personalProfileForm.terms" ng-required="profileRulesHelper.isRequired(\'terms\')"><span>{{::translation.login_bottom_text}}</span>&nbsp; <span ng-if="constants.externalLinks.accountTerms">{{::translation.login_bottom_text2}}</span></ion-checkbox><div ng-if="constants.disclaimerV2enabled"><span ng-repeat="(key, link) in constants.externalLinks" class="disclaimerV2enabledLink"><a href="{{link[lang]}}" target="_blank">{{::translation[key]}}</a></span></div></div></div>'}}]),app.directive("personalDetailsRegulated",[function(){return{template:'<div ng-if="!profileRulesHelper.isHidden(\'tin\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="tin" ng-class="{ \'has-error\' : (form.tin.$invalid && !form.tin.$pristine) || (form.$submitted && form.tin.$invalid) }"><input type="text" name="tin" ng-model="personalProfileForm.tin" ng-minlength="2" ng-maxlength="50" ng-required="profileRulesHelper.isRequired(\'tin\')" ng-readonly="profileRulesHelper.isReadonly(\'tin\', user.tin)" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <span>{{::translation.tin}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.tin.$error" ng-if="form.tin.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'tinAbsenceReason\') && !personalProfileForm.tin"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="tinAbsenceReason" ng-class="{ \'has-error\' : (form.tinAbsenceReason.$invalid && !form.tinAbsenceReason.$pristine) || (form.$submitted && form.tinAbsenceReason.$invalid) }"><input type="text" name="tinAbsenceReason" ng-model="personalProfileForm.tinAbsenceReason" ng-required="profileRulesHelper.isRequired(\'tinAbsenceReason\') || !personalProfileForm.tin" keyboard-watcher> <span>{{::translation.tinAbsence}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.tinAbsenceReason.$error" ng-if="form.tinAbsenceReason.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'pep\')"><div class="padding pb-0 pl-0" ng-click="showInfo(\'pep\')" style="display: flex;">{{::translation.pep}} <span class="pep-description">?</span></div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" id="pep" ng-class="{ \'has-error\' : form.pep.$invalid && !form.pep.$pristine }"><ion-radio ng-value="false" name="pep" class="text-transform-capitalize" ng-model="personalProfileForm.pep" ng-required="profileRulesHelper.isRequired(\'pep\')">{{::translation.no}}</ion-radio><ion-radio ng-value="true" name="pep" class="text-transform-capitalize" ng-model="personalProfileForm.pep" ng-required="profileRulesHelper.isRequired(\'pep\')">{{::translation.yes}}</ion-radio></div><div class="messages font-12" ng-messages="form.pep.$error" ng-if="form.pep.$dirty"><div class="help-block" ng-message="required">Please select at least one option</div></div></div><div ng-If="!profileRulesHelper.isHidden(\'taxCountry\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="taxCountry" ng-class="{ \'has-error\' : (form.taxCountry.$invalid && !form.taxCountry.$pristine) || (form.$submitted && form.taxCountry.$invalid) }"><input type="text" class="custom-select custom-input" name="taxCountry" ng-model="personalProfileForm.taxCountry.country" on-tap="openTaxCountryModal()" readonly ng-required="profileRulesHelper.isRequired(\'taxCountry\')"> <span>{{::translation.tax_country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i><country-select ng-if="taxCountryModal" items="taxCountries" config="countryModalConfig" on-submit="setTaxCountry(message)" on-close="closeModal()"></country-select></div><div class="messages font-12" ng-messages="form.taxCountry.$error" ng-if="form.taxCountry.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'isUSCitizen\')"><div class="padding pb-0 pl-0">{{::translation.us_reportable}}</div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" id="usCitizen" ng-class="{ \'has-error\' : form.usCitizen.$invalid && !form.usCitizen.$pristine }"><ion-radio ng-value="false" name="usCitizen" class="text-transform-capitalize" ng-model="personalProfileForm.usCitizen" ng-required="profileRulesHelper.isRequired(\'isUSCitizen\')">{{::translation.no}}</ion-radio><ion-radio ng-value="true" name="usCitizen" class="text-transform-capitalize" ng-model="personalProfileForm.usCitizen" ng-required="profileRulesHelper.isRequired(\'isUSCitizen\')" ng-change="showUsCitizenPopup()">{{::translation.yes}}</ion-radio></div><div class="messages font-12" ng-messages="form.usCitizen.$error" ng-if="form.usCitizen.$dirty"><div class="help-block" ng-message="required">Please select at least one option</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'nationalId\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="nationalId" ng-class="{ \'has-error\' : (form.nationalId.$invalid && !form.nationalId.$pristine) || (form.$submitted && form.nationalId.$invalid) }"><input type="text" name="nationalId" ng-model="personalProfileForm.nationalId" ng-required="profileRulesHelper.isRequired(\'nationalId\')" ng-readonly="profileRulesHelper.isReadonly(\'nationalId\', user.nationalId)" keyboard-watcher> <span>{{::translation.nationalId}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.nationalId.$error" ng-if="form.nationalId.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'companyName\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="companyName" ng-class="{ \'has-error\' : (form.companyName.$invalid && !form.companyName.$pristine) || (form.$submitted && form.companyName.$invalid) }"><input type="text" name="companyName" ng-model="personalProfileForm.companyName" ng-required="profileRulesHelper.isRequired(\'companyName\')" ng-readonly="profileRulesHelper.isReadonly(\'companyName\', user.companyName)" keyboard-watcher> <span>{{::translation.company_name}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.companyName.$error" ng-if="form.companyName.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'isMarried\')"><div class="padding pb-0 pl-0">{{::translation.isMarried}}</div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" id="isMarried" ng-class="{ \'has-error\' : form.isMarried.$invalid && !form.isMarried.$pristine }"><ion-radio ng-value="false" name="isMarried" class="text-transform-capitalize" ng-model="personalProfileForm.isMarried" ng-required="profileRulesHelper.isRequired(\'isMarried\')">{{::translation.no}}</ion-radio><ion-radio ng-value="true" name="isMarried" class="text-transform-capitalize" ng-model="personalProfileForm.isMarried" ng-required="profileRulesHelper.isRequired(\'isMarried\')">{{::translation.yes}}</ion-radio></div><div class="messages font-12" ng-messages="form.isMarried.$error" ng-if="form.isMarried.$dirty"><div class="help-block" ng-message="required">Please select at least one option</div></div><div class="padding pb-0 pl-0" ng-if="personalProfileForm.isMarried && !profileRulesHelper.isHidden(\'isSpouse\')">{{::translation.isSpouse}}</div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" id="isSpouse" ng-if="personalProfileForm.isMarried && !profileRulesHelper.isHidden(\'isSpouse\')" ng-class="{ \'has-error\' : form.isSpouse.$invalid && !form.isSpouse.$pristine }"><ion-radio ng-value="false" name="isSpouse" class="text-transform-capitalize" ng-model="personalProfileForm.isSpouse" ng-required="true">{{::translation.no}}</ion-radio><ion-radio ng-value="true" name="isSpouse" class="text-transform-capitalize" ng-model="personalProfileForm.isSpouse" ng-required="true">{{::translation.yes}}</ion-radio></div><div class="messages font-12" ng-messages="form.isSpouse.$error" ng-if="personalProfileForm.isMarried && form.isSpouse.$dirty"><div class="help-block" ng-message="required">Please select at least one option</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'birthPlace\')"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="birthPlace" ng-class="{ \'has-error\' : (form.birthPlace.$invalid && !form.birthPlace.$pristine) || (form.$submitted && form.birthPlace.$invalid) }"><input type="text" name="birthPlace" ng-model="personalProfileForm.birthPlace" ng-required="profileRulesHelper.isRequired(\'birthPlace\')" ng-readonly="profileRulesHelper.isReadonly(\'birthPlace\', user.birthPlace)" keyboard-watcher> <span>{{::translation.birthPlace}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.birthPlace.$error" ng-if="form.birthPlace.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div ng-if="!profileRulesHelper.isHidden(\'gender\')"><div class="padding pb-0 pl-0">{{::translation.gender}}</div><div class="form-group item-input mb-3 mt-0 pl-0 pt-0 pb-0 custom-radio" id="gender" ng-class="{ \'has-error\' : form.gender.$invalid && !form.gender.$pristine }"><ion-radio ng-value="1" name="gender" class="text-transform-capitalize" ng-model="personalProfileForm.gender" ng-required="profileRulesHelper.isRequired(\'gender\')">{{::translation.male}}</ion-radio><ion-radio ng-value="2" name="gender" class="text-transform-capitalize" ng-model="personalProfileForm.gender" ng-required="profileRulesHelper.isRequired(\'gender\')">{{::translation.female}}</ion-radio></div><div class="messages font-12" ng-messages="form.gender.$error" ng-if="form.gender.$dirty"><div class="help-block" ng-message="required">Please select at least one option</div></div></div><custom-fields ng-if="personalProfileForm.country && personalProfileForm.country.customFields && !constants[\'splitPersonalDetails\']"></custom-fields>'}}]),app.directive("proChart",["$timeout","$ionicLoading","config","ServerTimeService","ProChartService","LocaleService","constants",function(e,t,n,a,o,i,s){return{scope:{asset:"<",chart:"<"},replace:!0,link:function(s,r){var l,c,d,u={objChartContext:null,objRequestContext:null,strRequest:null},m=-1*a.timeZoneOffset*60,p=0,g=1,v=2,f=3,h=4,b={line:"line",areaspline:"area",ohlc:"line",candlestick:"candlesticks"},y={"1min":"1m","5min":"5m","15min":"15m","30min":"30m","1hour":"60m","4hours":"4h","1day":"1d","1week":"1w","1month":"1n"};c&&e.cancel(c);var w=s.$watch("chart.ready",(function(a,o){if(a!==o&&a)return s.loadingMessage=i.translation.loading_chart,t.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:s}),l?(console.log("UPDATE CHART"),s.stopEarlyHistory=!1,l&&l.chart.ChangeSymbol({id:s.asset.outputName,name:s.asset.description,precision:s.asset.digits}),d=y[s.chart.range.title],s.stopEarlyHistory=!1,l&&l.chart.ChangeTimeScale(d),void(l&&l.chart.SetZoom(l.chart.GetNumOfCandles()-35,l.chart.GetNumOfCandles(),!0))):function(){console.log("Create new chart instance"),l=null;var a=ProChart_Loader(),o=n.chartTheme||"default";function i(){var e=n.chartTheme||"default";(l=ProChart_InitLayout("#chart","layout-mobile-indicators",e)).apiinit.rootpath=n.chartUrl,l.events.layout.readyComplete=d,l.events.layout.initComplete=T,l.gui.loadLayout(),l.events.chart.createComplete=function(){l.chart.GetNumOfCandles&&l.chart.SetZoom(l.chart.GetNumOfCandles()-35,l.chart.GetNumOfCandles(),!0)}}function d(){l.api.layout.set("width||height",r[0].clientWidth+"||"+r[0].clientHeight),s.chart&&(s.chart.loadstate="success"),c&&e.cancel(c)}a.init.loadertemplates=[{layout:"layout-mobile-indicators",template:o}],a.init.rootpath=n.chartUrl,a.combinemode=!0,a.LoaderInitComplete=i,a.LoaderInitCombine(),c=e((function(){s.chart&&(s.chart.loadstate="fail"),t.hide(),e.cancel(c)}),2e4)}();var d}));function k(){return s.$watch("asset.bid",(function(e,t){var n,o;e&&e!==t&&s.chart.ready&&(n=a.time,o=[{id:s.asset.outputName,lastTimeStamp:n,data:[{bid:s.asset.markupBid(),ask:s.asset.markupAsk(),other:0,date:n}]}],l&&l.chart&&l.chart.Push(u.objChartContext,u.objRequestContext,u.strRequest,o))}))}var C=s.$watch("chart.type",(function(e,t){var n;e&&e!==t&&s.chart.ready&&l&&(n=b[e.type])&&l.chart.ChangePriceType(n)})),S=s.$watch("chart.earlyHistory",(function(e,t){if(t!==e&&(!t||t&&e&&t.request.to!==e.request.to)){if(s.chart.earlyHistory&&s.chart.earlyHistory.data&&0===s.chart.earlyHistory.data.length)return console.warn("stop rendering chart history - no more data"),l.chart.Push(null,{},"getearlyhistory",{data:[]}),void(s.stopEarlyHistory=!0);var n=A(s.chart.earlyHistory.data,!0);l.chart.Push(null,{},"getearlyhistory",n)}}));function T(){l.chart.DateFormat={realtime:"DD/MM/YYYY HH:mm:ss",minutes:"HH:mm",hours:"DD/MM/YYYY HH:mm:ss",eod:"DD/MM/YYYY",datebarYear:"YYYY",datebarMonthDay:"DD/MM",datebarDay:"DD",datebarFull:"DD/MM/YYYY",datebarHoursMinutes:"HH:mm",datebarMonth:"MM"},l.chart.WaterMark=!1,l.chart.StudiesToLoad=[],l.chart.ShowBarData="true",l.chart.hAxis.hPadInPixelsLeft=10,l.chart.vAxis.vPadInPixelsTop=50,l.chart.vAxis.smartRound=!1,l.chart.vAxis.vMarginPixelsBottom=0,l.chart.vAxis.vMarginPixelsTop=0,l.chart.PriceChartType=b[s.chart.type.type],l.chart.Symbol=s.asset.outputName,l.chart.SymbolName=s.asset.outputName,l.chart.TimeScale=y[s.chart.range.title],l.chart.Precision=s.asset.digits,l.chart.TimeZone=m,l.chart.BigValuesFormat=null,l.chart.JSPush={enableHistory:!0,enableRT:!0,enableSymbols:!0,enableStudies:!0,enableEarlyHistory:!0,earlyHistorySize:200,funcFetchData:x},o.loaded=!0,c&&e.cancel(c)}function x(e,n,a,o){switch(a.toLowerCase()){case"getrecenthistory":var i=A(s.chart.data);return l.chart.Push(e,n,a,i),t.hide(),d&&d(),void(d=k());case"getmultirt":u={objChartContext:e,objRequestContext:n,strRequest:a};break;case"getearlyhistory":if(s.stopEarlyHistory)return void l.chart.Push(null,{},"getearlyhistory",{data:[]});var r=s.chart.earlyHistory&&s.chart.earlyHistory.data&&s.chart.earlyHistory.data.length>0?s.chart.earlyHistory.data[0][0]:s.chart.data[0][0],c=Math.round(r/1e3)-60*s.chart.range.timeFrame,m=c-60*s.chart.range.timeFrame*200;s.$parent.getEarlyHistory({from:m,to:c})}}function A(e,t){return t||(e[e.length-1][h]=s.asset.markupBid()),{id:s.asset.outputName,lastTimeStamp:e[e.length-1][p],data:e.map((function(e){return{open:e[g],close:e[h],low:e[f],high:e[v],other:0,date:e[p]}}))}}r.on("$destroy",(function(){if(c&&e.cancel(c),l)try{l.chart.StopRTRequests()}catch(e){console.warn("==>",e)}d&&d(),w&&w(),C&&C(),S&&S(),window.onresize=null;try{l&&l.chart.CleanUp(),document.getElementById("chart").innerHTML=""}catch(e){console.warn("chart cleanup failed",e)}l=null,s.asset=null,s.chart=null}))},template:'<div style="position: relative" class="chart" id="chart"></div>'}}]),app.directive("question",["LocaleService","constants","$ionicPopup",function(e,t,n){return{scope:{question:"<",control:"=",viewOnly:"<"},restrict:"E",template:'<div class="tap-radio" id="question-{{question.id}}"><form name="form" novalidate><div class="labetTitle text-center">{{::question.label}}</div><div class="answer" ng-repeat="answer in question.answers" ng-if="!question.isCountryAnswers && !question.onlyOther"><label ng-class="{\'disabled\': viewOnly, \'active\': answer.id === tmp.value }"><input type="radio" required value="{{answer.id}}" ng-model="tmp.value" ng-change="updateModel()" ng-disabled="viewOnly"> <span>{{answer.label}}</span></label></div><div class="form-group as-select" ng-if="question.isCountryAnswers"><label class="select-placeholder" ng-if="!tmp.value">{{::translation.specifyOtherAnswer}}</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" ng-if="!viewOnly" ng-class="{\'disabled\': viewOnly, \'active\': answer.id === tmp.value }" required name="select-method" ng-model="tmp.value" ng-change="updateModel()" ng-disabled="viewOnly"><option ng-repeat="answer in question.answers" ng-value="answer.id">{{answer.label}}</option></select><div class="bottom-border font-16 item-stacked-label view-only" ng-if="viewOnly">{{::translation.questionnarie_answers[tmp.value]}}</div></div><div class="form-group item-stacked-label bottom-border" ng-if="showOther && !question.onlyOther" ng-class="{ \'has-error\' : (form.other.$invalid && !form.other.$pristine) || (form.$submitted && form.other.$invalid) }"><label>{{::translation.specifyOtherAnswer}}</label> <input type="text" name="other" ng-model="question.other" ng-minlength="1" ng-maxlength="128" required keyboard-watcher ng-disabled="viewOnly" ng-change="updateModel()"></div><div class="form-group item-stacked-label bottom-border" ng-if="question.onlyOther" ng-class="{ \'has-error\' : (form.other.$invalid && !form.other.$pristine) || (form.$submitted && form.other.$invalid) }"><label>{{::translation.specifyOtherAnswer}}</label> <input type="text" name="other" ng-model="question.other" ng-minlength="1" ng-maxlength="128" required keyboard-watcher ng-disabled="viewOnly" ng-change="updateModel()"></div></form></div>',link:function(a,o){a.translation=e.translation,a.showOther=a.question.other.length>0,a.tmp={value:a.viewOnly?a.question.values.id:""},a.control[a.question.id]={},a.control[a.question.id].validate=function(){return a.validate()},a.updateModel=function(){if(!a.viewOnly&&(a.question.values=a.question.formatAnswer(a.tmp.value),a.question.allowOther&&(a.showOther=a.isOther()),t.questionnairePopups&&t.questionnairePopups[a.tmp.value])){var e=t.questionnairePopups[a.tmp.value];a.showPopup("",a.translation[e])}},a.isOther=function(){return a.question.isMulti?Array.isArray(a.question.values)&&!!_.find(a.question.values,{id:"-1"}):"-1"==a.question.values.id},a.showPopup=function(o,i){var s=[];t.questionnaireResetAnswerButton&&s.push({text:e.translation.close,onTap:function(e){e.preventDefault(),a.tmp.value="",a.updateModel(),r.close()}}),s.push({text:t.questionnaireResetAnswerButton?e.translation.i_understand:e.translation.continue,type:"button-positive",onTap:function(e){e.preventDefault(),r.close()}});var r=n.show({template:i,title:o||"Warning",scope:a,buttons:s})},a.validateForm=function(){this.form.other&&(this.form.other.$setTouched(),this.form.other.$setDirty())},a.validate=function(){if(a.validateForm(),a.question.valid=!1,a.question.allowOther){var e=a.question.onlyOther||a.isOther();a.question.allowOther&&!e&&(a.question.other=""),e&&a.question.other&&a.question.other.length>0&&(a.question.valid=!0),!e&&a.question.values&&Array.isArray(a.question.values)&&a.question.values.length>0&&(a.question.valid=!0),e||!a.question.values||a.question.isMulti||(a.question.valid=!0)}else a.question.values&&Array.isArray(a.question.values)&&a.question.values.length>0&&(a.question.valid=!0),a.question.values&&!Array.isArray(a.question.values)&&(a.question.valid=!0);return a.question.valid},o.on("$destroy",(function(){delete a.control[a.question.id]}))}}}]),app.directive("signupDefault",[function(){return{template:'<div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.email.$invalid && !form.email.$pristine) || (form.$submitted && form.email.$invalid) }"><input type="email" name="email" ng-model="signupForm.email" ng-minlength="4" ng-maxlength="80" ng-pattern="validator(\'email\')" keyboard-watcher required> <span class="input-label">{{::translation.emailRegistration}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.email.$error" ng-if="form.email.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="email">{{::translation.messages.invalid_email}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div><div class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.password.$invalid && !form.password.$pristine) || (form.$submitted && form.password.$invalid) }"><input type="{{password.checked?\'text\':\'password\'}}" name="password" ng-model="signupForm.password" ng-minlength="6" ng-maxlength="12" ng-pattern="validator(\'password\')" required keyboard-watcher passwordmix> <span class="input-label">{{::translation.password}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.password.$error" ng-if="form.password.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div></div><div class="col pr-0 pb-0 pt-0 pl-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.confirmPassword.$invalid && !form.confirmPassword.$pristine) || (form.$submitted && form.confirmPassword.$invalid) }"><input type="{{password.checked?\'text\':\'password\'}}" name="confirmPassword" ng-model="signupForm.confirmPassword" required keyboard-watcher compare-to="signupForm.password"> <span class="input-label">{{::translation.confirmPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.confirmPassword.$error" ng-if="form.confirmPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="compareTo">{{::translation.messages.password_not_matched}}</div></div></div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="country" ng-class="{ \'has-error\' : (form.country.$invalid && !form.country.$pristine) || (form.$submitted && form.country.$invalid) }"><input type="text" class="custom-select custom-input" name="country" ng-model="countryName" on-tap="countriesModal(\'country\', form)" readonly required> <span>{{::translation.country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.country.$error" ng-if="form.country.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div><div ng-if="isPromo"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="promocode" ng-class="{ \'has-error\' : form.promocode.$invalid && !form.promocode.$pristine }"><input type="text" name="promocode" ng-model="signupForm.promocode" on-tap="promoCodes.length && countriesModal(\'promocode\', form)" ng-minlength="2" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <span>{{::translation.promo}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.promocode.$error" ng-if="form.promocode.$dirty"><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="p-0"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" ng-class="{\'error-checkbox\': (form.terms.$invalid && !form.terms.$pristine) || (form.$submitted && form.terms.$invalid) }" name="terms" ng-model="signupForm.terms" ng-required="true">{{::translation.login_bottom_text}}</ion-checkbox></div></div><div class="p-0" ng-if="constants.signupEnableCheckKYC"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0 layout-row customer-policy"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info layout-column" ng-class="{\'error-checkbox\': (form.kyc.$invalid && !form.kyc.$pristine) || (form.$submitted && form.kyc.$invalid) }" name="kyc" ng-model="signupForm.acceptKyc" ng-required="true">{{::translation.readAndAgree}}</ion-checkbox><span class="layout-column font-12 mt-10 pl-0 item border-0"><a href="{{constants.externalLinks.kycPolicy}}" target="_blank">{{::translation.kyc}}</a></span></div></div><div class="p-0" ng-if="isAcceptPromotions"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" name="acceptPromotions" ng-model="signupForm.acceptPromotions">{{::translation.acceptPromotions}}</ion-checkbox></div></div>'}}]),app.directive("signupLong",[function(){return{template:'<div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="firstName" ng-class="{ \'has-error\' : (form.firstName.$invalid && !form.firstName.$pristine) || (form.$submitted && form.firstName.$invalid) }"><input type="text" name="firstName" ng-model="signupForm.firstName" ng-minlength="1" ng-maxlength="32" required keyboard-watcher class="has-context-menu" ng-pattern="validator(\'name\')"> <span>{{::translation.firstName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.firstName.$error" ng-if="form.firstName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Firtsname}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="lastName" ng-class="{ \'has-error\' : (form.lastName.$invalid && !form.lastName.$pristine) || (form.$submitted && form.lastName.$invalid) }"><input type="text" name="lastName" ng-model="signupForm.lastName" ng-minlength="1" ng-maxlength="32" ng-pattern="validator(\'name\')" keyboard-watcher class="has-context-menu" required> <span>{{::translation.lastName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.lastName.$error" ng-if="form.lastName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Lastname}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.email.$invalid && !form.email.$pristine) || (form.$submitted && form.email.$invalid) }"><input type="email" name="email" ng-model="signupForm.email" ng-minlength="4" ng-maxlength="80" ng-pattern="validator(\'email\')" keyboard-watcher class="has-context-menu" required> <span class="input-label">{{::translation.emailRegistration}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.email.$error" ng-if="form.email.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="email">{{::translation.messages.invalid_email}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div><div class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.password.$invalid && !form.password.$pristine) || (form.$submitted && form.password.$invalid) }"><input type="{{showPassword ?\'text\':\'password\'}}" name="password" ng-model="signupForm.password" ng-minlength="6" ng-maxlength="12" ng-pattern="validator(\'password\')" keyboard-watcher class="has-context-menu" required> <span class="input-label">{{::translation.password}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.password.$error" ng-if="form.password.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div></div><div class="col pr-0 pb-0 pt-0 pl-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.confirmPassword.$invalid && !form.confirmPassword.$pristine) || (form.$submitted && form.confirmPassword.$invalid) }"><input type="{{showPassword?\'text\':\'password\'}}" name="confirmPassword" ng-model="signupForm.confirmPassword" required keyboard-watcher class="has-context-menu" compare-to="signupForm.password"> <span class="input-label-75">{{::translation.confirmPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.confirmPassword.$error" ng-if="form.confirmPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="compareTo">{{::translation.messages.password_not_matched}}</div></div></div></div><div class="p-0"><ion-checkbox class="border-0 modern-checkbox font-12 sub-info" ng-model="showPassword">{{::translation.show_password}}</ion-checkbox></div><div class="row p-0"><div class="col col-33 pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border country-wrapper" id="country" ng-class="{ \'has-error\' : (form.country.$invalid && !form.country.$pristine) || (form.$submitted && form.country.$invalid) }" on-tap="countriesModal(\'country\', form)"><div class="flag-icon" ng-class="\'flag-icon-\' + signupForm.country.toLowerCase()"></div><div class="flag-plus" ng-if="signupForm.country">+</div><input type="text" class="custom-select custom-input flag-select" name="country" ng-model="phoneCode" readonly keyboard-watcher required> <span>{{::translation.country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.country.$error" ng-if="form.country.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div class="col col-67 pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="phone" ng-class="{ \'has-error\' : (form.phone.$invalid && !form.phone.$pristine) || (form.$submitted && form.phone.$invalid) }"><input type="tel" name="phone" ng-model="signupForm.phone" minLength="5" maxLength="17" ng-minlength="5" ng-maxlength="17" required keyboard-watcher ng-pattern="validator(\'phone\')"> <span>{{::translation.phone}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.phone.$error" ng-if="form.phone.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div></div><div ng-if="isPromo"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="promocode" ng-class="{ \'has-error\' : form.promocode.$invalid && !form.promocode.$pristine }"><input ng-if="promoCodes.length > 0" type="text" name="promocode" ng-model="signupForm.promocode" on-tap="countriesModal(\'promocode\', form)" ng-minlength="2" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <input ng-if="promoCodes.length == 0" type="text" name="promocode" ng-model="signupForm.promocode" ng-minlength="2" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <span>{{::translation.promo}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.promocode.$error" ng-if="form.promocode.$dirty"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="p-0"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-if="!constants.signUpOver18CheckboxIsHidden"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" ng-class="{\'error-checkbox\': (form.terms.$invalid && !form.terms.$pristine) || (form.$submitted && form.terms.$invalid) }" name="terms" ng-model="signupForm.terms" ng-required="!constants.termsNonLeverage || !signupForm.termsNonLeverage" ng-if="!constants.signupTermsExtended"><span>{{::translation.login_bottom_text}}</span>&nbsp; <span ng-if="constants.externalLinks.accountTerms">{{::translation.login_bottom_text2}}</span></ion-checkbox><a ng-if="constants.externalLinks.accountTerms" target="_blank" class="text-transform-capitalize" href="{{constants.externalLinks.accountTerms}}">{{::translation.login_bottom_text2}}</a><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" ng-class="{\'error-checkbox\': (form.terms.$invalid && !form.terms.$pristine) || (form.$submitted && form.terms.$invalid) }" name="terms" ng-model="signupForm.terms" ng-required="!constants.termsNonLeverage || !signupForm.termsNonLeverage" ng-if="constants.signupTermsExtended">{{::translation.over_18_year_part1}}</ion-checkbox><div ng-if="!constants.disclaimerV2enabled"><a ng-if="constants.externalLinks.termsAndConditions" ng-href="{{constants.externalLinks.termsAndConditions + \'?lang=\' + lang}}" target="_blank">{{::translation.over_18_year_part2}}&nbsp;</a> <span ng-if="constants.externalLinks.termsAndConditions === \'\'">{{::translation.over_18_year_part2}}&nbsp;</span> <a ng-if="constants.externalLinks.privacyPolicy" ng-href="{{constants.externalLinks.privacyPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_a}}&nbsp;</a> <span ng-if="constants.externalLinks.privacyPolicy === \'\'">, {{::translation.over_18_year_part2_a}}&nbsp;</span> <a ng-if="constants.externalLinks.riskDislosure" ng-href="{{constants.externalLinks.riskDislosure + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_b}}</a> <a ng-if="constants.externalLinks.orderExecutionPolicy" ng-href="{{constants.externalLinks.orderExecutionPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_c}}</a> <a ng-if="constants.externalLinks.conflictsofInterestPolicy" ng-href="{{constants.externalLinks.conflictsofInterestPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_d}}</a> <a ng-if="constants.externalLinks.clientCategorisation" ng-href="{{constants.externalLinks.clientCategorisation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_e}}</a> <a ng-if="constants.externalLinks.investorCompensation" ng-href="{{constants.externalLinks.investorCompensation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_g}}</a> <a ng-if="constants.externalLinks.keyInformation" ng-href="{{constants.externalLinks.keyInformation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_i}}</a> <span ng-if="constants.signupTermsExtended">{{::translation.over_18_year_part3}}&nbsp;</span> <a ng-if="constants.externalLinks.accountTerms && translation.over_18_year_part4" ng-href="{{constants.externalLinks.accountTerms + \'?lang=\' + lang}}" target="_blank">{{::translation.over_18_year_part4}}&nbsp;</a> <span ng-if="!constants.externalLinks.accountTerms && translation.over_18_year_part4">{{::translation.over_18_year_part4}}&nbsp;</span> <span ng-if="translation.over_18_year_part5">{{::translation.over_18_year_part5}}</span></div><div ng-if="constants.disclaimerV2enabled"><span ng-repeat="(key, link) in constants.externalLinks" class="disclaimerV2enabledLink"><a href="{{link[lang]}}" target="_blank">{{::translation[key]}}</a></span></div></div></div><div class="p-0" ng-if="constants.signupEnableCheckKYC"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0 layout-row customer-policy"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info layout-column" ng-class="{\'error-checkbox\': (form.kyc.$invalid && !form.kyc.$pristine) || (form.$submitted && form.kyc.$invalid) }" name="kyc" ng-model="signupForm.acceptKyc" ng-required="true">{{::translation.readAndAgree}}</ion-checkbox><span class="layout-column font-12 mt-10 pl-0 item border-0"><a href="{{constants.externalLinks.kycPolicy}}" target="_blank">{{::translation.kyc}}</a></span></div></div><div class="p-0" ng-if="constants.termsNonLeverage"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" name="termsNonLeverage" ng-model="signupForm.termsNonLeverage" ng-required="!signupForm.terms">{{::translation.termsNonLeverage}}</ion-checkbox></div></div><div class="p-0" ng-if="isAcceptPromotions"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" name="acceptPromotions" ng-model="signupForm.acceptPromotions">{{::translation.acceptPromotions}}</ion-checkbox></div></div>'}}]),app.directive("signupSocial",[function(){return{template:'<div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="firstName" ng-class="{ \'has-error\' : (form.firstName.$invalid && !form.firstName.$pristine) || (form.$submitted && form.firstName.$invalid) }"><input type="text" name="firstName" ng-model="signupForm.firstName" ng-minlength="2" ng-maxlength="32" required keyboard-watcher class="has-context-menu" ng-pattern="validator(\'name\')"> <span>{{::translation.firstName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.firstName.$error" ng-if="form.firstName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Firtsname}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="lastName" ng-class="{ \'has-error\' : (form.lastName.$invalid && !form.lastName.$pristine) || (form.$submitted && form.lastName.$invalid) }"><input type="text" name="lastName" ng-model="signupForm.lastName" ng-minlength="1" ng-maxlength="32" ng-pattern="validator(\'name\')" keyboard-watcher class="has-context-menu" required> <span>{{::translation.lastName}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.lastName.$error" ng-if="form.lastName.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_Lastname}}</div></div><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" ng-class="{ \'has-error\' : (form.email.$invalid && !form.email.$pristine) || (form.$submitted && form.email.$invalid) }"><input type="email" name="email" ng-model="signupForm.email" ng-minlength="4" ng-maxlength="80" ng-pattern="validator(\'email\')" keyboard-watcher class="has-context-menu" required> <span class="input-label">{{::translation.emailRegistration}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.email.$error" ng-if="form.email.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="email">{{::translation.messages.invalid_email}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.invalid_email}}</div></div><div class="row p-0"><div class="col pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.password.$invalid && !form.password.$pristine) || (form.$submitted && form.password.$invalid) }"><input type="{{showPassword?\'text\':\'password\'}}" name="password" ng-model="signupForm.password" ng-minlength="6" ng-maxlength="12" ng-pattern="validator(\'password\')" keyboard-watcher class="has-context-menu" required> <span class="input-label">{{::translation.password}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.password.$error" ng-if="form.password.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers_chars}}</div></div></div><div class="col pr-0 pb-0 pt-0 pl-5"><div class="form-group item-input item-stacked-label bottom-border mb-15 pl-0 pb-0" ng-class="{ \'has-error\' : (form.confirmPassword.$invalid && !form.confirmPassword.$pristine) || (form.$submitted && form.confirmPassword.$invalid) }"><input type="{{showPassword?\'text\':\'password\'}}" name="confirmPassword" ng-model="signupForm.confirmPassword" required keyboard-watcher class="has-context-menu" compare-to="signupForm.password"> <span class="input-label-75">{{::translation.confirmPassword}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.confirmPassword.$error" ng-if="form.confirmPassword.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="compareTo">{{::translation.messages.password_not_matched}}</div></div></div></div><div class="p-0"><ion-checkbox class="border-0 modern-checkbox font-12 sub-info" ng-model="showPassword">{{::translation.show_password}}</ion-checkbox></div><div class="row p-0"><div class="col col-33 pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border country-wrapper" id="country" ng-class="{ \'has-error\' : (form.country.$invalid && !form.country.$pristine) || (form.$submitted && form.country.$invalid) }" on-tap="countriesModal(\'country\', form)"><div class="flag-icon" ng-class="\'flag-icon-\' + signupForm.country.toLowerCase()"></div><div class="flag-plus" ng-if="signupForm.country">+</div><input type="text" class="custom-select custom-input flag-select" name="country" ng-model="phoneCode" readonly keyboard-watcher required> <span>{{::translation.country}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.country.$error" ng-if="form.country.$touched || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div></div></div><div class="col col-67 pl-0 pb-0 pt-0 pr-5"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="phone" ng-class="{ \'has-error\' : (form.phone.$invalid && !form.phone.$pristine) || (form.$submitted && form.phone.$invalid) }"><input type="tel" name="phone" ng-model="signupForm.phone" minLength="5" maxLength="17" ng-minlength="5" ng-maxlength="17" required keyboard-watcher ng-pattern="validator(\'phone\')"> <span>{{::translation.phone}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.phone.$error" ng-if="form.phone.$dirty || form.$submitted"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.numbers}}</div></div></div></div><div ng-if="isPromo"><div class="form-group item-input item-stacked-label mb-15 mt-10 pl-0 pb-0 bottom-border" id="promocode" ng-class="{ \'has-error\' : form.promocode.$invalid && !form.promocode.$pristine }"><input ng-if="promoCodes.length > 0" type="text" name="promocode" ng-model="signupForm.promocode" on-tap="countriesModal(\'promocode\', form)" ng-minlength="2" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <input ng-if="promoCodes.length == 0" type="text" name="promocode" ng-model="signupForm.promocode" ng-minlength="2" ng-maxlength="32" keyboard-watcher ng-pattern="validator(\'alphanum\')"> <span>{{::translation.promo}}</span> <i class="icon ion-ios-close-empty"></i> <i class="icon ion-ios-checkmark-empty"></i></div><div class="messages font-12" ng-messages="form.promocode.$error" ng-if="form.promocode.$dirty"><div class="help-block" ng-message="required">{{::translation.messages.required}}</div><div class="help-block" ng-message="minlength">{{::translation.messages.too_short}}</div><div class="help-block" ng-message="maxlength">{{::translation.messages.too_long}}</div><div class="help-block" ng-message="pattern">{{::translation.messages.mixWordsNumbers}}</div></div></div><div class="p-0"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0" ng-if="!constants.signUpOver18CheckboxIsHidden"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" ng-class="{\'error-checkbox\': (form.terms.$invalid && !form.terms.$pristine) || (form.$submitted && form.terms.$invalid) }" name="terms" ng-model="signupForm.terms" ng-required="!constants.termsNonLeverage || !signupForm.termsNonLeverage" ng-if="!constants.signupTermsExtended"><span>{{::translation.login_bottom_text}}</span>&nbsp; <span ng-if="constants.externalLinks.accountTerms">{{::translation.login_bottom_text2}}</span></ion-checkbox><a ng-if="constants.externalLinks.accountTerms" target="_blank" class="text-transform-capitalize" href="{{constants.externalLinks.accountTerms}}">{{::translation.login_bottom_text2}}</a><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" ng-class="{\'error-checkbox\': (form.terms.$invalid && !form.terms.$pristine) || (form.$submitted && form.terms.$invalid) }" name="terms" ng-model="signupForm.terms" ng-required="!constants.termsNonLeverage || !signupForm.termsNonLeverage" ng-if="constants.signupTermsExtended">{{::translation.over_18_year_part1}}</ion-checkbox><a ng-if="constants.externalLinks.termsAndConditions" ng-href="{{constants.externalLinks.termsAndConditions + \'?lang=\' + lang}}" target="_blank">{{::translation.over_18_year_part2}}&nbsp;</a> <span ng-if="constants.externalLinks.termsAndConditions === \'\'">{{::translation.over_18_year_part2}}&nbsp;</span> <a ng-if="constants.externalLinks.privacyPolicy" ng-href="{{constants.externalLinks.privacyPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_a}}&nbsp;</a> <span ng-if="constants.externalLinks.privacyPolicy === \'\'">, {{::translation.over_18_year_part2_a}}&nbsp;</span> <a ng-if="constants.externalLinks.riskDislosure" ng-href="{{constants.externalLinks.riskDislosure + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_b}}</a> <a ng-if="constants.externalLinks.orderExecutionPolicy" ng-href="{{constants.externalLinks.orderExecutionPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_c}}</a> <a ng-if="constants.externalLinks.conflictsofInterestPolicy" ng-href="{{constants.externalLinks.conflictsofInterestPolicy + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_d}}</a> <a ng-if="constants.externalLinks.clientCategorisation" ng-href="{{constants.externalLinks.clientCategorisation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_e}}</a> <a ng-if="constants.externalLinks.investorCompensation" ng-href="{{constants.externalLinks.investorCompensation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_g}}</a> <a ng-if="constants.externalLinks.keyInformation" ng-href="{{constants.externalLinks.keyInformation + \'?lang=\' + lang}}" target="_blank">, {{::translation.over_18_year_part2_i}}</a> <span ng-if="constants.signupTermsExtended">{{::translation.over_18_year_part3}}&nbsp;</span> <a ng-if="constants.externalLinks.accountTerms && translation.over_18_year_part4" ng-href="{{constants.externalLinks.accountTerms + \'?lang=\' + lang}}" target="_blank">{{::translation.over_18_year_part4}}&nbsp;</a> <span ng-if="!constants.externalLinks.accountTerms && translation.over_18_year_part4">{{::translation.over_18_year_part4}}&nbsp;</span> <span ng-if="translation.over_18_year_part5">{{::translation.over_18_year_part5}}</span></div></div><div class="p-0" ng-if="constants.signupEnableCheckKYC"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0 layout-row customer-policy"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info layout-column" ng-class="{\'error-checkbox\': (form.kyc.$invalid && !form.kyc.$pristine) || (form.$submitted && form.kyc.$invalid) }" name="kyc" ng-model="signupForm.acceptKyc" ng-required="true">{{::translation.readAndAgree}}</ion-checkbox><span class="layout-column font-12 mt-10 pl-0 item border-0"><a href="{{constants.externalLinks.kycPolicy}}" target="_blank">{{::translation.kyc}}</a></span></div></div><div class="p-0" ng-if="constants.termsNonLeverage"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" name="termsNonLeverage" ng-model="signupForm.termsNonLeverage" ng-required="!signupForm.terms">{{::translation.termsNonLeverage}}</ion-checkbox></div></div><div class="p-0" ng-if="isAcceptPromotions"><div class="form-group item-stacked-label mb-15 mt-10 pl-0 pb-0"><ion-checkbox class="mt-10 border-0 modern-checkbox font-12 sub-info" name="acceptPromotions" ng-model="signupForm.acceptPromotions">{{::translation.acceptPromotions}}</ion-checkbox></div></div><div class="content"><div class="sub-details text-center padding add-line font-11" on-tap="navigate(\'welcome\')">{{::translation.signupWith}}</div><div class="social"><button class="button button-social font-14" on-tap="signinWithGoogle(form)" type="button" ng-if="socialAuthService.isProviderReady(\'google\')"><i class="button-google"></i> Google</button> <button class="button button-social font-14" on-tap="signinWithFacebook(form)" type="button" ng-if="socialAuthService.isProviderReady(\'facebook\')"><i class="button-facebook"></i> Facebook</button></div><div class="sub-info text-center padding font-12">{{::translation.login_bottom_text}}</div></div>'}}]),app.directive("smsVerification",["$state","$ionicHistory","$ionicLoading","$ionicTabsDelegate","$ionicModal","LocaleService","Storage","$timeout","UserService","Utils","Validator","API","ErrorService","constants","LocalStorage",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g){return{restrict:"E",link:function(e,a){var r=3e5;if(i.wait().then((function(t){e.translation=t})),e.validator=d.getPattern,e.user=l.get(),!(!s.get("smsVerification")||s.get("smsVerification")&&e.user.smsVerified)){t&&t.clearHistory(),e.sms={phone:"",code:"",codeSent:!1};e.modal=angular.copy({isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1});var v,f=g.get("smsVerification");f&&(v=JSON.parse(f),Date.now()-v.expire<=r)?e.sms=JSON.parse(f).data:e.sms.phone=e.user.phone,o.fromTemplateUrl("templates/directives/popup-sms.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then((function(t){e.modal=t,e.modal.show()})),e.close=function(){e.modal.hide()},e.sendPhone=function(t){if(c.formRevalidate(t),t.$valid){e.sms.code="",e.sms.codeSent=!1;var a={phone:e.sms.phone};return n.show(),u.smsVerificationPhone(a).then(h).then((function(t){n.hide(),e.sms.codeSent=!0,g.set("smsVerification",JSON.stringify({data:e.sms,expire:Date.now()+r}))})).catch((function(t){n.hide(),e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textTitle=t&&i.translation.messages[t.code]||i.translation.messages.general_error,e.modal.textContent=i.translation.messages.smsPhoneFailed,e.modal.actionText=i.translation.try_again,e.modal.state=!0}))}},e.sendCode=function(t){if(c.formRevalidate(t),t.$valid){var a={phone:e.sms.phone,code:e.sms.code};return n.show(),u.smsVerificationCode(a).then(h).then((function(t){n.hide(),e.user.smsVerified=!0,g.remove("smsVerification"),e.modal.hide()})).catch((function(t){n.hide(),e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textTitle=t&&i.translation.messages[t.code]||i.translation.messages.general_error,e.modal.textContent=i.translation.messages.smsVerificationFailed,e.modal.actionText=i.translation.try_again,e.modal.state=!0}))}},a.on("$destroy",(function(){t&&t.clearHistory(),e.modal&&e.modal.remove(),e.modal=null,e.sms=null}))}function h(e,t){if(0===e.status)throw new m({source:"AppController",type:p.error.type.VALIDATION,severity:"warning",code:e.code||"general_error",data:{request:t,response:e}});return e}}}}]),app.directive("tickpChart",["$timeout","$ionicLoading","chartThemes","ServerTimeService",function(e,t,n,a){return{restrict:"E",scope:{asset:"<",chart:"<"},replace:!0,link:function(o,i){var s,r,l=[],c={line:3,ohlc:2,candlestick:1},d=o.$watch("chart.ready",(function(a,l){a!==l&&a&&(s=null,i.children().remove(),t.show({noBackdrop:!0}),e((function(){var e;e=o.chart.data,s=tickp(i[0],{theme:n.light,moment:moment,hammer:Hammer}),set_textRenderContext(s.ctx),s.initDataGraph([],(function(e,t){alert(t)}),[]),s.setSize(i[0].clientWidth,i[0].clientHeight),e.forEach((function(e){s.addCandleWithoutPlot(e[0],e[1],e[2],e[3],e[4])})),s.showVolumeChart(!1),s.setCandleBorder("#999999",0),s&&s.setDigits(o.asset.digits),s.changemode(1),s.setTimeScale(0),s.cp.type=c[o.chart.type.type],s.horizontallines=[],s.verticallines=[],s.setCrossHairVisibility(!1),f(),i.find("canvas")[1],r=!0,t.hide()}),350))})),u=o.$watch("asset.lastUpdateTime",(function(e,t){var n,a,i,l;e&&e!==t&&r&&s&&(n=v(),a=[o.asset.ask,o.asset.bid],i=a[1]>n[2]?a[1]:n[2],l=a[1]<n[3]?a[1]:n[3],s.updateRecord(n[0]+","+n[1]+","+i+","+l+","+a[1]),f())})),m=o.$watch((function(){return a.time}),(function(e,t){var n,i;e!==t&&s&&s&&(n=v(),(i=a.time)%(60*parseInt(o.chart.range,10)*1e3)==0&&(s.addNewRecord(i+","+n[4]+","+n[4]+","+n[4]+","+n[4]),f()))})),p=o.$watch("chart.type",(function(e,t){e!==t&&e&&s&&(s.cp.type=c[e.type],f())})),g=o.$watch("chart.range",(function(e,t){e!==t&&e&&s&&f()}));function v(){var e=s.current.ohlc[s.current.ohlc.length-1];return[s.current.ts[s.current.ts.length-1]].concat(e)}function f(){s.preparePlot(),s.plot()}i.on("$destroy",(function(){d(),u(),m(),p(),g(),l.length>0&&l.forEach((function(e){ionic.EventController.offGesture(e.ref,e.gesture,e.handler)})),log("chart destroy")}))},template:'<div style="position: relative" class="chart" id="chart"></div>'}}]),models.service("AssetModel",["Utils",function(e){return function(t,n,a){var o=this;function i(){}o.id=t.id,o.outputName=t.OutputName,o.contractSize=t.ContractSize,o.category=t.Category,o.currency=t.Currency,o.description=t.Description,o.digits=t.Digits,o.isShow=e.toBoolean(t.IsShow),o.isTradeable=t.IsTradeable,o.isClean=1===t.IsClean,o.marginMode=t.MarginMode,o.markup=t.Markup,o.profitMode=t.ProfitMode,o.percentage=t.Percentage,o.initialMargin=t.InitialMargin,o.tickSize=t.TickSize,o.tickPrice=t.TickValue,o.openPrice=0,o.closePrice=0,o.isActive=n,o.s=t.s,o.isEsma=t.isEsma,o.bid=t.Bid,o.ask=t.Ask,o.mid=(o.bid+o.ask)/2,o.high=t.High,o.low=t.Low,o.lastPrice=t.LastPrice,o.lastUpdateTime=t.TickTime,o.action=null,o.bidDirection="",o.askDirection="",o.isClient=t.isClient,o.isFavorite=a||!1,o.prevAsk=t.Ask,o.prevBid=t.Bid,o.prevMid=o.mid,o.displayName=function(e,t){if("FOREX"==t)return e.slice(0,3)+"/"+e.slice(3);return e}(t.OutputName,t.Category),o.tradingTimes=t.TradingTimes?function(e){var t={};function n(e){return 1===e.toString().length?"0"+e:e}function a(e){var t=[];return e.forEach((function(e){t.push(function(e){return[n(e.OpenHour)+":"+n(e.OpenMinute),n(e.CloseHour)+":"+n(e.CloseMinute)]}(e))})),t}function o(n){t[n]=a(e[n])}return Object.keys(e).map(o),t}(t.TradingTimes):"",o.spread=t.Spread,o.swapsLong=t.SwapsLong,o.swapsShort=t.SwapsShort,o.swapsCode=null!==t.SwapsCode&&t.SwapsCode>=0?t.SwapsCode:3,o.maxLot=t.MaxLot,o.minLot=t.MinLot,o.stepLot=t.StepLot,o.unit=t.Unit,o.expiration=1e3*t.Expiration,o.isSessionValid=t.IsCurrentSessionValid,o.stopLevels=t.StopLevels,o.baseCurrency=0===o.profitMode?o.s.substr(0,6).slice(-3):o.currency,o.ending=0===o.profitMode?o.s.substr(6):"",o.swapsCurrency=2===o.swapsCode?o.baseCurrency:o.currency,o.convAssets=[],o.convAssetsMargin=[],o.displayOrder=t.DisplayOrder||0,o.quickAccess=e.toBoolean(t.QuickAccess)||!1,o.tradingConditions=t.TradingConditions||"",o.lotDigits=e.extractDigits(o.stepLot)||2,this.dailyChange=function(){var e=0!==o.lastPrice?(o.bid-o.lastPrice)/o.lastPrice*100:0;return 0===parseFloat(e.toFixed(2))?Math.abs(e).toFixed(2):e.toFixed(2)},this.dailyChangeRender=function(){return o.dailyChange()>0?"up":"down"},this.markupBid=function(){return o.markup>0?o.bid-Math.floor(o.markup/2)*(1/Math.pow(10,o.digits)):o.markup<0?o.bid-(o.markup-Math.floor(o.markup/2))*(1/Math.pow(10,o.digits)):o.bid},this.markupAsk=function(){return o.markup>0?o.ask+(o.markup-Math.floor(o.markup/2))*(1/Math.pow(10,o.digits)):o.markup<0?o.ask+Math.floor(o.markup/2)*(1/Math.pow(10,o.digits)):o.ask},this.getMarkupMid=function(){return(this.markupBid()+this.markupAsk())/2},this.spreadCalc=function(){return o.spread>0?o.spread+o.markup:0},this.update=function(e){var t=parseFloat(e[1]),n=parseFloat(e[2]),a=(t+n)/2;o.prevBid<o.bid?o.bidDirection="asset-up"===o.bidDirection?"asset-up2":"asset-up":o.prevBid>o.bid&&(o.bidDirection="asset-down"===o.bidDirection?"asset-down2":"asset-down"),o.prevAsk<o.ask?o.askDirection="asset-up"===o.askDirection?"asset-up2":"asset-up":o.prevAsk>o.ask&&(o.askDirection="asset-down"===o.askDirection?"asset-down2":"asset-down"),o.prevMid<o.mid?o.midDirection="asset-up"===o.midDirection?"asset-up2":"asset-up":o.prevMid>o.mid&&(o.midDirection="asset-down"===o.midDirection?"asset-down2":"asset-down"),o.prevAsk=o.ask,o.prevBid=o.bid,o.prevMid=o.mid,o.high=e[3],o.low=e[4],o.lastUpdateTime=e[5],o.lastPrice=e[6],o.bid=t,o.ask=n,o.mid=a},this.clear=function(){o.dailyChange=i,o.markupBid=i,o.markupAsk=i,o.update=i,o.spreadCalc=i,o.markUpMid=i},this.setConvAssets=function(e){o.convAssets=e},this.setConvAssetsMargin=function(e){o.convAssetsMargin=e}}}]),models.service("ClosedTradeModel",["$filter","constants","AssetService","InvestCalcService","CurrencyConvertService","UserService",function(e,t,n,a,o,i){return function(e){var a,s=this;s.user=i.get(),s.orderId=e.OrderID,s.openPrice=e.OpenPrice,s.openTime=parseInt(e.OpenTime+"000",10),s.closePrice=e.ClosePrice,s.closeTime=parseInt(e.CloseTime+"000",10),s.contractSize=e.ContractSize,s.action=t.actionsId[e.Cmd],s.actionCode=e.Cmd,s.symbolId=e.id,s.outputName=e.OutputName,s.digits=e.Digits,s.lots=e.Volume,s.amount=s.contractSize*s.lots,s.stopLoss=e.sl,s.takeProfit=e.tp,s.commission=e.Commission,s.taxes=e.Taxes,s.swap=e.Storage,s.profit=e.Profit,s.comment=e.Comment,s.tradeAction=function(e){if(e<6)return"trades";if(6===e)return"balance";if(7===e)return"credit";return"other"}(e.Cmd),a=n.collection.get({id:e.id}),s.convAssets=o.find(n,s.user.currency,"USD","",1),a&&(s.symbolCurrency=a.currency),this.profitToUsd=function(){return o.doConvert(s.convAssets,s.profit,"buy",1)},this.clear=function(){a=null},this.fromSocial=function(){return/^S:/.test(s.comment)}}}]),models.service("DocumentModel",["$q","API","ErrorService","Utils","constants",function(e,t,n,a,o){return function(a){var i=this;function s(e){if(1!==e.status)throw new n({source:"DocumentModel",type:o.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.id=a.id,i.type=a.type,i.status=a.status,i.url=a.url,i.category=a.category,i.baseCategory=a.baseCategory,i.uploadStatus=0,i.isUploading=!1,this.startUpload=function(n){i.isUploading=!0;var a={name:n.name,size:n.size,type:o.documentFromTypes[i.type]};return t.document(a).then(s).then((function(e){return e.fileMD5})).catch((function(t){return i.isUploading=!1,e.reject(t)}))},this.loadChunk=function(t,n,a){var o=new FileReader;return o.readAsBinaryString(a),e((function(e){o.onload=function(n){o=null,e({fileMD5:t,data:n.target.result})}}))},this.sendChunk=function(e){return t.documentUpload(e).then(s).then((function(e){i.uploadStatus=e.percent}))},this.uploadFile=function(t,n){var a=51206,o=Math.ceil(t.size/a),s=[];function r(e){return function(){return i.loadChunk(n,e,t.slice(e,e+a)).then(i.sendChunk)}}for(var l=0;l<=o-1;l++)s.push(r(l*a));return s.reduce((function(e,t){return e.then(t)}),e.resolve()).then((function(){i.isUploading=!1})).catch((function(t){return i.isUploading=!1,e.reject(t)}))}}}]),models.service("DocumentV2Model",["$q","API","ErrorService","Utils","constants",function(e,t,n,a,o){return function(i){var s=this;function r(e){if(1!==e.status)throw new n({source:"DocumentV2Model",type:o.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}s.id=i.id,s.type=a.toSnakeCase(i.type),s.origType=i.type,s.status=i.status,s.images=[],s.twoSidedToggled=!1,s.subTypes=i.subtypes.map((function(e){return{id:a.toSnakeCase(e.title),title:e.title,origTitle:e.title,images:e.images}})),s.subType=_.find(s.subTypes,{origTitle:i.subtype}),s.uploaded=i.uploaded,s.uploadStatus=0,s.isUploading=!1,s.selectedSubType=null,s.hasUploaded=s.uploaded.filter((function(e){return e})).length>0,this.updateImages=function(){2===s.uploaded.filter((function(e){return e})).length?s.images=[0,1]:s.images=0===s.selectedSubType.images?[0]:Array(s.selectedSubType.images).fill(null).map((function(e,t){return t}))},s.subType&&(s.selectedSubType=s.subType,this.updateImages()),this.addImage=function(){s.images.push(s.images.length)},this.toggleImage=function(){1===s.images.length?s.images.push(s.images.length):s.images=s.images.slice(0,1)},this.startUpload=function(n,a){s.isUploading=!0;const o={name:n.name,size:n.size,type:s.origType,subType:s.selectedSubType.origTitle,image:a,id:s.id};return t.documentSet(o).then((function(e){return r(e)})).then((function(e){return e.fileMD5})).catch((function(t){return s.isUploading=!1,e.reject(t)}))},this.loadChunk=function(t,n,a){var o=new FileReader;return o.readAsBinaryString(a),e((function(e){o.onload=function(n){o=null,e({fileMD5:t,data:n.target.result})}}))},this.sendChunk=function(e){return t.documentUpload(e).then(r).then((function(e){s.uploadStatus=e.percent}))},this.uploadFile=function(t,n){var a=51206,o=Math.ceil(t.size/a),i=[];function r(e){return function(){return s.loadChunk(n,e,t.slice(e,e+a)).then(s.sendChunk)}}for(var l=0;l<=o-1;l++)i.push(r(l*a));return i.reduce((function(e,t){return e.then(t)}),e.resolve()).then((function(){s.isUploading=!1})).catch((function(t){return s.isUploading=!1,e.reject(t)}))},this.updateStatus=function(){s.subType=s.selectedSubType}}}]),models.service("OpenTradeModel",["$filter","$rootScope","Utils","constants","AssetService","InvestCalcService","CurrencyConvertService","UserService",function(e,t,n,a,o,i,s,r){return function(e,t){var l=this;function c(){}l.orderId=e.OrderID,l.asset=t,l.outputName=e.OutputName,l.action=a.actionsId[e.Cmd],l.actionCode=e.Cmd,l.openPrice=e.OpenPrice,l.openTime=parseInt(e.OpenTime+"000",10),l.closeTime=parseInt(e.CloseTime+"000",10),l.digits=e.Digits,l.lots=e.Volume,l.contractSize=e.ContractSize,l.amount=l.contractSize*l.lots,l.stopLoss=e.sl,l.takeProfit=e.tp,l.commission=e.Commission,l.taxes=e.Taxes,l.swap=e.Storage,l.symbolCurrency=l.asset.currency,l.comment=e.Comment,l.closePriceDirection=null,l.profitDirection=null,l.user=r.get(),l.showConvertToUsd=a.showConvertToUsd||!1,l.convUSDAssets=s.find(o,l.user.currency,"USD","",1),this.closePrice=function(){return l.action.match(/^sell/)?(l.closePriceDirection=l.asset.askDirection,l.asset.markupAsk()):l.action.match(/^buy/)?(l.closePriceDirection=l.asset.bidDirection,l.asset.markupBid()):void 0},this.pendingCurrentPrice=function(){return l.action.match(/^sell/)?(l.closePriceDirection=l.asset.bidDirection,l.asset.markupBid()):l.action.match(/^buy/)?(l.closePriceDirection=l.asset.askDirection,l.asset.markupAsk()):void 0},this.profit=function(){var e=0;if(("buy"===l.action||"sell"===l.action)&&l.closePrice()>0){l.asset.currency;var t=i.getPairVal(l.action,l.openPrice,l.closePrice(),l.digits);0===l.asset.profitMode&&l.asset.outputName.slice(-3),e=l.asset.profitMode<2?t*l.amount:t*(l.asset.tickPrice/l.asset.tickSize)*l.lots,e=s.doConvert(l.asset.convAssets,e,l.action,l.asset.profitMode)}return l.profitDirection=parseFloat(e)>0?"up":"down",parseFloat(e)},this.profitToUsd=function(){return s.doConvert(l.convUSDAssets,n.decimalRound(l.profit(),l.user.currencyDigits),"buy",1)},this.distance=function(){var e=0;return l.action.match(/^sell/)&&(e=l.openPrice-l.closePrice()),l.action.match(/^buy/)&&(e=l.closePrice()-l.openPrice),3===l.asset.digits||5===l.asset.digits?parseFloat(i.fromPoints(e,l.asset.digits)/10).toFixed(1):parseInt(i.fromPoints(e,l.asset.digits),10)},this.pendingDistance=function(){return i.fromPoints(Math.abs(l.pendingCurrentPrice()-l.openPrice)/10,l.asset.digits)},this.update=function(e){l.asset=o.collection.get({id:e.id}),l.outputName=e.OutputName,l.action=a.actionsId[e.Cmd],l.actionCode=e.Cmd,l.openPrice=e.OpenPrice,l.openTime=parseInt(e.OpenTime+"000",10),l.closeTime=parseInt(e.CloseTime+"000",10),l.digits=e.Digits,l.lots=e.Volume,l.contractSize=e.ContractSize,l.amount=l.contractSize*l.lots,l.stopLoss=e.sl,l.takeProfit=e.tp,l.commission=e.Commission,l.taxes=e.Taxes,l.swap=e.Storage,l.symbolCurrency=l.asset.currency,l.comment=e.Comment},this.clear=function(){l.closePrice=c,l.profit=c,l.distance=c,l.asset=null,l.user=null},this.getTrade=function(){return{orderId:l.orderId,openTime:l.openTime,openPrice:l.openPrice,lots:l.lots,amount:l.amount,symbol:l.outputName,swaps:l.swap,stopLoss:l.stopLoss,takeProfit:l.takeProfit,action:l.action,profit:l.profit()}},this.fromSocial=function(){return/^S:/.test(l.comment)}}}]),models.service("QuestionModel",["constants",function(e){return function(t,n){var a=this;a.translation=n,a.id=t.id,a.label=a.translation.questionnarie_questions[t.id.toString()]||t.title,a.allowOther=!!t.free,a.onlyOther=!1,a.isCountryAnswers=!1,a.isMulti=!!t.multi,a.formModelName="question-"+a.id,a.other="",a.answers=t.answers.map((function(e){return s(e,t.values.indexOf(e)>=0)}));var o=t.values.map((function(e){return s(e)})),i=t.values.length>0?s(t.values[0]):"";function s(t,n){var o=e.questionnaireAnswersOverrides&&e.questionnaireAnswersOverrides[a.id]&&e.questionnaireAnswersOverrides[a.id][t],i=a.translation&&(a.translation[o]||a.translation.questionnarie_answers[t.toString()])||t.toString();return{id:t.toString(),label:i,_selected:n}}a.values=a.isMulti?o:i,!a.answers.length&&a.allowOther&&(a.onlyOther=!0),a.allowOther&&(a.other=t.other,a.answers.push(s(-1,a.other.length>0)),Array.isArray(a.values)&&a.other.length>0&&a.values.push(s(-1))),a.answers.length>100&&!a.allowOther&&(a.isCountryAnswers=!0),a.group=t.group,a.parentAnswers=t.parentAnswers||[],a.valid=!1,a.formatAnswer=s}}]),models.service("TransactionHistoryModel",["$filter","constants","Utils",function(e,t,n){return function(e){var t=this;t.amount=e.amount,t.bankAcccountNumberLast4Digits=e.bankAcccountNumberLast4Digits,t.bankName=e.bankName,t.confirmDate=parseInt(1e3*parseInt(e.confirmDate,10),10),t.creditCardLast4Digits=e.creditCardLast4Digits,t.creditcardType=e.creditcardType,t.method=e.method&&n.toCamelCase(e.method.toString()),t.requestDate=parseInt(1e3*parseInt(e.requestDate,10),10),t.type=e.type,t.live=n.toBoolean(e.live),t.login=e.login,t.currency=e.currency,t.transactionId=e.transactionId,t.fromTradingAccount=e.fromMt4AccountId>0?e.fromMt4AccountId:null,t.toTradingAccount=e.toMt4AccountId>0?e.toMt4AccountId:null,t.clear=function(){}}}]),models.service("UserModel",["constants","LocalStorage","appsflyer","Utils","config","Storage",function(e,t,n,a,o,i){return function(){var t=this;function n(e){var t=(i.get("currencies")||[]).find((function(t){return t.currency===e.currency}));return{login:e.login,currency:e.currency,isCryptoCurrency:a.toBoolean(parseInt(t.crypto)),leverage:e.leverage||100,active:a.toBoolean(e.active),balance:e.balance,equity:e.equity,freeMargin:e.freeMargin,marginLevel:e.marginLevel,margin:e.margin||0,credit:e.credit,source:e.source,live:a.toBoolean(e.live),id:[e.login,e.source,e.live].join("-"),tradingPlatform:e.tradingPlatform||"MT4",cryptoWallet:e.cryptoWallet||{},isEsma:a.toBoolean(e.isESMA),currencyDigits:t.digits,customerType:e.customerType}}t.login="",t.email="",t.firstName="",t.lastName="",t.country="",t.address="",t.city="",t.postCode="",t.phone="",t.birthday="",t.nationalId="",t.citizenship="",t.birthCountry="",t.timeZone="",t.activeTradingAccount=null,t.currency="USD",t.baseCurrency=null,t.currencyDigits=2,t.registrationState=0,t.complianceStatus="",t.complianceStatusNegative=!1,t.language="",t.isSuspended=!1,t.isBlocked=!1,t.tradingAccounts=[],t.loggedIn=!1,t.leverage=o.defaultLeverage||100,t.usCitizen=!1,t.usTaxId="",t.smsVerified=!1,t.state="",t.liveAccountExists=!1,t.customerType="",t.otpEnabled=!1,t.classification="",t.isMarried=!1,t.tnc=!1,t.token=null,t.tin="",t.taxCountry="",t.companyName="",t.riskAcceptance=!1,t.riskApprovalDate=!1,t.depositValidationRequired=!1,t.birthPlace="",t.funded=!1,t.customerId="",t.gender=void 0,t.regulation="",t.intercomHash="",t.emailVerificationRequired=!1,this.onLogin=function(e){if(t.customerId=e.hashedCustomerId,t.login=e.login,t.email=e.login,t.firstName=e.firstName,t.lastName=e.lastName,t.country=e.country,t.address=e.address,t.city=e.city,t.postCode=e.postCode,t.phone=e.phone.replace("+",""),t.birthday=e.birthday,t.nationalId=e.nationalId,t.citizenship=e.citizenship,t.birthCountry=e.birthCountry,t.registrationState=e.registrationState,t.salesStatus=e.salesStatus,t.complianceStatus=e.complianceStatus,t.setComplianceStatus(),t.language=e.language,t.isSuspended=a.toBoolean(e.isSuspended),t.isBlocked=a.toBoolean(e.isBlocked),t.usCitizen=1===e.usCitizen||!1,t.usTaxId=e.usTaxId,t.smsVerified=a.toBoolean(e.smsVerified),t.liveAccountExists=a.toBoolean(e.mt4AccountsLiveExists),t.baseCurrency=e.currency,t.state=e.state||"",t.customerType=e.customerType||"",t.otpEnabled=!!e.otpEnabled,t.classification=e.classification,t.depositValidationRequired=a.toBoolean(e.validationRequired),t.birthPlace=e.birthPlace,t.intercomHash=e.intercomHash||"",e.mt4Accounts.length>0){if(t.tradingAccounts=e.mt4Accounts.map(n),t.activeTradingAccount=t.setActiveAccount(),!t.activeTradingAccount)return;t.currency=t.activeTradingAccount.currency;var o=(i.get("currencies")||[]).find((function(e){return e.currency===t.currency}));t.currencyDigits=o.digits}t.isMarried=a.toBoolean(e.married),t.tnc=a.toBoolean(e.terms),t.tin=e.tin,t.taxCountry=e.taxCountry,t.companyName=e.companyName,t.riskApprovalDate=e.riskApprovalDate,this.updateRisk(),t.funded=a.toBoolean(e.funded),t.gender=e.gender,t.regulation=e.regulation,t.emailVerificationRequired=a.toBoolean(e.emailVerificationRequired)},this.updateRisk=function(){if(e.scoringRules){var n=_.find(e.scoringRules,{classification:t.classification});n?n.hasOwnProperty("acceptPopup")&&!0===n.acceptPopup&&0===t.riskApprovalDate.length&&(t.riskAcceptance=!0):t.riskAcceptance=!1}else t.riskAcceptance=!1},this.addTradingAccount=function(e){var a=n(e);t.tradingAccounts.push(a),a.live&&(t.liveAccountExists=!0)},this.setActiveAccount=function(){return t.tradingAccounts.filter((function(e){return e.active})).shift()},this.switchAccount=function(e,n){t.tradingAccounts.forEach((function(t){t.active=!1,t.login===e&&t.live===n&&(t.active=!0)})),t.activeTradingAccount=t.setActiveAccount(),t.currency=t.activeTradingAccount.currency,t.currencyDigits=(i.get("currencies")||[]).find((function(e){return e.currency===t.currency})).digits},this.updateBalance=function(e){var n=t.getAccount(e.login,1===e.live);n&&(n.balance=e.Balance,n.margin=e.Margin,n.equity=e.Equity,n.credit=e.Credit,n.freeMargin=n.equity-n.margin)},this.isDemoAccounts=function(){return t.tradingAccounts.filter((function(e){return!e.live})).length},this.isLiveAccounts=function(){return this.tradingAccounts.filter((function(e){return e.live})).length},this.getAccount=function(e,t){return this.tradingAccounts.filter((function(n){return n.login===e&&n.live===t})).pop()},this.updatePersonalDetails=function(e){this.firstName=e.firstName,this.lastName=e.lastName,this.birthday=e.birthday,this.country=e.country,this.currency=e.currency,this.address=e.address,this.city=e.city,this.postCode=e.postCode,this.phone=e.phone.replace("+",""),this.citizenship=e.citizenship,this.state=e.state||"",this.customerType=e.customerType||"",this.currencyDigits=(i.get("currencies")||[]).find((function(t){return t.currency===e.currency})).digits,this.classification=e.classification,this.depositValidationRequired=a.toBoolean(e.validationRequired)},this.setComplianceStatus=function(){"approved"!==this.complianceStatus?(["no kyc","rejected","partial kyc","awaiting review"].indexOf(this.complianceStatus)>-1&&(this.complianceStatusNegative=!0),["partial kyc - can trade"].indexOf(this.complianceStatus)>-1&&(this.complianceStatusNegative=!1)):this.complianceStatusNegative=!1},this.getCustomer=function(){return{login:this.login,email:this.email,firstName:this.firstName,lastName:this.lastName,country:this.country,address:this.address,city:this.city,postCode:this.postCode,phone:this.phone,birthday:this.birthday,citizenship:this.citizenship,currency:this.currency,registrationState:this.registrationState,salesStatus:this.salesStatus,complianceStatus:this.complianceStatus,isSuspended:this.isSuspended,isBlocked:this.isBlocked,loggedIn:this.loggedIn,smsVerified:this.smsVerified,liveAccountExists:this.liveAccountExists,tradingAccounts:this.tradingAccounts,funded:this.funded,customerId:this.customerId}},this.isRegulated=function(){var n=e.regulations;return!!n&&(n.hasOwnProperty(t.regulation)&&!0===n[t.regulation]&&!t.classification.length)}}}]),models.service("WithdrawRequestModel",["$filter","constants","Utils",function(e,t,n){return function(e){var n=this;n.confirmDate=parseInt(1e3*parseInt(e.confirmDate,10),10),n.requestDate=parseInt(1e3*parseInt(e.requestDate,10),10),n.status=t.withdrawRequestStatusToType[e.status]||"",n.amount=e.amount,n.currency=e.currency,n.method=t.paymentMethodsToTypes[e.method],n.login=e.login,n.id=e.id,n.transactionId=e.transactionId,n.clear=function(){}}}]);var module=angular.module("appsflyer",[]);function isLocalStorageAvailable(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}function MemoryStorage(){var e=new Map;console.warn("Browser localstorage is not available. Using in-memory storage"),this.setItem=function(t,n){e.set(t,n)},this.getItem=function(t){return e.get(t)},this.removeItem=function(t){e.delete(t)},this.clear=function(){e.clear()},this.key=function(t){return Array.from(e.values())[t]}}module.provider("appsflyer",(function(){this.$get=["LocalStorage",function(e){var t,n=this.devKey,a=this.appId,o=this.options;return{init:function(){ionic.Platform.isIOS()&&(o.appId=a),o.devKey=n;try{(t=window.plugins.appsFlyer).initSdk(o,(function(t){var n=e.get("appsflyer");if(log("AppsFlyer SDK init successful"),!n||"done"!==n)return e.set("appsflyer","object"==typeof t?JSON.stringify(t||{}):t),t}),(function(){log("Failed to init AppsFlyer SDK")}))}catch(e){log("AppsFlyer plugin is not found in window.plugins")}},setAppUserId:function(e){try{t.setAppUserId(e)}catch(e){log("AppsFlyer plugin is not found in window.plugins")}},trackEvent:function(e,n){try{t.trackEvent(e,n)}catch(e){log("AppsFlyer plugin is not found in window.plugins")}}}}]})),services.factory("API",["$socket","$q","$timeout","$http","md5","config","constants","ErrorService",function(e,t,n,a,o,i,s,r){var l={},c=/\b(connect|disconnect|serverTime|loginToken|error|refreshClient|refreshSite)/,d=new e(i.socket.serverAddress,i.socket),u=i.socket.serverAddress.replace("wss","https")+"/http-api";function m(e,a){return function(a){var o,c=p(e,a),u=angular.extend({},a||{},{reqId:c}),m=t.defer();return l[c]?t.reject("[createEmitMethod] Request exists"):(d.emit(e,u||{}),l[c]=m.promise,d.on(e,(function(t){d.off(e),delete l[c],"string"==typeof t&&(t=angular.fromJson(t)),o&&n.cancel(o),o=null,m.resolve(t)})),o=n((function(){throw d.off(e),console.log("canceling request!",angular.copy(u)),delete l[c],m.reject("cancelRequest"),new r({source:"API",type:s.error.type.VALIDATION,severity:"warning",code:"cancelRequest",data:{request:angular.copy(u)}})}),i.requestTimeout),m.promise)}}function p(e,t){return o.createHash(e+JSON.stringify(t))}return d.on("disconnect",(function(){console.log("socket disconnected!!!"),l={},Object.keys(d.subscribers()).forEach((function(e){c.test(e)||d.removeAllListeners(e)}))})),{setup:function(){d=new e(i.socket.serverAddress,i.socket)},setSocketUrl:function(t){d=new e("wss://"+t+".pandats-client.io",i.socket)},getSocket:function(){return d},connect:function(){var e=t.defer();return log("socket is connecting..."),d.getInstance().connected?(log("socket connected!"),e.resolve()):(d.connect(),d.on("connect",(function(){return console.log("socket connected!"),e.resolve()})),e.promise)},disconnect:function(){console.log("socket is disconnecting..."),d.disconnect()},login:m("login"),loginToken:m("loginToken"),loginDetails:m("loginDetails"),loginDetailsMT4:m("loginDetailsMT4Login"),loginTokenDetails:m("loginTokenDetails"),loginTokenDetailsMT4:m("loginTokenDetailsMT4Login"),quotesHistoryByTimeFrame:m("QuotesHistoryByTimeFrame"),mt4AccountSetPassword:m("MT4AccountSetPassword"),mt4LoginToken:m("MT4LoginToken"),mt4Login:m("MT4Login"),mt4Logout:m("MT4Logout"),mt4GetClientSymbols:m("MT4GetClientSymbols"),mt4GetAllSymbols:m("MT4GetAllSymbols"),MT4GetSymbolCategories:m("MT4GetSymbolCategories"),mt4GetSymbolsSnapshot:m("MT4GetSymbolsSnapshot"),mt4GetOpenPositions:m("MT4GetOpenPositions"),mt4GetClosedPositions:m("MT4GetClosedPositions"),mt4GetChart:m("MT4GetChart"),mt4GetChartHistory:m("MT4GetChartHistory"),mt4OpenPosition:m("MT4OpenPosition"),mt4ClosePosition:m("MT4ClosePosition"),mt4UpdatePosition:m("MT4UpdatePosition"),mt4DeletePosition:m("MT4DeletePosition"),mt4SwitchAccount:m("MT4AccountLogin"),getCustomerDetails:m("customerDetails"),logout:m("logout"),quotesSubscribe:m("quotesSubscribe"),quotesUnsubscribe:m("quotesUnsubscribe"),registration:m("registration"),personalDetails:m("updateCustomerDetailsRegistrationState"),updatePersonalDetails:m("updateCustomerDetails"),questionnaire:m("questionnaire"),mt4CreateAccount:m("MT4AccountCreate"),forgotPassword:m("forgotPassword"),changePassword:m("changePassword"),updateCustomer:m("updateCustomer"),transactionHistory:m("transactions"),getCountries:m("countries"),getCurrencies:m("currencies"),creditCardDeposit:m("creditCardDeposit"),geo:m("ipInfo"),depositValue:m("depositValue"),demoDepositValues:m("demoDepositValues"),documents:m("documents"),document:m("document"),documentUpload:m("documentUpload"),documentDelete:m("documentDelete"),documentsGet:m("documentsGet"),documentSet:m("documentSet"),getTickets:m("tickets"),closeTicket:m("ticketClose"),createTicket:m("ticket"),transfer:m("transfer"),timezone:m("timezone"),promocode:m("promocode"),smsVerification:m("smsVerification"),smsVerificationPhone:m("smsVerificationPhone"),smsVerificationCode:m("smsVerificationCode"),location:m("location"),brandConfiguration:m("brandConfiguration"),wiretransfer:m("wiretransfer"),platform:m("platform"),bitcoinOrangepayDeposit:m("bitcoinOrangepayDeposit"),hostedPageDeposit:m("hostedPageDeposit"),qrcodeDeposit:m("qrcodeDeposit"),pendingDeposit:m("pendingDeposit"),initializeTransfer:m("initializeTransfer"),customerWithdrawalMethods:function(e,t){switch(t){case"Get":return function(e){var t={"Content-Type":"application/json"};return function(n,o){return o&&o.token&&(t.token=o.token),console.log("api base url:::",u),a({method:"GET",url:u+"/"+e,headers:t,params:n})}}(e);case"Post":case"Put":case"Delete":throw new Error("not implemented!")}}("withdrawalCustomerAccountMethods","Get"),getWithdrawalMethods:m("withdrawalMethods"),getLocalBanks:m("localBanks"),getWithdrawalReasons:m("withdrawalReasons"),withdrawal:m("withdrawalWireTransfer"),withdrawalLocalWireTransfer:m("withdrawalLocalWireTransfer"),withdrawalCreditCard:m("withdrawalCreditCard"),withdrawalSkrill:m("withdrawalSkrill"),withdrawalNeteller:m("withdrawalNeteller"),withdrawalFasaPay:m("withdrawalFasaPay"),withdrawalUnionPay:m("withdrawalUnionPay"),withdrawalCrypto:m("withdrawalCrypto"),withdrawalPapara:m("withdrawalPapara"),withdrawalMefete:m("withdrawalMefete"),withdrawalOther:m("withdrawalOther"),withdrawalCancel:m("withdrawalCancel"),withdrawalHistory:m("withdrawalRequests"),getPaymentMethods:m("depositMethods"),getFriendInvites:m("friendInvites"),getFriendInviteId:m("friendInviteId"),getOTP:m("getOTP"),setOTP:m("setOTP"),sendOTP:m("sendOTP"),questions:m("questions"),calcScoring:m("customerScore"),acceptRisk:m("riskApproval"),complianceStatus:m("complianceStatus"),acceptTnc:m("acceptTerms"),initializeVerification:m("initializeVerification"),registrationThirdParty:m("registrationThirdParty"),loginThirdParty:m("loginDetailsThirdParty"),validateTCFeatures:m("tcValidate"),generateTCLink:m("tcGetURL"),loginWebTrader:m("loginDetailsWebTrader"),loginTokenWebTrader:m("loginTokenMT4Login"),socialClientToken:m("socialClientToken"),socialRegister:m("socialRegister"),emailVerificationCode:m("emailVerificationCode"),emailVerificationCodeResend:m("emailVerificationCodeResend"),externalLink:m("externalLink"),subscribe:function(e,t){d.on(e,t)},unsubscribe:function(e){d.off(e)},onConnect:function(e){console.log("onconnect"),d.on("connect",e)},onDisconnect:function(e){d.on("disconnect",e)},onReconnect:function(e){d.on("reconnect",e)},onReconnectAttempt:function(e){d.on("reconnect_attempt",(function(t){e(t)}))},getToken:function(e,n){var o={method:"GET",url:i.loginUrl,params:{Login:e,Password:n,Source:s.system.loginSources[0].id},timeout:5e3};return a(o).then((function(e){if("1"!=e.data.Code)throw new r({source:"API",type:s.error.type.VALIDATION,code:"authFailed",severity:"warning",data:{request:o.params,response:e.data}});return e.data})).catch((function(e){if(e&&"object"==typeof e&&"-1"==e.status)throw new r({source:"API",type:s.error.type.NETWORK,code:"authTimeout",data:{request:o.params}});return t.reject(e)}))}}}]),services.service("AccountService",["UserService","$state","constants","API","Utils","LoginService","ErrorService",function(e,t,n,a,o,i,s){function r(e){if(1!==e.status)throw new s({source:"AccountService",type:n.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}return this.switchAccount=function(t,n){var s={login:t,live:o.fromBoolean(n)},l=e.get();return a.mt4SwitchAccount(s).then(r).then((function(){return l.switchAccount(t,n),l=e.get(),i.mt4ClearServices().then(i.mt4InitServices)}))},this.createAccount=function(t,i,s,l){var c=e.get(),d={live:o.fromBoolean(t),currency:i||c.currency,leverage:s||c.leverage};return n.customerTypeForTA&&(d.customerType=c.customerType||""),l&&(d.tradingPlatform=l),a.mt4CreateAccount(d).then(r).then((function(e){return c.addTradingAccount(e.mt4Account),t&&(c.registrationState=n.userState.questionnaire),e}))},this.checkTradingAccounts=function(){var t=e.get();if(t.emailVerificationRequired)return"emailVerification";if(!(t.registrationState<=n.userState.personal||t.riskAcceptance)){if(n.scoringRules){var a=_.find(n.scoringRules,{classification:t.classification});if(a&&a.hasOwnProperty("acceptPopup")&&!0===a.acceptPopup&&"Negative"===t.classification)return console.log("risk acceptance"),"signupQuestionnaire"}return 0!==t.tradingAccounts.length||t.liveAccountExists?0===t.tradingAccounts.length&&t.liveAccountExists?"accountFrozen":t.activeTradingAccount?void 0:"root.app.manageAccounts":"createFirstAccount"}},this}]),services.service("AssetService",["$q","config","constants","ErrorService","API","AssetCollection","AssetModel","UserService","FavoritesService","Validator","Utils","CurrencyConvertService","CustomerEventsService",function(e,t,n,a,o,i,s,r,l,c,d,u,m){var p=this;function g(e){if(1!==e[0].status||1!==e[1].status)throw new a({source:"AssetService",type:n.error.type.SYSTEM,severity:"critical",code:"getSymbolsFailed",data:{failedRequest:1!==e[0].status?"mt4GetAllSymbols":1!==e[1].status&&"mt4GetClientSymbols"}});return e}function v(){return e.all([o.mt4GetAllSymbols(),o.mt4GetClientSymbols()]).then(g).then((function(e){var t=[],n=e[0].Symbols,a=e[1].Symbols;return n.forEach((function(e){var n=_.find(a,{id:e.id});n?(e.IsTradeable=n.IsTradeable,e.Markup=n.Markup,e.Percentage=n.Percentage,e.MaxLot=n.MaxLot,e.MinLot=n.MinLot,e.StepLot=n.StepLot,e.SwapsLong=n.SwapsLong,e.SwapsShort=n.SwapsShort,e.SwapsCode=null!==n.SwapsCode&&n.SwapsCode>=0?n.SwapsCode:3,e.StopLevels=n.hasOwnProperty("StopLevels")?n.StopLevels:e.StopLevels,e.IsShow=!n.hasOwnProperty("IsShow")||d.toBoolean(n.IsShow),e.isClient=!0):e.IsShow=!1,t.push(e)})),t}))}function f(){return o.MT4GetSymbolCategories().then((function(e){p.assetCategories=function(e){if(1!==e.status)throw new a({source:"AssetService",type:n.error.type.SYSTEM,severity:"critical",code:"GetSymbolCategoriesFailed"});return e.Categories}(e)})).catch((function(){p.assetCategories=n.assetsTypes}))}function h(e){var t=function(){var e=r.get();return e&&e.activeTradingAccount&&e.activeTradingAccount.isEsma&&"esma"}();e.forEach((function(e){var n=function(e,t){var n=l.get(t.id)&&!0;return"esma"===e?(t.s.match(/\!/)?(t.IsShow=1,t.isEsma=!0):t.IsShow=0,new s(t,!1,n)):(t.s.match(/\!/)&&(t.IsShow=0,t.isEsma=!0),new s(t,!1,n))}(t,e);p.collection.add(n)}))}function b(){var e=p.collection.find({isShow:!0,isClient:!0});p.clientCollection.fill(e);var t=p.clientCollection.find({quickAccess:!0});p.clientQuickAccessCollection.fill(t)}function y(){var e=p.collection.find({isShow:!0});p.clientCollection.fill(e)}function w(e){e.reduce((function(e,t){var n=p.collection.get({id:t[0]});n&&n.update(t)}),e[0]),e=null}function k(){var e=u,t=r.get();p.collection.getAll().forEach((function(n){var a=[],o=[];try{a=e.find(p,n.baseCurrency,t.currency,n.ending,n.profitMode),o=0===n.profitMode?e.find(p,n.currency,t.currency,n.ending,n.profitMode):a,n.setConvAssets(a),n.setConvAssetsMargin(o)}catch(e){console.warn("NO CONV ASSETS FOR:",n.s,"TO USER CURRENCY:",t.currency)}}))}return p.collection=null,p.clientCollection=null,p.clientQuickAccessCollection=null,p.assetCategories=null,this.init=function(){var t=r.get();return p.collection=new i,p.clientCollection=new i,p.clientQuickAccessCollection=new i,o.unsubscribe("subscribe"),log("assetService init"),t.loggedIn&&t.activeTradingAccount?e.all([v().then(h).then(b).then(k).then(p.subscribe),f()]):function(){function e(e){if(1!==e.status)throw new a({source:"AssetService",type:n.error.type.SYSTEM,severity:"critical",code:"getAllSymbolsFailed"});return e.Symbols}return o.mt4GetAllSymbols().then(e)}().then(h).then(y).then(k).then(p.subscribe)},this.sortByFavorites=function(e){var t=l.getAll(),n=p.clientCollection.find(e),a=[];return t.forEach((function(e){a.push(_.find(n,{id:e}))})),a},this.subscribe=function(){log("Starting to listen to socket updates"),o.subscribe("quotes",w);var e=r.get().activeTradingAccount;o.quotesSubscribe({real:e?d.fromBoolean(e.live):0}),o.unsubscribe("MT4MarginCallAdd"),o.subscribe("MT4MarginCallAdd",(function(){var e=r.get();m.trackEvent(m.events.MarginCall,{marginLevel:e.activeTradingAccount.marginLevel})}))},this.getAssetByName=function(e){return p.clientCollection.get({outputName:e.toUpperCase()})},this.clear=function(){log("clear asset service"),o.quotesUnsubscribe(),o.unsubscribe("quotes",w),p.collection&&p.collection.clear()},this}]),services.service("ClosedTradeService",["$q","moment","API","constants","ClosedTradeCollection","ClosedTradeModel","ServerTimeService","UserService",function(e,t,n,a,o,i,s,r){var l=this;function c(e){function n(e){return t.utc(s.time).startOf(e)}var a,o,i,r,l=e.split(" ");return l[1].toLowerCase().match("day")&&(o=parseInt(l[0],10),a=n("day").subtract(o,"day")),l[1].toLowerCase().match("week")&&(i=parseInt(l[0],10),a=n("week").subtract(i,"week")),l[1].toLowerCase().match("month")&&(r=parseInt(l[0],10),a=n("month").subtract(r,"month")),a.unix()}function d(t){return 1===t.status&&t.Trades?t:e.reject(t.code)}function u(e){e.Trades.forEach((function(e){l.collection.add(new i(e))}))}return l.collection=null,this.init=function(){l.collection=new o,r.get().isLoggedInMT4||log("not starting closedtrades service")},this.getHistory=function(e){return function(e){return l.collection&&l.collection.clear(),n.mt4GetClosedPositions(function(e){var t,n;switch(e){case"day":t=c("0 days");break;case"threedays":t=c("2 days");break;case"week":t=c("0 week");break;case"month":t=c("0 month");break;case"threemonths":t=c("2 month");break;case"all":t=1}return n=parseInt(s.time/1e3,10),{Start:t,End:n}}(e))}(e).then(d).then(u).catch((function(e){log("no closed trades",e)}))},this.clear=function(){log("clear closedtrade service"),l.collection&&l.collection.clear()},this}]),services.service("CountryService",["$q","$http","config","constants","ErrorService","Utils","Storage","BaseCollection",function(e,t,n,a,o,i,s,r){var l=new r;return this.init=function(){var e=s.get("countries").map((function(e){return e.customFields||(e.customFields=[]),e}));l.fill(e),log("Initializing country service")},this.get=function(){return l.getAll()},this.getCitizenships=function(){const e=l.findBy({},(function(e){return e.citizenship.length>0}));return _.chain(e).uniqBy("citizenship").orderBy("citizenship").value()},this.getAllowedCountries=function(){return l.find({allowRegistration:1})},this.getCountryStates=function(e){return e.states.length>0?_.orderBy(e.states,["stateName"]):[]},this.getAllowedUserCountries=function(e){return l.getAll().map((function(t){return t.code===e&&(t.allowRegistration=1),t})).filter((function(e){return 1===e.allowRegistration}))},this.countries=l,this}]),services.factory("CurrencyConvertService",["constants","UserService",function(e,t){var n=new RegExp(/USD/),a=t.get();function o(a,o,s,r,l,c){var d=[];if(t.get().loggedIn&&!c)return i(a,o,s,r,l);if(o===s)return d;var u={s:o+e.currencySeparator+s+r},m=_.assign({},u,{s:s+e.currencySeparator+o+r}),p=a.collection.get(u),g=!0;if(p||(p=a.collection.get(m),g=!1),p)return d.push({asset:p,reverse:g}),d;if("USD"!==o){if(g=!1,(p=a.collection.get({s:"USD"+e.currencySeparator+o+r}))||(p=a.collection.get({s:o+e.currencySeparator+"USD"+r}),g=!0),!p)throw console.warn("NOT FOUND FROM_ASSET:",o,s,r,l),new Error("FROM_ASSET IS NOT FOUND");d.push({asset:p,reverse:g,isUSD:n.test(p.s)})}if("USD"!==s){var v=a.collection.get({s:"USD"+e.currencySeparator+s+r}),f=!0;v||(v=a.collection.get({s:s+e.currencySeparator+"USD"+r}),f=!1),v||console.warn("NOT FOUND TO_ASSET:",o,s,r,l),d.push({asset:v,reverse:f,isUSD:n.test(v.s)})}return d}function i(t,n,s,r,l,c){var d=[],u=0===l,m=e.defaultCurrencyConvertCategory||"FOREX";if(a.activeTradingAccount&&void 0!==a.activeTradingAccount.isCryptoCurrency&&(m=a.activeTradingAccount.isCryptoCurrency?"CRYPTO":"FOREX"),n===s)return d;var p={s:n+e.currencySeparator+s+r,isClient:!0},g=u?_.assign({},p,{category:c||m}):_.assign({},p,{}),v=_.assign({},g,{s:s+e.currencySeparator+n+r}),f=t.collection.get(g),h=!0;return f||(f=t.collection.get(v),h=!1),f?(d.push({asset:f,reverse:h}),d):c?function(t,n,a,i,s){var r=[],l=0===s;if("USD"!==n){var c={s:n+e.currencySeparator+"USD"+i,isClient:!0},d=l?_.assign({},c,{category:"FOREX"}):_.assign({},c,{}),u=_.assign({},d,{s:"USD"+e.currencySeparator+n+i}),m=t.collection.get(d),p=!0;if(m||(m=t.collection.get(u),p=!1),!m)return o(t,n,a,i,s,!0);r.push({asset:m,reverse:p,isUSD:!0})}if("USD"!==a){var g={s:"USD"+e.currencySeparator+a+i,isClient:!0},v=l?_.assign({},g,{category:"FOREX"}):_.assign({},g,{}),f=_.assign({},v,{s:a+e.currencySeparator+"USD"+i}),h=t.collection.get(v),b=!0;if(h||(h=t.collection.get(f),b=!1),!h)return o(t,n,a,i,s,!0);r.push({asset:h,reverse:b,isUSD:!0})}return r}(t,n,s,r,l):i(t,n,s,r,l,"FOREX")}return{find:o,currencyConvert:function(n,a,o,s,r,l,c){if(t.get().loggedIn&&!c)return i(a,o,s,r,l);var d=s,u=r.match(/^buy/)?"Bid":"Ask";if("USD"!==a){var m=n.collection.get({s:"USD"+e.currencySeparator+a}),p=!1;m||(m=n.collection.get({s:a+e.currencySeparator+"USD"}),p=!0),d=p?s*m["markup"+u]():s/m["markup"+u]()}if("USD"!==o){var g=n.collection.get({s:"USD"+e.currencySeparator+o}),v=!0;g||(g=n.collection.get({s:o+e.currencySeparator+"USD"}),v=!1),d=v?d*g["markup"+u]():d/g["markup"+u]()}return d},doConvert:function(e,t,n,a){return e.reduce((function(e,t){var o=function(e,t,n,a){if(a){if("sell"===t||"sell_limit"===t||"sell_stop"===t)return e.markupAsk();if("buy"===t||"buy_limit"===t||"buy_stop"===t)return e.markupBid()}return 0!==n?e.markupBid():"sell"===t||"sell_limit"===t||"sell_stop"===t?e.markupAsk():"buy"===t||"buy_limit"===t||"buy_stop"===t?e.markupBid():void 0}(t.asset,n,a,t.isUSD);return function(e,t,n){return t?e*n:e/n}(e,t.reverse,o)}),t)}}}]),services.service("CustomerEventsService",["$q","$window",function(e,t){var n,a=this;return this.events={InsufficientFunds:"insufficientFunds",MarginCall:"marginCall",TradeOpen:"tradeOpen",TradeClose:"tradeClose",TradeUpdate:"tradeUpdate",TradeCancel:"tradeCancel",BalanceUpdate:"balanceUpdate",MarginUtilization:"marginUtilization"},this.trackEvent=function(e,n){t.parent&&t.parent.postMessage({source:"nfp",event:"cfd:"+e,payload:n},"*")},this.startSessionPing=function(e){n=setInterval((function(){a.trackEvent("online",{customer:e.getCustomer()})}),1e4)},this.stopSessionPing=function(){n&&clearInterval(n)},this}]),services.service("DocumentService",["UserService","$state","constants","API","Utils","ErrorService","DocumentModel",function(e,t,n,a,o,i,s){var r=this;function l(e){if(1!==e.status)throw new i({source:"DocumentService",type:n.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}return r.documents=[],r.documentsOther=[],this.deleteDocument=function(e){return a.documentDelete(e).then(l).then((function(){return _.remove(r.documentsOther,{id:e.id})}))},this.initDocuments=function(){var e=[];return n.documentTypes.forEach((function(t){var n={id:null,type:t.id,status:"new",url:"",category:t.category,baseCategory:t.baseCategory};e.push(new s(n))})),a.documents().then(l).then((function(e){return r.documentsOther=e.documents.filter((function(e){return"Other"===e.type})).map((function(e){return e.status=n.documentToStatuses[e.status],e})),e})).then((function(e){return _.uniqBy(e.documents,(function(e){return e.type}))})).then((function(t){return e.map((function(e){var a=_.find(t,{type:n.documentFromTypes[e.type]});a&&(e.status=n.documentToStatuses[a.status])})),r.documents=e,r.documents}))},this}]),services.factory("$exceptionHandler",["$log","$window","constants","ErrorService",function(e,t,n,a){var o;function i(e){return{source:e.source,type:n.error.typeById[e.type],severity:e.severity,message:e.message||e.code,data:e.data}}return t.hasOwnProperty("Rollbar")&&(o=t.Rollbar),function(t){return"object"==typeof t&&t instanceof a?function(t){switch(t.severity){case"info":return e.info("Handler",t);case"warning":return o&&o.scope(i(t)).warning(i(t).message),e.warn("Handler",t);case"critical":return o&&o.scope(i(t)).error(i(t).message),e.error("Handler",t);default:return e.debug("Handler",t)}}(t):function(t){return o&&o.error(t),e.error("Application error",t)}(t)}}]),services.service("ErrorService",["constants",function(e){function t(e,t){this.source=e.source,this.type=e.type,this.code=e.code||0,this.severity=e.severity||"critical",this.message=e.message,this.data=e.data}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}]),services.service("ExternalLinkService",["API","$q","constants","ErrorService","LocaleService","UserService",function(e,t,n,a,o,i){return this.getLink=function(s,r){var l=o.lang;if(s.hasOwnProperty("externalLinkType")&&s.externalLinkType){var c=i.get(),d={login:c.activeTradingAccount.login,source:c.activeTradingAccount.source,linkType:s.externalLinkType,language:l,data:r||{}};return e.externalLink(d).then((function(e){return function(e,t){if(0===e.status)throw new a({source:"externalLink",type:n.error.type.VALIDATION,severity:"warning",code:e.code||"general_error",data:{request:t,response:e}});return e}(e,d)})).then((function(e){return e.url}))}var u=t.defer(),m=s[l]?s[l].url:s.en.url;return u.resolve(m),u.promise},this}]),services.service("ExternalScriptLoader",["$q",function(e){return function(){this.load=function(t){return function(e){return!!Array.from(document.getElementsByTagName("script")).find((function(t){return t.getAttribute("src")===e}))}(t)?e.resolve():e((function(e,n){const a=document.createElement("script");a.src=t,a.type="text/javascript",a.async=!1,a.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(a),a.onload=function(){e()},a.onerror=function(){!function(e){const t=Array.from(document.getElementsByTagName("script")).find((function(t){return t.getAttribute("src")===e}));t&&t.parentNode.removeChild(t)}(t),n()}}))}}}]),services.service("FavoritesService",["constants","LocalStorage","UserService",function(e,t,n){var a,o="favorites",i=[];function s(){try{i=JSON.parse(t.get(a))||[]}catch(e){t.remove(a),i=[]}}function r(e){t.set(a,JSON.stringify(e||i))}return this.init=function(){!function(){var e=n.get();a=e&&e.activeTradingAccount?[o,e.login,e.activeTradingAccount.id].join("|"):[o,e.login].join("|")}(),s()},this.getAll=function(){return s(),i},this.get=function(e){return _.find(i,(function(t){return t===e}))},this.add=function(e){s(),i.push(e),r()},this.remove=function(e){_.remove(i,(function(t){return t===e})),r()},this.length=function(){return i.length},this.clearAll=function(){i.length=0,t.remove(a)},this.clear=function(){i.length=0,a=o},this.sync=r,this}]),services.service("FirebaseService",["$q","$http","config","constants","md5","ionicToast",function(e,t,n,a,o,i){var s=this,r=n.socket.serverAddress.replace(/^wss:/,"https:");if(s.isEnabled=n.firebase&&Object.keys(n.firebase).length>0,s.isEnabled){this.getPermission=function(e,t,n){return s.messaging.getToken().then((function(a){return s.fcmToken=a,s.messageSubscribe(e),s.updateToken(a,t,e,n)})).catch((function(e){console.warn("Unable to get permission to notify.",e.toString())}))},this.unregister=function(){if(s.fcmToken)return s.messaging.deleteToken(s.fcmToken)},this.logEvent=function(e,t){s.isEnabled&&s.analytics.logEvent(e,t)},this.setUserId=function(e){if(s.isEnabled){var t=o.createHash(e).toString();s.analytics.setUserId(t)}},this.setScreen=function(e){s.isEnabled&&s.analytics.setCurrentScreen(e)},this.registerSW=function(){return navigator.serviceWorker.register("/mobile/nfp-messaging-sw.js",{scope:"/mobile/firebase-cloud-messaging-push-scope"}).then((function(e){console.warn("Registering custom service worker"),s.messaging.useServiceWorker(e)})).catch((function(e){console.warn("Firebase service worker registration failed",e.toString())}))},this.messageSubscribe=function(e){s.messaging.onMessage((function(e){i.show(e.data.body,"top",!1,5e3,"")}))},this.updateToken=function(e,n,a,o){var i={login:a.login,deviceId:o.toString(),token:n,fcmToken:e};return t.post(r+"/messaging/update",i)};try{firebase.initializeApp(n.firebase),s.messaging=firebase.messaging(),s.analytics=firebase.analytics(),s.registerSW()}catch(e){console.warn("Failed to initialize firebase services",e.toString()),s.isEnabled=!1}return this}console.warn("Firebase services are disabled")}]),services.factory("Init",["$state","$ionicLoading","$ionicHistory","$rootScope","config","constants","ErrorService","API","LoginService","LocaleService","LocalStorage","Storage","UserService","AccountService","ProChartService","CountryService","$q","SocialAuthService","Utils","$cookies","moment","Onesignal","IntercomService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b,y,w,k,C){var S=this;function T(){return log("handle connect"),r.platform({platform:i.platformById.webMobile}),h.init(),k.init(),C.init(),x().then((function(){var e=b.getURLParameterByName("asset");e&&d.save("link",JSON.stringify({name:"asset",params:e}))})).then(v.init).then(l.loginToken).then(l.initServices).then((function(){S.isInitialized=!0,t.hide()})).then(A).then((function(){k.setTag("platform",i.platformById.webMobile)}))}function x(){return u.load("brandConfiguration",!0).then((function(){return u.load(["countries","currencies","geo","withdrawalReasons"])}))}function A(){var e=b.getUrlRemarketing(),t=y.get("remarketing");if(e&&!t){var n=w().add(30,"day").calendar();y.put("remarketing",e,{path:"/",expires:n})}}return S.isInitialized=!1,S.returnStateAfterDisconnect="root.app.assets",this.run=function(){if(console.log("Init run()"),S.isInitialized)return console.log("Already initialized."),f.resolve();{const e=b.getURLParameterByName("endpoint");return e&&r.setSocketUrl(e),c.load().then(r.connect).then(T)}},this.setInitialzied=function(e){S.isInitialized=e},this.updateInitializedStatus=function(){S.isInitialized=m.get().loggedIn&&r.getSocket().getInstance().connected},r.onReconnect((function(){log("onReconnect handler."),c.load().then(x).then(v.init).then(l.loginToken).then(l.initServices).then((function(){return S.isInitialized=!0,t.hide(),a.$emit("reconnect"),e.go("root.app.assets")})).catch((function(n){return log("onReconnect error: ",n),S.isInitialized=!1,t.hide(),e.go("welcome",{cache:!1},{reload:!0})}))})),r.onDisconnect((function(){log("handle disconnect"),S.isInitialized=!1,n.clearHistory(),a.loadingMessage=c.translation.connection||c.messages.connection,t.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:a}),l.clearServices().then((function(){throw new s({source:"API",type:i.error.type.NETWORK,severity:"warning",code:"socketDisconnected"})}))})),this}]),services.service("IntercomService",["$q","config",function(e,t){var n=t.intercomIntegration;return n||console.warn("Intercom services are disabled"),this.init=function(){if(n){var e=t.intercomAppId;window.intercomSettings={app_id:e,hide_default_launcher:!0},function(){var t=window,n=t.Intercom;if("function"==typeof n)n("reattach_activator"),n("update",t.intercomSettings);else{var a=document,o=function(){o.c(arguments)};o.q=[],o.c=function(e){o.q.push(e)},t.Intercom=o;var i=function(){var t=a.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://widget.intercom.io/widget/"+e;var n=a.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)};"complete"===document.readyState?i():t.attachEvent?t.attachEvent("onload",i):t.addEventListener("load",i,!1)}}()}},this.sendUserDetails=function(e){n&&Intercom("boot",{email:e.email,user_hash:e.intercomHash,name:e.firstName})},this.show=function(){n&&Intercom("show")},this.shutdown=function(){n&&Intercom("shutdown")},this}]),services.factory("InvestCalcService",["constants","AssetService","CurrencyConvertService",function(e,t,n){function a(e,t){return e*(1/Math.pow(10,t))}function o(e,t){return e*Math.pow(10,t)}function i(e,t){return"sell"===e||"sell_limit"===e||"sell_stop"===e?t.markupBid():t.markupAsk()}function s(e,t,n,a){var o=a&&"buy"===a?t.markupAsk():t.markupBid(),i=n.activeTradingAccount&&n.activeTradingAccount.leverage||n.leverage,s=t.percentage/100,r=e*t.contractSize,l=1===t.marginMode&&0===t.profitMode?99:t.marginMode;if(2!==l&&t.initialMargin>0){var c=e*t.initialMargin;return 0===l||4===l?c/i:c}switch(l){case 0:return r/i*s;case 1:return r*o*s;case 2:return e*t.initialMargin*s;case 3:return r*(o*(t.tickPrice/t.tickSize))*s;case 4:return r*o/i*s;case 5:case 99:return r*s}}return{updatedPrice:function(e,t){switch(e){case"sell":return t.markupAsk();case"buy":return t.markupBid();default:return i(e,t)}},currentPrice:i,getSymbolCurrency:function(n,a){return a?t.collection.get({outputName:"USD"+e.currencySeparator+n}):t.collection.get({outputName:n+e.currencySeparator+"USD"})},fromPoints:o,getPoints:a,getOpenPrice:function(e,t){switch(e){case"sell":case"sell_limit":case"sell_stop":return t.markupBid();case"buy":case"buy_limit":case"buy_stop":return t.markupAsk()}},getClosePrice:function(e,t,n,o,i){var s=a(o,t.digits);switch(e){case"sell":case"sell_limit":case"sell_stop":return"stopLoss"===i?n+s:n-s;case"buy":case"buy_limit":case"buy_stop":return"stopLoss"===i?n-s:n+s}},getPairVal:function(e,t,n,i){switch(t=Math.round(o(t,i)),n=Math.round(o(n,i)),e){case"sell":case"sell_limit":case"sell_stop":return a(t-n,i);case"buy":case"buy_limit":case"buy_stop":return a(n-t,i)}},getRequiredMargin:s,calcMargin:function(e,t,a,o,i){var r,l=i&&a.swapsCode&&2===a.swapsCode?a.convAssets:a.convAssetsMargin;return r=void 0!==i?i:s(parseFloat(e)||1,a,o,t),{baseVal:n.doConvert(l,r,t,a.profitMode),requiredMargin:r}},calcLeverage:function(e,t){return 0===e.profitMode?Math.ceil(e.contractSize/t):Math.ceil(e.contractSize*e.markupBid()/t)},getPipsLimit:function(e){var t=((e.markupAsk()-e.markupBid())*Math.pow(10,e.digits)+e.stopLevels)/10;return Math.ceil(t)}}}]),services.service("InvestService",["",function(){}]),services.service("LocalStorage",(function(){var e=this,t=isLocalStorageAvailable()?window.localStorage:new MemoryStorage,n="panda-forex__";return this.save=function(e,a){t.setItem(n+e,a)},this.set=this.save,this.get=function(e){return t.getItem(n+e)},this.remove=function(e){t.removeItem(n+e)},this.clear=function(){Object.keys(t).forEach((function(t){t.match(new RegExp("^"+n))&&e.remove(t)}))},this})),services.service("LocaleService",["$q","$http","config","constants","ErrorService","LocalStorage","messages","Utils",function(e,t,n,a,o,i,s,r){var l=this,c={},d=n.languagesPriority;function u(e){if(c.hasOwnProperty(e)&&!c[e].hasOwnProperty("_fallback"))return{data:c[e],lang:e}}function m(e){var i=u(e);return i||t({method:"GET",url:n.localizationPath+e+".json?"+Date.now(),timeout:n.localizationLoadTimeout}).then((function(t){return t.lang=e,t})).catch((function(t){throw new o({source:"LocaleService",type:a.error.type.SYSTEM,severity:"warning",code:"translationNotFound",message:'translation "'+e+'" not found'})}))}return l.lang=!1,l.translation={},l.translationPromise=e.when(l.translation),l.messages=s,this.wait=function(){return e((function(e,t){return l.translationPromise.then(e).catch(t)}))},this.replaceVars=function(e,t){var n=new RegExp("\\$\\{"+e+"\\}","gi");Object.keys(l.translation).forEach((function(e){"string"==typeof l.translation[e]&&(l.translation[e]=l.translation[e].replace(n,t))}))},this.load=function(t){var a,o=r.getURLParameterByName("lang"),p=t||o||i.get("language")||n.defaultLanguage||d.shift();function g(t){var a=_.defaultsDeep({},t.data,s);return l.translation=a,l.replaceVars("brandName",n.traderName),l.lang=t.lang,i.set("language",l.lang),l.translationPromise=e.when(l.translation),a}function v(e){return l.translation._fallback||(c[l.lang]=l.translation),e}return(a=d,a.reduce((function(e,t){return e.catch((function(e){return m(t)}))}),e.when(m(p)))).then(g).catch((function(){return log("Failed to load all translations - fallback to built-in en"),g(u("en")||{data:s,lang:"en"})})).then(v,v)},this}]),services.service("LocationService",["constants","API",function(e,t){return this.enter=function(e){if(e)return t.location({location:e})},this}]),app.service("LoginService",["$q","$timeout","$rootScope","Utils","API","constants","ErrorService","UserService","LocalStorage","ServerTimeService","AssetService","OpenTradeService","ClosedTradeService","TransactionHistoryService","PnlMarginService","FavoritesService","$injector","WithdrawHistoryService","FirebaseService","SocialAuthService","VerificationV2Service","CustomerEventsService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b,y,w,k){var C=this,S=[c.init,v.init,d.init,u.init,m.init,p.init,g.init,h.init,w.init],T=[a.wait(1e3),c.clear,g.clear,u.clear,m.clear,p.clear,v.clear,d.clear,r.clear,h.clear],x=[v.init,d.init,u.init,m.init,p.init,h.init,g.init],A=[g.clear,u.clear,m.clear,p.clear,h.clear,v.clear,d.clear],$=new Fingerprint({canvas:!0}).get();function P(e){if(1!==e.status)throw new s({source:"LoginService",type:i.error.type.VALIDATION,code:"tokenFailed",severity:"warning",data:{response:e}});return e}function _(e){return r.login(e.customer)}function M(e){if(1!==e.status)throw new s({source:"LoginService",type:i.error.type.VALIDATION,code:e.code||"authFailed",severity:"warning",data:{response:e}});return e}function D(e){return r.get().token=e.token,l.set("token",e.token),e}function I(e){if(1!==e.status)throw new s({source:"LoginService",type:i.error.type.VALIDATION,code:"tradeLoginFailed",severity:"warning",data:{response:e}});return e}return this.loginToken=function(){var t=a.getURLParameterByName("token")||l.get("token");return t&&t.length>0?(log("relogin with existing token"),(i.authType&&"webtrader"===i.authType?o.loginTokenWebTrader({token:t,fingerprint:$}):o.loginTokenDetailsMT4({token:t,fingerprint:$})).then(P).then((function(e){return D({token:t}),e})).then(_).then((function(){k.startSessionPing(r.get())})).catch((function(t){return l.remove("token"),k.stopSessionPing(),e.reject(t)}))):(l.remove("token"),e.reject("noToken"))},this.mt4LoginSequence=function(){var t=r.get(),n=t.getTradeableAccount();return n?o.mt4Login({source:n.source,loginID:n.login}).then(I).then(t.onMT4Login).then((function(){t.setActiveAccount(n.login,n.source)})).catch((function(t){return log("can not login to tradeable account",n,t),e.reject(i.loginStatus.failedActiveAccount)})):"2"==t.registrationPhase?e.reject(i.loginStatus.noActiveAccount):void 0},this.mt4ClearServices=function(){return a.runChain(A)},this.mt4InitServices=function(){return a.runChain(x)},this.mt4Logout=function(){var t=r.get();return e((function(e,t){e()})).then((function(){return t.isLoggedInMT4&&o.mt4Logout()}))},this.login=function(e,t,n){var a={login:e,password:t,fingerprint:$};return i.enable2FA&&n&&(a.otpCode=n),o.loginDetailsMT4(a).then(M).then(D).then(_)},this.loginThirdParty=function(e,t,n){var a={login:e,password:"",fingerprint:$,provider:t,tokenThirdParty:n};return o.loginThirdParty(a).then(M).then(D).then(_)},this.loginWebTrader=function(e,t,n){var a={login:e,password:t,source:n,fingerprint:$};return o.loginWebTrader(a).then(M).then(D).then(_)},this.logout=function(){return l.remove("token"),y.signOut(),C.clearServices().then(o.logout).then((function(){l.remove("activeAccount"),k.stopSessionPing()}))},this.initServices=function(){return log("init services"),a.runChain(S)},this.clearServices=function(){return log("clear services"),a.runChain(T)},this}]),services.service("OpenTradeService",["$rootScope","$q","$log","config","constants","API","ErrorService","OpenTradeCollection","OpenTradeModel","AssetService","UserService","Validator","Utils","Onesignal","CustomerEventsService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g){var v=this;function f(e){return 1===e.status&&e.Trades?e:t.reject(e)}function h(e){e.Trades.forEach((function(e){var t=c.collection.get({id:e.id});t&&!function(e){var t=[],n=a.validations.openTrade,i=u(e,n);if(i&&t.push({asset:e.OutputName,tradeId:e.OrderID,validations:i}),t.length>0)return new s({source:"OpenTradeService",severity:"warning",type:o.error.type.VALIDATION,message:"opentrade validation failed",data:t},!0)}(e)&&v.collection.add(new l(e,t))}))}function b(){log("Starting to listen to trade updates"),i.subscribe("MT4NewTrade",v.newTrade),i.subscribe("MT4CloseTrade",v.closeTrade),i.subscribe("MT4UpdateTrade",v.updateTrade),i.subscribe("MT4DeletePosition",v.deleteTrade)}function y(e){var t=d.get();return e.login===t.activeTradingAccount.login&&m.toBoolean(e.live)===t.activeTradingAccount.live}return v.collection=new r,this.init=function(){if(v.collection=new r,d.get().activeTradingAccount)return i.mt4GetOpenPositions().then(f).then(h).then(b).catch((function(e){n.error(new s({source:"OpenTradeService",type:o.error.type.SYSTEM,severity:"warning",code:"noOpenTrades",data:{response:e}}))}));log("not starting opentrades service")},this.newTrade=function(t){if(y(t))if(v.collection.get({orderId:t.Trade.OrderID}))v.updateTrade(t);else{var n=c.collection.get({id:t.Trade.id});if(n){var a=new l(t.Trade,n);v.collection.add(a),e.$emit("pnl"),p.setTag("last_trade_symbol",a.asset.outputName),p.setTag("last_trade_openprice",a.openPrice),p.setTag("last_trade_opentime",a.openTime),p.setTag("last_trade_volume",a.lots),p.setTag("last_trade_category",a.asset.category),g.trackEvent(g.events.TradeOpen,a.getTrade())}}},this.closeTrade=function(t){if(y(t)){var n=v.collection.get({orderId:t.Trade.OrderID});n&&(v.collection.remove(n),e.$emit("pnl"),g.trackEvent(g.events.TradeClose,n.getTrade()))}},this.updateTrade=function(t){if(y(t)){var n=v.collection.get({orderId:t.Trade.OrderID});n&&(n.update(t.Trade),e.$emit("pnl"),g.trackEvent(g.events.TradeUpdate,n.getTrade()))}},this.deleteTrade=function(t){if(y(t)){var n=v.collection.get({orderId:t.OrderID});n&&(v.collection.remove(n),e.$emit("pnl"),g.trackEvent(g.events.TradeCancel,n.getTrade()))}},this.clear=function(){log("clear OpenTradeService"),i.unsubscribe("MT4NewTrade",v.newTrade),i.unsubscribe("MT4CloseTrade",v.closeTrade),i.unsubscribe("MT4UpdateTrade",v.updateTrade),v.collection&&v.collection.clear()},this}]),services.service("PnlMarginService",["$rootScope","constants","UserService","OpenTradeService","CurrencyConvertService","AssetService","Utils","CustomerEventsService",function(e,t,n,a,o,i,s,r){var l,c=this,d=[];function u(){var e=n.get();!e||e&&!e.activeTradingAccount||r.trackEvent(r.events.MarginUtilization,{balance:e.activeTradingAccount.balance,equity:c.equity(),credit:e.activeTradingAccount.balance,freeMargin:c.data.freeMargin,totalPnl:c.data.totalProfit,marginUtilization:c.marginUtilization(),server:e.activeTradingAccount.live?"live":"demo",tradingAccount:e.activeTradingAccount.login})}return c.convAssets=[],c.data={freeMargin:0,totalProfit:0,netPl:0,equity:0,pnl:0},setInterval(u,1e4),this.init=function(){log("PnlMarginService init");var t=n.get();t.activeTradingAccount?(c.convAssets=o.find(i,t.currency,"USD","",1),l=e.$on("pnl",(function(e){e.stopPropagation(),e.preventDefault(),c.profitUnSubscribe(),c.profitSubscribe(),c.calcTotalNetPl()})),c.profitUnSubscribe(),c.profitSubscribe(),c.calcTotalNetPl(),u()):log("not starting PnlMarginService")},this.equity=function(){var e,t=n.get();if(t)return e=t.activeTradingAccount.balance+c.data.netPl+t.activeTradingAccount.credit,c.data.freeMargin=e-t.activeTradingAccount.margin,e},this.marginLevel=function(){var e=n.get();return e.loggedIn&&e.activeTradingAccount.marginLevel>0?c.equity()/e.activeTradingAccount.marginLevel*100:0},this.calcTotalNetPl=function(){if(n.get().activeTradingAccount){var e=0,t=0;return a.collection.getAll().forEach((function(n){e+=n.profit()+n.swap+n.commission+n.taxes,t+=n.profit()})),c.data.totalProfit=e,c.data.netPl=this.data.totalProfit,c.data.equity=this.equity(),c.data.pnl=t,c.data}},this.profitSubscribe=function(){a.collection.getAll().forEach((function(t){var n=e.$watch((function(){return t.asset.bid}),(function(e,t){e!==t&&c.calcTotalNetPl()}));d.push(n)}))},this.profitUnSubscribe=function(){d.forEach((function(e){e&&e()}))},this.marginUtilization=function(){var e=n.get();if(!e||e&&!e.activeTradingAccount)return 0;var t=e.activeTradingAccount.margin,a=c.data.equity,o=0;if(0!==a)o=t/a*100;else if(0!==t)return 999;return o>=0&&o<=200?o:999},this.clear=function(){log("Clear PnlMarginService"),l&&l(),c.profitUnSubscribe(),d=[],c.data.freeMargin=0,c.data.totalProfit=0,c.data.netPl=0,c.data.equity=0,c.data.pnl=0},this}]),services.service("ProChartService",["config",function(e){return this}]),services.service("ProfileRulesHelper",[function(){var e={firstName:{required:!0,rawName:"firstName",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},lastName:{required:!0,rawName:"lastName",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},birthday:{required:!0,rawName:"birthday",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},country:{required:!0,rawName:"country",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},state:{required:!0,rawName:"state",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},city:{required:!0,rawName:"city",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},address:{required:!0,rawName:"address",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},currency:{required:!0,rawName:"currency",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},customerType:{required:!1,rawName:"customerType",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},citizenship:{required:!0,rawName:"citizenship",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},postCode:{required:!0,rawName:"postCode",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1}}},phone:{required:!0,rawName:"phone",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!0},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isUSCitizen:{required:!0,rawName:"usCitizen",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},tin:{required:!1,rawName:"tin",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},taxCountry:{required:!1,rawName:"taxCountry",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},nationalId:{required:!1,rawName:"nationalId",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},companyName:{required:!1,rawName:"companyName",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isMarried:{required:!1,rawName:"married",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},isSpouse:{required:!1,rawName:"spouseAware",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},birthPlace:{required:!1,rawName:"birthPlace",scopes:{registration:{hidden:!1,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},tradingExperience:{required:!1,rawName:"tradingExperience",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},pep:{required:!1,rawName:"is_pep",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},tinAbsenceReason:{required:!1,rawName:"tin_absence_reason",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1}}},gender:{required:!1,rawName:"gender",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!1},clientArea:{hidden:!0,readonly:!0,readonlyIfNotEmpty:!1}}},terms:{required:!1,rawName:"terms",scopes:{registration:{hidden:!0,readonly:!1,readonlyIfNotEmpty:!0},clientArea:{hidden:!0,readonly:!0,readonlyIfNotEmpty:!1}}}};return function(t,n){var a=function(e,t){return Object.keys(e).reduce((function(n,a){return n[a]=Object.assign({},e[a],e[a].scopes[t]),n}),{})}(angular.merge(e,t),n);this.get=function(){return a},this.isHidden=function(e){return a[e].hidden},this.isVisible=function(e){return!a[e].hidden},this.isReadonly=function(e,t){return t?a[e].readonly||t&&a[e].readonlyIfNotEmpty:a[e].readonly},this.isRequired=function(e){return a[e].required},this.getRawName=function(e){return a[e].rawName},this.getRuleByRawName=function(e){var t=Object.keys(a).find((function(t){return a[t].rawName===e}));return t&&a[t]}}}]),services.service("ServerTimeService",["API","Storage",function(e,t){var n=this,a=new Date;function o(e){n.time=parseInt(1e3*parseInt(e,10),10)}return this.time=Date.now(),this.serverTimezone=3,this.clientTimeZone=-a.getTimezoneOffset()/60,this.timeZoneOffset=0,this.init=function(){log("start ServerTimeService"),t.load("timezone").then((function(){n.serverTimezone=parseInt(t.get("timezone"),10),n.timeZoneOffset=n.clientTimeZone-n.serverTimezone})),e.subscribe("serverTime",o)},this.clear=function(){log("clear ServerTimeService"),e.unsubscribe("serverTime",o)},this}]),app.service("$socket",["$rootScope","$timeout",function(e,t){return function(n,a){var o=io(n,a);return this.getInstance=function(){return o},this.connect=function(){t((function(){o.connect()}),0)},this.disconnect=function(){t((function(){o.removeAllListeners(),o.disconnect()}),0)},this.on=function(t,n){var a=function(t){return function(){var n=arguments;e.$apply((function(){try{t.apply(o,n)}catch(e){console.error("Can not apply callback on emit ",e)}}))}}(n);return o.on(t,a),a},this.off=function(e,t){"function"==typeof t?o.removeListener(e,t):o.removeAllListeners(e)},this.emit=function(t,n,a){"function"==typeof a?o.emit(t,n,(function(){var t=arguments;e.$apply((function(){a.apply(o,t)}))})):o.emit(t,n)},this.removeListener=function(e,n){t((function(){o.removeListener(e,n)}),0)},this.removeAllListeners=function(e){t((function(){o.removeAllListeners(e)}),0)},this.subscribers=function(){return o._callbacks},this}}]),services.service("Storage",["$q","API","ErrorService","constants",function(e,t,n,a){var o={};function i(e){if(1!==e.status)throw new n({source:"StorageService",type:a.error.type.VALIDATION,code:"loadStorageItemFailed",severity:"warning",data:{response:e}});return e}function s(e){if(!(e.filter((function(e){return e})).length>0))throw new n({source:"StorageService",type:a.error.type.VALIDATION,code:"loadStorageFailed",severity:"warning",data:{response:e}});return e}function r(e){switch(e){case"currencies":return t.getCurrencies();case"countries":return t.getCountries();case"geo":return t.geo();case"depositValue":return t.depositValue();case"demoDepositValues":return t.demoDepositValues();case"timezone":return t.timezone();case"promocode":return t.promocode();case"smsVerification":return t.smsVerification();case"brandConfiguration":return t.brandConfiguration();case"withdrawalMethods":return t.getWithdrawalMethods();case"localBanks":return t.getLocalBanks();case"withdrawalReasons":return t.getWithdrawalReasons();case"paymentMethods":return t.getPaymentMethods();case"friendInvites":return t.getFriendInvites();case"validateTCFeatures":return t.validateTCFeatures()}}return this.set=function(e,t){o.hasOwnProperty(e)||(o[e]=""),o[e]=t},this.get=function(e){if(o.hasOwnProperty(e))return o[e]},this.remove=function(e){delete o[e]},this.getAll=function(){return o},this.clearAll=function(){o={}},this.load=function(t,n){function a(e,n){if(e){var a=t[n];o[a]=e[a]}}return"string"==typeof t&&n?r(t).then(i).then((function(e){var n=function(e,t){if("brandConfiguration"===e)return function(e){return{acceptPromotions:e.acceptPromotions,allowCredit:!!e.allowCredit,promocode:e.promocode,promoCodes:e.promoCodes||[],smsVerification:e.smsVerification,regulated:e.regulated,timezone:e.timezone,useDemo:e.demoAccountCreation,template:e.registrationTemplate,withdrawalReason:e.withdrawalReason,tradingPlatforms:e.tradingPlatforms||["MT4"],defaultTradingPlatform:e.defaultTradingPlatform||"MT4",maxLiveAccounts:e.maxLiveAccounts||9999,customerTypes:e.customerTypes||[],editSensitiveDetails:0!==e.editSensitiveDetails,friendInviteActive:!!e.friendInviteActive||!1,friendRegistrationUrl:e.friendRegistrationUrl,additionalContent:e.additionalContent||!1}}(t)}(t,e[t]);Object.keys(n).forEach((function(e){o[e]=n[e]}))})):"string"==typeof t?r(t).then(i).then((function(e){o[t]=e[t]})):Array.isArray(t)?(l=t,c=l.map((function(e){return r(e).then(i).catch((function(){return!1}))})),e.all(c)).then(s).then((function(e){return e.map(a)})):void 0;var l,c},this}]),services.factory("TestService",[function(){return{say:function(){return"hello"}}}]),services.service("TransactionHistoryService",["$q","API","constants","TransactionHistoryCollection","TransactionHistoryModel","ServerTimeService","UserService",function(e,t,n,a,o,i,s){var r=this;function l(){r.collection=new a}function c(e){e.transactions.forEach((function(e){r.collection.add(new o(e))}))}function d(e){if(1!==e.status)throw new ErrorService({source:"TransactionHistoryService",type:n.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}return r.user=null,r.collection=null,this.init=function(){r.user=s.get(),r.user.loggedIn},this.getTransactions=function(){return r.user.activeTradingAccount?t.transactionHistory().then(d).then((function(e){return l(),e})).then(c):(l(),e.resolve())},this}]),services.service("UserControl",["UserService","$state","constants",function(e,t,n){return this.getState=function(){var t=e.get();if(t){if(!t.tnc&&n.tncPopup)return"tnc";if(n.splitPersonalDetails){if(!t.taxCountry.length)return"signupPersonalProfile";if(t.isRegulated()&&!t.classification.length)return"signupQuestionnaire"}if(!t.activeTradingAccount)switch(t.registrationState){case n.userState.initial:return"signupPersonalProfile";case n.userState.personal:case n.userState.questionnaire:return"signupQuestionnaire"}}},this}]),services.service("UserService",["$rootScope","API","UserModel","LocalStorage","Storage","$state","constants","Onesignal","CustomerEventsService","IntercomService",function(e,t,n,a,o,i,s,r,l,c){var d=this;return d.user=new n,this.login=function(e){d.user.onLogin(e),d.user.loggedIn=!0,o.load(["withdrawalMethods","localBanks"]),d.subscribe(),d.oneSignalLogin(),c.sendUserDetails(d.user)},this.get=function(){return d.user},this.subscribe=function(){t.subscribe("MT4UpdateBalance",(function(t){d.user.updateBalance(t),e.$emit("pnl"),t.Order>0&&l.trackEvent(l.events.BalanceUpdate,{tradingAccount:t.login,server:t.live?"live":"demo",profit:t.Profit,orderId:t.Order,comment:t.comment})}))},this.clear=function(){log("clear user service"),d.user&&t.unsubscribe("MT4UpdateBalance"),d.user=new n,d.oneSignalLogout()},this.kycCheck=function(){if(s.kycCheck&&(!s.kycCheck||"approved"!==d.user.complianceStatus))return d.user.complianceStatus&&d.user.complianceStatusNegative?i.go("kycCheck",{cache:!1}):void 0},this.oneSignalLogin=function(){r.setUserId(d.user.customerId),r.setTag("compliance_status",d.user.complianceStatus),r.setTag("ftd",d.user.funded),r.setTag("currency",d.user.baseCurrency),r.setTag("account_type",d.user.funded&&d.user.isLiveAccounts()>0?"LIVE":"DEMO")},this.oneSignalLogout=function(){},this}]),services.factory("Utils",["$timeout","$q","ServerTimeService","constants",function(e,t,n,a){return{noop:function(){},wait:function(t){return function(n){return e(t||1e3).then((function(){return n}))}},formatTradingTimes:function(e,t){function a(e,t,n,a){var o,i={hour:(o=n).split(":")[0],minute:o.split(":")[1]};return moment.prototype.toUnix=function(){return this.unix()+60*this.utcOffset()},new moment.utc(e).weekday(t).startOf("day").hour(i.hour).minute(i.minute).utcOffset(a)}function o(e,t){e.hasOwnProperty(t)||(e[t]=[])}function i(e,t,n,a){var o="object"==typeof n?n.format("HH:mm"):n,i="object"==typeof a?a.format("HH:mm"):a;e[t].push([o,i])}function s(e){return e.clone().startOf("day").toUnix()}return function(e,t,r){var l=n.time,c={};return Object.keys(r).forEach((function(n){r[n].forEach((function(r){var d=a(l,n,r[0],e),u=a(l,n,r[1],e),m=a(l,n,r[0],t),p=a(l,n,r[1],t);s(m)<s(d)&&s(p)<s(u)?(o(c,m.day()),i(c,m.day(),m,p)):s(m)<s(d)&&s(p)===s(u)?(o(c,m.day()),i(c,m.day(),m,"23:59"),"00:00"!==p.format("HH:mm")&&(o(c,d.day()),i(c,d.day(),"00:00",p))):s(m)>s(d)&&s(p)>s(u)?(o(c,m.day()),i(c,m.day(),m,p)):s(p)>s(u)&&s(m)===s(d)?(o(c,m.day()),i(c,m.day(),m,"23:59"),"00:00"!==p.format("HH:mm")&&(o(c,p.day()),i(c,p.day(),"00:00",p))):(o(c,d.day()),i(c,d.day(),m,p))}))})),c}(0,e,t)},runChain:function(e,n){var a=t((function(e,t){e()}));return e.reduce((function(e,t){return e.then(n?t[n]:t)}),a)},toBoolean:function(e){return!!e},fromBoolean:function(e){return e?1:0},formRevalidate:function(e,t){Object.keys(e).filter((function(n){return t?!n.match(/^\$/):!n.match(/^\$/)&&e[n].$viewValue})).forEach((function(t){e[t].$setDirty(),e[t].$setTouched()}))},getCurrencyByCountry:function(e,t,n){if(!e)return n[0].currency;var a=_.find(t,{code:e});if(a){var o=_.find(n,{currency:a.currency});if(o)return o.currency;if("GB"===e){if(i("EUR"))return"EUR";if(i("USD"))return"USD"}return a.currency}function i(e){return _.find(n,{currency:e})}},capitalize:function(e){return e.toLowerCase().charAt(0).toUpperCase()+e.toLowerCase().slice(1)},toCamelCase:function(e){var t=this,n=e.split(" ").reduce((function(e,n){return e.concat(t.capitalize(n))}),"");return n.charAt(0).toLowerCase()+n.slice(1)},toSnakeCase:function(e){return e.replace(/\s/g,"_").toLowerCase()},getDateRange:function(e){function t(e){return moment().utc(n.time).startOf(e)}var a,o,i,s,r=e.split(" ");return r[1].toLowerCase().match("day")&&(o=parseInt(r[0],10),a=t("day").subtract(o,"day")),r[1].toLowerCase().match("week")&&(i=parseInt(r[0],10),a=t("isoweek").subtract(i,"week")),r[1].toLowerCase().match("month")&&(s=parseInt(r[0],10),a=t("month").subtract(s,"month")),a.unix()},setTimeRange:function(e){var t,a=this;switch(e){case"day":t=a.getDateRange("0 days");break;case"threedays":t=a.getDateRange("2 days");break;case"week":t=a.getDateRange("0 week");break;case"month":t=a.getDateRange("0 month");break;case"threemonths":t=a.getDateRange("2 month");break;case"all":t=1}return{Start:t,End:parseInt(n.time/1e3,10)}},generateForm:function(e,t){var n=document.createElement("form");return n.id="form3ds",n.method="POST",n.action=e,t.forEach((function(e){var t=document.createElement("input");t.type="hidden",t.name=e.name,t.value=e.value,n.appendChild(t)})),n},insertDocumentScripts:function(e,t){var n=e.getElementsByTagName("body")[0];t.filter((function(e){return"script"===e.name})).forEach((function(e){var t=document.createElement("script");t.src=e.value,n.appendChild(t)}))},getURLParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},getDiffInPoints:function(e,t,n){return Math.round(Math.abs(e-t)*Math.pow(10,n))},getReferralString:function(){return location.search.replace("?","").split("&").filter((function(e){return!e.match(/^token=|^etoken|^action=/)})).join("|")},getUrlRemarketing:function(){var e=this.getURLParameterByName("remarketing");if(e)return e},decimalRound:function(e,t){var n=Math.abs(e)*Math.pow(10,t),a=Math.floor(Number(n))/Math.pow(10,t);return e>=0?a:-1*a},createLinkByLang:function(e,t,n){var o=_.get(a,e+"."+t);return o||(o=_.get(a,n)),o||_.get(a,e)},extractDigits:function(e){return e.toString().match(/\./)?e.toString().split(/\./).pop().length:0}}}]),services.service("Validator",(function(){function e(e){return"object"==typeof e&&!Array.isArray(e)}return validate.formatters.custom=function(e){return console.log(e),e.map((function(e){return{field:e.attribute,value:e.attributes[e.attribute],validator:e.validator,message:e.error,options:e.options}}))},validate.validators.isTradingTimes=function(t,n,a,o){var i;return e(t)&&null!==t?(Object.keys(t).forEach((function(n){Array.isArray(t[n])||(i=n+": Is not array"),i||t[n].forEach((function(t){e(t)||(i=n+"."+t+": Not an object"),i||(t.hasOwnProperty("CloseHour")||(i=n+"."+t+': has no property "CloseHour"'),t.hasOwnProperty("CloseMinute")||(i=n+"."+t+': has no property "CloseMinute"'),t.hasOwnProperty("OpenHour")||(i=n+"."+t+': has no property "OpenHour"'),t.hasOwnProperty("OpenMinute")||(i=n+"."+t+': has no property "OpenMinute"'))}))})),i||void 0):t+": Not an object"},validate.options={format:"custom"},validate.getPattern=function(e){switch(e){case"alpha":return"[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*";case"alphaSimple":return"^[a-zA-Z s]+$";case"phone":return"[0-9]{1,}";case"email":return'(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))';case"password":return"(\\d+[A-Za-z]+|[A-Za-z]+\\d+)[A-Za-z\\d]*";case"number":return"([0-9]+)";case"alphanum":return"[a-zA-Z0-9-\\.]+";case"alphanumMultiple":return"[A-Za-z0-9 _]*[A-Za-z0-9][A-Za-z0-9 _]*";case"name":return"[^[0-9\\]\\'\\.\\?\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\_\\+\\=\\{\\}\\(\\)\\/><\\][\\\\\",;|]+";case"freetext":return"[^\\'\\.\\?\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\_\\+\\=\\{\\}\\(\\)\\/><\\][\\\\\",;|]+";case"address":return"[^\\'\\?\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\_\\+\\=\\{\\}\\/><\\][\\\\\",;|]+"}},validate})),services.service("VerificationV2Service",["UserService","$state","constants","API","Utils","ErrorService","DocumentV2Model","BaseCollection","Storage","$q",function(e,t,n,a,o,i,s,r,l,c){var d=this;function u(e){if(1!==e.status)throw new i({source:"VerificationV2Service",type:n.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}d.collection=new r,this.init=function(){return e.get().loggedIn?"internal-v2"!==n.verificationProvider?c.resolve():(d.collection.clear(),a.documentsGet().then(u).then((function(e){var t=e.documentsRequired.map((function(e){return new s(e)}));d.collection.fill(t),l.set("verification",d.collection.find({status:"New"}).length>0)})).catch((function(e){console.warn("Failed to retrieve documents",e)}))):c.resolve()}}]),services.service("WithdrawHistoryService",["$q","API","constants","UserService","TransactionHistoryCollection","WithdrawRequestModel",function(e,t,n,a,o,i){var s=this;function r(e){e.withdrawalRequests.forEach((function(e){s.collection.add(new i(e))}))}function l(){s.collection=new o}function c(e){if(1!==e.status)throw new ErrorService({source:"WithdrawHistoryService",type:n.error.type.SYSTEM,code:e.code,severity:"critical",data:{response:e}});return e}return s.user=null,s.collection=null,this.init=function(){s.user=a.get()},this.getWithdrawalRequests=function(){return s.user.activeTradingAccount?t.withdrawalHistory().then(c).then((function(e){return l(),e})).then(r):(l(),e.resolve())},this.cancelWithdrawalRequest=function(e){var n={id:e};return t.withdrawalCancel(n).then(c).then((function(t){s.collection.get({id:e}).status="cancelledByCustomer"}))},this.clear=function(){s.collection&&s.collection.clear(),s.collection=null},this}]),services.factory("mockAPI",["$socket","$q","$timeout","$http","md5","config","constants","ErrorService",function(e,t,n,a,o,i,s,r){var l=this,c={},d=/\b(connect|disconnect|sendServerTime|loginToken|error|refreshClient|refreshSite)/;function u(e,a){return function(a){var l,d=function(e,t){return o.createHash(e+JSON.stringify(t))}(e,a),u=angular.extend({},a||{},{reqID:d}),m=t.defer();return c[d]?t.reject():(n((function(){return t=function(e,t){switch(e){case"login":return{Code:1,Description:"",Token:"aaabbbcccddd"};case"getCustomerData":return{Code:1,data:{Email:"yurii.rynkov@pandats.com",FirstName:"Yurii",LastName:"Rynkov",CreatedOnDate:"01-02-2017",City:"Haifa",Country:"Israel",PostalCode:"123",PreferredLocale:"en",Street:"Some street",Telephone:"123123123",UserID:"12345",RealAccounts:[{Balance:"12345.67",Credit:"0",Currency:"USD",Enable:"true",Equity:"0",Leverage:"0",Margin:"0",Login:"789456"}],DemoAccounts:[]}};case"mt4login":case"forgotPassword":return{Code:1,Description:""}}}(e),delete c[d],"string"==typeof t&&(t=angular.fromJson(t)),l&&n.cancel(l),l=null,void m.resolve(t);var t}),500),c[d]=m.promise,l=n((function(){throw console.log("canceling request!",angular.copy(u)),delete c[d],m.reject("cancelRequest"),new r({source:"mockAPI",type:s.error.type.VALIDATION,severity:"warning",code:"cancelRequest",data:{request:u}})}),i.requestTimeout),m.promise)}}return l.status=!1,e.on("disconnect",(function(){console.log("socket disconnected!!!"),c={},Object.keys(e.subscribers()).forEach((function(t){d.test(t)||e.removeAllListeners(t)})),l.status=!1})),{status:function(){return l.status},connect:function(){var n=t.defer();return console.log("socket is connecting..."),e.connect(),e.on("connect",(function(){return console.log("socket connected!"),l.status=!0,n.resolve()})),n.promise},disconnect:function(){console.log("socket is disconnecting..."),e.disconnect()},login:u("login"),loginToken:u("loginToken"),quotesHistoryByTimeFrame:u("QuotesHistoryByTimeFrame"),mt4LoginToken:u("MT4LoginToken"),mt4Login:u("MT4Login"),mt4GetClientSymbols:u("MT4GetClientSymbols"),mt4GetAllSymbols:u("MT4GetAllSymbols"),mt4GetSymbolsSnapshot:u("MT4GetSymbolsSnapshot"),mt4GetOpenPositions:u("MT4GetOpenPositions"),mt4GetClosedPositions:u("MT4GetClosedPositions"),mt4GetChart:u("MT4GetChart"),mt4OpenPosition:u("MT4OpenPosition"),mt4ClosePosition:u("MT4ClosePosition"),mt4UpdatePosition:u("MT4UpdatePosition"),mt4DeletePosition:u("MT4DeletePosition"),getCustomerData:u("getCustomerData"),logout:u("logout"),quotesSubscribe:u("quotesSubscribe"),quotesUnsubscribe:u("quotesUnsubscribe"),forgotPassword:u("forgotPassword"),subscribe:function(t,n){e.on(t,n)},unsubscribe:function(t){e.off(t)},onConnect:function(t){e.on("connect",t)},onDisconnect:function(t){e.on("disconnect",t)},onReconnect:function(t){e.on("reconnect",t)},getToken:function(e,n){var o={method:"GET",url:i.loginUrl,params:{Login:e,Password:n,Source:s.system.loginSources[0].id},timeout:5e3};return a(o).then((function(e){if("1"!=e.data.Code)throw new r({source:"API",type:s.error.type.VALIDATION,code:"authFailed",data:{request:o.params,response:e.data}});return e.data})).catch((function(e){if(e&&"object"==typeof e&&"-1"==e.status)throw new r({source:"API",type:s.error.type.NETWORK,code:"authTimeout",data:{request:o.params}});return t.reject(e)}))}}}]),services.service("Onesignal",["$q","config","ExternalScriptLoader",function(e,t,n){var a=new n,o=t.onesignal&&Object.keys(t.onesignal).length>0;return o||console.warn("Onesignal services are disabled"),this.init=function(){if(o)return a.load("https://cdn.onesignal.com/sdks/OneSignalSDK.js").then((function(){if(!window.OneSignal)return e.reject("sdk is not loaded")})).then((function(){OneSignal.push((function(){console.log("ONESIGNAL INITIALIZE SERVICES"),OneSignal.init({appId:t.onesignal.appId,safari_web_id:t.onesignal.safariWebId,notifyButton:{enable:!1}})}))})).catch((function(e){console.warn("Onesignal services are disabled",e.toString()),o=!1}))},this.setUserId=function(e){o&&OneSignal.push((function(){console.log("ONESIGNAL SET EXTERNAL USER ID:",e),OneSignal.setExternalUserId(e)}))},this.removeUserId=function(){o&&OneSignal.push((function(){console.log("ONESIGNAL SET REMOVE USER ID"),OneSignal.removeExternalUserId()}))},this.setEmail=function(e){o&&OneSignal.push((function(){console.log("ONESIGNAL SET EMAIL:",e),OneSignal.setEmail(e)}))},this.removeEmail=function(e){o&&OneSignal.push((function(){console.log("ONESIGNAL REMOVE EMAIL"),OneSignal.logoutEmail()}))},this.setTag=function(e,t){o&&OneSignal.push((function(){console.log("ONESIGNAL SET TAG:",e,t),OneSignal.sendTag(e,t,(function(e){console.log("Tags sent:",e)}))}))},this.getTags=function(){return o?e((function(e,t){OneSignal.push((function(){OneSignal.getTags((function(t){e(t)}))}))})):e.resolve()},this.isEnabled=function(){return o},this}]),controllers.controller("AccountFrozenController",["$scope","$state","$ionicLoading","LocaleService","API","constants","LoginService",function(e,t,n,a,o,i,s){a.wait().then((function(t){e.translation=t})),e.sendTicket=function(){var e={type:i.ticketTypes.loginProblem,subject:"Reactivate Account / No trading Account",description:"Contact the customer for account reactivation or login to the trading account. The customer`s account has been deleted, archived or other issue that prevent successful login"};return n.show(),o.createTicket(e),s.logout().then((function(){return n.hide(),t.go("welcome")}))}}]),controllers.controller("AccountsChangePasswordController",["$scope","$state","$ionicLoading","$ionicHistory","LocaleService","UserService","constants","API","ErrorService","Utils","Validator",function(e,t,n,a,o,i,s,r,l,c,d){o.wait().then((function(t){e.translation=t})),e.user=i.get(),e.validator=d.getPattern,e.tradingAccounts=e.user.tradingAccounts,e.initialSelectedAccount=null,e.auth={password:"",confirmPassword:"",tradingAccount:e.user.activeTradingAccount};e.modal=angular.copy({isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1}),e.changeAccountPassword=function(t){if(c.formRevalidate(t),t.$valid){n.show();var a={login:e.auth.tradingAccount.login,source:e.auth.tradingAccount.source,password:e.auth.password};r.mt4AccountSetPassword(a).then((function(e){return function(e,t){if(0===e.status)throw new l({source:"AccountsChangePasswordController",type:s.error.type.VALIDATION,severity:"warning",code:e.code||"general_error",data:{request:t,response:e}});return e}(e,a)})).then((function(t){n.hide(),e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textTitle=o.translation.messages.password_changed,e.modal.back="root.app.manageAccounts",e.modal.actionText=o.translation.back,e.modal.state=!0})).catch((function(t){n.hide(),e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textTitle=t&&o.translation.messages[t.code]||o.translation.messages.general_error,e.modal.textContent=o.translation.messages.err_password_changed,e.modal.actionText=o.translation.try_again,e.modal.state=!0}))}}}]),controllers.controller("AccountsTransferController",["$scope","$state","$ionicLoading","$ionicHistory","LocaleService","UserService","constants","API","ErrorService","Utils",function(e,t,n,a,o,i,s,r,l,c){o.wait().then((function(t){e.translation=t})),e.user=i.get(),e.constants=s,e.transfer={accountFrom:"",accountTo:"",value:0},e.config={digits:e.user.currencyDigits,step:1,min:1,max:1e5},e.accountFromConfig={type:"transferFrom"},e.accountToConfig={type:"balance"},e.accounts=e.user.tradingAccounts.filter((function(e){return e.live})).map((function(t){var n=s.currencySymbols[t.currency],a=t.balance.toFixed(e.user.currencyDigits),o=Math.min(t.freeMargin-t.credit,t.balance);return t.fundsToWithdraw=o>0?o:0,t.description=[t.login,"LIVE",e.translation.balance,n,a].join(" "),t})),e.accountsFrom=e.accounts.filter((function(e){return e.balance>0})),e.accountsFrom.length>0?e.transfer.accountFrom=e.user.activeTradingAccount.live?e.user.activeTradingAccount:e.accountsFrom[0]:e.transfer.accountFrom=null,e.accountsTo=e.accounts.filter((function(t){return e.transfer.accountFrom&&t.login!==e.transfer.accountFrom.login})),e.accountsTo.length>0?e.transfer.accountTo=e.accountsTo[0]:e.transfer.accountTo=null;var d=e.$watch("transfer.accountFrom",(function(t,n){t&&t.login!==n.login&&e.updateAccountsTo()}));function u(e){if(1!==e.status)throw new l({source:"AccountsTransferController",type:s.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function m(){d(),a.clearHistory()}e.updateAccountsTo=function(){log("model change",e.transfer.accountFrom.login),e.accountsTo=e.accounts.filter((function(t){return t.login!==e.transfer.accountFrom.login})),e.accountsTo.length>0?e.transfer.accountTo=e.accountsTo[0]:e.transfer.accountTo=null,e.transfer.value=0,log(e.accountsFrom),log(e.accountsTo)},e.modal={actionText:o.translation.try_again,state:!1},e.submit=function(t){if(t.$valid){var a={from:e.transfer.accountFrom.login,to:e.transfer.accountTo.login,amount:parseInt(e.transfer.value,10)};return(e.constants.platformSelect||e.constants.customerTypeForTA)&&(a.fromTradingPlatform=e.transfer.accountFrom.tradingPlatform,a.toTradingPlatform=e.transfer.accountTo.tradingPlatform),n.show(),r.transfer(a).then(u).then(c.wait(1e3)).then((function(t){n.hide(),e.modal.textTitle=o.translation.messages.transferSuccess,e.modal.isError=!1,e.modal.actionText=o.translation.continue,e.modal.textContent="",e.modal.back="root.app.manageAccounts",e.modal.state=!0})).catch((function(t){n.hide(),e.modal.textTitle=o.translation.messages.transferFailed,e.modal.actionText=o.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=o.translation.messages[t.code]||"",e.modal.state=!0}))}},e.$on("$ionicView.beforeLeave",m),e.$on("clear",m)}]),controllers.controller("AddNewAccountController",["$scope","$state","$ionicLoading","LocaleService","Storage","API","Validator","ErrorService","constants","config","UserControl","UserService","Utils","CountryService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p){a.wait().then((function(t){e.translation=t}));var g=u.get();e.liveAccont=!0,e.currencies=[];var v=p.countries.get({code:g.country}),f=v&&v.allowedCurrencies&&v.allowedCurrencies.length&&v.allowedCurrencies;f&&f.length&&(e.currencies=(o.get("currencies")||[]).filter((function(e){return-1!==f.indexOf(e.currency)}))),e.currencies.length||(e.currencies=(o.get("currencies")||[]).filter((function(e){return e.currency===v.currency}))),e.validator=s.getPattern,e.useDemoAccounts=o.get("useDemo"),e.showLeverage=l.showLeverageDropdown,e.constants=l;var h=l.scoringRules&&_.find(l.scoringRules,{classification:g.classification});e.leverages=h?h.leverages:c.leverages,e.demoDepositValues=o.get("demoDepositValues"),e.addAccount={currency:_.find(e.currencies,(function(e){return e.currency===g.baseCurrency}))||e.currencies[0],leverage:_.find(e.leverages,(function(e){return e===c.defaultLeverage}))||e.leverages[0]},e.addAccountDefaults={min:100,max:5e4,value:l.initialDeposit},e.platforms=o.get("tradingPlatforms").map((function(t){return{id:t,label:e.translation[t]||t}})),l.platformSelect&&(e.addAccount.platform=_.find(e.platforms,{id:o.get("defaultTradingPlatform")}));var b=o.get("maxLiveAccounts");e.customerTypes=o.get("customerTypes")||[];var y=_.find(e.customerTypes,{selected:1});y&&(e.addAccount.customerType=y);function w(){var t=e.demoDepositValues.find((function(t){return t.currency===e.addAccount.currency.currency}));t&&(e.addAccountDefaults={min:t.minimum,max:t.maximum,value:t.visual})}e.modal=angular.copy({isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1}),e.setForm=function(t){e.form=t},e.toggleAccount=function(t){e.liveAccont=t},e.$on("$ionicView.beforeEnter",(function(){var e=d.getState();e&&t.go(e,{cache:!1}),w()})),e.sendAccount=function(t){if(m.formRevalidate(t,!0),t.$valid){var o={live:e.liveAccont?1:0,currency:e.addAccount.currency.currency,leverage:e.addAccount.leverage+"",initialDeposit:e.liveAccont?0:e.addAccountDefaults.value};l.platformSelect&&(o.tradingPlatform=e.addAccount.platform.id),l.customerTypeForTA&&(o.customerType=e.addAccount.customerType.name||""),n.show(),i.mt4CreateAccount(o).then((function(e){return function(e,t){if(0===e.status)throw new r({source:"AddNewAccountController",type:l.error.type.VALIDATION,severity:"warning",code:e.code||"general_error",data:{request:t,response:e}});return e}(e,o)})).then((function(t){n.hide(),g.addTradingAccount(t.mt4Account),e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textTitle=a.translation.messages.createAccountSuccess,e.modal.back="root.app.manageAccounts",e.modal.actionText=a.translation.back,e.modal.state=!0})).catch((function(t){n.hide(),e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textTitle=t&&a.translation.messages[t.code]&&a.translation.messages[t.code].replace(/\%X\%/,b)||a.translation.messages.general_error,e.modal.textContent=a.translation.messages.createAccountFailed,e.modal.actionText=a.translation.try_again,e.modal.state=!0}))}};var k=e.$watch("addAccount.currency",(function(e,t){e!==t&&e&&w()}));e.$on("$ionicView.beforeLeave",k),e.$on("$ionicView.unloaded",k),e.$on("clear",k)}]),controllers.controller("AppController",["$scope","$state","$ionicHistory","$ionicLoading","$ionicTabsDelegate","$ionicModal","LocaleService","Storage","$timeout","UserService","constants",function(e,t,n,a,o,i,s,r,l,c,d){e.verificationRequired=r.get("verification")||!1,e.authType=d.authType?d.authType:"newforex",e.isSocial=!!d.socialIntegration,s.wait().then((function(t){e.translation=t}));var u=e.$watch((function(){return t.$current.name}),(function(){o.showBar(t.current.data&&t.current.data.footer)}));e.$on("$destroy",(function(){u()})),this.navigate=function(e,n){return t.go(e,n)},this.back=function(){n.goBack()}}]),controllers.controller("AssetInfoController",["$scope","$state","$ionicLoading","moment","config","constants","Utils","AssetService","LocaleService","InvestCalcService","UserService","ServerTimeService",function(e,t,n,a,o,i,s,r,l,c,d,u){function m(){if(void 0!==e.clientTimezone){var t=u.time,n=e.clientTimezone,a=_.assign({},e.asset.tradingTimes);Object.keys(a).forEach((function(e){"24:00"===a[e][0][1]&&(a[e][0][1]="23:59")})),e.tradingTimesFormat=function(e,t,n){var a=e,o={};return Object.keys(n).forEach((function(e){n[e].forEach((function(n){var i=p(a,e,n[0],0),s=p(a,e,n[1],0),r=p(a,e,n[0],t),l=p(a,e,n[1],t);g(r)<g(i)&&g(l)<g(s)?(v(o,r.day()),f(o,r.day(),r,l)):g(r)<g(i)&&g(l)===g(s)?(v(o,r.day()),f(o,r.day(),r,"23:59"),"00:00"!==l.format("HH:mm")&&(v(o,i.day()),f(o,i.day(),"00:00",l))):g(r)>g(i)&&g(l)>g(s)?(v(o,r.day()),f(o,r.day(),r,l)):g(l)>g(s)&&g(r)===g(i)?(v(o,r.day()),f(o,r.day(),r,"23:59"),"00:00"!==l.format("HH:mm")&&(v(o,l.day()),f(o,l.day(),"00:00",l))):(v(o,i.day()),f(o,i.day(),r,l))}))})),o}(t,n,a)}}function p(e,t,n,o){var i,s={hour:(i=n).split(":")[0],minute:i.split(":")[1]};return a.prototype.toUnix=function(){return this.unix()+60*this.utcOffset()},a.utc(e).weekday(t).startOf("day").hour(s.hour).minute(s.minute).utcOffset(o)}function g(e){return e.clone().startOf("day").toUnix()}function v(e,t){e.hasOwnProperty(t)||(e[t]=[])}function f(e,t,n,a){var o="object"==typeof n?n.format("HH:mm"):n,i="object"==typeof a?a.format("HH:mm"):a;e[t].push(o+"-"+i)}l.wait().then((function(t){e.translation=t})),e.constants=i,e.assetIntoRules=e.constants.assetIntoRules,e.asset=r.collection.get({id:parseInt(t.params.assetId,10)}),e.user=d.get(),e.clientTimezone=u.timeZoneOffset,e.margin={ask:"",bid:"",askCurrency:"",bidCurrency:""},e.swap={long:"",short:"",longCurrency:"",shortCurrency:""},e.leverage="",e.asset&&(e.margin=b(),e.swap=y()),e.tradingTimes=function(){return e.asset&&e.tradingTimesFormat?Object.keys(e.tradingTimesFormat):[]};var h=e.$watchGroup(["asset.bid","asset.ask"],(function(t,n){t&&n&&(t[0]!==n[0]||t[1]!==n[1])&&(e.margin=b(),e.swap=y())}));function b(){var t=c.calcMargin(1,"sell",e.asset,e.user),n=c.calcMargin(1,"buy",e.asset,e.user);return e.leverage=c.calcLeverage(e.asset,t.requiredMargin),{ask:n.requiredMargin,bid:t.requiredMargin,askCurrency:n.baseVal,bidCurrency:t.baseVal}}function y(){var t=e.asset.swapsLong,n=e.asset.swapsShort,a=c.calcMargin(1,"sell",e.asset,e.user,n);return{long:t,short:n,longCurrency:c.calcMargin(1,"buy",e.asset,e.user,t).baseVal,shortCurrency:a.baseVal}}function w(){if(!e.translation.assetInfo||e.translation.assetInfo&&!e.translation.assetInfo.nameMatch)e.description=void 0;else{e.description=e.translation.assetInfo.nameMatch.reduce((function(t,n){return function(t){if(new RegExp(t.pattern).test(e.asset.s))return t.text}(n)||t}),"")}}e.$on("$ionicView.beforeEnter",(function(){m(),w()})),e.$on("clear",(function(){log("clear asset info controller"),h()}))}]),controllers.controller("AssetsController",["$scope","$state","$ionicPopover","$ionicLoading","$injector","config","constants","AssetService","API","FavoritesService","LocaleService","UserService","UserControl","LocalStorage","$rootScope",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g){d.wait().then((function(t){e.translation=t})),e.state=null,e.categories=function(e){if(!r.collection)return;var t=_.uniq(r.clientCollection.getAll().map((function(e){return e.category}))),n=e.filter((function(e){return t.indexOf(e.id)>-1}));return n=n.map((function(e){return _.assign(e,{selected:!1})})),n[0].selected=!0,n}(r.assetCategories||s.assetsTypes),e.quickAccessExists=e.assets=r.clientQuickAccessCollection.getAll().length>0,e.showSearch=!1,e.search={};var v=t.params.category;function f(){return log("init assets controller after switch account"),e.selectedIndex,h(e.selectedIndex)}function h(t){if(r.collection){var n={};"FAVORITES"===t?(n.isFavorite=!0,e.assets=r.sortByFavorites(n)):"QUICK ACCESS"===t?e.assets=r.clientQuickAccessCollection.getAll():(n.category=t,e.assets=r.clientCollection.find(n))}}e.constants=s,n.fromTemplateUrl("templates/instruments-menu.html",{scope:e.$new()}).then((function(t){e.popover=t})),e.openPopover=function(t){e.popover.show(t)},e.openSearchAssets=function(){e.showSearch=!e.showSearch,e.showSearch?e.assets=r.clientCollection.getAll():(e.search={},h(e.selectedIndex))},e.navigate=function(n,a){e.popover&&e.popover.remove(),t.go(n,a)},e.assets=[],e.selectedIndex=v||(c.length()>0?"FAVORITES":e.categories[0].id),h(e.selectedIndex),e.toggleCategory=function(t){e.selectedIndex=t,h(t)},e.user=u.get(),e.$on("$ionicView.beforeEnter",(function(){return e.state=m.getState(),f()})),e.$on("init",f),e.$on("clear",(function(){log("clear assets controller"),e.assets=[],e.popover.remove()})),e.$on("$ionicView.afterEnter",(function(){var e=p.get("link");if(e){var n=JSON.parse(e);if("asset"===n.name){p.remove("link");var a=r.getAssetByName(n.params);if(a)return t.go("root.app.chart",{category:a.category,assetId:a.id})}}})),g.$on("reconnect",(function(){f()})),e.customSearch=function(t,n,a){return e.search&&e.search.outputName?t.outputName.toLowerCase().indexOf(e.search.outputName.toLowerCase())>=0&&t.category.length>0:t.category.length>0}}]),controllers.controller("BankTransferController",["$scope","$state","constants","LocaleService","Storage","UserService","$ionicLoading","API",function(e,t,n,a,o,i,s,r){a.wait().then((function(t){e.translation=t})),e.user=i.get(),e.paymentMethods=o.get("paymentMethods")||[],e.showAmountSelect=!0,e.constants=n,e.depositValue=o.get("depositValue"),e.method=t.params.method||"",e.pspCurrencies=e.method.pspCurrencies||[],e.pspCurrency=e.pspCurrencies.length>0?e.pspCurrencies[0]:null,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:e.pspCurrencies},e.defaultBankDetails=n.wiretransferDetails||{beneficiary_name:"",beneficiary_address:"",beneficiary_bank:"",bank_address:"",beneficiary_account_number:"",beneficiary_iban:"",swift:"",comments:""},e.customBankDetails=n.bankTransferCustomBankDetails;var l=[];Array(5).fill(null).reduce((function(e,t,a){var o=Math.ceil(e*n.depositMultipliers[a]);return l.push(o),o}),e.config.visual<=e.config.min?e.config.min:e.config.visual),l.length>0&&(e.config.listAmounts=l),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.modal={actionText:a.translation.try_again,state:!1},e.pendingDepositMessage=e.translation.pendingDepositMessage&&e.translation.pendingDepositMessage.replace("${clientName}",[e.user.firstName,e.user.lastName].join(" "))||"Please contact support",e.createPendingDeposit=function(){if(n.bankTransferCreatePendingDeposit){var t={type:"Deposit",amount:e.amount.value,paymentMethod:e.translation[e.method.name]||e.method.name};return s.show(),r.pendingDeposit(t).then((function(e){if(1!==e.status)throw new ErrorService({source:"BankTransferController",type:n.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e})).then((function(e){s.hide()})).catch((function(t){s.hide(),e.showMessage=!0,e.modal.textTitle=a.translation.messages.pending,e.modal.isError=!0,e.modal.textContent=e.pendingDepositMessage,e.modal.actionText=a.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0}))}},e.$on("$ionicView.beforeEnter",(function(){e.method.hasOwnProperty("amountRequired")&&!e.method.amountRequired&&(e.showAmountSelect=!1,e.amount.value=1)}))}]),controllers.controller("BitgoController",["$scope","LocaleService","constants","UserService","ErrorService","ionicToast","Storage",function(e,t,n,a,o,i,s){t.wait().then((function(t){e.translation=t})),e.user=a.get(),e.paymentMethods=s.get("paymentMethods")||[],e.constants=n,e.displayCurrency=e.user.currency,e.cryptoWallet={qrCode:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",address:"N/A",transactionId:"N/A"},e.user.activeTradingAccount.cryptoWallet&&(e.cryptoWallet=e.user.activeTradingAccount.cryptoWallet,e.cryptoWallet.currency&&(e.displayCurrency=e.cryptoWallet.currency)),e.modal={actionText:t.translation.try_again,state:!1},e.copyToClipBoard=function(){var t=document.getElementsByClassName("depositAddress");HTMLCollection.prototype.isPrototypeOf(t)&&t.length&&(t=t[0]),t&&(t.select(),t.setSelectionRange(0,e.cryptoWallet.address.length),document.execCommand("copy"),t.blur(),window.getSelection().removeAllRanges(),i.show(e.translation.copiedToCB,"top",!1,5e3,""))}}]),controllers.controller("ChartController",["$q","$scope","$state","$ionicLoading","config","constants","API","AssetService","LocaleService","UserService","Utils",function(e,t,n,a,o,i,s,r,l,c,d){l.wait().then((function(e){t.translation=e})),t.category=n.params.category;var u=n.params.assetId;function m(t){var n=JSON.parse(t.Chart);return n&&1===t.status&&n.length>0?n:e.reject()}function p(){return t.loadstate="loading",s.mt4GetChart({SymbolID:t.asset.id,TimeFrame:t.chart.range.timeFrame||1}).then(m).then((function(e){t.chart.data=e,t.chart.ready=!0})).catch((function(){t.modal.textTitle=l.translation.noChartData,t.modal.isError=!0,t.modal.state=!0}))}function g(){t.asset=null,t.chart=null,t.user=null}t.asset=r.collection.get({id:parseInt(u,10)}),t.user=c.get(),t.chart={ready:!1,loadstate:"loading",earlyHistory:null},t.stopEarlyHistory=!1,t.chart.type=i.chartTypes[0],t.chartTypes=i.chartTypes,t.chart.range=i.chartRangeParams[1],t.chartRangeParams=i.chartRangeParams,t.modal={actionText:"Close",state:!1,back:"root.app.assets"},p(),t.getEarlyHistory=function(e){var n={Source:t.user.source,From:e.from,To:e.to,SymbolID:t.asset.id,TimeFrame:t.chart.range.timeFrame};return console.log("HISTORY REQUEST",n),s.mt4GetChartHistory(n,t.user.token).then(m).then((function(n){t.chart.earlyHistory={request:e,data:n}})).catch((function(n){console.warn("not enough chart history",n),t.chart.earlyHistory={request:e,data:[]}}))},t.changeTimeRange=function(e){return t.chart.range=e,t.chart.ready=!1,p()},t.$watch("chart.loadstate",(function(e,n){e!==n&&"fail"===e&&(t.modal.textTitle=l.translation.noChartData,t.modal.isError=!0,t.modal.state=!0)})),t.$on("$ionicView.afterLeave",g),t.$on("$ionicView.unloaded",g),t.$on("clear",g)}]),controllers.controller("ClosedTradeController",["$scope","$state","$filter","$ionicModal","$ionicLoading","$timeout","$ionicPopup","config","constants","Utils","API","UserService","InvestCalcService","LocaleService","ClosedTradeService","ServerTimeService","UserControl",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f){function h(){e.trades=[],e.user=null}e.trades=[],e.user=u.get(),p.wait().then((function(t){e.translation=t})),e.clientTimeZone=v.timeZoneOffset>=0?"+"+v.timeZoneOffset.toString():v.timeZoneOffset.toString(),e.constants=l,e.showConvertToUsd=l.showConvertToUsd||!1,e.selectedRange="day",e.tradeActions=[{label:p.translation.allTypes,id:"all"},{label:p.translation.trades,id:"trades"},{label:p.translation.balance,id:"balance"},{label:p.translation.credit,id:"credit"},{label:p.translation.other,id:"other"}],e.filter={tradeAction:_.find(e.tradeActions,{id:"trades"})||e.tradeActions[0]},e.toggleCategory=function(n){e.selectedRange=n,e.trades.length=0,function(n){if(e.user&&!l.skipRegistrationStateCheck)switch(e.user.registrationState){case l.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case l.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}e.loadingMessage=p.translation.loading_closed_trades,o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),e.trades=[],g.collection&&g.getHistory(n).then(c.wait(500)).then((function(){o.hide(),"all"===e.filter.tradeAction.id?e.trades=g.collection.getAllTrades():e.trades=g.collection.find({tradeAction:e.filter.tradeAction.id})}))}(n)},e.toggleCategory(e.selectedRange),e.showFilter=function(){var t=s.show({template:'<div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.type}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="tradeAction" ng-model="filter.tradeAction" ng-options="tradeAction.label for tradeAction in tradeActions"></select></div></div></div>',title:'<span class="roboto">'+p.translation.filterClosedTrades+"</span>",scope:e,buttons:[{text:p.translation.cancel,type:"button-block"},{text:p.translation.filter,type:"button-block button-full",onTap:function(n){n.preventDefault(),"all"===e.filter.tradeAction.id?e.trades=g.collection.getAllTrades():e.trades=g.collection.find({tradeAction:e.filter.tradeAction.id}),t.close()}}]})},e.$on("$ionicView.beforeEnter",(function(){return e.state=f.getState(),e.state?t.go(e.state,{cache:!1}):u.kycCheck()})),e.$on("$ionicView.afterLeave",h),e.$on("$ionicView.unloaded",h),e.$on("clear",h)}]),controllers.controller("CreateFirstAccountController",["$scope","$state","$ionicLoading","LocaleService","UserService","AccountService","Utils","Storage","constants","CountryService",function(e,t,n,a,o,i,s,r,l,c){a.wait().then((function(t){e.translation=t})),e.currencyList=r.get("currencies"),e.countries=c.get(),e.user=o.get(),e.constants=l,e.modal={actionText:a.translation.try_again,state:!1,isProcess:!1};var d=r.get("maxLiveAccounts");e.createAccount=function(){var o=function(){var t=e.user.baseCurrency;if(!t)return;return _.find(e.currencyList,{currency:t})&&t}()||s.getCurrencyByCountry(e.user.country,e.countries,e.currencyList);return n.show(),i.createAccount(true,o).then(s.wait(2e3)).then((function(e){return i.switchAccount(e.mt4Account.login,true)})).then((function(){return n.hide(),s.getURLParameterByName("action")===l.depositActionName?t.go("root.app.wallet"):t.go("root.app.assets")})).catch((function(t){n.hide(),e.modal.isError=!0,e.modal.textTitle=t&&a.translation.messages[t.code]&&a.translation.messages[t.code].replace(/\%X\%/,d)||a.translation.messages.general_error,e.modal.textContent="",e.modal.state=!0}))},e.logout=function(){},l.autoUpdatePersonalDetails&&!l.skipCreateFirstAccountPage&&e.createAccount(),e.$on("$ionicView.beforeEnter",(function(){l.skipCreateFirstAccountPage&&e.createAccount()}))}]),controllers.controller("CreditCardController",["$scope","$state","$filter","$timeout","$ionicLoading","$ionicHistory","$q","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$interval","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b){r.wait().then((function(t){e.translation=t})),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.constants=u,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.minDate=m.time,e.creditCard={value:e.depositValue.visual,holder:e.user.firstName+" "+e.user.lastName},e.paymentPopup=null;var y={amount:0,currency:e.user.activeTradingAccount.currency,type:"",number:"",cvv:"",expiryMonth:null,expiryYear:null,holder:e.user.firstName+" "+e.user.lastName,country:e.user.country,address:e.user.address,city:e.user.city,phone:e.user.phone,state:"",postcode:e.user.postCode,phoneCountryCode:"",phoneAreaCode:"",platform:u.platformById.webMobile};e.config={digits:0,step:50,min:e.depositValue.minimum,max:e.depositValue.maximum},e.changeStep=l.stepChange,e.listAmounts=[];var w=[];function k(e){if(1!==e.status)throw new f({source:"CreditCardController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function C(){v.unsubscribe("depositConfirm"),e.creditCard=null,e.depositValue=null,e.user=null,e.paymentPopup=null,e.user=null,i.clearHistory()}Array(5).fill(null).reduce((function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return w.push(a),a}),e.depositValue.visual<=e.config.min?e.config.min:e.depositValue.visual),w.length>0&&(e.listAmounts=w),e.confirm=function(a){if(a.$valid){var i=n("date")(e.creditCard.date,"MM"),l=n("date")(e.creditCard.date,"yyyy");return y.type="",y.number=e.creditCard.number,y.cvv=e.creditCard.cvv,y.expiryMonth=parseInt(i,10),y.expiryYear=parseInt(l,10),y.holder=e.creditCard.holder,y.amount=parseFloat(e.creditCard.value),y.remarketing=b.get("remarketing")||"",o.show(),v.creditCardDeposit(y).then(k).then((function(n){return n.RedirectURL&&n.RedirectURL.length>0?function(n){return s((function(a,i){var s=h(c,100);v.subscribe("depositConfirm",l);var r=["toolbar=no","status=no","menubar=no","scrollbars=no","resizable=no","left=10000","top=10000","width=10","height=10","visible=none"].join(",");function l(t){v.unsubscribe("depositConfirm"),e.paymentPopup&&e.paymentPopup.close();try{k(t)}catch(e){i(e)}a(t)}function c(){e.paymentPopup&&e.paymentPopup.closed&&(h.cancel(s),e.paymentPopup=null,o.hide(),e.paymentMethods.length>1?t.go("root.app.wallet"):t.go("root.app.assets"))}n.RedirectURL&&!n.PostData&&(e.paymentPopup=window.open(n.RedirectURL,"_blank",r))}))}(n):n})).then((function(t){e.paymentPopup&&e.paymentPopup.close(),o.hide(),b.get("remarketing")&&b.remove("remarketing"),e.modal.textTitle=r.translation.messages.depositSuccess,e.modal.isError=!1,e.modal.actionText=r.translation.startTrading,e.modal.back="root.app.assets",e.modal.transactionId=t.transactionId,e.modal.date=Date.now(),e.modal.amount=u.currencySymbols[t.currency]+" "+t.amount,e.modal.method="Credit Card **** "+(t.creditCardLast4Digits||t.lastDigits),e.modal.state=!0})).catch((function(t){o.hide(),e.modal.textTitle=r.translation.messages.depositFailed,e.paymentPopup&&e.paymentPopup.close(),e.modal.actionText=r.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=r.translation.messages.depositFailedText,e.modal.state=!0}))}},e.modal={actionText:r.translation.try_again,state:!1},e.$on("$ionicView.afterLeave",C),e.$on("clear",C)}]),controllers.controller("CreditCardSecuredController",["$scope","$state","$filter","$timeout","$ionicLoading","$ionicHistory","$q","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h){r.wait().then((function(t){e.translation=t})),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.constants=u,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.minDate=m.time,e.creditCard={value:e.depositValue.visual,holder:e.user.firstName+" "+e.user.lastName},e.paymentPopup=null;var b={amount:0,currency:e.user.activeTradingAccount.currency,type:"",number:"",cvv:"",expiryMonth:null,expiryYear:null,holder:e.user.firstName+" "+e.user.lastName,country:e.user.country,address:e.user.address,city:e.user.city,phone:e.user.phone,state:"",postcode:e.user.postCode,phoneCountryCode:"",phoneAreaCode:"",secure:!0,platform:u.platformById.webMobile};e.config={digits:0,step:50,min:e.depositValue.minimum,max:e.depositValue.maximum},e.changeStep=l.stepChange,e.listAmounts=[];var y=[];function w(e){if(1!==e.status)throw new f({source:"CreditCardController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function k(){v.unsubscribe("depositConfirm"),e.creditCard=null,e.depositValue=null,e.user=null,e.paymentPopup=null,e.user=null,i.clearHistory()}Array(5).fill(null).reduce((function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return y.push(a),a}),e.depositValue.visual<=e.config.min?e.config.min:e.depositValue.visual),y.length>0&&(e.listAmounts=y),e.confirm=function(t){if(t.$valid){var a=n("date")(e.creditCard.date,"MM"),i=n("date")(e.creditCard.date,"yyyy");return b.type="",b.number=e.creditCard.number,b.cvv=e.creditCard.cvv,b.expiryMonth=parseInt(a,10),b.expiryYear=parseInt(i,10),b.holder=e.creditCard.holder,b.amount=parseFloat(e.creditCard.value),b.remarketing=h.get("remarketing")||"",o.show(),v.creditCardDeposit(b).then(w).then((function(t){return t.RedirectURL&&t.RedirectURL.length>0?function(t){return s((function(n,a){v.subscribe("depositConfirm",r);var o="location=yes,hidden=yes";function i(){return e.paymentPopup.show(),t.PostData&&l()}function s(){e.paymentPopup.close(),e.paymentPopup.removeEventListener("exit",s),e.paymentPopup.removeEventListener("loadstop",i),e.paymentPopup.removeEventListener("loaderror",s),e.paymentPopup=null,a()}function r(t){v.unsubscribe("depositConfirm"),e.paymentPopup&&e.paymentPopup.close();try{w(t)}catch(e){a(e)}n(t)}function l(){var n="postData('"+t.RedirectURL+"','"+JSON.stringify(t.PostData)+"')";e.paymentPopup.executeScript({code:n})}window.cordova&&window.cordova.InAppBrowser&&(t.RedirectURL&&!t.PostData?e.paymentPopup=window.cordova.InAppBrowser.open(t.RedirectURL,"_blank",o):e.paymentPopup=window.cordova.InAppBrowser.open("templates/deposit-inapp.html","_blank",o)),e.paymentPopup.addEventListener("exit",s),e.paymentPopup.addEventListener("loadstop",i),e.paymentPopup.addEventListener("loaderror",s)}))}(t):t})).then((function(t){e.paymentPopup&&e.paymentPopup.close(),o.hide(),h.get("remarketing")&&h.remove("remarketing"),e.modal.textTitle=r.translation.messages.depositSuccess,e.modal.isError=!1,e.modal.actionText=r.translation.startTrading,e.modal.back="root.app.assets",e.modal.transactionId=t.transactionId,e.modal.date=Date.now(),e.modal.amount=u.currencySymbols[t.currency]+" "+t.amount,e.modal.method="Credit Card **** "+(t.creditCardLast4Digits||t.lastDigits),e.modal.state=!0})).catch((function(t){o.hide(),e.modal.textTitle=r.translation.messages.depositFailed,e.paymentPopup&&e.paymentPopup.close(),e.modal.isError=!0,e.modal.textContent=r.translation.messages.depositFailedText,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0}))}},e.modal={actionText:r.translation.try_again,state:!1},e.$on("$ionicView.afterLeave",k),e.$on("clear",k)}]),controllers.controller("DepositController",["$scope","$rootScope","$state","$ionicLoading","config","constants","Utils","UserService","LocaleService","API","Storage","$sce","appsflyer",function(e,t,n,a,o,i,s,r,l,c,d,u,m){l.wait().then((function(t){e.translation=t}))}]),controllers.controller("EmailVerificationController",["$scope","$state","LocaleService","config","API","UserService","$q","ionicToast","constants","Validator","Utils","LoginService","Storage","$ionicLoading","ErrorService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g){function v(e){if(1!==e.status)throw new g({source:"EmailVerificationController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}n.wait().then((function(t){e.translation=t})),e.user=i.get(),e.modal={actionText:n.translation.try_again,state:!1},e.verification={code:void 0},e.isSendTicketPart2=!1,e.ticketSentOnce=!1,e.validator=c.getPattern,e.config=a,e.verify=function(){var a={code:Number(e.verification.code)};return p.show(),o.emailVerificationCode(a).then(d.wait(500)).then(v).then((function(n){return p.hide(),e.user.emailVerificationRequired=!1,t.go("root.app.assets",{cache:!1})})).catch((function(t){p.hide(),e.modal.isError=!0,e.modal.textTitle=t&&n.translation.messages[t.code]||n.translation.messages.Err600,e.modal.state=!0}))},e.resend=function(){return p.show(),o.emailVerificationCodeResend().then(d.wait(500)).then(v).then((function(t){p.hide(),e.user.emailVerificationRequired=!1,e.modal.textTitle=n.translation.resendText,e.modal.actionText=n.translation.continue,e.modal.isError=!1,e.modal.isProcess=!1,e.modal.state=!0})).catch((function(t){console.warn(t),p.hide(),e.modal.isError=!0,e.modal.textTitle=t&&n.translation.messages[t.code]||n.translation.messages.Err600,e.modal.state=!0}))},e.sendTicket=function(){if(!e.ticketSentOnce){p.show();var t={type:l.ticketTypes.emailVerification,subject:"Email Verification failed - change email",description:"Email Verification failed - change email"};return o.createTicket(t).then(d.wait(500)).then(v).then((function(t){p.hide(),e.isSendTicketPart2=!0,e.ticketSentOnce=!0})).catch((function(t){console.warn(t),p.hide(),e.modal.isError=!0,e.modal.textTitle=t&&n.translation.messages[t.code]||n.translation.messages.Err600,e.modal.state=!0}))}},e.logout=function(){return m.remove("registration"),e.loadingMessage=n.translation.logging_out,p.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),u.logout().then((function(){p.hide(),e.redirectOnLogoutURL?window.location.replace(e.redirectOnLogoutURL+"?lang="+(e.lang||"en")):t.go("welcome")})).catch((function(n){p.hide(),e.redirectOnLogoutURL?window.location.replace(e.redirectOnLogoutURL+"?lang="+(e.lang||"en")):t.go("welcome")}))},e.closePopup=function(){e.isSendTicketPart2=!1}}]),controllers.controller("ExternalController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f){function h(){e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.user=null}r.wait().then((function(t){e.translation=t})),self.iframeEl=null,e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.lang=r.lang,e.methodName=t.params.method.name||"",e.iframeUrl=s.trustAsResourceUrl(t.params.method.url+"?lang="+e.lang),o.show(),e.modal={actionText:r.translation.try_again,state:!1},e.iframeLoad=function(){o.hide(),e.iframeReady=!0},e.iframeLoadFail=function(){o.hide(),e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0},e.$on("$ionicView.afterLeave",h),e.$on("clear",h)}]),controllers.controller("FavoritesController",["$scope","$state","$ionicLoading","config","constants","AssetService","FavoritesService","LocaleService",function(e,t,n,a,o,i,s,r){function l(t){if(i.collection){var n={category:t||e.categories[0]};e.assets=i.clientCollection.find(n)}}function c(){e.assets=[]}r.wait().then((function(t){e.translation=t})),e.assets=[],e.categories=function(e){if(!i.collection)return;var t=_.uniq(i.clientCollection.getAll().map((function(e){return e.category}))),n=e.filter((function(e){return t.indexOf(e.id)>-1}));return(n=n.map((function(e){return _.assign(e,{selected:!1})})))[0].selected=!0,n}(i.assetCategories||o.assetsTypes),e.selectedIndex=e.categories[0].id,e.favorites=s.getAll(),e.search={},l(e.selectedIndex),e.toggleCategory=function(t){e.selectedIndex=t,l(t)},e.toggle=function(e){var t=i.collection.get({id:e});t.isFavorite?(s.remove(e),t.isFavorite=!1):(s.add(e),t.isFavorite=!0)},e.$on("$ionicView.afterLeave",c),e.$on("clear",c)}]),controllers.controller("FavoritesEditController",["$scope","$state","$ionicLoading","$injector","config","constants","FavoritesService","API","AssetService",function(e,t,n,a,o,i,s,r,l){var c;function d(){var t;e.favorites.length>0?s.sync((t="id",_.toArray(_.mapValues(e.favorites,t)))):s.clearAll()}function u(){e.favorites=[]}e.favorites=[],(c=s.getAll())&&l.collection&&c.forEach((function(t){var n=l.collection.get({id:t});return n&&e.favorites.push({id:t,name:n.outputName})})),e.moveItem=function(t,n,a){e.favorites.splice(n,1),e.favorites.splice(a,0,t),d()},e.removeItem=function(t){l.collection.get({id:t.id}).isFavorite=!1,_.remove(e.favorites,t),d()},e.$on("$ionicView.afterLeave",u),e.$on("clear",u)}]),controllers.controller("HelpDeskController",["$scope","$state","LocaleService",function(e,t,n){n.wait().then((function(t){e.translation=t}))}]),controllers.controller("HostedPageController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h){r.wait().then((function(t){e.translation=t})),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.showAmountSelect=!0,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.methodName=t.params.method.name||"",e.pspCurrencies=t.params.method.pspCurrencies||[],e.pspCurrency=e.pspCurrencies.length>0?e.pspCurrencies[0]:null,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:e.pspCurrencies},e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.urlReady=!1;var b=[];function y(e){if(1!==e.status)throw new f({source:"HostedPageController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function w(n){v.unsubscribe("depositConfirm");try{y(n)}catch(n){return o.hide(),3022===n.code?void(e.paymentMethods.length>1?t.go("root.app.wallet"):t.go("root.app.assets")):(e.modal.textTitle=r.translation.messages.depositFailed,e.modal.isError=!0,e.modal.textContent=r.translation.messages.depositFailedText,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",void(e.modal.state=!0))}o.hide(),h.get("remarketing")&&h.remove("remarketing"),e.modal.textTitle=r.translation.messages.depositSuccess,e.modal.isError=!1,e.modal.actionText=r.translation.startTrading,e.modal.back="root.app.assets",e.modal.transactionId=n.transactionId,e.modal.date=Date.now(),e.modal.amount=u.currencySymbols[n.currency]+" "+n.amount,e.modal.method="",e.modal.state=!0}function k(){var n={amount:parseInt(e.amount.value,10),pspCurrency:e.amount.pspCurrency||void 0,pspName:u.paymentMethodsBlueprint[t.params.method.name]||t.params.method.name,remarketing:h.get("remarketing")||""};return o.show(),v.hostedPageDeposit(n).then(y).then((function(t){e.iframeUrl=s.trustAsResourceUrl(t.RedirectURL),e.urlReady=!0,v.subscribe("depositConfirm",w)})).catch((function(t){return e.iframeLoadFail()}))}function C(){e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.user=null}Array(5).fill(null).reduce((function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return b.push(a),a}),e.config.visual<=e.config.min?e.config.min:e.config.visual),b.length>0&&(e.config.listAmounts=b),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.modal={actionText:r.translation.try_again,state:!1},e.getUrl=function(){return k()},e.iframeLoad=function(){o.hide(),e.iframeReady=!0,o.hide()},e.iframeLoadFail=function(){o.hide(),e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0},e.$on("$ionicView.beforeEnter",(function(){t.params.method.hasOwnProperty("amountRequired")&&!t.params.method.amountRequired&&(e.showAmountSelect=!1,e.amount.value=1,k())})),e.$on("$ionicView.afterLeave",C),e.$on("clear",C)}]),controllers.controller("HostedPagePopupController",["$scope","$state","$filter","$timeout","$ionicLoading","$ionicHistory","$q","LocaleService","config","Validator","Storage","constants","UserService","API","Utils","ErrorService","$interval","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h){r.wait().then((function(t){e.translation=t})),e.user=m.get(),e.paymentMethods=d.get("paymentMethods")||[],e.showAmountSelect=!0,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.paymentPopup=null,e.methodName=t.params.method.name||"",e.pspCurrencies=t.params.method.pspCurrencies||[],e.pspCurrency=e.pspCurrencies.length>0?e.pspCurrencies[0]:null,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:e.pspCurrencies},e.getUrl=function(){return w()};var b=[];function y(e){if(1!==e.status||e.RedirectURL&&0===e.RedirectURL.length)throw new v({source:"HostedPagePopupController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function w(){var n;o.show(),n="toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,left=10000, top=10000, width=10, height=10, visible=none",e.paymentPopup=window.open("","_blank",n);var a={amount:parseInt(e.amount.value,10),pspCurrency:e.amount.pspCurrency||void 0,pspName:u.paymentMethodsBlueprint[t.params.method.name]||t.params.method.name,remarketing:h.get("remarketing")||""};return p.hostedPageDeposit(a).then(y).then((function(n){if(n.RedirectURL&&n.RedirectURL.length>0)return function(n){return s((function(a,i){var s=f((function(){e.paymentPopup&&e.paymentPopup.closed&&(f.cancel(s),e.paymentPopup=null,o.hide(),e.paymentMethods.length>1?t.go("root.app.wallet"):t.go("root.app.assets"))}),100);p.subscribe("depositConfirm",(function(t){p.unsubscribe("depositConfirm"),f.cancel(s),e.paymentPopup&&e.paymentPopup.close();try{y(t)}catch(e){i(e)}a(t)})),!n.RedirectURL||n.PostData&&n.PostData.length||(e.paymentPopup.location=n.RedirectURL),n.RedirectURL&&n.PostData&&n.PostData.length&&(g.insertDocumentScripts(e.paymentPopup.document,n.PostData),e.paymentPopup.document.getElementsByTagName("body")[0].appendChild(g.generateForm(n.RedirectURL,n.PostData)),e.paymentPopup.document.getElementById("form3ds").submit())}))}(n)})).then((function(n){e.paymentPopup&&e.paymentPopup.close(),o.hide(),h.get("remarketing")&&h.remove("remarketing"),e.modal.textTitle=r.translation.messages.depositSuccess,e.modal.isError=!1,e.modal.actionText=r.translation.startTrading,e.modal.date=Date.now(),e.modal.transactionId=n.transactionId,e.modal.amount=n.amount,e.modal.currency=n.currency,e.modal.method=t.params.method.name,e.modal.state=!0,e.modal.back="root.app.assets"})).catch((function(t){o.hide(),e.modal.textTitle=r.translation.messages.depositFailed,e.paymentPopup&&e.paymentPopup.close(),e.modal.isError=!0,e.modal.textContent=r.translation.messages.depositFailedText,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0}))}function k(){p.unsubscribe("depositConfirm"),e.depositValue=null,e.user=null,e.paymentPopup=null,i.clearHistory()}Array(5).fill(null).reduce((function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return b.push(a),a}),e.config.visual<=e.config.min?e.config.min:e.config.visual),b.length>0&&(e.config.listAmounts=b),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.modal={actionText:r.translation.try_again,state:!1},e.$on("$ionicView.beforeEnter",(function(){t.params.method.hasOwnProperty("amountRequired")&&!t.params.method.amountRequired&&(e.showAmountSelect=!1,e.amount.value=1,w())})),e.$on("$ionicView.afterLeave",k),e.$on("clear",k)}]),controllers.controller("HostedPageWindowController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$window","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b){r.wait().then((function(t){e.translation=t})),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.showAmountSelect=!0,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.methodName=t.params.method.name||"",e.pspCurrencies=t.params.method.pspCurrencies||[],e.pspCurrency=e.pspCurrencies.length>0?e.pspCurrencies[0]:null,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:e.pspCurrencies},e.urlReady=!1;var y=[];function w(e){if(1!==e.status)throw new f({source:"HostedPageController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function k(){var n={amount:parseInt(e.amount.value,10),pspCurrency:e.amount.pspCurrency||void 0,pspName:u.paymentMethodsBlueprint[t.params.method.name]||t.params.method.name,remarketing:b.get("remarketing")||""};return o.show(),v.hostedPageDeposit(n).then(w).then((function(e){if(e&&e.RedirectURL)return o.hide(),h.open(e.RedirectURL,"_self","hardwareback=no,location=0,menubar=0,closebuttoncaption=Back,hidden=yes"),t.go("root.app.assets")})).catch((function(t){o.hide(),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0}))}function C(){e.user=null}Array(5).fill(null).reduce((function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return y.push(a),a}),e.config.visual<=e.config.min?e.config.min:e.config.visual),y.length>0&&(e.config.listAmounts=y),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.modal={actionText:r.translation.try_again,state:!1},e.getUrl=function(){return k()},e.$on("$ionicView.beforeEnter",(function(){t.params.method.hasOwnProperty("amountRequired")&&!t.params.method.amountRequired&&(e.showAmountSelect=!1,e.amount.value=1,k())})),e.$on("$ionicView.afterLeave",C),e.$on("clear",C)}]),controllers.controller("InvestController",["$scope","$state","$filter","$q","$timeout","$ionicScrollDelegate","config","constants","Utils","ErrorService","AssetService","API","UserService","InvestCalcService","CurrencyConvertService","LocaleService","PnlMarginService","Storage",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h){e.user=m.get(),e.user&&!e.user.activeTradingAccount&&t.go("signupPersonalProfile",{cache:!1}),e.navigate=function(e,n){t.go(e,n)},e.isFooter=!0,e.showFooter=function(){e.isFooter=!0},e.backPage=t.params.backPage?t.params.backPage:"root.app.assets",v.wait().then((function(t){e.translation=t})),e.category=t.params.category;var b=t.params.assetId;e.constants=r,e.action=t.params.action,e.asset=null,e.sltpAutoSet=r.sltpAutoSet||!1,e.hideSlTp=r.hideSlTp||!1,e.showConvertToUsd=r.showConvertToUsd||!1,e.investAmount={value:"0.01"},e.rate={checked:!1,value:0},e.asset=d.collection.get({id:parseInt(b,10)}),t.params.volume?e.investAmount.value=t.params.volume:e.investAmount.value=e.asset.minLot<1?e.constants.defaultInvestAmount:e.asset.minLot.toFixed(2),e.rate.value=e.action.match(/^buy/)?e.asset.markupAsk().toFixed(e.asset.digits):e.asset.markupBid().toFixed(e.asset.digits);var y=p.getPipsLimit(e.asset),w=Math.ceil(e.asset.stopLevels/10);e.convAssets=g.find(d,e.user.currency,"USD","",1);var k={checked:!1,pips:{value:y||0,lock:!0,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}},C={checked:!1,pips:{value:w||0,lock:!0,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}},S={checked:!1,pips:{value:"",lock:!1,keyboard:"text"},rate:{value:"",lock:!1,keyboard:"text"}},T={checked:!1,value:"0.0000",keyboard:"text"};function x(e,t){var n=angular.copy(t);delete n.checked,angular.merge(e,n)}e.loss=angular.copy(S),e.profit=angular.copy(S),e.reach=angular.copy(T),e.keyboardModelName=null,e.isKeyboardShow=!1,e.pow=Math.pow,e.inputFocus=function(t,n,a,o,i,s){if(t.hasOwnProperty("lock")&&!t.lock||t.hasOwnProperty("checked")&&!t.checked)return e.isKeyboardShow=!1,void(e.keyboardModelName=null);e.isKeyboardShow=!0,e.keyboardModelName={model:t,name:n,minval:a,maxval:o,digits:i,viewName:s},e.showFooter()},e.myCallback=function(t){t?(_.set(e,t.name,t.model.value),e.isKeyboardShow=!1,e.keyboardModelName=null):(e.isKeyboardShow=!1,e.keyboardModelName=null)},e.lock=function(t,n){e.isFooter=!1,function(e){for(var t in e)e.hasOwnProperty(t)&&e[t].hasOwnProperty("lock")&&(e[t].lock=!1),e.hasOwnProperty(t)&&e[t].hasOwnProperty("keyboard")&&(e[t].keyboard="text")}(e[t]),e[t][n].lock=!0,"android"===h.get("platform")&&(e[t][n].keyboard="number"),i.scrollBottom(!0)},e.updateReach=function(){e.isFooter=!1,"android"===h.get("platform")&&(e.reach.keyboard="number"),i.scrollBottom(!0)},e.pnlData=f.data;var A=e.$watch("loss.checked",(function(t,n){t!==n&&t&&x(e.loss,k),t===n||t||(e.loss=angular.copy(S))})),$=e.$watch("profit.checked",(function(t,n){t!==n&&t&&x(e.profit,C),t===n||t||(e.profit=angular.copy(S))})),P=e.$watch("loss.pips.value",(function(t,n){t!==n&&t&&!e.loss.rate.lock&&(e.loss.rate.value=E())})),M=e.$watch("loss.rate.value",(function(t,n){t!==n&&t&&!e.loss.pips.lock&&(e.loss.pips.value=parseInt(U(),10))})),D=e.$watch("profit.pips.value",(function(t,n){t!==n&&t&&!e.profit.rate.lock&&(e.profit.rate.value=O())})),I=e.$watch("profit.rate.value",(function(t,n){t!==n&&t&&!e.profit.pips.lock&&(e.profit.pips.value=parseInt(B(),10))})),L=e.$watchGroup(["asset.bid","asset.ask"],(function(e,t){e&&t&&(e[0]!==t[0]||e[1]!==t[1])&&q()}));function q(){e.loss.checked&&(e.loss.rate.lock||(e.loss.rate.value=E()),e.loss.pips.lock||(e.loss.pips.value=parseInt(U(),10))),e.profit.checked&&(e.profit.rate.lock||(e.profit.rate.value=O()),e.profit.pips.lock||(e.profit.pips.value=parseInt(B(),10)))}var F=e.$watch("reach.checked",(function(n,a){n!==a&&(n?(i.scrollBottom(!0),e.reach.value=e.action.match(/^buy/)?e.asset.markupAsk():e.asset.markupBid()):(x(e.reach,T),e.action=t.params.action),q())})),N=e.$watch("reach.value",(function(t,n){t!==n&&t&&e.reach.checked&&(!function(){var t=parseFloat(e.reach.value);e.action.match(/^buy/)?(t<e.asset.markupAsk()&&(e.action="buy_limit"),t>e.asset.markupAsk()&&(e.action="buy_stop")):e.action.match(/^sell/)&&(t>e.asset.markupBid()&&(e.action="sell_limit"),t<e.asset.markupBid()&&(e.action="sell_stop"));log("action updated",e.action)}(),q())}));function R(t,n,a,o,i){var s,r=m.get(),l=e.reach.checked?parseFloat(e.reach.value):p.getOpenPrice(t,e.asset),c=1===a?p.getClosePrice(t,e.asset,l,parseFloat(n),o):n,d=i,u=(e.asset.currency,r.currency,p.getPairVal(t,l,c,e.asset.digits));return 0===e.asset.profitMode&&e.asset.outputName.slice(-3),s=e.asset.profitMode<2?u*e.asset.contractSize*d:u*(e.asset.tickPrice/e.asset.tickSize)*d,s=g.doConvert(e.asset.convAssets,s,t,e.asset.profitMode),parseFloat(s)}function E(){var t=e.asset.digits,n=p.getPoints(10*parseFloat(e.loss.pips.value),t),a=e.reach.checked?parseFloat(e.reach.value):p.currentPrice(e.action,e.asset);return function(e,t,n,a){if(e.match(/^sell/))return(t+n).toFixed(a);if(e.match(/^buy/))return(t-n).toFixed(a)}(e.action,a,n,t)}function U(){var t,n=0,a=e.reach.checked?parseFloat(e.reach.value):p.currentPrice(e.action,e.asset);return e.action.match(/^sell/)&&(n=e.loss.rate.value-a),e.action.match(/^buy/)&&(n=a-e.loss.rate.value),t=p.fromPoints(n/10,e.asset.digits),parseInt(t,10)}function O(){var t=e.asset.digits,n=p.getPoints(10*parseFloat(e.profit.pips.value),t),a=e.reach.checked?parseFloat(e.reach.value):p.currentPrice(e.action,e.asset);return function(e,t,n,a){if(e.match(/^sell/))return(t-n).toFixed(a);if(e.match(/^buy/))return(t+n).toFixed(a)}(e.action,a,n,t)}function B(){var t,n=0,a=e.reach.checked?parseFloat(e.reach.value):p.currentPrice(e.action,e.asset);return e.action.match(/^sell/)&&(n=a-e.profit.rate.value),e.action.match(/^buy/)&&(n=e.profit.rate.value-a),t=p.fromPoints(n/10,e.asset.digits),parseInt(t,10)}e.requiredMargin=function(){var t=0,n=m.get();return e.asset&&parseFloat(e.investAmount.value)>0&&(t=p.calcMargin(parseFloat(e.investAmount.value),e.action||"buy",e.asset,n)),t?t.baseVal:0},e.requiredMarginUsd=function(){return g.doConvert(e.convAssets,l.decimalRound(e.requiredMargin(),e.user.currencyDigits),"buy",1)},e.availableFundsUsd=function(){return g.doConvert(e.convAssets,l.decimalRound(e.pipValue(),e.user.currencyDigits),"buy",1)},e.calcLossValue=function(){if(e.asset){var t=e.loss.pips.lock?1:2,n=1===t?10*e.loss.pips.value:e.loss.rate.value,a=n>0?R(e.action,n,t,"stopLoss",parseFloat(e.investAmount.value)):0;return e.loss.checked?a:0}},e.calcProfitValue=function(){if(e.asset){var t=e.profit.pips.lock?1:2,n=1===t?10*e.profit.pips.value:e.profit.rate.value,a=n>0?R(e.action,n,t,"takeProfit",parseFloat(e.investAmount.value)):0;return e.profit.checked?a:0}},e.pipValue=function(t){var n=t||"buy";return e.asset&&parseFloat(e.investAmount.value)>0?R(n,10,1,"takeProfit",e.investAmount.value):0},e.sltpAutoSet&&function(){e.loss.checked=!0,e.profit.checked=!0,e.lock("profit","pips"),e.lock("loss","pips");var t=Math.max(Math.floor(e.requiredMargin()/e.pipValue(e.action)),y),n=Math.max(Math.floor(e.requiredMargin()/e.pipValue(e.action)),w);e.loss.pips.value=t.toString(),e.profit.pips.value=n.toString(),q(),e.showFooter()}(),e.validate=function(){if(e.asset){var t=function(){if(e.asset){var t=e.action,n=e.asset,a=(e.profit.pips.lock?O():parseFloat(e.profit.rate.value))||0,o=(e.loss.pips.lock?E():parseFloat(e.loss.rate.value))||0,i=e.reach.checked,s=parseFloat(e.reach.value);return t.match(/^buy/)?0===a&&0===o||(0===a?(i?s>o:n.markupAsk()>o)&&r():0===o?(i?s<a:n.markupAsk()<a)&&r():(i?s<a&&s>o:n.markupAsk()<a&&n.markupAsk()>o)&&r()):t.match(/^sell/)?0===a&&0===o||(0===a?(i?s<o:n.markupBid()<o)&&r():0===o?(i?s>a:n.markupBid()>a)&&r():(i?s>a&&s<o:n.markupBid()>a&&n.markupBid()<o)&&r()):void 0}function r(){return 0===a?parseFloat(e.loss.pips.value)>=y:(0===o||parseFloat(e.loss.pips.value)>=y)&&parseFloat(e.profit.pips.value)>=w}}(),n=parseFloat(e.investAmount.value);if(e.reach.checked){var a=function(){var t,n=e.asset,a=e.action,o=e.reach.checked,i=parseFloat(e.reach.value),s=n.stopLevels;switch(a){case"buy_stop":return t=l.getDiffInPoints(i,n.markupAsk(),n.digits),o&&i>n.markupAsk()&&t>=s;case"sell_stop":return t=l.getDiffInPoints(i,n.markupBid(),n.digits),o&&i<n.markupBid()&&t>=s;case"sell_limit":return t=l.getDiffInPoints(i,n.markupBid(),n.digits),o&&i>n.markupBid()&&t>=s;case"buy_limit":return t=l.getDiffInPoints(i,n.markupAsk(),n.digits),o&&i<n.markupAsk()&&t>=s;default:return!1}}();return n>0&&t&&a}return n>0&&t}};function V(e){if(1!==e.status)throw new c({source:"InvestController",type:r.error.type.VALIDATION,code:e.code||"orderFailed",severity:"warning",data:{response:e}});return e}function H(){L(),A(),$(),P(),M(),D(),I(),F(),N(),e.asset=null}e.modal=angular.copy({isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1}),e.createTrade=function(){var t={SymbolID:e.asset.id,Lots:parseFloat(e.investAmount.value),OpenPrice:e.reach.checked?parseFloat(e.reach.value):p.getOpenPrice(e.action,e.asset),StopLoss:(e.loss.pips.lock?E():parseFloat(e.loss.rate.value))||0,TakeProfit:(e.profit.pips.lock?O():parseFloat(e.profit.rate.value))||0,Expiration:0,Cmd:r.actions[e.action],Slippage:0,Comment:""};return e.modal.isProcess=!0,e.modal.textTitle=v.translation.messages.orderProcessing,e.modal.textContent="",e.modal.state=!0,e.modal.isMoney=!1,u.mt4OpenPosition(t).then(V).then((function(t){e.loss=angular.copy(S),e.profit=angular.copy(S),e.reach=angular.copy(T),e.investAmount.value="";var n=r.actionsId[t.Trade.Cmd].replace("_limit","").replace("_stop",""),a=t.Trade.OpenPrice.toFixed(t.Trade.Digits);e.modal.textTitle=t.Trade.Cmd>1&&t.Trade.Cmd<6?v.translation.openPending:v.translation.openPosition,e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textContent=["#"+t.Trade.OrderID+"&zwj;",v.translation[n],t.Trade.OutputName,v.translation.at,a,v.translation.successful].join(" "),e.modal.actionText=v.translation.continueTrading,e.modal.back={state:"root.app.assets",params:{category:e.category}}})).catch((function(t){if(e.modal.textTitle=v.translation.messages.orderFailed,e.modal.textContent=v.translation.messages[t.code]||v.translation.messages.general_error_text,e.modal.isError=!0,e.modal.isProcess=!1,e.modal.actionText=v.translation.tryAgain,t.code&&1134===t.code)return e.modal.action2Text=v.translation.addFunds,void(e.modal.isMoney=!0)}))},e.$on("$ionicView.beforeEnter",(function(){return m.kycCheck()})),e.$on("$ionicView.beforeLeave",H),e.$on("$ionicView.unloaded",H),e.$on("clear",H)}]),controllers.controller("InviteFriendsController",["$scope","$state","LocaleService","constants","$ionicLoading","UserService","API","Storage","ionicToast",function(e,t,n,a,o,i,s,r,l){n.wait().then((function(t){e.translation=t})),e.user=i.get(),o.hide(),e.inputModel={},e.signedUpFriends=r.get("inviteFriends").filter((function(e){return!e.bonusUsd})),e.qualifiedFriends=r.get("inviteFriends").filter((function(e){return!!e.bonusUsd})),e.totalEarnings=e.qualifiedFriends.reduce((function(e,t){return e+t.bonusUsd}),0),e.friendInviteActive=r.get("friendInviteActive"),e.friendInviteActive&&s.getFriendInviteId().then((function(e){if(1!==e.status)throw new ErrorService({source:"InviteFriendsController",type:a.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e})).then((function(t){var n=new URL(r.get("friendRegistrationUrl"));n.searchParams.append("invite_id",t.referralLink),e.inputModel.link=n.href})),e.copyLink=function(){var t=document.getElementsByClassName("link-input-pandats");HTMLCollection.prototype.isPrototypeOf(t)&&t.length&&(t=t[0]),t&&(t.select(),t.setSelectionRange(0,e.inputModel.link.length),document.execCommand("copy"),t.blur(),window.getSelection().removeAllRanges(),l.show(e.translation.copiedToCB,"top",!1,5e3,""))}}]),controllers.controller("KycCheckController",["$scope","$state","$ionicLoading","LocaleService","UserService","AccountService","Utils","Storage","constants",function(e,t,n,a,o,i,s,r,l){a.wait().then((function(t){e.translation=t,e.showKycModal()})),e.message="",e.onNext=function(){var e=l.verificationProvider,n=e&&"internal"!==e?"internal-v2"===e?"root.app.verification-v2":"sumsub"===e?"root.app.verificationSumsub":"":"root.app.uploadDocuments";if(n)return t.go(n,{cache:!1});console.warn("Unknown verification provider")},e.onCancel=function(){return t.go("root.app.assets",{cache:!1})},e.showKycModal=function(){var t=o.get(),n=t.firstName+" "+t.lastName,a=t.complianceStatusNegative?"compliance_status_negative":"compliance_status_positive";e.message=(e.translation[a]||"").replace(/\%name\%/,n)}}]),controllers.controller("LoginController",["$scope","$ionicHistory","$state","$ionicLoading","config","constants","ErrorService","UserService","LoginService","LocaleService","Validator","AccountService","$injector","Utils","SocialAuthService","Storage",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v){function f(t){var o=r.get();if(o&&o.isLoggedInMT4)return n.go("root.app.assets",{cache:!1});return e.loadingMessage=c.translation.logging_in,a.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),(t.provider&&t.tokenThirdParty?l.loginThirdParty(t.email,t.provider,t.tokenThirdParty):l.login(t.email,t.password)).then((function(){e.loadingMessage=c.translation.starting})).then(l.initServices).then((function(){m.get("Init").isInitialized=!0,a.hide();var e=u.checkTradingAccounts();if(e)return n.go(e);if(i.showPersonal){if(!(t=r.get()).tnc&&i.tncPopup)return n.go("tnc");if(t.registrationState<=i.userState.personal)return n.go("root.app.personalDetails");if("approved"!==t.complianceStatus&&t.registrationState===i.userState.questionnaire&&i.kycCheck)return n.go("kycCheck")}if(i.viewQuestionnaireEnable&&i.showQuestionnaireInfo&&v.get("regulated")){var t=r.get(),o=!i.showQuestionnaireOnlyIfFunded||t.funded;if(t.registrationState===i.userState.questionnaire&&""===t.classification&&t.liveAccountExists&&o)return n.go("questionnaireMessage")}n.go("root.app.assets")})).catch((function(t){return t.data&&t.data.response&&3035===t.data.response.code&&i.enable2FA?(a.hide(),n.go("login-otp",{cache:!1,loginData:{email:e.loginForm.email,password:e.loginForm.password}})):t===i.loginStatus.failedActiveAccount?(a.hide(),e.modal.isError=!0,e.modal.textTitle=c.translation.messages.mt4AuthFailed,e.modal.back="root.app.manageaccounts",void(e.modal.state=!0)):void l.logout().then((function(){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&c.translation.messages[t.code]||c.translation.messages.Err600,e.modal.state=!0})).catch((function(t){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&c.translation.messages[t.code]||c.translation.messages.Err600,e.modal.state=!0}))}))}t.nextViewOptions({disableAnimate:!0}),c.wait().then((function(t){e.translation=t})),e.navigate=function(e){n.go(e)},e.loginForm={email:"",password:""},e.modal={actionText:c.translation.try_again,state:!1},e.signUpURL=p.createLinkByLang("externalLinks.signUp",c.lang,"externalLinks.signUpDefault"),e.template=v.get("template"),e.validator=d.getPattern,e.socialAuthService=g,e.disableSignUp=i.disableSignup,e.isLoginWithSMSEnabled=i.isLoginWithSMSEnabled,e.login=function(e){if(p.formRevalidate(e),e.$valid)return f(this.loginForm)},e.signinWithGoogle=function(){return g.signInWithGoogle().then((function(e){return f({email:e.email,password:"",provider:"google",tokenThirdParty:e.idToken})}))},e.signinWithFacebook=function(){return g.signInWithFacebook().then((function(e){return f({email:e.email,password:"",provider:"facebook",tokenThirdParty:e.token})}))}}]),controllers.controller("LoginOTPController",["$scope","$state","LocaleService","LoginService","UserService","AccountService","Validator","$stateParams","$ionicLoading","$injector","constants",function(e,t,n,a,o,i,s,r,l,c,d){n.wait().then((function(t){e.translation=t})),e.navigate=function(e){t.go(e)},r.loginData||t.navigate("login"),e.loginForm={otpCode:""},e.modal={actionText:n.translation.try_again,state:!1},e.validator=s.getPattern,e.login=function(s){if(s.$valid){var d=o.get();if(d&&d.isLoggedInMT4)return t.go("root.app.assets",{cache:!1});e.loadingMessage=n.translation.logging_in,l.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),a.login(r.loginData.email,r.loginData.password,e.loginForm.otpCode).then((function(){e.loadingMessage=n.translation.starting})).then(a.initServices).then((function(){c.get("Init").isInitialized=!0,l.hide();var e=i.checkTradingAccounts();if(e)return t.go(e);t.go("root.app.assets")})).catch((function(t){if(t&&"authFailed"===t.code)return l.hide(),e.modal.isError=!0,e.modal.textTitle=n.translation.messages.mt4AuthFailed,e.modal.back="login",void(e.modal.state=!0);a.logout().then((function(){l.hide(),e.modal.isError=!0,e.modal.textTitle=t&&n.translation.messages[t.code]||n.translation.messages.Err600,e.modal.state=!0})).catch((function(t){l.hide(),e.modal.isError=!0,e.modal.textTitle=t&&n.translation.messages[t.code]||n.translation.messages.Err600,e.modal.state=!0}))}))}}}]),controllers.controller("LoginSmsController",["$scope","$ionicHistory","$ionicHistory","$state","$ionicLoading","constants","ErrorService","LoginService","LocaleService","Validator","AccountService","$injector","Utils","API",function(e,t,t,n,a,o,i,s,r,l,c,d,u,m){t.nextViewOptions({disableAnimate:!0}),e.otpSent=!1,r.wait().then((function(t){e.translation=t})),e.navigate=function(e){n.go(e)},e.loginForm={email:"",tokenThirdParty:"",provider:"pandaotp",password:"",fingerprint:123},e.modal={actionText:r.translation.try_again,state:!1},e.signUpURL=u.createLinkByLang("externalLinks.signUp",r.lang,"externalLinks.signUpDefault"),e.validator=l.getPattern,e.disableSignUp=o.disableSignup,e.sendOtp=function(t){if(!t||t.$valid){a.show();var n={email:e.loginForm.email,fingerprint:123};m.sendOTP(n).then((function(t){if(1!==t.status)throw new i({source:"LoginSmsController",type:o.error.type.VALIDATION,code:t.code,severity:"warning",data:{response:t}});e.otpSent&&(e.modal.isError=!1,e.modal.textTitle=r.translation.resendText||'Verification code has been resent"',e.modal.state=!0,e.modal.actionText=r.translation.continue),e.otpSent=!0,a.hide()})).catch((function(t){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&r.translation.messages[t.code]||r.translation.messages.Err600,e.modal.state=!0,e.modal.actionText=r.translation.try_again}))}},e.login=function(t){t.$valid&&(a.show(),s.loginThirdParty(e.loginForm.email,e.loginForm.provider,e.loginForm.tokenThirdParty).then((function(){e.loadingMessage=r.translation.starting})).then(s.initServices).then((function(){a.hide(),d.get("Init").isInitialized=!0,a.hide();var e=c.checkTradingAccounts();if(e)return n.go(e);n.go("root.app.assets")})).catch((function(t){if(t&&"authFailed"===t.code)return a.hide(),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.mt4AuthFailed,e.modal.back="login",e.modal.state=!0,void(e.modal.actionText=r.translation.try_again);s.logout().then((function(){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&r.translation.messages[t.code]||r.translation.messages.Err600,e.modal.state=!0,e.modal.actionText=r.translation.try_again})).catch((function(t){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&r.translation.messages[t.code]||r.translation.messages.Err600,e.modal.state=!0,e.modal.actionText=r.translation.try_again}))})))}}]),controllers.controller("LoginWebtraderController",["$scope","$ionicHistory","$state","$ionicLoading","config","constants","ErrorService","UserService","LoginService","LocaleService","Validator","AccountService","$injector","Utils","SocialAuthService","Storage",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v){function f(t){var o=r.get();if(o&&o.isLoggedInMT4)return n.go("root.app.assets",{cache:!1});return e.loadingMessage=c.translation.logging_in,a.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),(t.provider&&t.tokenThirdParty?l.loginThirdParty(t.email,t.provider,t.tokenThirdParty):i.authType&&"webtrader"===i.authType?l.loginWebTrader(t.login,t.password,t.source):l.login(t.email,t.password)).then((function(){e.loadingMessage=c.translation.starting})).then(l.initServices).then((function(){m.get("Init").isInitialized=!0,a.hide();var e=u.checkTradingAccounts();if(e)return n.go(e);if(i.showPersonal){if(!(t=r.get()).tnc&&i.tncPopup)return n.go("tnc");if(t.registrationState<=i.userState.personal)return n.go("root.app.personalDetails");if("approved"!==t.complianceStatus&&t.registrationState===i.userState.questionnaire&&i.kycCheck)return n.go("kycCheck")}if(i.viewQuestionnaireEnable&&v.get("regulated")){var t=r.get(),o=!i.showQuestionnaireOnlyIfFunded||t.funded;if(t.registrationState===i.userState.questionnaire&&""===t.classification&&t.liveAccountExists&&o)return n.go("questionnaireMessage")}n.go("root.app.assets")})).catch((function(t){return t.data&&t.data.response&&3035===t.data.response.code&&i.enable2FA?(a.hide(),n.go("login-otp",{cache:!1,loginData:{email:e.loginForm.email,password:e.loginForm.password}})):t===i.loginStatus.failedActiveAccount?(a.hide(),e.modal.isError=!0,e.modal.textTitle=c.translation.messages.mt4AuthFailed,e.modal.back="root.app.manageaccounts",void(e.modal.state=!0)):void l.logout().then((function(){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&c.translation.messages[t.code]||c.translation.messages.Err600,e.modal.state=!0})).catch((function(t){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&c.translation.messages[t.code]||c.translation.messages.Err600,e.modal.state=!0}))}))}c.wait().then((function(t){e.translation=t})),e.navigate=function(e){n.go(e)},e.const=i,e.navigateExternalUrl=function(e,t){var n=t?"_system":"_blank";window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(encodeURI(e),n,"location=no,hidden=no,toolbar=yes,fullscreen=yes,closebuttoncaption=Back,closebuttoncolor=#00AFAA,navigationbuttoncolor=#00AFAA"):window.open(encodeURI(e),"_system")},e.modal={actionText:c.translation.try_again,state:!1},e.signUpURL=p.createLinkByLang("externalLinks.signUp",c.lang,"externalLinks.signUpDefault"),e.template=v.get("template"),e.validator=d.getPattern,e.socialAuthService=g,e.disableSignUp=i.disableSignup,e.source=i.source,e.sourcesList=i.sourcePicklist,e.loginForm={login:"",password:"",source:e.sourcesList&&e.sourcesList.length>0?null:e.source.live},e.login=function(e){if(p.formRevalidate(e),e.$valid)return f(this.loginForm)},e.signinWithGoogle=function(){return g.signInWithGoogle().then((function(e){return f({email:e.email,password:"",provider:"google",tokenThirdParty:e.idToken})}))},e.signinWithFacebook=function(){return g.signInWithFacebook().then((function(e){return f({email:e.email,password:"",provider:"facebook",tokenThirdParty:e.token})}))}}]),controllers.controller("ManageAccountsController",["$scope","$rootScope","$state","$ionicPopover","$ionicLoading","$ionicHistory","LocaleService","UserService","constants","PnlMarginService","LoginService","LocalStorage","Utils","API","UserControl","ErrorService","Storage",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f){function h(){if(e.user){if(e.realAccounts=_.filter(e.user.tradingAccounts,{live:!0}),e.demoAccounts=_.filter(e.user.tradingAccounts,{live:!1}),!e.user.activeTradingAccount)return;_.remove(e.realAccounts,{login:e.user.activeTradingAccount.login,live:e.user.activeTradingAccount.live}),_.remove(e.demoAccounts,{login:e.user.activeTradingAccount.login,live:e.user.activeTradingAccount.live})}}function b(e){if(1!==e.status)throw new v({source:"ManageAccountsController",type:l.error.type.VALIDATION,code:e.code||"switchAccountFailed",severity:"warning",data:{response:e}});return e}s.wait().then((function(t){e.translation=t})),e.user=r.get(),e.pnl=c,e.constants=l,e.showCredit=f.get("allowCredit"),a.fromTemplateUrl("templates/manageaccount-menu.html",{scope:e}).then((function(t){e.popover=t})),e.openPopover=function(t){e.popover.show(t)},e.navigate=function(t,a){e.popover.remove(),n.go(t,a)},e.user.tradingAccounts.length>0&&h(),e.modal={actionText:s.translation.try_again,state:!1},e.switchAccount=function(t,a){return e.loadingMessage=s.translation.logging_in,o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),function(t,a){var s={login:t,live:m.fromBoolean(a)};return p.mt4SwitchAccount(s).then(b).then((function(){return e.user.switchAccount(t,a),e.user=r.get(),d.mt4ClearServices().then(d.mt4InitServices).then((function(){o.hide(),i.clearHistory(),n.go("root.app.assets",{cache:!1})}))}))}(t,a).then((function(){return h()})).catch((function(t){o.hide(),e.modal.isProcess=!1,e.modal.isError=!0,e.modal.textTitle=s.translation.messages.mt4AuthFailed,e.modal.back="root.app.manageAccounts",e.modal.state=!0}))},e.logout=function(){e.loadingMessage=s.translation.logging_out,o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),d.logout().then((function(){o.hide(),n.go("welcome")})).catch((function(e){o.hide(),n.go("welcome")}))},e.$on("$ionicView.beforeEnter",(function(){if(e.state=g.getState(),e.state)return n.go(e.state,{cache:!1});if(e.user&&!e.user.tnc&&l.tncPopup)return n.go("tnc",{cache:!1});if(e.user&&!l.skipRegistrationStateCheck)switch(e.user.registrationState){case l.userState.initial:return n.go("signupPersonalProfile",{cache:!1});case l.userState.personal:return n.go("signupQuestionnaire",{cache:!1})}return r.kycCheck()})),e.$on("$destroy",(function(){e.popover.remove()}))}]),controllers.controller("MenuController",["$scope","$state","$ionicLoading","LoginService","LocaleService","UserService","constants","Storage","config","API","$ionicModal","IntercomService","ExternalLinkService",function(e,t,n,a,o,i,s,r,l,c,d,u,m){o.wait().then((function(t){e.translation=t})),e.modal={actionText:o.translation.try_again,state:!1},e.tradingCentralValidated=r.get("validateTCFeatures")||!1,e.intercomService=u,e.tradingCentralConfig=r.get("additionalContent"),e.tradingCentralConfig&&(e.tradingCentralEnabled=r.get("additionalContent").find((function(e){return"tradingCentral"===e.type})).enabled);var p=function(e){t.go(e)};e.lang=o.lang,e.constants=s,e.user=i.get(),e.friendInviteActive=r.get("friendInviteActive"),e.verificationRequired=r.get("verification"),e.authType=s.authType?s.authType:"newforex",e.redirectOnLogoutURL=s.redirectOnLogoutURL||!1;var g,v,f,h=[{id:"manageAccounts",name:"Manage Accounts",translationKey:"manage_accounts",iconClass:"icon-ManageAccounts",onTap:function(){p("root.app.manageAccounts")},displayCondition:!0,displayOrder:100},{id:"transactionHistory",name:"Transaction History",translationKey:"transaction",iconClass:"icon-TransactionHistory",onTap:function(){p("root.app.transactionHistory")},displayCondition:!0,displayOrder:200},{id:"personalDetails",name:"Personal Details",translationKey:"personalDetails",iconClass:"icon-AccountDetails",onTap:function(){p("root.app.personalDetails")},displayCondition:!0,displayOrder:300},{id:"updatepassword",name:"Change Password",translationKey:"updatePassword",iconClass:"icon-ChangePassword",onTap:function(){p("root.app.updatepassword")},displayCondition:!0,displayOrder:400},{id:"2fa",name:"Manage Security",translationKey:"manageSecurity",iconClass:"icon-ChangePassword",onTap:function(){p("root.app.2fa")},displayCondition:s.enable2FA,displayOrder:500},{id:"wallet",name:"Deposit",translationKey:"deposit",iconClass:"icon-Wallet",onTap:function(){p("root.app.wallet")},displayCondition:!0,displayOrder:600},{id:"withdraw",name:"Withdraw",translationKey:"withdraw",iconClass:"icon-withdraw",onTap:function(){p("root.app.withdraw")},displayCondition:!0,displayOrder:700},{id:"uploadDocuments",name:"Account Verification",translationKey:"accountVerification",iconClass:"icon-AccountVerification",onTap:function(){p("root.app.uploadDocuments")},displayCondition:!(s.hideAccountVerification||s.verificationProvider&&"internal"!==s.verificationProvider),displayOrder:800},{id:"verification-v2",name:"Account Verification",translationKey:"accountVerification",iconClass:"icon-AccountVerification",onTap:function(){p("root.app.verification-v2")},displayCondition:!s.hideAccountVerification&&"internal-v2"===s.verificationProvider,displayOrder:900,specialType:"verification-v2"},{id:"sumsub",name:"Account Verification",translationKey:"accountVerification",iconClass:"icon-AccountVerification",onTap:function(){p("root.app.sumsub")},displayCondition:!s.hideAccountVerification&&"sumsub"===s.verificationProvider,displayOrder:1e3},{id:"inviteFriends",name:"Invite A Friend",translationKey:"invite_a_friend",iconClass:"icon-accounts",onTap:function(){p("root.app.inviteFriends")},displayCondition:e.friendInviteActive||!1,displayOrder:1100},{id:"viewQuestionnaire",name:"View Questionnaire",translationKey:"viewQuestionnaire",iconClass:"icon-list2",onTap:function(){p("root.app.viewQuestionnaire")},displayCondition:s.viewQuestionnaireEnable,displayOrder:1200},{id:"logout",name:"Logout",translationKey:"logout",iconClass:"icon-Logout",onTap:function(){e.logout()},displayCondition:!0,displayOrder:9999}];e.menuItems=(g=h,v=l.menuItems||[],f=[],v.forEach((function(t){if(!g.find((function(e,n){return e.id===t.id&&(g[n]=t),e.id===t.id}))){switch(t.specialType){case"tradingCentral":case"img-link":t.displayCondition=e.tradingCentralEnabled,t.onTap=function(){e.openTradingCentral(t.tradingCentralFeatureName)};break;default:t.displayCondition=!0}f.push(t)}})),g.concat(f,l.customLinks));var b=e.$watch(i.get,(function(t,n){t!==n&&t&&(e.user=i.get())}));e.customLinks=l.customLinks||[],e.openTradingCentral=function(t){if(!e.tradingCentralValidated){var n=s.currencySymbols[e.user.activeTradingAccount.currency]||s.currencySymbols[e.user.baseCurrency]||e.user.baseCurrency,a=e.translation.trading_central_not_validated||"Your account must have minimum of %minTotalDeposit% to access Trading Tools";return e.modal.textContent=a.replace("%minTotalDeposit%",[s.tradingCentralMinTotalDeposit||0,n].join("")),e.modal.textTitle=o.translation.trading_central||"Trading Central",e.modal.isError=!0,e.modal.actionText=o.translation.continueTrading,e.modal.back="root.app.menu",void(e.modal.state=!0)}c.generateTCLink({page:t,theme:l.tradingCentralTheme||"white"}).then((function(t){window.open(t.redirectUrl+"&lang="+(e.lang||"en"))}))},e.logout=function(){r.remove("registration"),e.loadingMessage=o.translation.logging_out,n.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),u.shutdown(),a.logout().then((function(){n.hide(),e.redirectOnLogoutURL?window.location.replace(e.redirectOnLogoutURL+"?lang="+(e.lang||"en")):t.go("welcome")})).catch((function(a){n.hide(),e.redirectOnLogoutURL?window.location.replace(e.redirectOnLogoutURL+"?lang="+(e.lang||"en")):t.go("welcome")}))},e.$on("clear",(function(){b()})),e.openCustomLinkByLang=function(e){m.getLink(e,{}).then((function(e){window.open(decodeURIComponent(e))}))},e.openLink=function(e){window.open(s.externalLinks[e])}}]),controllers.controller("ModifyPendingTradeController",["$scope","$state","$filter","$q","$timeout","$ionicScrollDelegate","config","constants","Utils","ErrorService","AssetService","OpenTradeService","API","UserService","InvestCalcService","CurrencyConvertService","LocaleService","PnlMarginService","Storage",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b){e.user=p.get(),e.user&&!e.user.activeTradingAccount&&t.go("signupPersonalProfile",{cache:!1}),e.isFooter=!0,e.showFooter=function(t){e.isFooter=!0,t&&t.hasOwnProperty("keyboard")&&(t.keyboard="text")},e.translate=f.translation,e.constants=r,e.sltpAutoSet=r.sltpAutoSet||!1;var y=t.params.orderId;e.trade=null;e.investAmount={value:"",keyboard:"text"},e.rate={checked:!1,value:0},e.trade=u.collection.get({orderId:parseInt(y,10)}),e.investAmount.value=e.trade.lots,e.user=p.get();var w=parseInt(e.trade.asset.stopLevels/10,10),k={checked:!1,pips:{value:w||0,lock:!0,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}},C={checked:!1,pips:{value:0,lock:!1,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}};function S(e,t){var n=angular.copy(t);delete n.checked,angular.merge(e,n)}e.loss=angular.copy(C),e.profit=angular.copy(C),e.lossOrigin=angular.copy(k),e.profitOrigin=angular.copy(k),e.reach=angular.copy({value:"0.0000",keyboard:"text"}),e.reach.value=e.trade.openPrice.toFixed(e.trade.asset.digits),e.keyboardModelName=null,e.isKeyboardShow=!1,e.inputFocus=function(t,n,a,o,i,s){if(t.hasOwnProperty("lock")&&!t.lock||t.hasOwnProperty("checked")&&!t.checked)return e.isKeyboardShow=!1,void(e.keyboardModelName=null);e.isKeyboardShow=!0,e.keyboardModelName={model:t,name:n,minval:a,maxval:o,digits:i,viewName:s},e.showFooter()},e.myCallback=function(t){t?(_.set(e,t.name,t.model.value),e.isKeyboardShow=!1,e.keyboardModelName=null):(e.isKeyboardShow=!1,e.keyboardModelName=null)},e.lock=function(t,n){e.isFooter=!1,function(e){for(var t in e)e.hasOwnProperty(t)&&e[t].hasOwnProperty("lock")&&(e[t].lock=!1),e.hasOwnProperty(t)&&e[t].hasOwnProperty("keyboard")&&(e[t].keyboard="text")}(e[t]),e[t][n].lock=!0,"pips"===n&&(e[t][n].value=Math.abs(e[t][n].value),D()),"android"===b.get("platform")&&(e[t][n].keyboard="number"),i.scrollBottom(!0)},e.updateReach=function(){e.isFooter=!1,"android"===b.get("platform")&&(e.reach.keyboard="number")},e.updateAmount=function(){e.isFooter=!1,"android"===b.get("platform")&&(e.investAmount.keyboard="number")},e.pnlData=h.data;var T=e.$watch("loss.checked",(function(t,n){t!==n&&t&&S(e.loss,k),t===n||t||(e.loss=angular.copy(C))})),x=e.$watch("profit.checked",(function(t,n){t!==n&&t&&S(e.profit,k),t===n||t||(e.profit=angular.copy(C))})),A=e.$watch("loss.pips.value",(function(t,n){t!==n&&t&&!e.loss.rate.lock&&(e.loss.rate.value=N())})),$=e.$watch("loss.rate.value",(function(t,n){t===n||e.loss.pips.lock||(e.loss.pips.value=parseInt(R(),10))})),P=e.$watch("profit.pips.value",(function(t,n){t!==n&&t&&!e.profit.rate.lock&&(e.profit.rate.value=E())})),M=e.$watch("profit.rate.value",(function(t,n){t===n||e.profit.pips.lock||(e.profit.pips.value=parseInt(U(),10))}));function D(){e.loss.checked&&(e.loss.rate.lock||(e.loss.rate.value=N(),e.lossOrigin.rate.value=e.loss.rate.value),e.loss.pips.lock||(e.loss.pips.value=parseInt(R(),10),e.lossOrigin.pips.value=e.loss.pips.value)),e.profit.checked&&(e.profit.rate.lock||(e.profit.rate.value=E(),e.profitOrigin.rate.value=e.profit.rate.value),e.profit.pips.lock||(e.profit.pips.value=parseInt(U(),10),e.profitOrigin.pips.value=e.profit.pips.value))}var I=e.$watchGroup(["trade.asset.bid","trade.asset.ask"],(function(e,t){if(e&&t&&(e[0]!==t[0]||e[1]!==t[1]))return D()})),L=e.$watch("reach.value",(function(e,t){D()})),q=e.$watch("investAmount.value",(function(t,n){e.trade.lots=parseFloat(t)}));function F(t,n,a,o,i){if(e.trade){var s,r=p.get(),l=parseFloat(e.reach.value),c=1===a?g.getClosePrice(t,e.trade.asset,l,parseFloat(n),o):n,d=i,u=(e.trade.asset.currency,r.currency,g.getPairVal(t,l,c,e.trade.asset.digits));return 0===e.trade.asset.profitMode&&e.trade.asset.outputName.slice(-3),s=e.trade.asset.profitMode<2?u*e.trade.asset.contractSize*d:u*(e.trade.asset.tickPrice/e.trade.asset.tickSize)*d,s=v.doConvert(e.trade.asset.convAssets,s,t,e.trade.asset.profitMode),parseFloat(s)}}function N(){var t=e.trade.asset.digits,n=g.getPoints(10*parseFloat(e.loss.pips.value),t),a=parseFloat(e.reach.value);return e.loss.checked?function(e,t,n,a){if(e.match(/^sell/))return t+n;if(e.match(/^buy/))return t-n}(e.trade.action,a,n):0}function R(){var t=0;return e.trade.action.match(/^sell/)&&(t=e.loss.rate.value-parseFloat(e.reach.value)),e.trade.action.match(/^buy/)&&(t=parseFloat(e.reach.value)-e.loss.rate.value),g.fromPoints(t/10,e.trade.asset.digits).toFixed(0)}function E(){var t=e.trade.asset.digits,n=g.getPoints(10*parseFloat(e.profit.pips.value),t),a=parseFloat(e.reach.value);return e.profit.checked?function(e,t,n,a){if(e.match(/^sell/))return t-n;if(e.match(/^buy/))return t+n}(e.trade.action,a,n):0}function U(){var t=0;return e.trade.action.match(/^sell/)&&(t=parseFloat(e.reach.value)-e.profit.rate.value),e.trade.action.match(/^buy/)&&(t=e.profit.rate.value-parseFloat(e.reach.value)),g.fromPoints(t/10,e.trade.asset.digits).toFixed(0)}e.trade.takeProfit>0&&(e.profit.checked=!0,e.profit.rate.value=e.trade.takeProfit,e.profit.rate.lock=!0,e.profitOrigin.rate.value=e.profit.rate.value),e.trade.stopLoss>0&&(e.loss.checked=!0,e.loss.rate.value=e.trade.stopLoss,e.loss.rate.lock=!0,e.lossOrigin.rate.value=e.loss.rate.value),D(),e.requiredMargin=function(){var t=0,n=p.get();return e.trade&&e.trade.asset&&parseFloat(e.trade.lots)>0&&(t=g.getRequiredMargin(parseFloat(e.trade.lots),e.trade.asset,n),t=v.doConvert(e.trade.asset.convAssetsMargin,t,e.trade.action,e.trade.asset.profitMode)),t},e.pendingDistance=function(){return e.trade?g.fromPoints(Math.abs(e.trade.pendingCurrentPrice()-parseFloat(e.reach.value))/10,e.trade.asset.digits):"0.00"},e.calcLossValue=function(){if(e.trade){var t=e.loss.pips.lock?1:2,n=1===t?10*e.loss.pips.value:e.loss.rate.value,a=F(e.trade.action,n,t,"stopLoss",e.trade.lots);return e.loss.checked?a:0}},e.calcProfitValue=function(){if(e.trade){var t=e.profit.pips.lock?1:2,n=1===t?10*e.profit.pips.value:e.profit.rate.value,a=F(e.trade.action,n,t,"takeProfit",e.trade.lots);return e.profit.checked?a:0}},e.pipValue=function(){return e.trade.asset&&parseFloat(e.trade.lots)>0?F("buy",10,1,"takeProfit",e.trade.lots):0},e.validate=function(){if(e.trade){var t=function(){if(e.trade){var t=e.trade.action,n=(e.trade.asset,(e.profit.pips.lock?E():parseFloat(e.profit.rate.value))||0),a=(e.loss.pips.lock?N():parseFloat(e.loss.rate.value))||0,o=parseFloat(e.reach.value),i=function(){return 0===n?parseFloat(e.loss.pips.value)>=w:(0===a||parseFloat(e.loss.pips.value)>=w)&&parseFloat(e.profit.pips.value)>=w};return t.match(/^buy/)?0===n&&0===a||(0===n?o>a&&i():0===a?o<n&&i():o<n&&o>a&&i()):t.match(/^sell/)?0===n&&0===a||(0===n?o<a&&i():0===a?o>n&&i():o>n&&o<a&&i()):void 0}}(),n=function(){var t,n=e.trade.asset,a=e.trade.action,o=parseFloat(e.reach.value),i=e.trade.asset.stopLevels;switch(a){case"buy_stop":return t=l.getDiffInPoints(o,n.markupAsk(),n.digits),o>n.markupAsk()&&t>=i;case"sell_stop":return t=l.getDiffInPoints(o,n.markupBid(),n.digits),o<n.markupBid()&&t>=i;case"sell_limit":return t=l.getDiffInPoints(o,n.markupBid(),n.digits),o>n.markupBid()&&t>=i;case"buy_limit":return t=l.getDiffInPoints(o,n.markupAsk(),n.digits),o<n.markupAsk()&&t>=i;default:return!1}}();return parseFloat(e.investAmount.value)>0&&t&&n}},e.isModified=function(){return e.loss.checked===!e.trade.stopLoss||e.profit.checked===!e.trade.takeProfit||parseFloat(e.reach.value)!==parseFloat(e.trade.openPrice.toFixed(e.trade.asset.digits))||(e.loss.checked&&(e.loss.pips.value!==e.lossOrigin.pips.value||e.loss.rate.value!==e.lossOrigin.rate.value)||e.profit.checked&&(e.profit.pips.value!==e.profitOrigin.pips.value||e.profit.rate.value!==e.profitOrigin.rate.value))};function O(e){if(1!==e.status)throw new c({source:"ModifyTradeController",type:r.error.type.VALIDATION,code:e.Description||"orderFailed",severity:"warning",data:{response:e}});return e}function B(){log("clear modify trade controller"),I(),T(),x(),A(),$(),P(),M(),q(),L(),e.pnlData=null,e.trade=null,e.user=null}e.modal=angular.copy({isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1,back:"root.app.pendingTrades"}),e.modifyTrade=function(){var t={OrderID:e.trade.orderId,OpenPrice:parseFloat(e.reach.value),StopLoss:(e.loss.pips.lock?parseFloat(N()):parseFloat(e.loss.rate.value))||0,TakeProfit:(e.profit.pips.lock?parseFloat(E()):parseFloat(e.profit.rate.value))||0,Lots:parseFloat(e.investAmount.value)};return e.modal.isProcess=!0,e.modal.textTitle=f.translation.messages.orderProcessing,e.modal.state=!0,m.mt4UpdatePosition(t).then(O).then((function(t){e.modal.textTitle=f.translation.modifyTrade,e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textContent=["#"+t.Trade.OrderID,f.translation.successupdated].join(" "),e.modal.actionText=f.translation.continueTrading})).catch((function(t){e.modal.textTitle=f.translation.modifyTrade,e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textContent=f.translation.messages[t.code]||f.translation.messages.Err600,e.modal.actionText=f.translation.tryAgain}))},e.deleteTrade=function(){var t={OrderID:e.trade.orderId};return e.modal.state=!0,e.modal.isProcess=!0,m.mt4DeletePosition(t).then(O).then((function(){e.modal.textTitle=f.translation.deleteOrder,e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textContent=f.translation.orderDeleted,e.modal.actionText=f.translation.continueTrading})).catch((function(t){e.modal.textTitle=f.translation.deleteOrderFailed,e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textContent=f.translation.messages[t.code]||f.translation.messages.Err600,e.modal.actionText=f.translation.tryAgain}))},e.$on("$ionicView.beforeLeave",B),e.$on("clear",B)}]),controllers.controller("ModifyTradeController",["$scope","$state","$filter","$q","$timeout","$ionicScrollDelegate","config","constants","Utils","ErrorService","AssetService","OpenTradeService","API","UserService","InvestCalcService","CurrencyConvertService","LocaleService","PnlMarginService","Storage","ServerTimeService","UserControl",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b,y,w){e.user=p.get(),e.user&&!e.user.activeTradingAccount&&t.go("signupPersonalProfile",{cache:!1}),e.clientTimeZone=y.timeZoneOffset>=0?"+"+y.timeZoneOffset.toString():y.timeZoneOffset.toString(),e.isFooter=!0,e.showPartialClose=!1,e.partialCloseChecked=!1,e.showFooter=function(){e.isFooter=!0},e.translate=f.translation;var k=t.params.orderId;e.constants=r,e.sltpAutoSet=r.sltpAutoSet||!1,e.trade=null,e.rate={checked:!1,value:0},e.trade=u.collection.get({orderId:parseInt(k,10)}),e.user=p.get();var C=parseInt(e.trade.asset.stopLevels/10,10);e.investAmount={value:e.trade.lots},e.pow=Math.pow;var S={checked:!1,pips:{value:C||0,lock:!0,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}},T={checked:!1,pips:{value:0,lock:!1,keyboard:"text"},rate:{value:0,lock:!1,keyboard:"text"}};function x(e,t){var n=angular.copy(t);delete n.checked,angular.merge(e,n)}e.loss=angular.copy(T),e.profit=angular.copy(T),e.lossOrigin=angular.copy(S),e.profitOrigin=angular.copy(S),e.keyboardModelName=null,e.isKeyboardShow=!1,e.inputFocus=function(t,n,a,o,i,s){if(t.hasOwnProperty("lock")&&!t.lock||t.hasOwnProperty("checked")&&!t.checked)return e.isKeyboardShow=!1,void(e.keyboardModelName=null);console.log(t,n,a,o,i,s),e.isKeyboardShow=!0,e.keyboardModelName={model:t,name:n,minval:a,maxval:o,digits:i,viewName:s},e.showFooter()},e.myCallback=function(t){t?(_.set(e,t.name,t.model.value),e.isKeyboardShow=!1,e.keyboardModelName=null):(e.isKeyboardShow=!1,e.keyboardModelName=null)},e.lock=function(t,n){e.isFooter=!1,function(e){for(var t in e)e.hasOwnProperty(t)&&e[t].hasOwnProperty("lock")&&(e[t].lock=!1),e.hasOwnProperty(t)&&e[t].hasOwnProperty("keyboard")&&(e[t].keyboard="text")}(e[t]),e[t][n].lock=!0,"pips"===n&&(e[t][n].value=Math.abs(e[t][n].value),L()),"android"===b.get("platform")&&(e[t][n].keyboard="number"),i.scrollBottom(!0)},e.pnlData=h.data;var A=e.$watch("loss.checked",(function(t,n){t!==n&&t&&x(e.loss,S),t===n||t||(e.loss=angular.copy(T))})),$=e.$watch("profit.checked",(function(t,n){t!==n&&t&&x(e.profit,S),t===n||t||(e.profit=angular.copy(T))})),P=e.$watch("loss.pips.value",(function(t,n){t!==n&&t&&!e.loss.rate.lock&&(e.loss.rate.value=N())})),M=e.$watch("loss.rate.value",(function(t,n){t===n||e.loss.pips.lock||(e.loss.pips.value=parseInt(R(),10))})),D=e.$watch("profit.pips.value",(function(t,n){t!==n&&t&&!e.profit.rate.lock&&(e.profit.rate.value=E())})),I=e.$watch("profit.rate.value",(function(t,n){t===n||e.profit.pips.lock||(e.profit.pips.value=parseInt(U(),10))}));function L(){e.loss.checked&&(e.loss.rate.lock||(e.loss.rate.value=N(),e.lossOrigin.rate.value=e.loss.rate.value),e.loss.pips.lock||(e.loss.pips.value=parseInt(R(),10),e.lossOrigin.pips.value=e.loss.pips.value)),e.profit.checked&&(e.profit.rate.lock||(e.profit.rate.value=E(),e.profitOrigin.rate.value=e.profit.rate.value),e.profit.pips.lock||(e.profit.pips.value=parseInt(U(),10),e.profitOrigin.pips.value=e.profit.pips.value))}var q=e.$watchGroup(["trade.asset.bid","trade.asset.ask"],(function(e,t){if(e&&t&&(e[0]!==t[0]||e[1]!==t[1]))return L()}));function F(t,n,a,o,i){if(e.trade){var s,r=p.get(),l=e.trade.openPrice,c=g.updatedPrice(t,e.trade.asset),d=1===a?g.getClosePrice(t,e.trade.asset,c,parseFloat(n),o):n,u=i,m=(e.trade.asset.currency,r.currency,g.getPairVal(t,l,d,e.trade.asset.digits));return 0===e.trade.asset.profitMode&&e.trade.asset.outputName.slice(-3),s=e.trade.asset.profitMode<2?m*e.trade.asset.contractSize*u:m*(e.trade.asset.tickPrice/e.trade.asset.tickSize)*u,s=v.doConvert(e.trade.asset.convAssets,s,t,e.trade.asset.profitMode),parseFloat(s)}}function N(){var t=e.trade.asset.digits,n=g.getPoints(10*parseFloat(e.loss.pips.value),t);return e.loss.checked?function(e,t,n,a){if(e.match(/^sell/))return t+n;if(e.match(/^buy/))return t-n}(e.trade.action,g.updatedPrice(e.trade.action,e.trade.asset),n):0}function R(){var t=0;return e.trade.action.match(/^sell/)&&(t=e.loss.rate.value-g.updatedPrice(e.trade.action,e.trade.asset)),e.trade.action.match(/^buy/)&&(t=g.updatedPrice(e.trade.action,e.trade.asset)-e.loss.rate.value),g.fromPoints(t/10,e.trade.asset.digits).toFixed(0)}function E(){var t=e.trade.asset.digits,n=g.getPoints(10*parseFloat(e.profit.pips.value),t);return e.profit.checked?function(e,t,n,a){if(e.match(/^sell/))return t-n;if(e.match(/^buy/))return t+n}(e.trade.action,g.updatedPrice(e.trade.action,e.trade.asset),n):0}function U(){var t=0;return e.trade.action.match(/^sell/)&&(t=g.updatedPrice(e.trade.action,e.trade.asset)-e.profit.rate.value),e.trade.action.match(/^buy/)&&(t=e.profit.rate.value-g.updatedPrice(e.trade.action,e.trade.asset)),g.fromPoints(t/10,e.trade.asset.digits).toFixed(0)}e.trade.takeProfit>0&&(e.profit.checked=!0,e.profit.rate.value=e.trade.takeProfit,e.profit.rate.lock=!0,e.profitOrigin.rate.value=e.profit.rate.value),e.trade.stopLoss>0&&(e.loss.checked=!0,e.loss.rate.value=e.trade.stopLoss,e.loss.rate.lock=!0,e.lossOrigin.rate.value=e.loss.rate.value),L(),e.requiredMargin=function(){var t=0,n=p.get();return e.trade.asset&&parseFloat(e.trade.lots)>0&&(t=g.getRequiredMargin(parseFloat(e.trade.lots),e.trade.asset,n),t=v.doConvert(e.trade.asset.convAssetsMargin,t,e.trade.action,e.trade.asset.profitMode)),t},e.calcLossValue=function(){if(e.trade){var t=e.loss.pips.lock?1:2,n=1===t?10*e.loss.pips.value:e.loss.rate.value,a=F(e.trade.action,n,t,"stopLoss",e.trade.lots);return e.loss.checked?a:0}},e.calcProfitValue=function(){if(e.trade){var t=e.profit.pips.lock?1:2,n=1===t?10*e.profit.pips.value:e.profit.rate.value,a=F(e.trade.action,n,t,"takeProfit",e.trade.lots);return e.profit.checked?a:0}},e.pipValue=function(){return e.trade.asset&&parseFloat(e.trade.lots)>0?F("buy",10,1,"takeProfit",e.trade.lots):0},e.validate=function(){if(e.trade)return function(){if(e.trade){var t=e.trade.action,n=e.trade.asset,a=(e.profit.pips.lock?E():parseFloat(e.profit.rate.value))||0,o=(e.loss.pips.lock?N():parseFloat(e.loss.rate.value))||0;return t.match(/^buy/)?0===a&&0===o||(0===a?n.markupBid()>o&&i():0===o?n.markupBid()<a&&i():n.markupBid()<a&&n.markupBid()>o&&i()):t.match(/^sell/)?0===a&&0===o||(0===a?n.markupAsk()<o&&i():0===o?n.markupAsk()>a&&i():n.markupAsk()>a&&n.markupAsk()<o&&i()):void 0}function i(){return 0===a?parseFloat(e.loss.pips.value)>=C:(0===o||parseFloat(e.loss.pips.value)>=C)&&parseFloat(e.profit.pips.value)>=C}}()},e.closeTradeValidate=function(){if(e.trade)return e.investAmount.value>=e.trade.asset.stepLot&&e.investAmount.value<=e.trade.lots},e.isModified=function(){return e.loss.checked===!e.trade.stopLoss||e.profit.checked===!e.trade.takeProfit||(e.loss.checked&&(e.loss.pips.value!==e.lossOrigin.pips.value||e.loss.rate.value!==e.lossOrigin.rate.value)||e.profit.checked&&(e.profit.pips.value!==e.profitOrigin.pips.value||e.profit.rate.value!==e.profitOrigin.rate.value))};function O(e){if(1!==e.status)throw new c({source:"ModifyTradeController",type:r.error.type.VALIDATION,code:e.Description||"orderFailed",severity:"warning",data:{response:e}});return e}function B(){log("clear modify trade controller"),q(),A(),$(),P(),M(),D(),I(),e.showPartialClose=!1,e.pnlData=null,e.trade=null,e.user=null}e.modal=angular.copy({isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1,back:"root.app.openTrades"}),e.modifyTrade=function(){var t={OrderID:e.trade.orderId,OpenPrice:parseFloat(g.getOpenPrice(e.trade.action,e.trade.asset)),StopLoss:(e.loss.pips.lock?N():parseFloat(e.loss.rate.value))||0,TakeProfit:(e.profit.pips.lock?E():parseFloat(e.profit.rate.value))||0};return e.modal.isProcess=!0,e.modal.textTitle=f.translation.messages.orderProcessing,e.modal.state=!0,m.mt4UpdatePosition(t).then(O).then((function(t){e.modal.textTitle=f.translation.messages.modifyTrade,e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textContent=["#"+t.Trade.OrderID+"&zwj;",f.translation.successupdated].join(" "),e.modal.actionText=f.translation.continueTrading})).catch((function(t){e.modal.textTitle=f.translation.messages.orderFailed,e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textContent=f.translation.messages[t.code]||f.translation.messages.Err600,e.modal.actionText=f.translation.tryAgain}))},e.openPartialClose=function(){e.investAmount={value:e.trade.lots},e.showPartialClose=!0},e.cencelPartialClose=function(){e.showPartialClose=!1},e.closeTrade=function(){var t={ClosePrice:e.trade.closePrice(),OrderID:e.trade.orderId,Lots:parseFloat(e.investAmount.value)};return e.modal.state=!0,e.modal.isProcess=!0,e.modal.textTitle=f.translation.messages.orderProcessing,m.mt4ClosePosition(t).then(O).then((function(n){var a=r.actionsId[n.Trade.Cmd].replace("_limit","").replace("_stop",""),o=n.Trade.OpenPrice.toFixed(n.Trade.Digits);e.modal.textTitle=f.translation.closeTrade,e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textContent=["#"+n.Trade.OrderID+"&zwj;",f.translation[a],t.Lots,n.Trade.OutputName,f.translation.at,o,"<br/>",f.translation.closedAt,l.decimalRound(n.Trade.ClosePrice,n.Trade.Digits)].join(" "),e.modal.actionText=f.translation.continueTrading})).catch((function(t){e.modal.textTitle=f.translation.closeTrade,e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textContent=f.translation.messages[t.code]||f.translation.messages.Err600,e.modal.actionText=f.translation.continueTrading}))},e.$on("$ionicView.beforeEnter",(function(){var e=w.getState();return e&&t.go(e,{cache:!1}),p.kycCheck()})),e.$on("$ionicView.beforeLeave",B),e.$on("clear",B)}]),controllers.controller("OpenTradeController",["$scope","$state","$filter","$ionicModal","$ionicLoading","$timeout","$q","config","constants","Utils","AssetService","API","UserService","InvestCalcService","LocaleService","OpenTradeService","PnlMarginService","UserControl","CurrencyConvertService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b){g.wait().then((function(t){e.translation=t})),e.trades=[],e.user=m.get(),e.pnl=f,e.constants=l,e.showConvertToUsd=l.showConvertToUsd||!1;var y=t.current.data.orderFilter;function w(){e.trades=function(){if(v.collection)return y?v.collection.getPendingTrades():v.collection.getTrades()}(),f.calcTotalNetPl()}function k(){e.trades=[],e.user=null,e.pnl=null}e.convAssets=b.find(d,e.user.currency,"USD","",1),w(),e.calcMarginPercents=function(){if(e.user.activeTradingAccount)return e.user.activeTradingAccount.margin>0?e.pnl.data.equity/e.user.activeTradingAccount.margin*100:0},e.marginLevel=function(){return{width:e.pnl.data.freeMargin/e.pnl.data.pnl*100+"%"}},e.marginUtilization=0,e.calcMarginUtilization=function(){if(e.user.activeTradingAccount){var t=e.pnl.data.equity>0?e.user.activeTradingAccount.margin/e.pnl.data.equity*100:0;return t>=0&&t<=200?(e.marginUtilization=e.pnl.data.equity>0?e.user.activeTradingAccount.margin/e.pnl.data.equity*100:0,e.marginUtilization):(e.marginUtilization=999,e.marginUtilization)}},e.getMarginUtilizationBarWidth=function(){return 999===e.marginUtilization?"100%":e.marginUtilization/2+"%"},e.freeMarginToUsd=function(){return b.doConvert(e.convAssets,e.pnl.data.freeMargin,"buy",1)},e.usedFundsToUsd=function(){return e.user.activeTradingAccount?b.doConvert(e.convAssets,c.decimalRound(e.user.activeTradingAccount.margin,e.user.currencyDigits),"buy",1):0},e.equityToUsd=function(){return b.doConvert(e.convAssets,c.decimalRound(e.pnl.data.equity,e.user.currencyDigits),"buy",1)},e.totalProfitUsd=function(){return b.doConvert(e.convAssets,c.decimalRound(e.pnl.data.totalProfit,e.user.currencyDigits),"buy",1)},e.$watch((function(){return v.collection.length()}),(function(e,t){e!==t&&w()})),e.$on("$ionicView.beforeEnter",(function(){var e=h.getState();return e&&t.go(e,{cache:!1}),m.kycCheck()})),e.executeTrade=function(e){t.go("root.app.invest",{category:e.asset.category,assetId:e.asset.id,action:e.action,volume:e.lots,backPage:"root.app.openTrades"})},e.$on("$ionicView.afterLeave",k),e.$on("$ionicView.unloaded",k),e.$on("clear",k)}]),controllers.controller("OrangepayBtcController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h){r.wait().then((function(t){e.translation=t})),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[]},e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.urlReady=!1;var b=[];function y(e){if(1!==e.status)throw new f({source:"OrangepayBtcController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function w(){e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.user=null}Array(5).fill(null).reduce((function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return b.push(a),a}),e.config.visual<=e.config.min?e.config.min:e.config.visual),b.length>0&&(e.config.listAmounts=b),e.amount={value:e.config.visual},e.modal={actionText:r.translation.try_again,state:!1},e.getUrl=function(){return t={amount:parseInt(e.amount.value,10),remarketing:h.get("remarketing")||""},o.show(),v.bitcoinOrangepayDeposit(t).then(y).then((function(t){e.iframeUrl=s.trustAsResourceUrl(t.RedirectURL),e.urlReady=!0})).catch((function(t){return e.iframeLoadFail()}));var t},e.iframeLoad=function(){o.hide(),e.iframeReady=!0,o.hide()},e.iframeLoadFail=function(){o.hide(),e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0},e.$on("$ionicView.afterLeave",w),e.$on("clear",w)}]),controllers.controller("OtpController",["$scope","LocaleService","config","API","UserService","$q","ionicToast",function(e,t,n,a,o,i,s){t.wait().then((function(t){e.translation=t})),e.user=o.get(),e.showSpinner=!1,e.otp={qrcode:void 0,secret:"",code:"",enabled:e.user.otpEnabled},e.formV=void 0,e.modal={actionText:t.translation.try_again,state:!1},e.config=n,e.OnOtpChange=function(){e.otp.enabled&&e.getOtp()},e.verifyOtp=function(){e.toggleOtp(!e.user.otpEnabled)},e.getOtp=function(){return e.showSpinner=!0,a.getOTP().then((function(t){e.showSpinner=!1,e.otp.qrcode="data:image/png;base64,"+t.qrcode,e.otp.secret=t.secret})).catch((function(t){e.showSpinner=!1}))},e.toggleOtp=function(n){e.showSpinner=!0;var o={login:e.user.login,otpCode:e.otp.code,enable:n?1:0};return a.setOTP(o).then((function(a){if(console.log(a),e.showSpinner=!1,1!==a.status)return i.reject();e.user.otpEnabled=n,e.user.otpEnabled?e.modal.textContent=t.translation.otpVerified:e.modal.textContent=t.translation.otpDisabled,e.modal.textTitle=t.translation.successful,e.modal.actionText=t.translation.close,e.modal.isError=!1,e.modal.state=!0,e.modal.back="root.app.menu"})).catch((function(n){e.showSpinner=!1,e.modal.isError=!0,e.modal.textTitle=t.translation.otpVerifyFailed,e.modal.state=!0}))},e.copyToClipBoard=function(){var t=document.getElementsByClassName("gac-pandats");HTMLCollection.prototype.isPrototypeOf(t)&&t.length&&(t=t[0]),t&&(t.select(),t.setSelectionRange(0,e.otp.secret.length),document.execCommand("copy"),t.blur(),window.getSelection().removeAllRanges(),s.show(e.translation.copiedToCB,"top",!1,5e3,""))}}]),controllers.controller("PasswordAssistanceController",["$scope","$state","$ionicLoading","$q","config","constants","ErrorService","LocaleService","API",function(e,t,n,a,o,i,s,r,l){r.wait().then((function(t){e.translation=t})),e.assistance={email:""},e.validator={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},e.navigate=function(e){t.go(e)};var c={isError:!1,textTitle:"",textContent:"",state:!1,actionText:r.translation.try_again,back:""};function d(e){if(1!==e.status)throw new s({source:"PasswordAssistanceController",type:i.error.type.VALIDATION,code:e.code||"accountNotExists",severity:"warning",data:{response:e}});return e}e.modal=angular.copy(c),e.restorePassword=function(){n.show(),l.forgotPassword(e.assistance).then(d).then((function(){n.hide(),e.modal.textTitle=r.translation.messages.email_sent,e.modal.actionText=r.translation.close,e.modal.isError=!1,e.modal.state=!0,e.modal.textContent=r.translation.password_changed_text,e.modal.back="login"})).catch((function(t){n.hide(),e.modal.textTitle=t&&t.code&&r.translation.messages[t.code]||r.translation.messages.Err600,e.modal.textContent=t&&t.code&&t.code.toString().match(/^Err6\d\d$/)?r.translation.messages.general_error_text:"",e.modal.isError=!0,e.modal.state=!0}))}}]),controllers.controller("PeachPaymentsController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","API","ErrorService","$cookies",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h){r.wait().then((function(t){e.translation=t})),e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.showAmountSelect=!0,e.depositValue=d.get("depositValue"),e.validator=c.getPattern,e.methodName=t.params.method.name||"",e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:[]},e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.urlReady=!0;var b=[];function y(e){if(1!==e.status)throw new f({source:"HostedPageController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function w(n){v.unsubscribe("depositConfirm");try{y(n)}catch(n){return o.hide(),n.code,void(e.paymentMethods.length>1?t.go("root.app.wallet"):t.go("root.app.assets"))}o.hide(),h.get("remarketing")&&h.remove("remarketing"),e.modal.textTitle=r.translation.messages.depositSuccess,e.modal.isError=!1,e.modal.actionText=r.translation.startTrading,e.modal.back="root.app.assets",e.modal.transactionId=n.transactionId,e.modal.date=Date.now(),e.modal.amount=u.currencySymbols[n.currency]+" "+n.amount,e.modal.method="",e.modal.state=!0}function k(){e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.user=null}Array(5).fill(null).reduce((function(e,t,n){var a=Math.ceil(e*u.depositMultipliers[n]);return b.push(a),a}),e.config.visual<=e.config.min?e.config.min:e.config.visual),b.length>0&&(e.config.listAmounts=b),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.modal={actionText:r.translation.try_again,state:!1},e.getUrl=function(){return o.hide(),e.iframeReady=!0,self.iframeEl=angular.element(document).find("iframe")[0],n=self.iframeEl.contentDocument||self.iframeEl.contentWindow.document,a={amount:parseInt(e.amount.value,10),pspCurrency:e.amount.pspCurrency||void 0,pspName:u.paymentMethodsBlueprint[t.params.method.name]||t.params.method.name,remarketing:h.get("remarketing")||""},o.show(),v.hostedPageDeposit(a).then(y).then((function(t){p.insertDocumentScripts(n,t.PostData),n.getElementsByTagName("body")[0].appendChild(p.generateForm(t.RedirectURL,t.PostData));var a=n.getElementById("form3ds");a.className="paymentWidgets",a.dataset.brands=u.peachpaymentsBrands||"VISA MASTER AMEX",e.urlReady=!0,o.hide(),v.subscribe("depositConfirm",w)})).catch((function(t){return e.iframeLoadFail()}));var n,a},e.iframeLoad=function(){o.hide(),e.iframeReady=!0,o.hide()},e.iframeLoadFail=function(){o.hide(),e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0},e.$on("$ionicView.afterLeave",k),e.$on("clear",k)}]),controllers.controller("PendingDepositController",["$scope","$state","UserService","ErrorService","constants","LocaleService","Storage","API","$ionicLoading",function(e,t,n,a,o,i,s,r,l){i.wait().then((function(t){e.translation=t})),e.modal={actionText:i.translation.try_again,state:!1},e.paymentMethods=s.get("paymentMethods")||[],e.method=t.params.method||"",e.depositValue=s.get("depositValue"),e.pspCurrencies=e.method.pspCurrencies||[],e.pspCurrency=e.pspCurrencies.length>0?e.pspCurrencies[0]:null,e.showAmountSelect=!0,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:e.pspCurrencies};var c=n.get();e.pendingDepositMessage=e.translation.pendingDepositMessage.replace("${clientName}",[c.firstName,c.lastName].join(" "))||"Please contact support";var d=[];function u(e){if(1!==e.status)throw new a({source:"HostedPageController",type:o.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}Array(5).fill(null).reduce((function(e,t,n){var a=Math.ceil(e*o.depositMultipliers[n]);return d.push(a),a}),e.config.visual<=e.config.min?e.config.min:e.config.visual),d.length>0&&(e.config.listAmounts=d),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.onDeposit=function(){l.show();var t={type:"Deposit",amount:e.amount.value,paymentMethod:e.translation[e.method.name]||e.method.name};return r.pendingDeposit(t).then(u).then((function(t){l.hide(),e.modal.textTitle=i.translation.messages.pending,e.modal.isError=!1,e.modal.textContent=e.pendingDepositMessage,e.modal.actionText=i.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0})).catch((function(t){l.hide(),e.showMessage=!0,e.modal.textTitle=i.translation.messages.pending,e.modal.isError=!0,e.modal.textContent=e.pendingDepositMessage,e.modal.actionText=i.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0}))},e.$on("$ionicView.beforeEnter",(function(){e.method.hasOwnProperty("amountRequired")&&!e.method.amountRequired&&(e.showAmountSelect=!1,e.amount.value=1)}))}]),controllers.controller("PersonalDetailsController",["$scope","$state","$ionicModal","$ionicLoading","LocaleService","Validator","UserService","Storage","Utils","API","ErrorService","constants","moment","CountryService","ProfileRulesHelper",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g){o.wait().then((function(t){e.translation=t})),e.constants=u,e.validator=i.getPattern,e.citizenships=p.getCitizenships(),e.editSensitiveDetails=l.toBoolean(r.get("editSensitiveDetails")),e.user=s.get(),e.countries=p.getAllowedUserCountries(e.user.country),e.profileRulesHelper=new g(u.profileFieldRules,"clientArea"),e.allFieldsAreRequired=!u.autoUpdatePersonalDetails,e.minBirth=m().utc().subtract(18,"y").format("YYYY-MM-DD");function v(e){if(1!==e.status)throw new d({source:"PersonalDetailsController",type:u.error.type.VALIDATION,code:e.code||"updateCustomerFailed",severity:"warning",data:{response:e}});return e}e.modal=angular.copy({isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1}),e.search={country:"",citizenship:""},e.personalProfileForm={firstName:e.user.firstName,lastName:e.user.lastName,birthday:e.user.birthday&&m(e.user.birthday).toDate()||"",phone:e.user.phone,country:_.find(e.countries,{code:e.user.country})||"",citizenship:_.find(e.citizenships,{citizenship:e.user.citizenship})||"",address:e.user.address,city:e.user.city,postCode:e.user.postCode},e.personalProfileForm.state=_.find(e.personalProfileForm.country.states,{stateCode:e.user.state}),e.stateName=e.personalProfileForm.state&&e.personalProfileForm.state.stateName||"",e.countryName=e.personalProfileForm.country&&e.personalProfileForm.country.country,e.citizenshipName=e.personalProfileForm.citizenship&&e.personalProfileForm.citizenship.citizenship,e.countriesModal=function(t,a){n.fromTemplateUrl("templates/countries-select.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then((function(n){e.selectType=t,e.countriesList="country"===e.selectType?e.countries:e.citizenships,e.states=e.personalProfileForm.country.states||[],e.countryModal=n,e.countryModal.show(),e.FormController=a}))},e.closeCountryModal=function(){e.countryModal&&e.countryModal.hide(),e.countriesList=null,e.search={country:"",citizenship:""}},e.countryModalConfig={label:"country",id:"country",titleLabel:"select_country",flagLabel:"code"},e.countryModal=!1,e.openCountryModal=function(){e.countryModal=!0},e.setCountry=function(t){e.countryModal=!1,e.personalProfileForm.country=t,t.states.length>0&&(e.countryStates=t.states,e.personalProfileForm.state=t.states[0]),e.personalProfileForm.country=t,e.countryName=t.country,e.personalProfileForm.state="",e.stateName=""},e.countryStateModalConfig={label:"stateName",id:"stateCode",titleLabel:"select_state"},e.countryStateModal=!1,e.openCountryStateModal=function(){e.countryStateModal=!0},e.setCountryState=function(t){e.countryStateModal=!1,e.personalProfileForm.state=t},e.citizenshipModalConfig={label:"citizenship",id:"citizenship",titleLabel:"select_citizenship"},e.citizenshipModal=!1,e.openCitizenshipModal=function(){e.citizenshipModal=!0},e.setCitizenship=function(t){e.citizenshipModal=!1,e.personalProfileForm.citizenship=t},e.closeModal=function(){e.countryModal=!1,e.countryStateModal=!1,e.citizenshipModal=!1,e.taxCountryModal=!1},e.updatePersonalDetails=function(t){if(l.formRevalidate(t,!0),t.$valid){var n={firstName:e.personalProfileForm.firstName,lastName:e.personalProfileForm.lastName,birthday:e.personalProfileForm.birthday&&m(e.personalProfileForm.birthday).format("YYYY-MM-DD")||"",country:e.personalProfileForm.country.code,state:e.personalProfileForm.state&&e.personalProfileForm.state.stateCode||"",city:e.personalProfileForm.city||"",address:e.personalProfileForm.address||"",currency:e.user.currency,postCode:e.personalProfileForm.postCode||"",phone:e.personalProfileForm.phone,citizenship:e.personalProfileForm.citizenship.citizenship||"",usCitizen:0,usTaxId:"",is_pep:e.personalProfileForm.pep||0,tin_absence_reason:e.personalProfileForm.tinAbsenceReason||""};return n.citizenship||e.allFieldsAreRequired||(n.citizenship=(e.citizenships.find((function(e){return e.code===n.country}))||{}).citizenship),a.show(),c.updatePersonalDetails(n).then(v).then((function(){r.load(["withdrawalMethods","localBanks"]),e.user.updatePersonalDetails(n),a.hide(),e.modal.isError=!1,e.modal.isProcess=!1,e.modal.textTitle=o.translation.messages.updateCustomerSuccess,e.modal.back="root.app.menu",e.modal.actionText=o.translation.back,e.modal.state=!0})).catch((function(t){a.hide(),e.modal.isError=!0,e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.general_error,e.modal.textContent="",e.modal.back="root.app.menu",e.modal.actionText=o.translation.try_again,e.modal.state=!0}))}},e.$on("$ionicView.beforeEnter",(function(){if(e.user&&!e.user.tnc&&u.tncPopup)return t.go("tnc",{cache:!1});if(e.user)switch(e.user.registrationState){case u.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case u.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}return s.kycCheck()})),e.$on("$ionicView.afterLeave",(function(t){e.countryModal&&e.countryModal.hide()&&e.countryModal.remove()}))}]),controllers.controller("PersonalProfileController",["$window","$scope","$state","$ionicLoading","$q","$timeout","$ionicModal","$ionicPopup","ionicToast","config","constants","ErrorService","LocaleService","LoginService","API","Utils","LocalStorage","Storage","Validator","UserService","AccountService","ServerTimeService","moment","CountryService","ProfileRulesHelper","Onesignal",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b,y,w,k,C,S,T,x){function A(e){var t=S.countries.get({code:e}),n=t&&t.allowedCurrencies&&t.allowedCurrencies.length&&t.allowedCurrencies,a=[];return n&&n.length&&(a=(h.get("currencies")||[]).filter((function(e){return-1!==n.indexOf(e.currency)}))),!a.length&&t&&(a=(h.get("currencies")||[]).filter((function(e){return e.currency===t.currency}))),a}function $(e){return _.find(t.currencyList,{currency:v.getCurrencyByCountry(e||t.user.country,t.countries,t.currencyList)})||""}log("personal profile controller"),m.wait().then((function(e){t.translation=e,t.lang=m.lang})),t.user=y.get(),t.currencyList=h.get("currencies")||[],t.constants=d,t.useDemoAccounts=h.get("useDemo"),t.pageState=0,t.profileRulesHelper=new T(d.profileFieldRules,"registration"),t.countries=d.profileAllCountries?S.get():S.getAllowedCountries(),t.citizenships=S.getCitizenships(),t.taxCountries=S.get(),t.editSensitiveDetails=v.toBoolean(h.get("editSensitiveDetails")),t.currencyList=A(t.user.country),t.isRegulated=h.get("regulated"),t.isPromo=!0,t.minBirth=C().utc().subtract(18,"y").format("YYYY-MM-DD"),t.defaultProfileForm={firstName:t.user.firstName||"",lastName:t.user.lastName||"",birthday:"",country:_.find(t.countries,{code:t.user.country})||{country:""},state:{stateName:""},citizenship:{citizenship:""},currency:$(),city:"",address:"",postCode:"",phone:t.user.phone,usCitizen:null,usTaxId:"",customerType:"",terms:!1},t.isRegulated&&(t.defaultProfileForm.tin=null,t.defaultProfileForm.taxCountry={country:""},t.defaultProfileForm.nationalId=null,t.defaultProfileForm.companyName=null,t.defaultProfileForm.isMarried=null,t.defaultProfileForm.isSpouse=null,t.defaultProfileForm.birthPlace=null,t.defaultProfileForm.pep=null,t.defaultProfileForm.tinAbsenseReason=null),t.personalProfileForm={customFields:null},t.autoUpdatePersonalDetails=d.autoUpdatePersonalDetails&&t.user.registrationState<d.userState.questionnaire,t.allFieldsAreRequired=!d.autoUpdatePersonalDetails,t.defaultProfileForm.state=_.find(t.defaultProfileForm.country.states,{stateCode:t.user.state}),t.personalProfileForm=angular.copy(t.defaultProfileForm),t.countryStates=t.personalProfileForm.country.states||[],t.countryName=t.defaultProfileForm.country&&t.personalProfileForm.country.country,t.taxCountryName=t.defaultProfileForm.taxCountry&&t.personalProfileForm.taxCountry.country,t.stateName=t.defaultProfileForm.state&&t.defaultProfileForm.state.stateName,t.validator=b.getPattern,t.customerTypes=h.get("customerTypes")||[],t.customerTypes=t.customerTypes.map((function(e){return e.label=m.translation[e.name]||e.name,e}));var P=_.find(S.get(),{code:t.user.country});t.personalProfileForm.birthPlace=P&&P.country||"";var M=_.find(t.customerTypes,{selected:1});function D(e){if(1!==e.status)throw new u({source:"PersonalProfileController",type:d.error.type.VALIDATION,code:e.code.toString()||"updateCustomerFailed",severity:"warning",data:{response:e}});return e}function I(){var e={firstName:t.personalProfileForm.firstName,lastName:t.personalProfileForm.lastName,birthday:t.allFieldsAreRequired&&C(t.personalProfileForm.birthday).format("YYYY-MM-DD")||"",country:t.personalProfileForm.country.code,state:t.personalProfileForm.state&&t.personalProfileForm.state.stateCode||"",city:t.personalProfileForm.city||"",address:t.personalProfileForm.address||"",currency:t.personalProfileForm.currency.currency,postCode:t.personalProfileForm.postCode||"",phone:t.personalProfileForm.phone,citizenship:t.personalProfileForm.citizenship.citizenship||"",usCitizen:0,usTaxId:"",customerType:t.personalProfileForm.customerType&&t.personalProfileForm.customerType.name||""};if(t.isRegulated&&(e.tin=t.personalProfileForm.tin,e.usCitizen=v.fromBoolean(t.personalProfileForm.usCitizen)||0,e.taxCountry=t.personalProfileForm.taxCountry&&t.personalProfileForm.taxCountry.code||"",e.nationalId=t.personalProfileForm.nationalId||"",e.companyName=t.personalProfileForm.companyName||"",e.married=v.fromBoolean(t.personalProfileForm.isMarried)||0,e.spouseAware=v.fromBoolean(t.personalProfileForm.isSpouse)||1,e.birthPlace=t.personalProfileForm.birthPlace||"",e.is_pep=v.fromBoolean(t.personalProfileForm.pep)||0,e.tin_absence_reason=t.personalProfileForm.tinAbsenceReason||"",e.gender=t.personalProfileForm.gender||1),t.profileRulesHelper.isVisible("tradingExperience")&&(e.tradingExperience=v.fromBoolean(t.personalProfileForm.tradingExperience)||0),t.personalProfileForm.customFields&&Object.keys(t.personalProfileForm.customFields).length){var o=t.personalProfileForm.country.customFields,i=Object.keys(t.personalProfileForm.customFields).reduce((function(e,n){var a=_.find(o,{mapTo:n});return a?e[a.field]=t.personalProfileForm.customFields[n]:e[n]=t.personalProfileForm.customFields[n],e}),{});e=Object.assign({},e,i)}return x.setTag("currency",e.currency),a.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:t}),g.personalDetails(e).then(D).then((function(e){return t.personalProfileForm.terms?g.acceptTnc().then((function(){return e})):e})).then((function(o){return function(o){return t.user.updatePersonalDetails(Object.assign({},e,o)),t.user.registrationState=o.registrationState,t.isRegulated&&t.user.registrationState<3?(a.hide(),n.go("signupQuestionnaire",{cache:!1})):w.createAccount(!0).then(v.wait(2e3)).then((function(e){return w.switchAccount(e.mt4Account.login,!0)})).then((function(){return d.demoAccountCreateWithLive&&w.createAccount(!1)})).then((function(){a.hide(),t.autoUpdatePersonalDetails?n.go("root.app.assets",{cache:!1}):n.go("root.app.wallet",{cache:!1})}))}(o)})).catch((function(e){if(a.hide(),"3040"==e.code)throw e;t.modal.isError=!0,t.modal.textTitle=e&&m.translation.messages[e.code]||m.translation.messages.general_error,t.modal.textContent="","3043"!=e.code&&"3044"!=e.code||(t.modal.textTitle=m.translation.messages[3040],t.modal.textContent=e&&m.translation.messages[e.code]||"",t.modal.actionText=m.translation.logout,t.modal.back=function(){return a.show(),p.logout().then((function(){return a.hide(),n.go("welcome",{cache:!1})}))}),t.modal.state=!0}))}M&&(t.personalProfileForm.customerType=M),t.personalProfileForm.currency=t.defaultProfileForm.currency,t.personalProfileForm.terms=t.user.tnc,t.navigate=function(e,t){n.go(e,t)},t.autoUpdatePersonalDetails&&I(),t.modal={actionText:m.translation.try_again,state:!1,isProcess:!1},t.countryModalConfig={label:"country",id:"country",titleLabel:"select_country",flagLabel:"code"},t.taxCountryModal=!1,t.openTaxCountryModal=function(){t.taxCountryModal=!0},t.setTaxCountry=function(e){if(t.taxCountryModal=!1,t.personalProfileForm.taxCountry=e,"US"===e.code)var n=i((function(){t.showUsCitizenPopup(),i.cancel(n)}),500)},t.countryModal=!1,t.openCountryModal=function(){t.countryModal=!0},t.setCountry=function(e){t.countryModal=!1,t.personalProfileForm.country=e,e.states.length>0&&(t.countryStates=e.states,t.personalProfileForm.state=e.states[0]),t.currencyList=A(t.personalProfileForm.country.code),t.personalProfileForm.currency=$(t.personalProfileForm.country.code)},t.countryStateModalConfig={label:"stateName",id:"stateCode",titleLabel:"select_state"},t.countryStateModal=!1,t.openCountryStateModal=function(){t.countryStateModal=!0},t.setCountryState=function(e){t.countryStateModal=!1,t.personalProfileForm.state=e},t.citizenshipModalConfig={label:"citizenship",id:"citizenship",titleLabel:"select_citizenship"},t.citizenshipModal=!1,t.openCitizenshipModal=function(){t.citizenshipModal=!0},t.setCitizenship=function(e){t.citizenshipModal=!1,t.personalProfileForm.citizenship=e},t.closeModal=function(){t.countryModal=!1,t.countryStateModal=!1,t.citizenshipModal=!1,t.taxCountryModal=!1},t.showUsCitizenPopup=function(){var e=r.show({template:t.translation.usCitizenPopupBody,title:'<span class="roboto">'+m.translation.usCitizenPopupTitle+"</span>",scope:t,buttons:[{text:m.translation.no,type:"button-full",onTap:function(n){n.preventDefault(),console.log("reset country and citizen"),t.resetUsCitizen(),e.close()}},{text:m.translation.yes,type:"button-full",onTap:function(t){return t.preventDefault(),e.close(),a.show(),I().catch((function(e){if("3040"==e.code)return p.logout().then((function(){return a.hide(),n.go("welcome",{cache:!1})}));throw e}))}}]})},t.resetUsCitizen=function(){t.taxCountryName="",t.personalProfileForm.taxCountry=null,t.personalProfileForm.usCitizen=null},t.updatePersonalDetails=function(e){if(v.formRevalidate(e,!0),e.$valid){if(t.isRegulated&&d.splitPersonalDetails)switch(t.pageState){case 0:return I();case 1:return o={firstName:t.user.firstName,lastName:t.user.lastName,birthday:t.user.birthday,country:t.user.country,state:t.user.state,city:t.user.city,address:t.user.address,currency:t.user.currency,postCode:t.user.postCode,citizenship:t.user.citizenship,usTaxId:t.user.usTaxId,customerType:t.user.customerType||"",phone:t.user.phone,tin:t.personalProfileForm.tin,usCitizen:v.fromBoolean(t.personalProfileForm.usCitizen)||0,taxCountry:t.personalProfileForm.taxCountry&&t.personalProfileForm.taxCountry.code||"",nationalId:t.personalProfileForm.nationalId||"",companyName:t.personalProfileForm.companyName||"",married:v.fromBoolean(t.personalProfileForm.isMarried)||0,spouseAware:v.fromBoolean(t.personalProfileForm.isSpouse)||1,birthPlace:t.personalProfileForm.birthPlace||"",gender:t.personalProfileForm.gender||1},console.log(o),a.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:t}),g.updatePersonalDetails(o).then(D).then((function(e){return a.hide(),t.user.tin=o.tin,t.user.nationalId=o.nationalId,t.user.birthPlace=o.birthPlace,t.user.taxCountry=o.taxCountry,t.user.gender=o.gender,["FSA","FSCA"].includes(t.user.regulation)?n.go("signupQuestionnaire",{cache:!1}):n.go("root.app.verification-v2",{cache:!1})})).catch((function(e){a.hide(),t.modal.isError=!0,t.modal.textTitle=e&&m.translation.messages[e.code]||m.translation.messages.general_error,t.modal.textContent="",t.modal.state=!0}))}var o;if(!t.isRegulated||0!==t.pageState||t.constants.disablePersonalDetailsStep2)return I();t.pageState=1}},t.switchDemoAccount=function(){var e=v.getCurrencyByCountry(t.user.country,t.countries,t.currencyList);if(t.user.activeTradingAccount&&!t.user.activeTradingAccount.live)return a.hide(),n.go("root.app.assets");a.show();var o=_.find(t.user.tradingAccounts,{live:!1});return o?w.switchAccount(o.login,!1).then((function(){return a.hide(),n.go("root.app.assets")})).catch((function(e){a.hide(),t.modal.isError=!0,t.modal.textTitle=e&&m.translation.messages[e.code]||m.translation.messages.general_error,t.modal.textContent="",t.modal.state=!0})):w.createAccount(false,e).then((function(e){return w.switchAccount(e.mt4Account.login,false)})).then((function(){return a.hide(),n.go("root.app.assets")})).catch((function(e){a.hide(),t.modal.isError=!0,t.modal.textTitle=e&&m.translation.messages[e.code]||m.translation.messages.general_error,t.modal.textContent="",t.modal.state=!0}))},t.showInfo=function(e){l.show(t.translation[e+"PopoverContent"],"top",!1,15e3,"")},t.$on("$ionicView.afterLeave",(function(e){t.countryModal&&t.countryModal.hide()&&t.countryModal.remove()})),d.splitPersonalDetails&&(3!==t.user.registrationState||t.user.taxCountry.length||(t.pageState=1))}]),controllers.controller("PraxisController",["$scope","$state","$filter","$timeout","$ionicLoading","$q","$sce","LocaleService","config","Validator","Storage","constants","ServerTimeService","Utils","UserService","$cookies","API","ErrorService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h){function b(e){if(1!==e.status)throw new h({source:"PraxisController",type:u.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}function y(e){f.unsubscribe("depositConfirm"),v.get("remarketing")&&v.remove("remarketing")}function w(){e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.user=null}r.wait().then((function(t){e.translation=t})),self.iframeEl=null,e.user=g.get(),e.paymentMethods=d.get("paymentMethods")||[],e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.urlReady=!1,e.lang=r.lang,e.modal={actionText:r.translation.try_again,state:!1},e.iframeLoad=function(){var t,n;if(o.hide(),e.iframeReady=!0,!e.urlReady)return self.iframeEl=angular.element(document).find("iframe")[0],t=self.iframeEl.contentDocument||self.iframeEl.contentWindow.document,n={clearedby:"praxis",lang:e.lang,remarketing:v.get("remarketing")||""},o.show(),f.initializeTransfer(n).then(b).then((function(n){e.urlReady=!0,t.getElementsByTagName("body")[0].appendChild(p.generateForm(n.RedirectURL,n.PostData)),t.getElementById("form3ds").submit(),f.subscribe("depositConfirm",y)})).catch((function(t){return e.iframeLoadFail()}))},e.iframeLoadFail=function(){o.hide(),e.iframeReady=!1,e.iframeUrl=s.trustAsResourceUrl("about:blank"),e.modal.isError=!0,e.modal.textTitle=r.translation.messages.general_error,e.modal.textContent=r.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?r.translation.try_again:r.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0},e.$on("$ionicView.afterLeave",w),e.$on("clear",w)}]),controllers.controller("QrcodeController",["$scope","$state","LocaleService","constants","UserService","ErrorService","ionicToast","Storage","API","$ionicLoading","$cookies",function(e,t,n,a,o,i,s,r,l,c,d){n.wait().then((function(t){e.translation=t})),e.user=o.get(),e.paymentMethods=r.get("paymentMethods")||[],e.showAmountSelect=!0,e.constants=a,e.depositValue=r.get("depositValue"),e.displayCurrency=e.user.currency,e.flagIcon=e.user.currency.toLowerCase(),e.method=t.params.method||"",e.pspCurrencies=e.method.pspCurrencies||[],e.pspCurrency=e.pspCurrencies.length>0?e.pspCurrencies[0]:null,e.config={min:e.depositValue.minimum,max:e.depositValue.maximum,visual:e.depositValue.visual,digits:0,step:50,listAmounts:[],pspCurrencies:e.pspCurrencies},e.cryptoWallet={qrCode:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",address:"N/A",transactionId:"N/A",emv:"N/A"};var u=[];function m(){var o={amount:parseInt(e.amount.value,10),pspCurrency:e.amount.pspCurrency||void 0,pspName:a.paymentMethodsBlueprint[t.params.method.name]||t.params.method.name,remarketing:d.get("remarketing")||""};return c.show(),l.qrcodeDeposit(o).then(p).then((function(t){e.cryptoWallet.qrCode=t.QRCode,e.cryptoWallet.transactionId=t.transactionId,e.cryptoWallet.emv=t.emv||"n/a",c.hide()})).catch((function(t){c.hide(),e.modal.isError=!0,e.modal.textTitle=n.translation.messages.general_error,e.modal.textContent=n.translation.messages.general_error_text,e.modal.actionText=e.paymentMethods.length>1?n.translation.try_again:n.translation.close,e.modal.back=e.paymentMethods.length>1?"root.app.wallet":"root.app.assets",e.modal.state=!0}))}function p(e){if(1!==e.status)throw new i({source:"QrcodeController",type:a.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}Array(5).fill(null).reduce((function(e,t,n){var o=Math.ceil(e*a.depositMultipliers[n]);return u.push(o),o}),e.config.visual<=e.config.min?e.config.min:e.config.visual),u.length>0&&(e.config.listAmounts=u),e.amount={value:e.config.visual,pspCurrency:e.pspCurrency},e.modal={actionText:n.translation.try_again,state:!1},e.copyPixCode=function(){var t=document.getElementById("pix-code");HTMLCollection.prototype.isPrototypeOf(t)&&t.length&&(t=t[0]),t&&(t.select(),t.setSelectionRange(0,e.cryptoWallet.emv.length),document.execCommand("copy"),t.blur(),window.getSelection().removeAllRanges(),console.log("copy"),s.show(e.translation.copiedToCB,"top",!1,5e3,""))},e.getUrl=function(){return m()},e.$on("$ionicView.beforeEnter",(function(){e.method.hasOwnProperty("amountRequired")&&!e.method.amountRequired&&(e.showAmountSelect=!1,e.amount.value=1,m())}))}]),controllers.controller("QuestionnaireController",["$scope","$state","$timeout","$location","$ionicScrollDelegate","ionicToast","$ionicLoading","$ionicPopup","$q","LocaleService","API","AccountService","Storage","Utils","UserService","constants","QuestionModel","ErrorService","LoginService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b){function y(e){if(1!==e.status)throw new h({source:"QuestionnaireController",type:v.error.type.VALIDATION,code:e.code||"updateQuestionnaireFailed",severity:"warning",data:{response:e}});return e}function w(){return b.logout().then((function(){s.hide(),t.go("welcome")})).catch((function(e){s.hide(),t.go("welcome")}))}function k(){var n=!e.scoringRule||!!e.scoringRule.live,a=e.scoringRule?e.scoringRule.defaultLeverage:e.user.leverage,o=e.user.baseCurrency||e.user.currency;return s.show(),u.createAccount(n,o,a).then((function(e){return u.switchAccount(e.mt4Account.login,!!e.mt4Account.live)})).then((function(){return v.demoAccountCreateWithLive&&u.createAccount(!1,o,a)})).then((function(){if(v.autoAdditionalAccounts&&n){var e={live:n,leverage:a,currency:o},t=m.get("tradingPlatforms").filter((function(e){return e!==m.get("defaultTradingPlatform")})).map((function(t){return angular.extend({},e,{tradingPlatform:t})}));return l.all(t.map((function(e){return u.createAccount(e.live,e.currency,e.leverage,e.tradingPlatform)})))}})).then((function(){return s.hide(),t.go(v.defaultRoute||"root.app.assets",{cache:!1})}))}e.translation=c.translation,e.permit={checked:!1},e.formTemplate=[],e.formData={},e.questionGroups=Object.assign([],v.questionGroups),e.currentQuestionGroup="",e.currentQuestionnaireGroup=[],e.control={},e.scoringRules=v.scoringRules||[],e.scoringRule=null,e.modal={actionText:c.translation.try_again,state:!1,isProcess:!1},e.user=g.get(),e.navigate=function(e,n){return log("navigate to ",e),t.go(e,n)},e.modalDialogData={},d.questions().then((function(t){var n,a;e.questionnaire=(n=t.questions,a=t.customerAnswers,n.map((function(e){var t=_.find(a,{questionId:e.id})||{};return e.values=t.answerIds||[],e.other=t.other||"",e}))).map((function(t){return new f(t,e.translation)}))})).then((function(){return e.getQuestionnariesGroup()})),e.isVisible=function(t){return 0===t.parentAnswers.length||e.questionnaire.filter((function(e){return t.parentAnswers.indexOf(Number(e.values.id))>-1})).length>0},e.getQuestionnariesGroup=function(){return e.currentQuestionGroup=e.questionGroups.shift(),e.currentQuestionGroup?(e.currentQuestionnaireGroup=this.questionnaire.filter((function(t){return t.group===e.currentQuestionGroup})),e.currentQuestionnaireGroup.filter((function(e){return!!Object.keys(e.values).length})).length>0?e.getQuestionnariesGroup():void 0):v.kycCheck?e.getCustomerComplianceStatus():e.getCustomerScoring()},e.submit=function(){var t,n=Object.keys(e.control).map((function(t){return{id:t,valid:e.control[t].validate()}})),i=_.find(n,{valid:!1});if(i)return t="question-"+i.id,a.hash(t),o.anchorScroll(!0);var r=function(e){function t(e){return Number(e.id)}return e.map((function(e){return{questionId:e.id,answerIds:Array.isArray(e.values)?e.values.map(t).filter((function(e){return e>0})):e.values?[Number(e.values.id)]:[],answer:e.other}}))}(e.currentQuestionnaireGroup.filter((function(e){return _.find(n,{id:e.id.toString()})})));return s.show(),d.questionnaire({answers:r}).then(y).then((function(){return o.scrollTop(),s.hide(),e.getQuestionnariesGroup()}))},e.getCustomerScoring=function(){return s.show(),d.calcScoring().then(y).then((function(n){if(e.scoringRule=_.find(e.scoringRules,{classification:n.classification}),e.user.classification=n.classification,e.user.updateRisk(),e.scoringRule&&e.scoringRule.showMessage){s.hide();var a=(o=e.scoringRule.messageTranslationKey,i=e.user.firstName+" "+e.user.lastName,(e.translation[o]||"").replace(/\%name\%/,i).replace(/\%firstName\%/,e.user.firstName));return e.showModalScoringResult(e.translation.scoring_title,a)}var o,i;return e.user.registrationState===v.userState.questionnaire?(e.user.classification=n.classification,s.hide(),v.splitPersonalDetails?t.go("root.app.verification-v2"):t.go("root.app.assets")):(e.user.registrationState=v.userState.questionnaire,k().then((function(){if(!v.defaultRoute){var e=v.verificationProvider,n=e&&"internal"!==e?"internal-v2"===e?"root.app.verification-v2":"sumsub"===e?"root.app.verificationSumsub":"":"root.app.uploadDocuments";if(n)return t.go(n,{cache:!1});console.warn("Unknown verification provider")}})))})).catch((function(n){if(s.hide(),e.modal.isError=!0,e.modal.textTitle=n&&c.translation.messages[n.code]||c.translation.messages.general_error,e.modal.textContent="","3045"==n.code||"3046"==n.code){e.modal.textTitle=c.translation.messages[3040];var a=e.user.firstName+" "+e.user.lastName;e.modal.textContent=(e.translation.messages[n.code]||"").replace(/\%name\%/,a).replace(/\%firstName\%/,e.user.firstName),e.modal.actionText=c.translation.logout,e.modal.back=function(){return s.show(),b.logout().then((function(){return s.hide(),t.go("welcome",{cache:!1})}))}}e.modal.state=!0}))},e.getCustomerComplianceStatus=function(){return s.show(),d.calcScoring().then(d.complianceStatus).then(y).then((function(t){e.user.complianceStatus=t.ComplianceStatus,e.user.setComplianceStatus()})).catch((function(t){console.warn("compliance status request failed",t),e.user.complianceStatus="no kyc",e.user.setComplianceStatus()})).then((function(){return k().then((function(){return s.hide(),"approved"===e.user.complianceStatus?t.go("root.app.assets"):t.go("kycCheck",{cache:!1})})).catch((function(t){s.hide(),e.modal.isError=!0,e.modal.textTitle=t&&c.translation.messages[t.code]||c.translation.messages.general_error,e.modal.textContent="",e.modal.state=!0}))}))},e.showModalScoringResult=function(n,a){e.modalDialogData.isOpened=!0,e.modalDialogData.isError=!1,e.modalDialogData.title=n,e.modalDialogData.content=a,e.modalDialogData.cancelTitle=c.translation.i_do_not_accept,e.modalDialogData.okTitle=e.scoringRule.acceptPopup?c.translation.i_accept:c.translation.continue,e.modalDialogData.isCheckbox=v.acceptRiskCheckbox,e.modalDialogData.checkboxText="acceptText",e.modalDialogData.onOk=function(){if(!e.scoringRule.acceptPopup)return e.user.registrationState=v.userState.questionnaire,k();d.acceptRisk({accept:1}).then((function(n){return e.user.classification=n.classification,e.scoringRule=_.find(e.scoringRules,{classification:n.classification}),e.user.updateRisk(),e.user.liveAccountExists?t.go("root.app.assets"):(e.user.registrationState=v.userState.questionnaire,k())}))},e.scoringRule.acceptPopup&&e.scoringRule.buttonsView&&"acceptCancel"===e.scoringRule.buttonsView&&(e.modalDialogData.onCancel=function(){w()})},e.showModalWhenRisksDidNotAccept=function(){e.modalDialogData.isOpened=!0,e.modalDialogData.isError=!0,e.modalDialogData.title=e.translation.warning,e.modalDialogData.content=e.translation.risks_not_accepted,e.modalDialogData.onCancel=!1,e.modalDialogData.okTitle=c.translation.i_understand,e.modalDialogData.onOk=function(){w()}},e.showModalWhenFirstLiveAccountCreated=function(){e.modalDialogData.isOpened=!0,e.modalDialogData.isError=!1,e.modalDialogData.title=e.translation.scoring_title,e.modalDialogData.content=e.translation.thanks_for_registering,e.modalDialogData.onCancel=!1,e.modalDialogData.okTitle=c.translation.continue,e.modalDialogData.onOk=function(){t.go("root.app.uploadDocuments")}}}]),controllers.controller("QuestionnaireMessageController",["$scope","$state","$ionicLoading","$ionicModal","LocaleService","UserService","API","Utils","Storage","constants","ErrorService",function(e,t,n,a,o,i,s,r,l,c,d){e.tnc=!1,e.constants=c,e.lang="en";function u(e){if(1!==e.status)throw new d({source:"TncController",type:c.error.type.VALIDATION,code:e.code.toString()||"updateTncFailed",severity:"warning",data:{response:e}});return e}e.modal=angular.copy({isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1}),o.wait().then((function(t){e.translation=t,e.lang=o.lang})),e.navigate=function(e,n){return t.go(e,n)},e.onNext=function(a){if(r.formRevalidate(a,!0),a.$valid)return n.show(),s.acceptTnc().then(u).then((function(){return i.get().tnc=!0,n.hide(),t.go("root.app.personalDetails",{cache:!1})})).catch((function(t){n.hide(),e.modal.isError=!0,e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.general_error,e.modal.textContent=o.translation.messages.general_error_text,e.modal.actionText=o.translation.try_again,e.modal.state=!0}))}}]),controllers.controller("ReferralActivityController",["$scope","$state","LocaleService","constants","$ionicLoading","UserService","API","Storage","ServerTimeService",function(e,t,n,a,o,i,s,r,l){n.wait().then((function(t){e.translation=t})),e.user=i.get(),e.signedUpFriends=r.get("inviteFriends").filter((function(e){return!e.bonusUsd})),e.qualifiedFriends=r.get("inviteFriends").filter((function(e){return!!e.bonusUsd})),e.totalEarnings=e.qualifiedFriends.reduce((function(e,t){return e+t.bonusUsd}),0),e.clientTimeZone=l.timeZoneOffset>=0?"+"+l.timeZoneOffset.toString():l.timeZoneOffset.toString(),o.hide(),e.activeTab="signed_up"}]),controllers.controller("SignupController",["$window","$scope","$state","$ionicLoading","$q","$timeout","$ionicModal","config","constants","ErrorService","LocaleService","LoginService","API","Utils","LocalStorage","Storage","Validator","Init","UserService","$cookies","AccountService","CountryService","SocialAuthService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b,y,w,k,C){if(d.wait().then((function(e){t.translation=e,t.lang=d.lang})),t.currencyList=v.get("currencies"),t.constants=l,t.countries=l.profileAllCountries?k.get():k.getAllowedCountries(),t.search={},t.template=v.get("template"),t.isPromo=v.get("promocode"),t.promoCodes=v.get("promoCodes").reduce((function(e,t){return e.push({promocode:t}),e}),[]),t.isAcceptPromotions=p.toBoolean(v.get("acceptPromotions")),t.socialAuthService=C,t.signupForm={email:"",password:"",confirmPassword:"",country:""},t.showPassword=!1,v.get("geo")&&v.get("geo").country){var S=k.countries.get({code:v.get("geo").country,allowRegistration:1});S&&(t.signupForm.country=S.code,t.countryName=S.country,t.phoneCode=S.phoneCode)}var T;function x(e){if(1!==e.status)throw new c({source:"SignupController",type:l.error.type.VALIDATION,code:e.code||"registrationFailed",severity:"warning",data:{request:t.signupForm,response:e}});return e}function A(){return decodeURIComponent(y.get("forexAffiliate")||"")||p.getReferralString()||""}function $(e){var o,i=function(e){switch(e){case"long":return function(n){return{firstName:n.firstName,lastName:n.lastName,phone:t.phoneCode.toString()+n.phone.toString(),login:n.email,password:n.password,country:n.country,fingerprint:123,referral:A(),promocode:n.promocode||"",acceptPromotions:p.fromBoolean(n.acceptPromotions),terms:p.fromBoolean(n.terms),termsNonLeverage:p.fromBoolean(n.termsNonLeverage),template:e,language:t.lang||"en"}};case"social":return function(n){return{firstName:n.firstName,lastName:n.lastName,phone:t.phoneCode.toString()+n.phone.toString(),login:n.email,password:n.password,country:n.country,fingerprint:123,referral:A(),promocode:n.promocode||"",acceptPromotions:p.fromBoolean(n.acceptPromotions),terms:p.fromBoolean(n.terms),termsNonLeverage:p.fromBoolean(n.termsNonLeverage),template:e,language:t.lang||"en",provider:n.provider,tokenThirdParty:n.tokenThirdParty}};default:return function(n){return{login:n.email,password:n.password,country:n.country,fingerprint:123,referral:A(),promocode:n.promocode||"",acceptPromotions:p.fromBoolean(n.acceptPromotions),terms:p.fromBoolean(n.terms),termsNonLeverage:!1,template:e,language:t.lang||"en"}}}}(t.template)(e);return t.loadingMessage=d.translation.account_registration,a.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:t}),(o=i,e.provider&&e.tokenThirdParty?m.registrationThirdParty(o):m.registration(o)).then(x).then((function(e){return y.remove("forexAffiliate"),e})).then(p.wait(3e3)).then((function(){return e=i,t.loadingMessage=d.translation.logging_in,(e.provider&&e.tokenThirdParty?u.loginThirdParty(e.login,e.provider,e.tokenThirdParty):u.login(e.login,e.password)).then((function(){t.loadingMessage=d.translation.starting})).then(u.initServices).then((function(){h.isInitialized=!0})).then((function(){a.hide();var e=b.get();if(l.autoUpdatePersonalDetails&&e.registrationState<l.userState.questionnaire)return n.go("signupPersonalProfile",{cache:!1});if(l.showPersonal&&"demo"!==t.accountType){if(!e.tnc&&l.tncPopup)return n.go("tnc");if(e.registrationState<=l.userState.personal)return n.go("root.app.personalDetails")}return l.kycCheck&&"demo"===t.accountType?w.createAccount(!1,e.baseCurrency||e.currency,e.leverage).then((function(e){return w.switchAccount(e.mt4Account.login,!!e.mt4Account.live)})).then((function(){return a.hide(),n.go("root.app.assets",{cache:!1})})):n.go("root.app.assets",{cache:!1})})).catch((function(e){return console.warn(e),e===l.loginStatus.noActiveAccount&&console.warn(e),u.logout().then((function(){a.hide(),t.modal.isError=!0,t.modal.textTitle=d.translation.messages[e.code]||d.translation.messages.Err600,t.modal.textContent=d.translation.messages.general_error_text,t.modal.state=!0})).catch((function(e){console.warn(e)}))}));var e})).catch((function(e){a.hide(),t.modal.isError=!0,t.modal.textTitle=e&&d.translation.messages[e.code]||d.translation.messages.general_error,t.modal.textContent="",t.modal.state=!0}))}function P(e){return!(e.terms&&!e.terms.$viewValue)||(e.terms.$setDirty(),void e.terms.$setTouched())}t.promoCodes.length&&(t.signupForm.promocode=t.promoCodes[0].promocode),t.validator=f.getPattern,t.navigate=function(e,t){n.go(e,t)},t.password={checked:!1},t.modal={actionText:d.translation.try_again,state:!1,isProcess:!1,back:"welcome"},t.accountType=p.getURLParameterByName("accountType"),(T=p.getReferralString())&&y.put("forexAffiliate",T,{path:"/"}),t.countriesModal=function(e,n){s.fromTemplateUrl("templates/countries-select.html",{scope:t,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then((function(a){t.selectType=e,t.countriesList="country"===e?t.countries:t.promoCodes,t.countryModal=a,t.countryModal.show(),t.FormController=n}))},t.setCountry=function(e){"country"===t.selectType?(t.signupForm.country=e.code,t.countryName=e.country,t.phoneCode=e.phoneCode,t.FormController.country.$setDirty()):"promocode"===t.selectType&&(t.signupForm.promocode=e.promocode),t.search={},t.countryModal&&t.countryModal.hide()},t.closeCountryModal=function(){t.countryModal&&t.countryModal.hide(),t.countriesList=null},t.doRegistration=function(e){if(p.formRevalidate(e,!0),e.$valid)return $(angular.copy(t.signupForm))},t.signinWithGoogle=function(e){if(P(e))return C.signInWithGoogle().then((function(e){return $({email:e.email,password:"",provider:"google",tokenThirdParty:e.idToken,firstName:e.firstName,lastName:e.lastName,countryCode:"",phone:"",country:"",promocode:t.signupForm.promocode,acceptPromotions:t.signupForm.acceptPromotions,terms:t.signupForm.terms,termsNonLeverage:t.signupForm.termsNonLeverage})}))},t.signinWithFacebook=function(e){if(P(e))return C.signInWithFacebook().then((function(e){return $({email:e.email,password:"",provider:"facebook",tokenThirdParty:e.token,firstName:e.firstName,lastName:e.lastName,countryCode:"",phone:"",country:"",promocode:t.signupForm.promocode,acceptPromotions:t.signupForm.acceptPromotions,terms:t.signupForm.terms,termsNonLeverage:t.signupForm.termsNonLeverage})}))},t.$on("$ionicView.afterLeave",(function(e){t.countryModal&&t.countryModal.hide()&&t.countryModal.remove()}))}]),controllers.controller("Step2RegistrationController",["$scope","$state","$ionicLoading","$q","$timeout","$location","$rootScope","$ionicHistory","$ionicScrollDelegate","$ionicModal","$document","config","constants","ErrorService","API","LocaleService","LoginService","countries","Storage","BlueprintRegistration","UserService","LocalStorage","moment","appsflyer",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b,y,w,k,C,S){v.wait().then((function(t){e.translation=t})),e.constants=m,e.countries=h.countryCode,e.search={},e.validator={alpha:/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/,email:"[a-zA-Z0-9-+_\\@\\.]+",phone:"^[0-9]{1,}$",mix:/^[a-zA-Z0-9]+$/,birthday:/^\d{2}[./-]\d{2}[./-]\d{4}$/,address:"[^\\'\\?\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\_\\+\\=\\{\\}/><\\][\\\\\";|]+",city:"[^[0-9\\]\\'\\?\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\_\\+\\=\\{\\}\\()/><\\][\\\\\";|]+",number:"[a-zA-Z0-9-\\.]+"},e.signupForm={};var T=b.get("registration");T&&(e.signupForm=T,e.countryName=_.find(e.countries,{code:e.signupForm.country}).country,e.nationalityName=e.signupForm.citizenship),e.minBirth=C().utc().subtract(18,"y").format("YYYY-MM-DD"),e.navigate=function(e,n){t.go(e,n)},e.password={checked:!1},e.modal={actionText:v.translation.try_again,state:!1,back:"root.app.assets"},e.birthCountry=function(t){if(e.signupForm.isBirthCountry){var n=_.find(e.countries,{code:t});n&&(e.signupForm.citizenship=n.nationality,e.nationalityName=n.nationality,e.FormController&&e.FormController.citizenship.$setDirty(),e.signupForm.birthCountry=e.signupForm.country)}},e.goNextPage=function(n,a){a&&(!function(e){Object.keys(e).filter((function(e){return!e.match(/^\$/)})).forEach((function(t){e[t].$setDirty(),e[t].$validate()}))}(a),o((function(){var a=d[0].getElementById("createAccount").getElementsByClassName("has-error")[0];if(a)return i.hash(a.id),l.anchorScroll();b.set("registration",angular.copy(e.signupForm)),t.go(n,{cache:!1})}),0))},e.scrollTo=function(e,t){if("android"===b.get("platform"))return o((function(){return i.hash(t),l.anchorScroll()}),500)},e.countriesModal=function(t,n){c.fromTemplateUrl("templates/countries-select.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then((function(a){e.selectType=t,e.countryModal=a,e.countryModal.show(),e.FormController=n}))},e.setCountry=function(t){"country"===e.selectType&&(e.signupForm.country=t.code,e.countryName=t.country,e.FormController.country.$setDirty()),"nationality"===e.selectType&&(e.signupForm.citizenship=t.nationality,e.nationalityName=t.nationality,e.FormController.citizenship.$setDirty()),e.search={},e.countryModal.hide()},e.closeCountryModal=function(){e.countryModal&&e.countryModal.hide()},e.$on("registration",(function(a,o){var i=w.get();if(!o)return;var l=angular.merge(y.create("long")(b.get("registration")),o);e.loadingMessage=v.translation.updateCustomer,n.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),g.updateCustomer({params:l}).then((function(e){if("1"!=e.Code)throw new p({source:"Step2RegistrationController",type:m.error.type.VALIDATION,code:e.Description||"registrationFailed",severity:"warning",data:{request:l,response:e}});return e})).then((function(e){return b.remove("registration"),e})).then((function(t){return e.loadingMessage=v.translation.logging_in,g.getCustomerData().then((function(e){return S.trackEvent("finish_registration",{user:e.data.Email}),i.onLogin(e),{login:t.MT4Login,source:t.isReal?m.system.loginSources[1].id:m.system.loginSources[0].id}}))})).then((function(e){return f.mt4Login(e.login,e.source).then(f.mt4ClearServices).then(f.mt4InitServices).then((function(){return e}))})).then((function(e){k.set("activeAccount",JSON.stringify({login:e.login,source:e.source})),s.$broadcast("init"),r.clearHistory(),n.hide(),t.go("root.app.assets",{cache:!1})})).catch((function(t){n.hide(),e.modal.isError=!0,e.modal.isProcess=!1,e.modal.textTitle=t&&v.translation.messages[t.code]||v.translation.messages.Err600,e.modal.textContent=t.code&&t.code.match(/^Err6\d\d$/)?v.translation.messages.general_error_text:"",e.modal.state=!0}))})),e.$on("$ionicView.afterLeave",(function(t){e.countryModal&&e.countryModal.hide()&&e.countryModal.remove()}))}]),controllers.controller("TncController",["$scope","$state","$ionicLoading","$ionicModal","LocaleService","UserService","API","Utils","Storage","constants","ErrorService",function(e,t,n,a,o,i,s,r,l,c,d){e.tnc=!1,e.constants=c,e.lang="en";function u(e){if(1!==e.status)throw new d({source:"TncController",type:c.error.type.VALIDATION,code:e.code.toString()||"updateTncFailed",severity:"warning",data:{response:e}});return e}e.modal=angular.copy({isError:!1,textTitle:"",textContent:"",state:!1,isProcess:!1}),o.wait().then((function(t){e.translation=t,e.lang=o.lang})),e.navigate=function(e,n){return t.go(e,n)},e.onNext=function(a){if(r.formRevalidate(a,!0),a.$valid)return n.show(),s.acceptTnc().then(u).then((function(){return i.get().tnc=!0,n.hide(),t.go("root.app.assets",{cache:!1})})).catch((function(t){n.hide(),e.modal.isError=!0,e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.general_error,e.modal.textContent=o.translation.messages.general_error_text,e.modal.actionText=o.translation.try_again,e.modal.state=!0}))}}]),controllers.controller("TransactionHistoryController",["$scope","$state","$filter","$ionicModal","$ionicLoading","$timeout","$ionicPopup","config","constants","Utils","API","UserService","LocaleService","TransactionHistoryService","ServerTimeService","UserControl",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v){function f(){return e.loadingMessage=m.translation.loading_transactions,o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),p.getTransactions().then(o.hide).then(h)}function h(){e.transactions=[];if(!p.collection)return e.transactions;e.transactions=p.collection.find({live:!0}).filter((function(t){if("all"===e.filter.period.id)return t;var n=c.setTimeRange(e.filter.period.id);return t.requestDate>=1e3*n.Start&&t.requestDate<=1e3*n.End})).filter((function(t){switch(e.filter.transactionType.id){case"all":return t;case"credit":return t.type.match(/^credit/i);default:return t.type===e.filter.transactionType.id}})).filter((function(t){return"all"===e.filter.tradingAccount.id?t:t.login.toString()===e.filter.tradingAccount.id}))}m.wait().then((function(t){e.translation=t})),e.transactions=[],e.user=u.get(),e.clientTimeZone=g.clientTimeZone>=0?"+"+g.clientTimeZone.toString():g.clientTimeZone.toString(),e.periods=[{id:"day",label:m.translation.dateRange.day},{id:"threedays",label:m.translation.dateRange.threedays},{id:"week",label:m.translation.dateRange.week},{id:"month",label:m.translation.dateRange.month},{id:"threemonths",label:m.translation.dateRange.threemonths},{id:"all",label:m.translation.dateRange.all}],e.transactionTypes=l.transactionTypes.reduce((function(e,t){return e.push({id:t,label:m.translation.transactionTypes[t]||t}),e}),[]),e.tradingAccounts=e.user.tradingAccounts.filter((function(e){return e.live})).map((function(e){return{id:e.login.toString(),label:"#"+e.login+" BALANCE "+l.currencySymbols[e.currency]+e.balance,currency:e.currency}})).concat({id:"all",label:m.translation.all_accounts,currency:""}),e.filter={period:_.find(e.periods,{id:"all"}),transactionType:_.find(e.transactionTypes,{id:"all"}),tradingAccount:_.find(e.tradingAccounts,{id:"all"})},e.navigate=function(e){t.go(e)},e.constants=l,e.selectedRange="day",e.$on("$ionicView.beforeEnter",(function(){if(e.state=v.getState(),e.state)return t.go(e.state,{cache:!1});if(e.user&&!e.user.tnc&&l.tncPopup)return t.go("tnc",{cache:!1});if(e.user){switch(e.user.registrationState){case l.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case l.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}return u.kycCheck()||f()}return f()})),e.$on("$ionicView.afterLeave",(function(){e.transactions=[]})),e.toggleCategory=function(t){return e.selectedRange=t,e.transactions.length=0,h()},e.showFilter=function(){var t=s.show({template:'<div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.period}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="period" ng-model="filter.period" ng-options="period.label for period in periods"></select></div></div></div><div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.type}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="transactionType" ng-model="filter.transactionType" ng-options="transactionType.label for transactionType in transactionTypes"></select></div></div></div><div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.account}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="tradingAccount" ng-model="filter.tradingAccount" ng-options="tradingAccount.label for tradingAccount in tradingAccounts"></select></div></div></div>',title:'<span class="roboto">'+m.translation.filterBy+"</span>",scope:e,buttons:[{text:m.translation.cancel},{text:m.translation.filter,type:"button-positive",onTap:function(e){e.preventDefault(),h(),t.close()}}]})},e.$on("clear",(function(){log("clear transactionHistory controller"),e.user=null,e.transactions.length=0}))}]),controllers.controller("UpdatePasswordController",["$scope","$ionicHistory","$state","$ionicLoading","config","constants","ErrorService","UserService","LoginService","LocaleService","API","Validator","Utils","UserControl",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p){c.wait().then((function(t){e.translation=t})),e.navigate=function(e){n.go(e)},e.user=r.get(),e.validator=u.getPattern,e.auth={password:""};var g={isError:!1,textTitle:"",textContent:"",state:!1,actionText:c.translation.try_again,back:""};function v(e){if(1!==e.status)throw new s({source:"UpdatePasswordController",type:i.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}e.modal=angular.copy(g),e.changePassword=function(t){if(m.formRevalidate(t),t.$valid){var n={oldPassword:e.auth.oldPassword,newPassword:e.auth.password};return a.show(),d.changePassword(n).then(v).then((function(){a.hide(),e.modal.textTitle=c.translation.messages.password_changed,e.modal.actionText=c.translation.close,e.modal.isError=!1,e.modal.textContent="",e.modal.back="root.app.menu",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=c.translation.messages.err_password_changed,e.modal.isError=!0,e.modal.textContent=c.translation.password_err_changed_text,e.modal.actionText=c.translation.tryAgain,e.modal.state=!0}))}},e.$on("$ionicView.beforeEnter",(function(){if(e.state=p.getState(),e.state)return n.go(e.state,{cache:!1});if(e.user&&!e.user.tnc&&i.tncPopup)return n.go("tnc",{cache:!1});if(e.user){switch(e.user.registrationState){case i.userState.initial:return n.go("signupPersonalProfile",{cache:!1});case i.userState.personal:return n.go("signupQuestionnaire",{cache:!1})}return r.kycCheck()}}))}]),controllers.controller("UploadDocumentsCategoriesController",["$scope","$state","$stateParams","LocaleService","constants",function(e,t,n,a,o){a.wait().then((function(t){e.translation=t})),e.categoryName=n.categoryName,e.categoryVideoLink=n.categoryVideoLink,e.documents=o.documentTypes,e.baseCategories=function(t){return e.documents.filter((function(e){return e.category===t}))}(e.categoryName).map((function(e){return e.baseCategory})).filter((function(e,t,n){return n.indexOf(e)==t}))}]),controllers.controller("UploadDocumentsController",["$scope","$state","LocaleService","constants","$ionicLoading","UserService","UserControl",function(e,t,n,a,o,i,s){n.wait().then((function(t){e.translation=t,e.lang=n.lang})),e.lang=n.lang,e.user=i.get(),e.categories=a.documentCategories,o.hide(),e.navigate=function(n,a){return"document_other"===a.category.name?t.go("root.app.uploadDocumentsOther"):t.go(n,{categoryName:a.category.name,categoryVideoLink:a.category.videoLinks&&(a.category.videoLinks[e.lang]||a.category.videoLinks.en)})},e.$on("$ionicView.beforeEnter",(function(){if(e.state=s.getState(),e.state)return t.go(e.state,{cache:!1});if(e.user&&!e.user.tnc&&a.tncPopup)return t.go("tnc",{cache:!1});if(e.user)switch(e.user.registrationState){case a.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case a.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}}))}]),controllers.controller("UploadDocumentsFilesController",["$scope","$q","$state","$stateParams","LocaleService","constants","DocumentService",function(e,t,n,a,o,i,s){var r;o.wait().then((function(t){e.translation=t})),e.constants=i,e.baseCategory=a.baseCategory,e.categoryVideoLink=a.categoryVideoLink,e.documents=s.documents,e.files=(r=e.baseCategory,e.documents.filter((function(e){return e.baseCategory===r}))),e.category=e.files[0].category;var l={isError:!1,textTitle:"",textContent:"",state:!1,actionText:o.translation.try_again,back:""};e.modal=angular.copy(l),e.uploadFile=function(t){var n,a,s=t.target.files[0],r=t.target.attributes["file-id"].value,l="",c=e.files.filter((function(e){return e.type===r})).shift();if(c.uploadStatus=0,s)return a=s.type,i.fileTypes.filter((function(e){return e===a})).length>0?(n=s.size)>=i.minFileSize&&n<=i.maxFileSize||(c.uploadStatus=-2,l=o.translation.file_is_big_or_small):(c.uploadStatus=-1,l=o.translation.file_incorrect_type),c.uploadStatus<0?(e.modal.textTitle=o.translation.messages.Err600,e.modal.textContent=l,e.modal.isError=!0,void(e.modal.state=!0)):c.startUpload(s).then((function(e){return c.uploadFile(s,e)})).then((function(){c.status="pending"})).catch((function(t){c.status="new",c.uploadStatus=0,console.warn(t),e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.Err600,e.modal.textContent=t&&t.code&&t.code.toString().match(/^Err6\d\d$/)?o.translation.messages.general_error_text:"",e.modal.isError=!0,e.modal.state=!0}))},e.takePhoto=function(e){if(e.uploadStatus=0,console.log(e),navigator.hasOwnProperty("camera")){var n,a=(n=Camera.PictureSourceType.CAMERA,{quality:50,destinationType:Camera.DestinationType.FILE_URI,srcType:n,encodingType:Camera.EncodingType.JPEG,mediaType:Camera.MediaType.PICTURE,allowEdit:!0,correctOrientation:!0});return t((function(e,t){navigator.camera.getPicture((function(t){e(t)}),(function(e){t(e)}),a)})).then((function(t){return e.startUpload({name:"",size:"",type:""})})).then((function(t){return e.uploadFile(file,t)})).then((function(){e.status="pending"})).catch((function(e){console.warn(e)}))}},e.navigate=function(t,a){return n.go(t,{direction:a.direction,categoryName:a.category,categoryVideoLink:e.categoryVideoLink})}}]),controllers.controller("UploadDocumentsOtherController",["$scope","$q","$state","$stateParams","LocaleService","constants","DocumentService","DocumentModel","$ionicPopup",function(e,t,n,a,o,i,s,r,l){o.wait().then((function(t){e.translation=t}));var c={isError:!1,textTitle:"",textContent:"",state:!1,actionText:o.translation.try_again,back:""};e.modal=angular.copy(c),e.files=s.documentsOther,e.documentModel=new r({id:null,type:"other",status:"new",url:"",category:"",baseCategory:""}),e.uploadFile=function(t){var n,a,r=t.target.files[0],l=e.documentModel,c="";if(l.uploadStatus=0,r)return a=r.type,i.fileTypes.filter((function(e){return e===a})).length>0?(n=r.size)>=i.minFileSize&&n<=i.maxFileSize||(l.uploadStatus=-2,c=o.translation.file_is_big_or_small,console.log("file too big or small")):(l.uploadStatus=-1,c=o.translation.file_incorrect_type,console.log("invalid file type")),l.uploadStatus<0?(e.modal.textTitle=o.translation.messages.Err600,e.modal.textContent=c,e.modal.isError=!0,void(e.modal.state=!0)):l.startUpload(r).then((function(e){return l.uploadFile(r,e)})).then((function(){return l.status="new",l.uploadStatus=0,s.initDocuments().then((function(){e.files=s.documentsOther}))})).catch((function(t){l.status="new",l.uploadStatus=0,console.warn(t),e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.Err600,e.modal.textContent=t&&t.code&&t.code.toString().match(/^Err6\d\d$/)?o.translation.messages.general_error_text:"",e.modal.isError=!0,e.modal.state=!0}))},e.deleteDocument=function(e){l.confirm({title:o.translation.document_remove,template:o.translation.document_confirm_remove}).then((function(t){if(t)return s.deleteDocument(e).catch((function(e){console.error(e)}))}))}}]),controllers.controller("VerificationSumsubController",["$scope","$state","$ionicLoading","LocaleService","constants","ExternalScriptLoader","API","ErrorService",function(e,t,n,a,o,i,s,r){function l(e){if(1!==e.status)throw new r({source:"VerificationSumsubController",type:o.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}a.wait().then((function(t){e.translation=t})),(new i).load("https://api.sumsub.com/idensic/static/sumsub-kyc.js").then((function(){return n.show(),s.initializeVerification({provider:"sumsub"}).then(l).then((function(e){var t,a;n.hide(),t=e.accessToken,a=e.externalUserId,idensic.init("#idensic",{clientId:o.verificationProviderOptions.clientId,accessToken:t,externalUserId:a},(function(e,t){console.log("message:",e,t)}))}))})).catch((function(e){console.warn(e)})),e.$on("$ionicView.beforeEnter",(function(){if(e.user&&!e.user.tnc&&o.tncPopup)return t.go("tnc",{cache:!1});if(e.user)switch(e.user.registrationState){case o.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case o.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}}))}]),controllers.controller("VerificationV2Controller",["$scope","$state","$ionicLoading","$ionicPopup","LocaleService","constants","API","ErrorService","VerificationV2Service","UserControl",function(e,t,n,a,o,i,s,r,l,c){o.wait().then((function(t){e.translation=t})),e.constants=i,e.documents=[],e.isApproved=!1,e.myPopup=null;var d={isError:!1,textTitle:"",textContent:"",state:!1,actionText:o.translation.try_again,back:""};e.modal=angular.copy(d),l.init().then((function(){e.documents=l.collection.getAll(),0===e.documents.length&&(e.isApproved=!0)})),e.uploadFile=function(t){var a,s,r=t.target.files[0],l=t.target.attributes["file-id"].value,c=Number(t.target.attributes["file-side"].value),d=_.find(e.documents,{id:l.toString()});if(r&&d)return d.uploadStatus=0,s=r.type,i.fileTypes.filter((function(e){return e===s})).length>0?(a=r.size)>=i.minFileSize&&a<=i.maxFileSize||(d.uploadStatus=-2,message=o.translation.file_is_big_or_small):(d.uploadStatus=-1,message=o.translation.file_incorrect_type),d.uploadStatus<0?(e.modal.textTitle=o.translation.messages.Err600,e.modal.textContent=message,e.modal.isError=!0,void(e.modal.state=!0)):(n.show(),d.startUpload(r,c).then((function(e){return d.uploadFile(r,e)})).then((function(){d.uploaded[c]=!0,d.updateStatus(),d.hasUploaded=!0,d.uploadStatus=0,n.hide(),e.modal.textTitle=o.translation.successful,e.modal.textContent="",e.modal.actionText=o.translation.ok,e.modal.isError=!1,e.modal.state=!0})).catch((function(t){d.status="new",d.uploadStatus=0,console.warn(t),e.modal.textTitle=t&&t.code&&o.translation.messages[t.code]||o.translation.messages.Err600,e.modal.textContent=t&&t.code&&t.code.toString().match(/^Err6\d\d$/)?o.translation.messages.general_error_text:"",e.modal.actionText=o.translation.tryAgain,e.modal.isError=!0,e.modal.state=!0})));console.warn("file is not selected or document is not found")},e.toggleImage=function(e){e.toggleImage(),e.twoSidedToggled=!e.twoSidedToggled},e.showSubtype=function(t){e.selectedDocument=t,e.myPopup=a.show({template:'<div class="row p-0 m-0 verification-subtitles"><div class="col p-0 m-0"><ion-list><ion-radio ng-model="selectedDocument.selectedSubType" ng-value="item" ng-change="selectedDocument.updateImages()" ng-repeat="item in selectedDocument.subTypes"><span class="font-13">{{translation[item.id] || item.title}}</span></ion-radio></ion-list></div></div>',title:e.translation.selectOption,scope:e,buttons:[{text:e.translation.select,type:"button-full",onTap:function(t){t.preventDefault(),e.document=e.selectedDocument,e.myPopup.close()}}]})},e.$on("$ionicView.beforeLeave",(function(){e.myPopup&&e.myPopup.close(),e.myPopup=null})),e.$on("$ionicView.beforeEnter",(function(){if(e.state=c.getState(),e.state)return t.go(e.state,{cache:!1});if(e.user&&!e.user.tnc&&i.tncPopup)return t.go("tnc",{cache:!1});if(e.user)switch(e.user.registrationState){case i.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case i.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}}))}]),controllers.controller("ViewQuestionnaireController",["$scope","$state","$timeout","$location","$ionicScrollDelegate","ionicToast","$ionicLoading","$ionicPopup","LocaleService","API","AccountService","Storage","Utils","UserService","constants","QuestionModel","ErrorService","LoginService","UserControl",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g,v,f,h,b){if(e.translation=l.translation,g.viewQuestionnaireEnable&&u.get("regulated")){var y=p.get();if(y.registrationState===g.userState.questionnaire&&""===y.classification&&y.liveAccountExists)return t.go("questionnaireMessage")}e.permit={checked:!1},e.formTemplate=[],e.formData={},e.questionGroups=Object.assign([],g.questionGroups),e.currentQuestionGroup="",e.currentQuestionnaireGroup=[],e.control={},e.scoringRules=g.scoringRules||[],e.scoringRule=null,e.modal={actionText:l.translation.try_again,state:!1,isProcess:!1},e.user=p.get(),e.navigate=function(e,n){return log("navigate to ",e),t.go(e,n)},e.showQuestionnair=3===e.user.registrationState&&e.user.classification.length>0&&e.user.liveAccountExists,e.modalDialogData={},e.showQuestionnair&&c.questions().then((function(e){if(1!==e.status)throw new f({source:"ViewQuestionnaireComponent",type:g.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e})).then((function(t){e.questionGroups=g.questionGroups.map((function(n){return{group:n,questions:(a=t.questions,o=t.customerAnswers,a.map((function(e){var t=_.find(o,{questionId:e.id})||{};return e.values=t.answerIds||[],e.other=t.other||"",e}))).map((function(t){return new v(t,e.translation)})).filter((function(e){return e.group===n}))};var a,o}))})),e.$on("$ionicView.beforeEnter",(function(){if(e.state=b.getState(),e.state)return t.go(e.state,{cache:!1});if(e.user&&!e.user.tnc&&g.tncPopup)return t.go("tnc",{cache:!1});if(e.user)switch(e.user.registrationState){case g.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case g.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}}))}]),controllers.controller("WalletController",["$window","$scope","$state","$ionicLoading","LocaleService","UserService","constants","UserControl","config","Storage","$timeout","API","Onesignal",function(e,t,n,a,o,i,s,r,l,c,d,u,m){function p(){}a.hide(),o.wait().then((function(e){t.translation=e})),t.modal={actionText:o.translation.try_again,state:!1},t.config=l,t.paymentMethods=c.get("paymentMethods")||[],t.openDepositPage=function(n){switch(m.getTags().then((function(e){e&&(e.hasOwnProperty("deposit")?m.setTag("deposit",Number(e.deposit)+1):m.setTag("deposit",1))})),n.type){case"module":return n.hosted?t.navigate("root.app.hostedpage",{method:n}):t.navigate("root.app."+n.name,{method:n});case"modulepopup":return n.hosted?t.navigate("root.app.hostedpage-popup",{method:n}):t.navigate("root.app."+n.name,{method:n});case"modulewindow":return t.navigate("root.app.hostedpage-window",{method:n});case"qrcode":return t.navigate("root.app.qrcode",{method:n});case"pendingDeposit":return t.navigate("root.app.pendingdeposit",{method:n});case"link":return void e.open(n.url,"_blank","hardwareback=no,location=0,menubar=0,closebuttoncaption=Back,hidden=yes");case"iframe":return n.url.length>0?t.navigate("root.app.external",{method:n}):t.navigate("root.app."+n.name,{method:n})}},t.navigate=function(e,t){n.go(e,t)},t.$on("$ionicView.beforeEnter",(function(){var e=i.get();if(t.state=r.getState(),t.state&&!s.splitPersonalDetails)return n.go(t.state,{cache:!1});if(t.state&&s.splitPersonalDetails&&e.registrationState<3)return n.go(t.state,{cache:!1});if(0===t.paymentMethods.length&&(t.modal.textTitle=o.translation.paymentDetails,t.modal.actionText=o.translation.close,t.modal.isError=!1,t.modal.textContent=o.translation.emptyPspMessage,t.modal.back="root.app.assets",d((function(){t.modal.state=!0}),0)),e){if(e.activeTradingAccount&&!e.activeTradingAccount.live)return t.modal.textTitle=o.translation.depositDemoTitle,t.modal.actionText=o.translation.switchAccountButton,t.modal.isError=!0,t.modal.textContent=o.translation.depositDemoContent,t.modal.back="root.app.manageAccounts",void d((function(){t.modal.state=!0}),0);if(e.activeTradingAccount&&e.activeTradingAccount.live&&e.depositValidationRequired)return t.modal.textTitle=o.translation.depositUnavailableTitle,t.modal.actionText=o.translation.continue,t.modal.isError=!0,t.modal.textContent=o.translation.depositUnavailableContent,t.modal.back=t.sendTicket,void d((function(){t.modal.state=!0}),0)}1===t.paymentMethods.length&&e.activeTradingAccount&&e.activeTradingAccount.live&&t.openDepositPage(t.paymentMethods[0])})),t.sendTicket=function(){return u.createTicket({type:"Deposit or Withdrawal",subject:"Unvalidated client Attempted to make a deposit",description:"Unvalidated client has tried to perform a deposit however was rejected due to its validation status.Validation status can be adjusted from the client detailed view page using the CRM action buttons."}).then((function(){return n.go("root.app.assets")}))},t.walletNav=function(e){if("wiretransfer"===e.name&&"link"===e.type)return window.open(e.url,"_blank","hardwareback=no,location=0,menubar=0,closebuttoncaption=Back,hidden=yes"),!1;n.go("root.app."+e.name)},t.$on("$ionicView.afterLeave",p),t.$on("$ionicView.unloaded",p),t.$on("clear",p)}]),controllers.controller("WelcomeController",["$scope","$state","$ionicNavBarDelegate","config","constants","LocaleService","Utils",function(e,t,n,a,o,i,s){function r(){e.language=a.languages.find((function(e){return e.id===i.lang})),e.translation=i.translation,e.signUpURL=s.createLinkByLang("externalLinks.signUp",i.lang,"externalLinks.signUpDefault")}n.showBar(!1),i.wait().then((function(t){e.translation=t})),e.languages=a.languages,e.demoAccountCreateAfterSignup=o.demoAccountCreateAfterSignup,e.languageSelectorMarginTop=o.languageSelectorMarginTop,e.disableSignUp=o.disableSignup,e.const=o,e.navigateExternalUrl=function(e,t){var n=t?"_system":"_blank";window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(encodeURI(e),n,"location=no,hidden=no,toolbar=yes,fullscreen=yes,closebuttoncaption=Back,closebuttoncolor=#00AFAA,navigationbuttoncolor=#00AFAA"):window.open(encodeURI(e),"_system")},e.authType=o.authType?o.authType:"newforex",r(),e.$watch((function(){return i.lang}),(function(e,t){e&&e!==t&&r()})),e.updateLang=function(t){i.load(t.id).then((function(){e.translation=i.translation,r()}))},e.navigate=function(e,n){t.go(e,n)}}]),controllers.controller("WireTransferController",["$scope","$state","constants","LocaleService","Storage",function(e,t,n,a,o){a.wait().then((function(t){e.translation=t})),e.paymentMethods=o.get("paymentMethods")||[],e.defaultBankDetails=n.wiretransferDetails||{beneficiary_name:"",beneficiary_address:"",beneficiary_bank:"",bank_address:"",beneficiary_account_number:"",beneficiary_iban:"",swift:"",comments:""}}]),controllers.controller("WithdrawController",["$scope","$state","LocaleService","UserService","constants","Storage","config","Utils","$ionicPopover","API",function(e,t,n,a,o,i,s,r,l,c){n.wait().then((function(t){e.translation=t})),e.user=a.get(),e.constants=o,e.formValidator=!1,e.accountConfig={type:"withdraw"},e.withdrawAditionalText=e.constants.withdrawAditionalText||"",e.config={digits:2,step:1,min:50,max:1e5},e.changeStep=s.stepChange,e.accounts=e.user.tradingAccounts.filter((function(e){return e.live})).map((function(t){var n=o.currencySymbols[t.currency],a=t.balance.toFixed(e.user.currencyDigits),s=Math.min(t.freeMargin-t.credit,t.balance);return t.fundsToWithdraw=s>0?s:0,t.description=[t.login,"LIVE",e.translation.balance,n,a].join(" "),t.minWithdrawal=(_.find(i.get("currencies"),{currency:t.currency})||{}).minWithdrawal,t}));var d=e.accounts.filter((function(e){return e.active})).shift();e.withdraw={account:d||e.accounts[0],value:50,fundsToWithdraw:0};var u=e.$watch("withdraw.account",(function(t,n){e.withdraw.account&&c.customerWithdrawalMethods({login:e.withdraw.account.login,source:e.withdraw.account.source},e.user).then((function(t){e.withdraw.account.minWithdrawal=Number(t.data.minWithdrawal);var n=e.withdraw.account&&e.withdraw.account.minWithdrawal||50;e.config.digits=e.withdraw.account&&e.withdraw.account.currencyDigits||2,e.config.step=1,e.config.min=n,e.withdraw.value=n,e.withdraw.fundsToWithdraw=e.withdraw.account?e.withdraw.account.fundsToWithdraw:0})).catch((function(e){console.warn(e)}))}));e.withdraw.value=e.withdraw.account&&e.withdraw.account.minWithdrawal||50,e.withdraw.fundsToWithdraw=e.withdraw.account?e.withdraw.account.fundsToWithdraw:0;var m=e.$watch("withdraw.value",(function(t,n){e.formValidator=t&&t>0&&t<=e.withdraw.account.fundsToWithdraw}));e.paymentTypes=i.get("withdrawalMethods").map((function(t){var n=r.toCamelCase(t);return{id:n,label:e.translation[n]||n.charAt(0).toUpperCase()+n.slice(1)}})),e.selectedModel={},e.selectedModel.selectedPaymentMethod=e.paymentTypes.slice(0,1).pop(),e.submit=function(n){if(n.$valid&&e.withdraw.value>0&&e.withdraw.value<=e.withdraw.fundsToWithdraw){var a="root.app.withdraw-{state}".replace("{state}",e.selectedModel.selectedPaymentMethod.id);return t.go(a,{login:e.withdraw.account.login,amount:e.withdraw.value})}},l.fromTemplateUrl("templates/wallet-menu.html",{scope:e.$new()}).then((function(t){e.popover=t})),e.openPopover=function(t){e.popover.show(t)},e.navigate=function(n,a){e.popover&&e.popover.remove(),t.go(n,a)},e.$on("$ionicView.beforeEnter",(function(){var e=a.get();return o.kycCheck&&"partial kyc - can trade"===e.complianceStatus?t.go("kycCheck",{cache:!1}):a.kycCheck()})),e.$on("$ionicView.beforeLeave",(function(e){u(),m()}))}]),controllers.controller("WithdrawCreditCardController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","ServerTimeService","UserService","$filter",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g){function v(e){if(1!==e.status)throw new r({source:"WithdrawCreditCardController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then((function(t){e.translation=t})),e.user=p.get(),e.validator=c.getPattern,e.minDate=m.time,e.constants=l,e.withdraw={login:n.login,amount:n.amount},e.modal={actionText:i.translation.try_again,state:!1},e.creditCard={holder:e.user.firstName+" "+e.user.lastName},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map((function(t){return{id:t,label:e.translation.withdrawalReason[t]}})),e.reasonModel={},e.reasonModel.selectedReason=null,e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o="";if(e.creditCard.date){var r=g("date")(e.creditCard.date,"MM"),c=g("date")(e.creditCard.date,"yyyy");o="{month} {year}".replace("{month}",parseInt(r,10)).replace("{year}",parseInt(c,10))}var d={login:parseInt(e.withdraw.login,10),amount:parseFloat(e.withdraw.amount),ccNumber:e.creditCard.number||"",ccHolder:e.creditCard.holder,ccCvv:"",ccExpiration:o||"",reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalCreditCard(d).then(v).then((function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0}))}}}]),controllers.controller("WithdrawCryptoWalletController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,m){function p(e){if(1!==e.status)throw new r({source:"WithdrawNetellerController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then((function(t){e.translation=t})),e.validator=c.getPattern,e.user=m.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.walletAddressModel={walletAddress:""},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map((function(t){return{id:t,label:e.translation.withdrawalReason[t]}})),e.reasonModel={},e.reasonModel.selectedReason=null,e.walletTypes=Object.values(l.cryptoWalletTypes||{}).map((function(e){return{id:e,label:e}})),e.selectedModel={},e.selectedModel.selectedWalletType=e.walletTypes.slice(0,1).pop(),e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseFloat(e.withdraw.amount),walletAddress:e.walletAddressModel.walletAddress,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||"",walletType:e.selectedModel.selectedWalletType?e.selectedModel.selectedWalletType.id:"btc"};return a.show(),s.withdrawalCrypto(o).then(p).then((function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0}))}}}]),controllers.controller("WithdrawFasapayController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,m){function p(e){if(1!==e.status)throw new r({source:"WithdrawFasapayController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then((function(t){e.translation=t})),e.validator=c.getPattern,e.user=m.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map((function(t){return{id:t,label:e.translation.withdrawalReason[t]}})),e.accountModel={accountName:null,accountNumber:null},e.reasonModel={},e.reasonModel.selectedReason=null,e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),fasapayAccountName:e.accountModel.accountName,fasapayAccountNumber:e.accountModel.accountNumber,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalFasaPay(o).then(p).then((function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0}))}}}]),controllers.controller("WithdrawHistoryController",["$scope","$state","$filter","$ionicModal","$ionicLoading","$timeout","$ionicPopup","config","constants","Utils","API","UserService","LocaleService","WithdrawHistoryService","ServerTimeService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g){function v(){return e.loadingMessage=m.translation.loading_transactions,o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),p.getWithdrawalRequests().then(o.hide).then(f)}function f(){if(e.transactions=[],!p.collection)return e.transactions;e.transactions=p.collection.find().filter((function(t){if("all"===e.filter.period.id)return t;var n=c.setTimeRange(e.filter.period.id);return t.requestDate>=1e3*n.Start&&t.requestDate<=1e3*n.End})).filter((function(t){return"all"===e.filter.transactionType.id?t:"Canceled"===e.filter.transactionType.id?t.status.toLowerCase().includes("cancelled"):t.status===e.filter.transactionType.id})).filter((function(t){return"all"===e.filter.tradingAccount.id?t:t.login.toString()===e.filter.tradingAccount.id}))}m.wait().then((function(t){e.translation=t})),e.transactions=[],e.constants=l,e.user=u.get(),e.clientTimeZone=g.clientTimeZone>=0?"+"+g.clientTimeZone.toString():g.clientTimeZone.toString(),e.periods=[{id:"day",label:m.translation.dateRange.day},{id:"threedays",label:m.translation.dateRange.threedays},{id:"week",label:m.translation.dateRange.week},{id:"month",label:m.translation.dateRange.month},{id:"threemonths",label:m.translation.dateRange.threemonths},{id:"all",label:m.translation.dateRange.all}],e.transactionTypes=[{id:"pending",label:m.translation.pending},{id:"approved",label:m.translation.approved},{id:"Canceled",label:m.translation.canceled||"Canceled"},{id:"rejected",label:m.translation.rejected},{id:"all",label:m.translation.all}],e.tradingAccounts=e.user.tradingAccounts.filter((function(e){return e.live})).map((function(e){return{id:e.login.toString(),label:"#"+e.login+" LIVE",currency:e.currency}})).concat({id:"all",label:m.translation.all_accounts,currency:""}),e.filter={period:_.find(e.periods,{id:"all"}),transactionType:_.find(e.transactionTypes,{id:"all"}),tradingAccount:_.find(e.tradingAccounts,{id:"all"})},e.modal={actionText:m.translation.try_again,state:!1},e.navigate=function(e){t.go(e)},e.showFilter=function(){var t=s.show({template:'<div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.period}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="period" ng-model="filter.period" ng-options="period.label for period in periods"></select></div></div></div><div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.type}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="transactionType" ng-model="filter.transactionType" ng-options="transactionType.label for transactionType in transactionTypes"></select></div></div></div><div class="row p-0"><div class="col mt-5 mb-5"><div class="form-group as-select"><label class="font-13 roboto">{{::translation.account}}:</label><select class="custom-select no-appearance roboto-medium pl-7 pr-7" name="tradingAccount" ng-model="filter.tradingAccount" ng-options="tradingAccount.label for tradingAccount in tradingAccounts"></select></div></div></div>',title:'<span class="roboto">'+m.translation.filterBy+"</span>",scope:e,buttons:[{text:m.translation.cancel},{text:m.translation.filter,type:"button-positive",onTap:function(e){e.preventDefault(),f(),t.close()}}]})},e.cancelRequest=function(t){s.confirm({title:e.translation.withdrawRequest,template:e.translation.cancelWithdrawal}).then((function(n){n&&(e.loadingMessage="",o.show({template:'<div class="spinner-text">{{loadingMessage}}</div><ion-spinner></ion-spinner>',scope:e}),p.cancelWithdrawalRequest(t.id).then((function(){o.hide(),e.modal.textTitle=m.translation.messages.cancelRequest,e.modal.isError=!1,e.modal.actionText=m.translation.continueTrading,e.modal.textContent=m.translation.withdrawCancelSuccess,e.modal.back="root.app.withdraw",e.modal.state=!0})).catch((function(t){o.hide(),e.modal.textTitle=m.translation.messages.general_error,e.modal.actionText=m.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=m.translation.messages[t.code]||m.translation.withdrawCancelFailed,e.modal.back="root.app.withdraw",e.modal.state=!0})))}))},e.$on("$ionicView.beforeEnter",(function(){if(e.user){switch(e.user.registrationState){case l.userState.initial:return t.go("signupPersonalProfile",{cache:!1});case l.userState.personal:return t.go("signupQuestionnaire",{cache:!1})}return u.kycCheck()||v()}return v()})),e.$on("$ionicView.afterLeave",(function(){e.transactions=[]}))}]),controllers.controller("WithdrawLocalWireTransferController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService","CountryService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p){function g(e){if(1!==e.status)throw new r({source:"WithdrawLocalWireTransferController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then((function(t){e.translation=t})),e.user=m.get(),e.validator=c.getPattern,e.countries=p.get(),e.constants=l,e.withdraw={login:n.login,amount:n.amount},e.modal={actionText:i.translation.try_again,state:!1},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map((function(t){return{id:t,label:e.translation.withdrawalReason[t]}})),e.localBanks=d.get("localBanks").map((function(e,t){return{id:t,label:e}})),e.reasonModel={},e.reasonModel.selectedReason=null,e.predefinedCountryObject=_.find(e.countries,{code:e.user.country}),e.countryName=e.predefinedCountryObject.country,console.log({test:e}),e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),bankName:e.withdraw.bankName.label,bankAccountHolder:e.withdraw.accountHolder,bankAccountNumber:e.withdraw.bankNumber,bankCountry:e.predefinedCountryObject.code,bankCity:e.withdraw.bankCity||"",bankState:e.withdraw.bankState||"",bankAddress:e.withdraw.bankStreet,comment:e.withdraw.comment,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalLocalWireTransfer(o).then(g).then((function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0}))}},e.$on("$ionicView.afterView",(function(t){console.log(e)})),e.$on("$ionicView.afterLeave",(function(t){e.countryModal&&e.countryModal.hide()&&e.countryModal.remove()}))}]),controllers.controller("WithdrawMefeteController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,m){function p(e){if(1!==e.status)throw new r({source:"WithdrawNetellerController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then((function(t){e.translation=t})),e.validator=c.getPattern,e.user=m.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.walletAddressModel={walletAddress:""},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map((function(t){return{id:t,label:e.translation.withdrawalReason[t]}})),e.reasonModel={},e.reasonModel.selectedReason=null,e.selectedModel={},e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseFloat(e.withdraw.amount),walletAddress:e.walletAddressModel.walletAddress,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalMefete(o).then(p).then((function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0}))}}}]),controllers.controller("WithdrawNetellerController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,m){function p(e){if(1!==e.status)throw new r({source:"WithdrawNetellerController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then((function(t){e.translation=t})),e.validator=c.getPattern,e.user=m.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map((function(t){return{id:t,label:e.translation.withdrawalReason[t]}})),e.accountNumberModel={},e.accountNumberModel.accountNumber="",e.reasonModel={},e.reasonModel.selectedReason=null,e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),neteller:e.accountNumberModel.accountNumber,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalNeteller(o).then(p).then((function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0}))}}}]),controllers.controller("WithdrawOtherController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,m){function p(e){if(1!==e.status)throw new r({source:"WithdrawOtherController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then((function(t){e.translation=t})),e.validator=c.getPattern,e.user=m.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.detailsModel={},e.detailsModel.details="",e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),other:e.detailsModel.details};return a.show(),s.withdrawalOther(o).then(p).then((function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0}))}}}]),controllers.controller("WithdrawPaparaController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,m){function p(e){if(1!==e.status)throw new r({source:"WithdrawNetellerController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then((function(t){e.translation=t})),e.validator=c.getPattern,e.user=m.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.walletAddressModel={walletAddress:""},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map((function(t){return{id:t,label:e.translation.withdrawalReason[t]}})),e.reasonModel={},e.reasonModel.selectedReason=null,e.selectedModel={},e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseFloat(e.withdraw.amount),walletAddress:e.walletAddressModel.walletAddress,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalPapara(o).then(p).then((function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0}))}}}]),controllers.controller("WithdrawSkrillController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService",function(e,t,n,a,o,i,s,r,l,c,d,u,m){function p(e){if(1!==e.status)throw new r({source:"WithdrawSkrillController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then((function(t){e.translation=t})),e.validator=c.getPattern,e.user=m.get(),e.constants=l,e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map((function(t){return{id:t,label:e.translation.withdrawalReason[t]}})),e.accountEmail="",e.reasonModel={},e.reasonModel.selectedReason=null,e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),skrill:this.accountEmail,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||""};return a.show(),s.withdrawalSkrill(o).then(p).then((function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0}))}}}]),controllers.controller("WithdrawUnionpayController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService","CountryService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p){function g(e){if(1!==e.status)throw new r({source:"WithdrawUnionpayController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then((function(t){e.translation=t})),e.validator=c.getPattern,e.user=m.get(),e.constants=l,e.countries=p.get(),e.modal={actionText:i.translation.try_again,state:!1},e.withdraw={login:n.login,amount:n.amount},e.unionPayModel={bankName:null,unionpayCardholderName:null,unionpayBankCardNumber:null,unionpayNationalIdCard:null,bankCountry:null,bankCity:null,bankBranch:null,bankCountryCode:null,bankCountryName:null},e.countriesModal=function(t,n){o.fromTemplateUrl("templates/countries-select.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then((function(a){e.selectType=t,e.countriesList=e.countries,e.countryModal=a,e.countryModal.show(),e.FormController=n}))},e.setCountry=function(t){"country"===e.selectType&&(e.unionPayModel.bankCountryName=t.country,e.unionPayModel.bankCountryCode=t.code,e.FormController.bankCountry.$setDirty()),e.search={},e.countryModal.hide()},e.closeCountryModal=function(){e.countryModal&&e.countryModal.hide(),e.countriesList=null},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),bankName:e.unionPayModel.bankName,unionpayCardholderName:e.unionPayModel.unionpayCardholderName,unionpayBankCardNumber:e.unionPayModel.unionpayBankCardNumber,unionpayNationalIdCard:e.unionPayModel.unionpayNationalIdCard,bankCountry:e.unionPayModel.bankCountryCode,bankCity:e.unionPayModel.bankCity,bankBranch:e.unionPayModel.bankBranch};return a.show(),s.withdrawalUnionPay(o).then(g).then((function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.menu",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0}))}},e.$on("$ionicView.afterLeave",(function(t){e.countryModal&&e.countryModal.hide()&&e.countryModal.remove()}))}]),controllers.controller("WithdrawWireTransferController",["$scope","$state","$stateParams","$ionicLoading","$ionicModal","LocaleService","API","ErrorService","constants","Validator","Storage","Utils","UserService","CountryService",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p){function g(e){if(1!==e.status)throw new r({source:"WithdrawWireTransferController",type:l.error.type.VALIDATION,code:e.code,severity:"warning",data:{response:e}});return e}i.wait().then((function(t){e.translation=t})),e.user=m.get(),e.validator=c.getPattern,e.countries=p.get(),e.constants=l,e.withdrawWireTransferBankStateNotRequired=e.constants.withdrawWireTransferBankStateNotRequired,e.withdraw={login:n.login,amount:n.amount},e.modal={actionText:i.translation.try_again,state:!1},e.withdrawalReasonsTypes=d.get("withdrawalReasons").map((function(t){return{id:t,label:e.translation.withdrawalReason[t]}})),e.reasonModel={},e.reasonModel.selectedReason=null,e.countriesModal=function(t,n){o.fromTemplateUrl("templates/countries-select.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then((function(a){e.selectType=t,e.countriesList=e.countries,e.countryModal=a,e.countryModal.show(),e.FormController=n}))},e.setCountry=function(t){"country"===e.selectType&&(e.withdraw.country=t.code,e.countryName=t.country,e.FormController.bankCountry.$setDirty()),e.search={},e.countryModal.hide()},e.closeCountryModal=function(){e.countryModal&&e.countryModal.hide(),e.countriesList=null},e.search={},e.isOtherReason=function(){return!!e.reasonModel.selectedReason&&"otherReason"===e.reasonModel.selectedReason.id},e.submit=function(n){if(u.formRevalidate(n),n.$valid){var o={login:parseInt(e.withdraw.login,10),amount:parseInt(e.withdraw.amount,10),bankName:e.withdraw.bankName,bankAccountHolder:e.withdraw.accountHolder,bankAccountNumber:e.withdraw.bankNumber,swift:e.withdraw.code,bankCountry:e.withdraw.country,bankCity:e.withdraw.bankCity||"",bankState:e.withdraw.bankState||"",bankBranch:e.withdraw.bankBranch||"",bankAddress:e.withdraw.bankStreet,comment:e.withdraw.comment,reason:e.reasonModel.selectedReason.id||"",reasonComment:e.reasonModel.reasonDescription||"",iban:e.withdraw.iban||""};return a.show(),console.log({request:o}),s.withdrawal(o).then(g).then((function(n){if(a.hide(),l.withdrawalComplianceRequired&&"approved"!==e.user.complianceStatus)return t.go("root.app.withdrawCompliance");e.modal.textTitle=i.translation.messages.withdrawSuccess,e.modal.isError=!1,e.modal.textContent="",e.modal.actionText=i.translation.continueTrading,e.modal.back="root.app.withdraw",e.modal.state=!0})).catch((function(t){a.hide(),e.modal.textTitle=i.translation.messages.withdrawalFailed,e.modal.actionText=i.translation.tryAgain,e.modal.isError=!0,e.modal.textContent=i.translation.messages[t.code]||"",e.modal.state=!0}))}},e.$on("$ionicView.afterLeave",(function(t){e.countryModal&&e.countryModal.hide()&&e.countryModal.remove()}))}]),controllers.controller("WithdrawalComplianceController",["$scope","$state","$timeout","$location","$ionicScrollDelegate","ionicToast","$ionicLoading","LocaleService","API","ErrorService","AccountService","Storage","Utils","UserService","constants",function(e,t,n,a,o,i,s,r,l,c,d,u,m,p,g){function v(e){if(1!==e.status)throw new c({source:"DynamicController",type:g.error.type.VALIDATION,code:e.code||"updateCustomerFailed",severity:"warning",data:{response:e}});return e}r.wait().then((function(t){e.translation=t})),e.translation=r.translation,e.permit={checked:!1},e.modal={actionText:r.translation.try_again,state:!1},e.questions=[],e.formData={},e.formTemplate=[],e.quizItems=[],e.navigate=function(e,n){return log("navigate to ",e),t.go(e,n)},l.questions().then(v).then((function(t){var n=Array.isArray(t.customerAnswers)?t.customerAnswers:[];return t.questions.reduce((function(t,a){var o=n.length&&n.find((function(e){return e.questionId===a.id}))||{};return t.push({id:a.id,label:e.translation&&e.translation.quizQuestions[a.id.toString()]||a.id.toString(),allowOther:!!a.free,isMulti:!!a.multi,other:o.other||void 0,otherShown:!!o.other,formModelName:"question"+a.id,answers:a.answers.reduce((function(t,n){return t[n.toString()]={label:e.translation&&e.translation.quizAnswers[n.toString()]||n.toString(),slaveTo:-1!==(o.answerIds||[]).indexOf(n),isOn:!0},t}),{})}),t}),[])})).then((function(t){e.quizItems=t,e.formTemplate.push({type:"titleseparator",label:e.translation.withdrawalInformation,labelclass:"separator-title",mainclass:"title"}),t.map((function(t){Object.keys(t.answers).length&&(!e.formData[t.formModelName]&&(e.formData[t.formModelName]={}),Object.keys(t.answers).forEach((function(n){t.answers[n].slaveTo&&(e.formData[t.formModelName][n]=!0)}))),t.isMulti?e.formTemplate.push({type:"checklist",label:t.label,labelclass:"question-title text-center",labelid:t.formModelName,class:"'form-select no-appearance checklist'",model:t.formModelName,mainwrapper:"div",mainclass:"tap-checklist",empty:"Select option",val:e.formData[t.formModelName]||null,required:!0,options:t.answers,multiple:t.isMulti}):e.formTemplate.push({type:"select",label:t.label,labelclass:"question-title text-center",labelid:t.formModelName,class:"'form-select no-appearance select'",model:t.formModelName,mainwrapper:"div",mainclass:"tap-select",empty:"Select option",val:Object.keys(e.formData[t.formModelName]).length&&e.formData[t.formModelName]||null,required:!0,options:t.answers}),e.formTemplate.push({type:"validatemessages",mainclass:"font-12 messages",formMessages:t.formModelName,errorMessageClass:"help-block",errorMessages:[{field:"required",text:"Please select one option"}]}),t.allowOther&&(e.formData[t.formModelName+"OtherAllow"]=!!t.other,e.formTemplate.push({type:"checkbox",label:"Other",labelclass:"form-group item-input item-stacked-label p-0",mainclass:"font-12 messages checkbox-wrapper",class:"'checkbox-other'",formMessages:t.formModelName,model:t.formModelName+"OtherAllow",slaveTo:!!t.other}),e.formTemplate.push({type:"text",class:"{'form-select no-appearance': true, 'shown': formData."+t.formModelName+"OtherAllow}",model:t.formModelName+"OtherAnswer",mainwrapper:"div",mainclass:"",placeholder:e.translation.specifyOtherAnswer,val:t.other,minLength:3,required:!0}))}))})),e.validateForm=function(){var t=!1;return!(Object.keys(e.formData).length&&e.quizItems.find((function(n){return!e.formData[n.formModelName+"OtherAllow"]&&e.formData[n.formModelName+"OtherAnswer"]&&e.formData[n.formModelName+"OtherAnswer"].length&&(e.formData[n.formModelName+"OtherAnswer"]=void 0),t=Object.keys(e.formData[n.formModelName]||{}).find((function(t){return e.formData[n.formModelName][t]})),!(!e.formData[n.formModelName+"OtherAllow"]&&t||e.formData[n.formModelName+"OtherAllow"]&&e.formData[n.formModelName+"OtherAnswer"]&&e.formData[n.formModelName+"OtherAnswer"].length>2)})))},e.processForm=function(){return s.show(),l.questionnaire({answers:(e.formData,e.quizItems.reduce((function(t,n){var a;return t.push({questionId:n.id,answerIds:(a=e.formData[n.formModelName],"string"==typeof a?[Number(a)]:Object.keys(a).reduce((function(e,t){return"$$hashKey"!==t&&a[t]&&e.push(Number(t)),e}),[])),answer:e.formData[n.formModelName+"OtherAnswer"]||""}),t}),[]))}).then(v).then((function(){return s.hide(),t.go("root.app.uploadDocuments")})).catch((function(t){s.hide(),e.modal.isError=!0,e.modal.textTitle=t&&r.translation.messages[t.code]||r.translation.messages.general_error,e.modal.textContent="",e.modal.state=!0}))},e.$on("$destroy",(function(){e.formData={},e.formTemplate=[],e.quizItems=[]}))}]),services.service("FacebookAuthProvider",["$q","ExternalScriptLoader",function(e,t){return function(n){var a=this,o=new t,i={scope:"email,public_profile"},s=n.id;function r(){return e((function(e,t){FB.getLoginStatus((function(n){"connected"===n.status&&e(n.authResponse),t("User is not logged in")}))}))}function l(){return e((function(e,t){FB.api("/me?fields=name,email,picture,first_name,last_name",(function(t){var n={provider:"facebook",id:t.id,email:t.email,name:t.name,photoUrl:"https://graph.facebook.com/"+t.id+"/picture?type=normal",firstName:t.first_name,lastName:t.last_name,facebook:t};e(n)}))}))}a.ready=!1,this.init=function(){return o.load("//connect.facebook.net/en_US/sdk.js").then((function(){return new e((function(e,t){FB.init({appId:s,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:"v4.0"}),a.ready=!0,e()}))}))},this.isLoggedIn=function(){return r().then((function(){return!0})).catch((function(e){return!1}))},this.signIn=function(t){return e((function(e,t){FB.login((function(n){n.authResponse?e(n.authResponse):t("Facebook login failed")}),i)})).then((function(e){return l().then((function(t){return t.token=e.accessToken,t}))}))},this.signOut=function(t){return e((function(e,t){FB.logout(e)}))},this.getUser=function(){return e.all([r(),l()]).then((function(e){var t=e[0],n=e[1];return n.token=t.accessToken,n}))}}}]),services.service("GoogleAuthProvider",["$q","ExternalScriptLoader",function(e,t){return function(n){var a=this,o=new t,i=n.id,s=null;a.ready=!1,this.init=function(){return o.load("https://apis.google.com/js/platform.js").then((function(){return e((function(e,t){gapi.load("auth2",(function(){(s=gapi.auth2.init({client_id:i})).then((function(){a.ready=!0,e()})).catch((function(e){a.re=!1,t(e)}))}))}))}))},this.isLoggedIn=function(){return e.resolve().then((function(){return s.isSignedIn.get()}))},this.signIn=function(e){return s.signIn(e).then(a.getUser)},this.signOut=function(e){return e?s.disconnect():s.signOut()},this.getUser=function(){if(!a.isLoggedIn())return e.resolve(null);var t=s.currentUser.get().getBasicProfile(),n=s.currentUser.get().getAuthResponse(!0).access_token,o=s.currentUser.get().getAuthResponse(!0).id_token,i={provider:"google",id:t.getId(),email:t.getEmail(),name:t.getName(),photoUrl:t.getImageUrl(),firstName:t.getGivenName(),lastName:t.getFamilyName(),token:n,idToken:o};return e.resolve(i)}}}]),services.service("SocialAuthService",["$q","config","ExternalScriptLoader","GoogleAuthProvider","FacebookAuthProvider",function(e,t,n,a,o){var i=new Map;return this.init=function(){(function(){var e=[];t.googleProviderId&&e.push({provider:"google",id:t.googleProviderId});t.facebookProviderId&&e.push({provider:"facebook",id:t.facebookProviderId});return e})().forEach((function(e){var t=function(e){switch(e.provider){case"google":return new a(e);case"facebook":return new o(e);default:throw new Error("Auth provider ["+e.provider+"] is not implemented!")}}(e);t.init().then((function(){i.set(e.provider,t)})).catch((function(t){console.warn("Auth provider ["+e.provider+"] initialization error",t)}))}))},this.signInWithGoogle=function(){var e=i.get("google");if(!e)throw new Error("Auth provider [google] is not registered!");return e.signIn()},this.signInWithFacebook=function(){var e=i.get("facebook");if(!e)throw new Error("Auth provider [facebook] is not registered!");return e.signIn()},this.signOut=function(){return e.all(Array.from(i.keys()).map((function(e){return i.get(e).signOut(!0)}))).catch((function(e){console.warn(e)}))},this.isProviderReady=function(e){var t=i.get(e);return t&&t.ready},this}]);
//# sourceMappingURL=app.min.js.map
