const express=require("express"),router=express.Router(),fetch=require("node-fetch");router.get("/test",async(req,res)=>{const url="https://script.google.com/macros/s/AKfycbwpBePFAYnwnBxzG4zhtcrzYtauLDYSVPkaMQp7YAenSO8DaVNG_dItbaCOQZF9W0ti/exec",options={method:"GET"},response=await fetch(url,options).then(res=>res.json()).then(data=>{const cdata=data.data;cdata.forEach(elem=>{console.log(elem.Symbol)})});res.send("done")}),router.get("/",(req,res)=>{var page={fields:{seo:{meta_description:"test",meta_keyword:"test"},title:"test"}};res.render("Markets/markets",{page:page})}),router.get("/markets",(req,res)=>{res.redirect("/markets")}),router.get("/stocks/us-stocks",async(req,res)=>{const url="https://script.google.com/macros/s/AKfycbx-demXMS4gLaI7KkjVN-GPvHoYEnta8j5WuIIkvxpn94oT7dPEH-wObUgFXatkKN4L/exec",options={method:"GET"};let dataStocks=[];const response=await fetch(url,options).then(res=>res.json()).then(data=>{const cdata=data.data;cdata.forEach(elem=>{"US Stocks"==elem.Market&&(dataStocks.push(elem),console.log(elem.Symbol))})}),stocks=dataStocks.map(elem=>`<tr>\n        <th>${elem.PandaAssetName}</th>\n        <th>${elem.Price}</th>\n        <th>${elem.Change}</th>\n        <th>${elem.ChangePct}</th>\n        <th>${elem.Volume}</th>\n        <th>${elem.MarketCAP}</th>\n        </tr>`).join(" ");var page={fields:{seo:{meta_description:"test",meta_keyword:"test"},title:"test"}};res.render("Markets/usStocks",{page:page,stocks:stocks})}),module.exports=router;